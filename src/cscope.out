cscope 15 d:\yapb\addons\yapb\src"               0000430593
	@bot.cpp

15 
	~"bÙ.h
"

17 
CBa£BÙ
 *
	gg_rgpBÙs
[32];

19 
	$¶ay”
Ğ
’tv¬s_t
 *
³v
 ) {

20 
LINK_ENTITY_GAME
 
Ùh”CÏssName
 = 
NULL
;

21 ià(
Ùh”CÏssName
 =ğ
NULL
)

22 
Ùh”CÏssName
 = (
LINK_ENTITY_GAME
)
	`G‘ProcAdd»ss
(
h_Lib¿ry
, "player");

23 ià(
Ùh”CÏssName
 !ğ
NULL
)

24 (*
Ùh”CÏssName
)(
³v
);

25 
	}
}

37 
	$BÙC»©e
(
ediù_t
 *
pPÏy”
, cÚ¡ *
¬g1
, cÚ¡ *
¬g2
, cÚ¡ *
¬g3
, cÚ¡ *
¬g4
, cÚ¡ *
¬g5
)

39 
ediù_t
 *
BÙEÁ
;

40 
c_Çme
[
BOT_NAME_LEN
 + 1];

41 
skl
, 
iP”sÚ®™y
 = -1;

43 ià(
g_iNumWaypošts
 < 1)

45 ià(!
	`FNuÎEÁ
(
pPÏy”
))

46 
	`UTIL_Ho¡Pršt
(
pPÏy”
, 
´št_ûÁ”
, "No Waypoints forhis Map!\n");

48 
	`SERVER_PRINT
(
	`Œ
("No Waypoints forhis Map!\n"));

50 
g_æBÙC»©iÚTime
 = 0.0;

51 
	`CVAR_SET_FLOAT
("yapb_quota", 0);

52 
g_iBÙQuÙa
 = 0;

56 ià(
g_bWaypoštsChªged
)

58 ià(
pPÏy”
)

59 
	`UTIL_Ho¡Pršt
(
pPÏy”
, 
´št_ûÁ”
, "Waypoints changed or‚ot initialized!\n");

61 
	`SERVER_PRINT
("Waypoints changed or‚ot initialized!\n");

63 
g_æBÙC»©iÚTime
 = 0.0;

67 ià(!
	`IsNuÎSŒšg
(
¬g1
))

68 
skl
 = 
	`©oi
(
¬g1
);

70 
skl
 = 
	`RANDOM_LONG
(
g_iMšBÙSkl
, 
g_iMaxBÙSkl
);

72 ià(
skl
 > 100 || skill < 0)

74 ià(
pPÏy”
)

75 
	`UTIL_Ho¡Pršt
(
pPÏy”
, 
´št_ûÁ”
, "Invalid skill value! Using„andom skill...\n");

77 
	`SERVER_PRINT
("Invalid skill value! Using„andom skill...\n");

79 
skl
 = 
	`RANDOM_LONG
(0, 100);

83 ià(!
	`IsNuÎSŒšg
(
¬g5
))

84 
iP”sÚ®™y
 = 
	`©oi
(
¬g5
);

87 ià(
iP”sÚ®™y
 < 0 || iPersonality > 2)

88 
iP”sÚ®™y
 = 
	`RANDOM_LONG
(0, 2);

90 ià(
	`IsNuÎSŒšg
(
¬g4
))

92 ià(
iNumBÙÇmes
 >= 1)

94 
iU£dCouÁ
 = 
iNumBÙÇmes
 - 1;

95 ià(
iU£dCouÁ
 > 31)

96 
iU£dCouÁ
 = 31;

99 
i
 = 
iU£dCouÁ
 - 1; i > 0; i--)

100 
pU£dBÙNames
[
i
] =…UsedBotNames[i - 1];

102 
boŞ
 
bBÙÇmeU£d
 = 
TRUE
;

103 
iCouÁ
 = 0;

105 
STRINGNODE
* 
pTempNode
 = 
NULL
;

108 
bBÙÇmeU£d
)

110 
	`as£¹
(
pBÙNames
 !ğ
NULL
);

113 
iRªd
 = 
	`RANDOM_LONG
(0, 
iNumBÙÇmes
 - 1);

114 
pTempNode
 = 
	`G‘NodeSŒšg
(
pBÙNames
, 
iRªd
);

115 } 
pTempNode
 =ğ
NULL
);

117 ià(
pTempNode
->
pszSŒšg
 =ğ
NULL
)

120 
bBÙÇmeU£d
 = 
FALSE
;

121 
i
 = 0; i < 
iU£dCouÁ
; i++)

123 ià(
pU£dBÙNames
[
i
] =ğ
pTempNode
)

125 
iCouÁ
++;

126 ià(
iCouÁ
 < 
iNumBÙÇmes
 - 1)

127 
bBÙÇmeU£d
 = 
TRUE
;

133 
	`as£¹
(
pTempNode
 !ğ
NULL
);

134 
	`as£¹
(
pTempNode
->
pszSŒšg
 !ğ
NULL
);

136 
pU£dBÙNames
[0] = 
pTempNode
;

138 
	`¡ºıy
(
c_Çme
, 
pTempNode
->
pszSŒšg
, 21);

140 
	`¡rıy
(
c_Çme
, "Bot");

142 
	`¡ºıy
(
c_Çme
, 
¬g4
, 21);

144 ià(
g_bD‘aNames
)

146 
c_fuÎÇme
[
BOT_NAME_LEN
 + 1];

147 
	`¥rštf
(
c_fuÎÇme
,"[POD]%s(%d)", 
c_Çme
, 
skl
);

148 
iP”sÚ®™y
)

150 
PERSONALITY_AGRESSIVE
:

151 
c_fuÎÇme
[2]='*';

153 
PERSONALITY_DEFENSIVE
:

154 
c_fuÎÇme
[2]='0';

156 
BÙEÁ
 = 
g_’gfuncs
.
	`pâC»©eFakeCl›Á
(
c_fuÎÇme
);

158 
BÙEÁ
 = 
g_’gfuncs
.
	`pâC»©eFakeCl›Á
(
c_Çme
);

160 ià(
	`FNuÎEÁ
Ğ
BÙEÁ
 ))

162 
g_æBÙC»©iÚTime
 = 0.0;

166 
šdex
 = 
	`ENTINDEX
(
BÙEÁ
) - 1;

167 
	`as£¹
(
šdex
 >= 0);

168 
	`as£¹
(
šdex
 < 32);

170 
	`as£¹
(
g_rgpBÙs
[
šdex
] =ğ
NULL
);

171 
g_rgpBÙs
[
šdex
] = 
Ãw
 
	`CBa£BÙ
(
BÙEÁ
, 
skl
, 
iP”sÚ®™y
,

172 
	`IsNuÎSŒšg
(
¬g2
è? 5 : 
	`©oi
(arg2),

173 
	`IsNuÎSŒšg
(
¬g3
è? 
	`RANDOM_LONG
(1, 4è: 
	`©oi
(arg3));

175 ià(
g_rgpBÙs
[
šdex
] =ğ
NULL
)

176 
	`T”mš©eOnE¼Ü
("Memory Allocation Error!");

177 
	}
}

180 
	gCBa£BÙ
::
	$CBa£BÙ
(
ediù_t
 *
BÙEÁ
, 
skl
, 
iP”sÚ®™y
, 
iT—m
, 
iCÏss
)

182 
±r
[128];

183 *
šfobufãr
;

184 
ş›ÁIndex
 = 
	`ENTINDEX
(
BÙEÁ
);

186 
	`mem£t
(
this
, 0, (
CBa£BÙ
));

188 
³v
 = 
	`VARS
(
BÙEÁ
);

190 ià(
BÙEÁ
->
pvPriv©eD©a
 !ğ
NULL
)

191 
	`FREE_PRIVATE
(
BÙEÁ
);

192 
BÙEÁ
->
pvPriv©eD©a
 = 
NULL
;

193 
BÙEÁ
->
v
.
äags
 = 0;

196 ià(
g_bIsMMPlugš
)

197 
	`CALL_GAME_ENTITY
(
PLID
, "¶ay”", &
BÙEÁ
->
v
);

199 
	`¶ay”
(
	`VARS
(
BÙEÁ
));

202 
šfobufãr
 = 
	`GET_INFOKEYBUFFER
Ğ
BÙEÁ
 );

204 
	`SET_CLIENT_KEYVALUE
(
ş›ÁIndex
, 
šfobufãr
, "model", "");

205 
	`SET_CLIENT_KEYVALUE
(
ş›ÁIndex
, 
šfobufãr
, "rate", "3500.000000");

206 
	`SET_CLIENT_KEYVALUE
(
ş›ÁIndex
, 
šfobufãr
, "cl_updaterate", "20");

207 
	`SET_CLIENT_KEYVALUE
(
ş›ÁIndex
, 
šfobufãr
, "cl_lw", "1");

208 
	`SET_CLIENT_KEYVALUE
(
ş›ÁIndex
, 
šfobufãr
, "cl_lc", "1");

209 
	`SET_CLIENT_KEYVALUE
(
ş›ÁIndex
, 
šfobufãr
, "tracker", "0");

210 
	`SET_CLIENT_KEYVALUE
(
ş›ÁIndex
, 
šfobufãr
, "cl_dlmax", "128");

211 
	`SET_CLIENT_KEYVALUE
(
ş›ÁIndex
, 
šfobufãr
, "friends", "0");

212 
	`SET_CLIENT_KEYVALUE
(
ş›ÁIndex
, 
šfobufãr
, "dm", "0");

213 ià(
g_bIsV”siÚ16
)

214 
	`SET_CLIENT_KEYVALUE
(
ş›ÁIndex
, 
šfobufãr
, "_vgui_menus", "0");

216 
	`MDLL_Cl›ÁCÚÃù
(
BÙEÁ
, "bÙ", "127.0.0.1", 
±r
);

217 
	`MDLL_Cl›ÁPutInS”v”
(
BÙEÁ
);

220 
m_bNÙS¹ed
 = 
TRUE
;

222 
m_iS¹AùiÚ
 = 
MSG_CS_IDLE
;

223 
m_iAccouÁ
 = 0;

226 
m_iS´ayLogo
 = 
	`RANDOM_LONG
(0, 
g_iNumLogos
);

229 
m_Say‹xtBufãr
.
fCh©D–ay
 = 
	`RANDOM_FLOAT
(4.0, 10.0);

230 
m_Say‹xtBufãr
.
cCh©Probab™y
 = 
	`RANDOM_LONG
(1, 100);

232 
m_bNÙKËd
 = 
FALSE
;

234 
BÙEÁ
->
v
.
id—Í™ch
 = BÙEÁ->v.
v_ªgË
.
x
;

235 
BÙEÁ
->
v
.
id—l_yaw
 = BÙEÁ->v.
v_ªgË
.
y
;

236 
BÙEÁ
->
v
.
yaw_¥“d
 = 0;

237 
BÙEÁ
->
v
.
p™ch_¥“d
 = 0;

239 
m_iSkl
 = 
skl
;

241 
iP”sÚ®™y
)

244 
m_ucP”sÚ®™y
 = 
PERSONALITY_AGRESSIVE
;

245 
m_æBa£Ag»ssiÚLev–
 = 
	`RANDOM_FLOAT
(0.7, 1.0);

246 
m_æBa£F—rLev–
 = 
	`RANDOM_FLOAT
(0.0, 0.4);

249 
m_ucP”sÚ®™y
 = 
PERSONALITY_DEFENSIVE
;

250 
m_æBa£Ag»ssiÚLev–
 = 
	`RANDOM_FLOAT
(0.0, 0.4);

251 
m_æBa£F—rLev–
 = 
	`RANDOM_FLOAT
(0.7, 1.0);

254 
m_ucP”sÚ®™y
 = 
PERSONALITY_NORMAL
;

255 
m_æBa£Ag»ssiÚLev–
 = 
	`RANDOM_FLOAT
(0.5, 0.6);

256 
m_æBa£F—rLev–
 = 
	`RANDOM_FLOAT
(0.5, 0.6);

260 
	`mem£t
(&(
m_rgAmmoInCl
), 0, (m_rgAmmoInClip));

261 
	`mem£t
(&(
m_rgAmmo
), 0, (m_rgAmmo));

262 
m_iCu¼’tW—pÚ
 = 0;

265 
m_æAg»ssiÚLev–
 = 
m_æBa£Ag»ssiÚLev–
;

266 
m_æF—rLev–
 = 
m_æBa£F—rLev–
;

267 
m_æNextEmÙiÚUpd©e
 = 
gpGlob®s
->
time
 + 0.5;

270 
m_iAùMes§geIndex
 = 0;

271 
m_iPushMes§geIndex
 = 0;

274 
m_Wª‹dT—m
 = 
iT—m
;

275 
m_Wª‹dCÏss
 = 
iCÏss
;

277 
	`NewRound
();

278 
	}
}

281 
	gCBa£BÙ
::~
	$CBa£BÙ
()

283 
	`D–‘eS—rchNodes
();

284 
	`Re£tTasks
();

285 
	}
}

291 
	gCBa£BÙ
::
	$NewRound
()

293 
i
;

296 
	`D–‘eS—rchNodes
();

298 
m_vecW±Origš
 = 
g_vecZ”o
;

299 
m_vecDe¡Origš
 = 
g_vecZ”o
;

300 
m_iCu¼W±Index
 = -1;

301 
m_uiCu¼T¿v–FÏgs
 = 0;

302 
m_vecDesœedV–oc™y
 = 
g_vecZ”o
;

303 
m_iP»vGßlIndex
 = -1;

304 
m_iCho£nGßlIndex
 = -1;

305 
m_rgiP»vW±Index
[0] = -1;

306 
m_rgiP»vW±Index
[1] = -1;

307 
m_rgiP»vW±Index
[2] = -1;

308 
m_rgiP»vW±Index
[3] = -1;

309 
m_rgiP»vW±Index
[4] = -1;

310 
m_æW±Time£t
 = 
gpGlob®s
->
time
;

312 
m_ucP”sÚ®™y
)

314 
PERSONALITY_NORMAL
:

315 
m_byP©hTy³
 = 
	`RANDOM_LONG
(1, 2);

318 
PERSONALITY_AGRESSIVE
:

319 
m_byP©hTy³
 = 
	`RANDOM_LONG
(0, 1);

322 
PERSONALITY_DEFENSIVE
:

323 
m_byP©hTy³
 = 2;

328 
m_iS‹s
 = 0;

329 
	`Re£tTasks
();

331 
m_bIsVIP
 = 
FALSE
;

332 
m_bIsL—d”
 = 
FALSE
;

333 
m_æTimeT—mOrd”
 = 0.0;

335 
m_æMšS³ed
 = 260.0;

336 
m_æP»vS³ed
 = 0.0;

337 
m_vecP»vOrigš
 = 
	`VeùÜ
(9999.0, 9999.0, 9999.0);

338 
m_æP»vTime
 = 
gpGlob®s
->
time
;

340 
m_æV›wDi¡ªû
 = 4096.0;

341 
m_æMaxV›wDi¡ªû
 = 4096.0;

343 
m_³ÁPickupI‹m
 = 
NULL
;

344 
m_³ÁI‹mIgnÜe
 = 
NULL
;

345 
m_æI‹mCheckTime
 = 0.0;

347 
m_³ÁShoÙB»akabË
 = 
NULL
;

348 
m_vecB»akabË
 = 
g_vecZ”o
;

349 
m_æTimeDoÜO³n
 = 0.0;

351 
	`Re£tCŞlideS‹
();

353 
m_³ÁEÃmy
 = 
NULL
;

354 
m_³ÁLa¡Viùim
 = 
NULL
;

355 
m_³ÁLa¡EÃmy
 = 
NULL
;

356 
m_vecLa¡EÃmyOrigš
 = 
g_vecZ”o
;

357 
m_³ÁT¿ckšgEdiù
 = 
NULL
;

358 
m_æTimeNextT¿ckšg
 = 0.0;

360 
m_æEÃmyUpd©eTime
 = 0.0;

361 
m_æS“EÃmyTime
 = 0.0;

362 
m_æShoÙAtD—dTime
 = 0.0;

363 
m_æOldComb©Desœe
 = 0.0;

365 
m_³ÁAvoidG»Çde
 = 
NULL
;

366 
m_cAvoidG»Çde
 = 0;

368 
m_iLa¡DamageTy³
 = -1;

370 
m_iVÙeKickIndex
 = 0;

371 
m_iLa¡VÙeKick
 = 0;

372 
m_iVÙeM­
 = 0;

374 
m_vecPos™iÚ
 = 
g_vecZ”o
;

376 
m_æId—lR—ùiÚTime
 = 
BÙSklD–ays
[
m_iSkl
 / 20].
fMšSu½ri£D–ay
;

377 
m_æAùu®R—ùiÚTime
 = 
BÙSklD–ays
[
m_iSkl
 / 20].
fMšSu½ri£D–ay
;

379 
m_³ÁT¬g‘EÁ
 = 
NULL
;

380 
m_æFŞlowWa™Time
 = 0.0;

382 
i
 = 0; i < 
MAX_HOSTAGES
; i++)

383 
m_rgpHo¡ages
[
i
] = 
NULL
;

385 
m_bIsR–ßdšg
 = 
FALSE
;

386 
m_iR–ßdS‹
 = 
RELOAD_NONE
;

387 
m_æR–ßdCheckTime
 = 0.0;

388 
m_æShoÙTime
 = 
gpGlob®s
->
time
;

389 
m_æTimeFœePau£
 = 0.0;

391 
m_æG»ÇdeCheckTime
 = 0.0;

392 
m_bUsšgG»Çde
 = 
FALSE
;

394 
m_æBlšdTime
 = 0.0;

395 
m_æJumpTime
 = 0.0;

397 
m_æSoundUpd©eTime
 = 
gpGlob®s
->
time
;

398 
m_æH—rdSoundTime
 = 0.0;

400 
m_Say‹xtBufãr
.
fTimeNextCh©
 = 
gpGlob®s
->
time
;

401 
m_Say‹xtBufãr
.
iEÁ™yIndex
 = -1;

402 
m_Say‹xtBufãr
.
szSayText
[0] = 0x0;

404 
m_iBuyCouÁ
 = 0;

406 ià(!
m_bNÙKËd
)

408 
	`mem£t
(&
m_rgAmmoInCl
, 0, (m_rgAmmoInClip));

409 
	`mem£t
(&
m_rgAmmo
, 0, (m_rgAmmo));

410 
m_iCu¼’tW—pÚ
 = 0;

413 
m_æNextBuyTime
 = 
gpGlob®s
->
time
 + 
	`RANDOM_FLOAT
(2.0, 2.8);

414 
m_bBuyP’dšg
 = 
FALSE
;

415 
m_æZoomCheckTime
 = 0.0;

416 
m_æInBombZÚeTime
 = 0.0;

418 
m_æSŒaãS‘Time
 = 0.0;

419 
m_ucComb©SŒaãDœ
 = 0;

420 
m_ucFightStyË
 = 0;

421 
m_æLa¡FightStyËCheck
 = 0.0;

423 
m_bCheckW—pÚSw™ch
 = 
TRUE
;

424 
m_bBuyšgFšished
 = 
FALSE
;

426 
m_³ÁRadioEÁ™y
 = 
NULL
;

427 
m_iRadioOrd”
 = 0;

429 
m_æTimeLogoS´ay
 = 
gpGlob®s
->
time
;

430 
m_bDeãndedBomb
 = 
FALSE
;

432 
m_æS·wnTime
 = 
gpGlob®s
->
time
;

433 
m_æLa¡Ch©Time
 = 
gpGlob®s
->
time
;

434 
³v
->
v_ªgË
.
y
 =…ev->
id—l_yaw
;

436 
m_æTimeCampšg
 = 0;

437 
m_iCampDœeùiÚ
 = 0;

438 
m_æNextCampDœTime
 = 0;

439 
m_iCampBu‰Ús
 = 0;

442 
i
 = 0; i < 32; i++)

443 
m_aMes§geQueue
[
i
] = 
MSG_CS_IDLE
;

445 
m_iAùMes§geIndex
 = 0;

446 
m_iPushMes§geIndex
 = 0;

449 
	`PushMes§geQueue
(
MSG_CS_BUY
);

450 
bÙsk_t
 
TempTask
 = {
NULL
,NULL,
TASK_NORMAL
,
TASKPRI_NORMAL
,-1,0.0,
TRUE
};

451 
	`S¹Task
(&
TempTask
);

452 
	}
}

457 
	gCBa£BÙ
::
	$S¹Game
()

460 ià(
m_iS¹AùiÚ
 =ğ
MSG_CS_TEAM_SELECT
)

462 
m_iS¹AùiÚ
 = 
MSG_CS_IDLE
;

464 ià(
m_Wª‹dT—m
 != 1 && m_WantedTeam != 2)

465 
m_Wª‹dT—m
 = 5;

468 
	`FakeCl›ÁCommªd
(
	`ediù
(), "m’u£Ëù %d", 
m_Wª‹dT—m
);

470 ià(
m_iS¹AùiÚ
 =ğ
MSG_CS_CLASS_SELECT
)

472 
m_iS¹AùiÚ
 = 
MSG_CS_IDLE
;

474 ià(
m_Wª‹dCÏss
 < 1 || m_WantedClass > 4)

475 
m_Wª‹dCÏss
 = 
	`RANDOM_LONG
(1, 4);

478 
	`FakeCl›ÁCommªd
(
	`ediù
(), "m’u£Ëù %d", 
m_Wª‹dCÏss
);

481 
m_bNÙS¹ed
 = 0;

483 
	}
}

485 
CBa£BÙ
 *
	gCBa£BÙ
::
	$In¡ªû
(
ediù_t
 *
³Á
)

487 ià(
	`FNuÎEÁ
(
³Á
))

488  
NULL
;

490 
šdex
 = 
	`ENTINDEX
(
³Á
) - 1;

491 ià(
šdex
 < 0 || index >= 32)

492  
NULL
;

494  
g_rgpBÙs
[
šdex
];

495 
	}
}

497 
	$U£rAddBÙ
(cÚ¡ *
skl
, cÚ¡ *
³rsÚ®™y
, cÚ¡ *
‹am
, cÚ¡ *
Çme
, cÚ¡ *
mod–
)

500 
šdex
 = 0;

501 
BÙC»©eTab
[
šdex
].
bN“dsC»©iÚ
 && index < 
gpGlob®s
->
maxCl›Ás
)

502 
šdex
++;

504 ià(
šdex
 >ğ
gpGlob®s
->
maxCl›Ás
)

507 
BÙC»©eTab
[
šdex
].
bN“dsC»©iÚ
 = 
TRUE
;

508 
BÙC»©eTab
[
šdex
].
pC®lšgEÁ
 = 
pHo¡Ediù
;

511 ià(
	`P¬amIsV®id
(
Çme
))

512 
	`¡ºıy
(
BÙC»©eTab
[
šdex
].
Çme
,‚ame, 21);

514 
BÙC»©eTab
[
šdex
].
Çme
[0] = '\0';

516 ià(
	`P¬amIsV®id
(
‹am
))

517 
	`¡ºıy
(
BÙC»©eTab
[
šdex
].
‹am
,eam, 1);

519 
	`¡rıy
(
BÙC»©eTab
[
šdex
].
‹am
, "5");

521 ià(
	`P¬amIsV®id
(
skl
))

522 
	`¡ºıy
(
BÙC»©eTab
[
šdex
].
skl
, skill, 3);

524 
BÙC»©eTab
[
šdex
].
skl
[0] = '\0';

526 ià(
	`P¬amIsV®id
(
³rsÚ®™y
))

527 
	`¡ºıy
(
BÙC»©eTab
[
šdex
].
³rsÚ®™y
,…ersonality, 3);

529 
	`¡rıy
(
BÙC»©eTab
[
šdex
].
³rsÚ®™y
, "-1");

531 ià(
	`P¬amIsV®id
(
mod–
))

532 
	`¡ºıy
(
BÙC»©eTab
[
šdex
].
mod–
, model, 3);

534 
	`¡rıy
(
BÙC»©eTab
[
šdex
].
mod–
, "-1");

536 ià(
g_æBÙC»©iÚTime
 == 0)

537 
g_æBÙC»©iÚTime
 = 
gpGlob®s
->
time
;

538 
	}
}

540 
	$U£rFlS”v”
(
iS–eùiÚ
, 
iP”sÚ®™y
)

542 
šdex
;

544 ià(
iS–eùiÚ
 == 1 || iSelection == 2)

546 
	`CVAR_SET_STRING
("mp_limitteams","0");

547 
	`CVAR_SET_STRING
("mp_autoteambalance","0");

550 
iS–eùiÚ
 = 5;

552 
šdex
 = 0; index < 
gpGlob®s
->
maxCl›Ás
; index++)

554 ià(!
BÙC»©eTab
[
šdex
].
bN“dsC»©iÚ
)

556 
BÙC»©eTab
[
šdex
].
bN“dsC»©iÚ
 = 
TRUE
;

557 
BÙC»©eTab
[
šdex
].
pC®lšgEÁ
 = 
NULL
;

558 
BÙC»©eTab
[
šdex
].
Çme
[0] = '\0';

559 
	`¥rštf
(
BÙC»©eTab
[
šdex
].
‹am
, "%d", 
iS–eùiÚ
);

560 
BÙC»©eTab
[
šdex
].
skl
[0] = '\0';

561 
	`¥rštf
(
BÙC»©eTab
[
šdex
].
³rsÚ®™y
, "%2d", 
iP”sÚ®™y
);

565 ià(
g_æBÙC»©iÚTime
 == 0.0)

566 
g_æBÙC»©iÚTime
 = 
gpGlob®s
->
time
;

567 
	}
}

569 
	$U£rRemoveAÎBÙs
()

571 
šdex
 = 0; index < 
gpGlob®s
->
maxCl›Ás
; index++)

575 
BÙC»©eTab
[
šdex
].
bN“dsC»©iÚ
 = 
FALSE
;

576 
BÙC»©eTab
[
šdex
].
pC®lšgEÁ
 = 
NULL
;

577 
BÙC»©eTab
[
šdex
].
Çme
[0] = '\0';

578 
BÙC»©eTab
[
šdex
].
‹am
[0] = '\0';

579 
BÙC»©eTab
[
šdex
].
skl
[0] = '\0';

581 ià(
g_rgpBÙs
[
šdex
])

582 
	`SERVER_COMMAND
(
	`UTIL_V¬Args
("kick \"%s\"\n", 
	`STRING
(
g_rgpBÙs
[
šdex
]->
³v
->
ÃŠame
)));

585 
	`CVAR_SET_FLOAT
("yapb_quota", 0);

586 
g_iBÙQuÙa
 = 0;

587 
	}
}

589 
	$U£rKlAÎBÙs
()

591 
ediù_t
 *
pPÏy”
;

593 
šd
 = 1; ind <ğ
gpGlob®s
->
maxCl›Ás
; ind++)

595 
pPÏy”
 = 
	`INDEXENT
(
šd
);

598 ià(
pPÏy”
 && !pPÏy”->
ä“
)

601 ià(
pPÏy”
->
v
.
æags
 & (
FL_FAKECLIENT
 | (1<<27))

602 || 
CBa£BÙ
::
	`In¡ªû
(
pPÏy”
è!ğ
NULL
)

604 ià(
	`IsAlive
(
pPÏy”
))

606 
pPÏy”
->
v
.
äags
 += 1;

607 
	`MDLL_Cl›ÁKl
(
pPÏy”
);

612 
	}
}

614 
	$U£rKickRªdomBÙ
()

616 
šdex
 = 0; index < 
gpGlob®s
->
maxCl›Ás
; index++)

618 ià(
g_rgpBÙs
[
šdex
])

621 
	`SERVER_COMMAND
(
	`UTIL_V¬Args
("kick \"%s\"\n", 
	`STRING
(
g_rgpBÙs
[
šdex
]->
³v
->
ÃŠame
)));

625 
	}
}

627 
	$U£rNewroundAÎ
()

629 
ediù_t
 *
pPÏy”
;

631 
šd
 = 1; ind <ğ
gpGlob®s
->
maxCl›Ás
; ind++)

633 
pPÏy”
 = 
	`INDEXENT
(
šd
);

635 ià(
pPÏy”
 && !pPÏy”->
ä“
)

637 ià(
pPÏy”
->
v
.
æags
 & (
FL_CLIENT
 | 
FL_FAKECLIENT
))

639 ià(
	`IsAlive
(
pPÏy”
))

641 
pPÏy”
->
v
.
äags
 += 1;

642 
	`MDLL_Cl›ÁKl
(
pPÏy”
);

647 
	}
}

650 
	$U£rS–eùW—pÚMode
(
iS–eùiÚ
)

652 
rgiW—pÚTab
[7][
NUM_WEAPONS
] = {

668 
iS–eùiÚ
--;

669 
i
 = 0; i < 
NUM_WEAPONS
; i++)

671 
cs_w—pÚ_£Ëù
[
i
].
iT—mSnd¬d
 = 
rgiW—pÚTab
[
iS–eùiÚ
][i];

672 
cs_w—pÚ_£Ëù
[
i
].
iT—mAS
 = 
rgiW—pÚTab
[
iS–eùiÚ
][i];

675 ià(
iS–eùiÚ
 == 0)

677 
	`CVAR_SET_FLOAT
("yapb_jasonmode", 1);

678 
g_bJasÚMode
 = 
TRUE
;

682 
	`CVAR_SET_FLOAT
("yapb_jasonmode", 0);

683 
g_bJasÚMode
 = 
FALSE
;

685 
	}
}

	@bot.h

5 #iâdeà
BOT_H


6 
	#BOT_H


	)

8 #´agm¨
w¬nšg
 (
di§bË
: 4710)

9 #´agm¨
w¬nšg
 (
di§bË
: 4127)

10 #´agm¨
w¬nšg
 (
di§bË
: 4702)

12 
	~"extdÎ.h
"

13 
	~"dÎ­i.h
"

14 
	~"m‘a_­i.h
"

16 
boŞ
 
g_bIsMMPlugš
;

18 
	~"cba£.h
"

20 
	#MAXSTUDIOBONES
 128

	)

22 
C_DLLEXPORT
 
S”v”_G‘BËndšgIÁ”çû
 (
v”siÚ
,

23 
sv_bËndšg_š‹rçû_s
 **
µš‹rçû
,

24 
’gše_¡udio_­i_s
 *
p¡udio
,

25 (*
rÙ©iÚm©rix
)[3][4],

26 (*
bÚ‘¿nsfÜm
)[
MAXSTUDIOBONES
][3][4]);

28 
DLL_FUNCTIONS
 
Ùh”_gFunùiÚTabË
;

32 #ifdeà
_WIN32


34 (
	t__¡dÿÎ
 *
	tGIVEFNPTRSTODLL
)(
	t’gšefuncs_t
 *, 
	tglob®v¬s_t
 *);

35 (
	tFAR
 *
	tGETENTITYAPI
)(
	tDLL_FUNCTIONS
 *, );

36 (
	tFAR
 *
	tGETNEWDLLFUNCTIONS
)(
	tNEW_DLL_FUNCTIONS
 *, *);

37 (*
	tSERVER_GETBLENDINGINTERFACE
)(, 
	tsv_bËndšg_š‹rçû_s
 **, 
	t’gše_¡udio_­i_s
 *, (*
	trÙ©iÚm©rix
)[3][4], (*
	tbÚ‘¿nsfÜm
)[
MAXSTUDIOBONES
][3][4]);

38 
HINSTANCE
 
h_Lib¿ry
;

39 (
	tFAR
 *
	tLINK_ENTITY_GAME
)(
	t’tv¬s_t
 *);

43 #iâdeà
WINAPI


44 
	#WINAPI


	)

47 
	~<dlfú.h
>

48 
	~<uni¡d.h
>

49 
	#G‘ProcAdd»ss
 
dlsym


	)

50 
	#SË•
 
¦“p


	)

51 
	tBOOL
;

52 (*
	tGIVEFNPTRSTODLL
)(
	t’gšefuncs_t
 *, 
	tglob®v¬s_t
 *);

53 (*
	tGETENTITYAPI
)(
	tDLL_FUNCTIONS
 *, );

54 (*
	tGETNEWDLLFUNCTIONS
)(
	tNEW_DLL_FUNCTIONS
 *, *);

55 (*
	tSERVER_GETBLENDINGINTERFACE
)(, 
	tsv_bËndšg_š‹rçû_s
 **, 
	t’gše_¡udio_­i_s
 *, (*
	trÙ©iÚm©rix
)[3][4], (*
	tbÚ‘¿nsfÜm
)[
MAXSTUDIOBONES
][3][4]);

56 *
h_Lib¿ry
;

57 (*
	tLINK_ENTITY_GAME
)(
	t’tv¬s_t
 *);

61 
C_DLLEXPORT
 
WINAPI
 
	`GiveFÅŒsToDÎ
(
’gšefuncs_t
 *
³ngfuncsFromEngše
, 
glob®v¬s_t
 *
pGlob®s
);

63 
	~"bÙ_w—pÚs.h
"

64 
	~"bÙ_glob®s.h
"

65 
	~<as£¹.h
>

66 
	~<ùy³.h
>

67 
	~<lim™s.h
>

68 
	~<æßt.h
>

69 #ifdeà
_WIN32


70 
	~"dœeù.h
"

72 
	~"uni¡d.h
"

73 
	~<sys/¡©.h
>

79 
TASK_NORMAL
,

80 
TASK_PAUSE
,

81 
TASK_MOVETOPOSITION
,

82 
TASK_FOLLOWUSER
,

83 
TASK_WAITFORGO
,

84 
TASK_PICKUPITEM
,

85 
TASK_CAMP
,

86 
TASK_PLANTBOMB
,

87 
TASK_DEFUSEBOMB
,

88 
TASK_ATTACK
,

89 
TASK_ENEMYHUNT
,

90 
TASK_SEEKCOVER
,

91 
TASK_THROWHEGRENADE
,

92 
TASK_THROWFLASHBANG
,

93 
TASK_THROWSMOKEGRENADE
,

94 
TASK_SHOOTBREAKABLE
,

95 
TASK_HIDE
,

96 
TASK_BLINDED
,

97 
TASK_SPRAYLOGO


98 } 
	tsk_t
;

100 
	sbÙsk_s


102 
bÙsk_s
 *
pP»viousTask
;

103 
bÙsk_s
 *
pNextTask
;

104 
sk_t
 
iTask
;

105 
fDesœe
;

106 
iD©a
;

107 
fTime
;

108 
boŞ
 
bCªCÚtšue
;

109 } 
	tbÙsk_t
;

111 
	#BOT_NAME_LEN
 32

112 

	)

116 
PERSONALITY_NORMAL
 = 0,

117 
PERSONALITY_AGRESSIVE
,

118 
PERSONALITY_DEFENSIVE


119 } 
	t³rsÚ®™y_t
;

124 
COLLISION_NOTDECIDED
,

125 
COLLISION_PROBING
,

126 
COLLISION_NOMOVE
,

127 
COLLISION_JUMP
,

128 
COLLISION_DUCK
,

129 
COLLISION_STRAFELEFT
,

130 
COLLISION_STRAFERIGHT
,

131 } 
	tcŞlisiÚ_t
;

133 
	#PROBE_JUMP
 (1 << 0)

134 
	#PROBE_DUCK
 (1 << 1)

135 
	#PROBE_STRAFE
 (1 << 2)

136 

	)

139 
RESPAWN_IDLE
,

140 
RESPAWN_NEED_TO_KICK
,

141 
RESPAWN_NEED_TO_RESPAWN
,

142 
RESPAWN_IS_RESPAWNING
,

143 
RESPAWN_SERVER_KICKED
,

144 } 
	t»¥awn¡©e_t
;

147 
	#MENU_TEAM
 2

	)

148 
	#MENU_TERRORIST
 26

	)

149 
	#MENU_CT
 27

	)

152 
	#MSG_CS_IDLE
 1

	)

153 
	#MSG_CS_TEAM_SELECT
 2

	)

154 
	#MSG_CS_CLASS_SELECT
 3

	)

157 
	#MSG_CS_BUY
 100

	)

159 
	#MSG_CS_RADIO
 200

	)

161 
	#MSG_CS_SAY
 10000

	)

162 
	#MSG_CS_TEAMSAY
 10001

	)

167 
TEAM_TERRORIST
 = 0,

168 
TEAM_CT


169 } 
	t‹am_t
;

172 
	#RADIO_COVERME
 1

	)

173 
	#RADIO_YOUTAKEPOINT
 2

	)

174 
	#RADIO_HOLDPOSITION
 3

	)

175 
	#RADIO_REGROUPTEAM
 4

	)

176 
	#RADIO_FOLLOWME
 5

	)

177 
	#RADIO_TAKINGFIRE
 6

	)

179 
	#RADIO_GOGOGO
 11

	)

180 
	#RADIO_FALLBACK
 12

	)

181 
	#RADIO_STICKTOGETHER
 13

	)

182 
	#RADIO_GETINPOSITION
 14

	)

183 
	#RADIO_STORMTHEFRONT
 15

	)

184 
	#RADIO_REPORTTEAM
 16

	)

186 
	#RADIO_AFFIRMATIVE
 21

	)

187 
	#RADIO_ENEMYSPOTTED
 22

	)

188 
	#RADIO_NEEDBACKUP
 23

	)

189 
	#RADIO_SECTORCLEAR
 24

	)

190 
	#RADIO_IMINPOSITION
 25

	)

191 
	#RADIO_REPORTINGIN
 26

	)

192 
	#RADIO_SHESGONNABLOW
 27

	)

193 
	#RADIO_NEGATIVE
 28

	)

194 
	#RADIO_ENEMYDOWN
 29

	)

197 
	#STATE_SEEINGENEMY
 (1<<0)

198 
	#STATE_HEARINGENEMY
 (1<<1)

199 
	#STATE_PICKUPITEM
 (1<<2)

200 
	#STATE_THROWHEGREN
 (1<<3)

201 
	#STATE_THROWFLASHBANG
 (1<<4)

202 
	#STATE_THROWSMOKEGREN
 (1<<5)

203 
	#STATE_SUSPECTENEMY
 (1<<6)

204 

	)

206 
	#AIM_DEST
 (1<<0)

207 
	#AIM_CAMP
 (1<<1)

208 
	#AIM_PREDICTPATH
 (1<<2)

209 
	#AIM_LASTENEMY
 (1<<3)

210 
	#AIM_ENTITY
 (1<<4)

211 
	#AIM_ENEMY
 (1<<5)

212 
	#AIM_GRENADE
 (1<<6)

213 
	#AIM_OVERRIDE
 (1<<7)

214 

	)

215 
	#LADDER_UP
 1

	)

216 
	#LADDER_DOWN
 2

	)

219 
	#TASKPRI_NORMAL
 35.0

	)

220 
	#TASKPRI_PAUSE
 36.0

	)

221 
	#TASKPRI_CAMP
 37.0

	)

222 
	#TASKPRI_SPRAYLOGO
 38.0

	)

223 
	#TASKPRI_FOLLOWUSER
 39.0

	)

224 
	#TASKPRI_MOVETOPOSITION
 49.0

	)

225 
	#TASKPRI_DEFUSEBOMB
 89.0

	)

226 
	#TASKPRI_PLANTBOMB
 89.0

	)

227 
	#TASKPRI_ATTACK
 90.0

	)

228 
	#TASKPRI_SEEKCOVER
 91.0

	)

229 
	#TASKPRI_HIDE
 92.0

	)

230 
	#TASKPRI_THROWGRENADE
 99.0

	)

231 
	#TASKPRI_BLINDED
 100.0

	)

232 
	#TASKPRI_SHOOTBREAKABLE
 100.0

	)

237 
MENU_NONE
 = 0,

238 
MENU_WAYPOINT_ADD
,

239 
MENU_WAYPOINT_FLAGS
,

240 
MENU_WAYPOINT_MENU
,

241 
MENU_WAYPOINT_MENU2
,

242 
MENU_WAYPOINT_SETRADIUS
,

243 
MENU_PODMAIN
,

244 
MENU_SKILLSELECT
,

245 
MENU_TEAMSELECT
,

246 
MENU_SERVERTEAMSELECT
,

247 
MENU_MODEL_SELECT
,

248 
MENU_PERSONALITYSELECT
,

249 
MENU_SERVERPERSONALITYSELECT
,

250 
MENU_WEAPONMODESELECT
,

251 } 
	tu£rm’u_t
;

256 
PICKUP_NONE
,

257 
PICKUP_WEAPON
,

258 
PICKUP_DROPPED_C4
,

259 
PICKUP_PLANTED_C4
,

260 
PICKUP_HOSTAGE
,

261 
PICKUP_BUTTON
,

262 
PICKUP_SHIELD
,

263 
PICKUP_DEFUSEKIT
,

264 } 
	tpickup_t
;

269 
RELOAD_NONE
 = 0,

270 
RELOAD_PRIMARY
 = 1,

271 
RELOAD_SECONDARY
 = 2,

272 } 
	t»lßd¡©e_t
;

277 
HEAD_VISIBLE
 = (1 << 0),

278 
WAIST_VISIBLE
 = (1 << 1),

279 
CUSTOM_VISIBLE
 = (1 << 2),

282 
	#MAX_HOSTAGES
 8

	)

283 
	#MAX_DAMAGE_VAL
 2040

	)

284 
	#MAX_GOAL_VAL
 2040

	)

285 
	#MAX_KILL_HIST
 16

	)

287 cÚ¡ 
GRENADE_TIMER
 = 1.8;

288 cÚ¡ 
BOMBMAXHEARDISTANCE
 = 2048.0;

291 
	s·thnode


293 
iIndex
;

294 
·thnode
 *
NextNode
;

295 } 
	tPATHNODE
;

298 
	s¡ršgnode


300 *
pszSŒšg
;

301 
¡ršgnode
 *
Next
;

302 } 
	tSTRINGNODE
;

305 
	s»¶ynode


307 
pszKeywÜds
[256];

308 
»¶ynode
 *
pNextR•lyNode
;

309 
cNumR•l›s
;

310 
cLa¡R•ly
;

311 
¡ršgnode
 *
pR•l›s
;

312 } 
	t»¶ynode_t
;

314 
	sbÙ_w—pÚ_£Ëù_s


316 
iId
;

317 cÚ¡ *
w—pÚ_Çme
;

318 cÚ¡ *
mod–_Çme
;

319 
boŞ
 
´im¬y_fœe_hŞd
;

320 
iPriû
;

321 
mš_´im¬y_ammo
;

322 
iT—mSnd¬d
;

323 
iT—mAS
;

324 
iBuyGroup
;

325 
iBuyS–eù
;

326 
iNewBuyS–eùT
;

327 
iNewBuyS–eùCT
;

328 
boŞ
 
bShoÙsThru
;

329 } 
	tbÙ_w—pÚ_£Ëù_t
;

331 
bÙ_w—pÚ_£Ëù_t
 
cs_w—pÚ_£Ëù
[
NUM_WEAPONS
 + 1];

332 
bÙ_w—pÚ_t
 
w—pÚ_defs
[
MAX_WEAPONS
];

334 
	sskld–ay_s


336 
fMšSu½ri£D–ay
;

337 
fMaxSu½ri£D–ay
;

338 
iPau£Prob®™y
;

339 
fBÙCampS¹D–ay
;

340 
fBÙCampEndD–ay
;

341 } 
	tskld–ay_t
;

343 
skld–ay_t
 
BÙSklD–ays
[6];

345 
	sbÙaim_s


347 
fAim_X
;

348 
fAim_Y
;

349 
fAim_Z
;

350 
iH—dShÙ_F»qu’cy
;

351 
iH—rdShoÙThruProb
;

352 
iS“nShoÙThruProb
;

353 } 
	tbÙaim_t
;

356 
	sm’u‹xt_s


358 
V®idSlÙs
;

359 cÚ¡ *
szM’uText
;

360 } 
	tm’u‹xt_t
;

363 
	sth»©_s


365 
boŞ
 
IsU£d
;

366 
boŞ
 
IsAlive
;

367 
ediù_t
 *
pEdiù
;

368 
iT—m
;

369 
VeùÜ
 
vOrigš
;

370 
VeùÜ
 
vecSoundPos™iÚ
;

371 
fH—ršgDi¡ªû
;

372 
fTimeSoundLa¡šg
;

373 } 
	tth»©_t
;

375 
	sh—¹ab_s


377 
ediù_t
 *
pEdiù
;

378 
di¡ªû
;

379 } 
	th—¹ab_t
;

382 
	sex³r›nû_s


384 
uT—m0Damage
;

385 
uT—m1Damage
;

386 sigÃd 
iT—m0_dªg”_šdex
;

387 sigÃd 
iT—m1_dªg”_šdex
;

388 sigÃd 
wT—m0V®ue
;

389 sigÃd 
wT—m1V®ue
;

390 } 
	tex³r›nû_t
;

393 
	sex³r›nû§ve_s


395 
uT—m0Damage
;

396 
uT—m1Damage
;

397 sigÃd 
cT—m0V®ue
;

398 sigÃd 
cT—m1V®ue
;

399 } 
	tex³r›nû§ve_t
;

402 
	sü—‹bÙ_s


404 
boŞ
 
bN“dsC»©iÚ
;

405 
ediù_t
 *
pC®lšgEÁ
;

406 
Çme
[22];

407 
skl
[5];

408 
‹am
[3];

409 
mod–
[3];

410 
³rsÚ®™y
[3];

411 } 
	tü—‹bÙ_t
;

413 
	s§y‹xt_s


415 
cCh©Probab™y
;

416 
fCh©D–ay
;

417 
fTimeNextCh©
;

418 
iEÁ™yIndex
;

419 
szSayText
[512];

420 } 
	t§y‹xt_t
;

423 şas 
	cCBa£BÙ


425 
´iv©e
:

426 
m_iS‹s
;

427 
bÙsk_t
 *
m_pTasks
;

429 
m_æOldComb©Desœe
;

431 
boŞ
 
m_bIsL—d”
;

433 
m_æMoveS³ed
;

434 
m_æSideMoveS³ed
;

435 
m_æMšS³ed
;

436 
boŞ
 
m_bCheckT”¿š
;

438 
m_æP»vTime
;

439 
m_æP»vS³ed
;

440 
VeùÜ
 
m_vecP»vOrigš
;

442 
m_aMes§geQueue
[32];

443 
m_szMiscSŒšgs
[160];

444 
m_iRadioS–eù
;

446 
m_æI‹mCheckTime
;

447 
ediù_t
 *
m_³ÁPickupI‹m
;

448 
ediù_t
 *
m_³ÁI‹mIgnÜe
;

449 
pickup_t
 
m_iPickupTy³
;

451 
ediù_t
 *
m_³ÁShoÙB»akabË
;

452 
VeùÜ
 
m_vecB»akabË
;

454 
m_æTimeDoÜO³n
;

456 
m_æLa¡Ch©Time
;

458 
m_æTimeLogoS´ay
;

459 
boŞ
 
m_bDeãndedBomb
;

461 
m_iLadd”Dœ
;

463 
m_æCŞlideTime
;

464 
m_æFœ¡CŞlideTime
;

465 
m_æProbeTime
;

466 
m_æNoCŞlTime
;

467 
cŞlisiÚ_t
 
m_cCŞlisiÚS‹
;

468 
m_cCŞlisiÚProbeB™s
;

469 
m_rgcCŞlideMoves
[4];

470 
m_cCŞlS‹Index
;

472 
PATHNODE
* 
m_pWaypoštNodes
;

473 
PATHNODE
* 
m_pWayNodesS¹
;

474 
m_byP©hTy³
;

475 
m_iCu¼W±Index
;

476 
m_rgiP»vW±Index
[5];

477 
m_iWPTFÏgs
;

478 
m_uiCu¼T¿v–FÏgs
;

479 
VeùÜ
 
m_vecDesœedV–oc™y
;

480 
m_æW±Time£t
;

482 
m_iAimFÏgs
;

483 
VeùÜ
 
m_vecLookAt
;

484 
VeùÜ
 
m_vecThrow
;

486 
VeùÜ
 
m_vecEÃmy
;

487 
VeùÜ
 
m_vecG»Çde
;

488 
VeùÜ
 
m_vecEÁ™y
;

489 
VeùÜ
 
m_vecCamp
;

491 
m_æTimeWaypoštMove
;

493 
boŞ
 
m_bWªtsToFœe
;

494 
m_æShoÙAtD—dTime
;

495 
ediù_t
 *
m_³ÁAvoidG»Çde
;

496 
m_cAvoidG»Çde
;

498 
VeùÜ
 
m_vecPos™iÚ
;

500 
ediù_t
 *
m_³ÁT¬g‘EÁ
;

501 
m_æFŞlowWa™Time
;

503 
ediù_t
 *
m_rgpHo¡ages
[
MAX_HOSTAGES
];

505 
boŞ
 
m_bIsR–ßdšg
;

506 
m_iR–ßdS‹
;

507 
m_æR–ßdCheckTime
;

509 
m_æZoomCheckTime
;

511 
boŞ
 
m_bCheckW—pÚSw™ch
;

513 
m_æG»ÇdeCheckTime
;

514 
boŞ
 
m_bUsšgG»Çde
;

516 
m_ucComb©SŒaãDœ
;

517 
m_ucFightStyË
;

518 
m_æLa¡FightStyËCheck
;

519 
m_æSŒaãS‘Time
;

521 
m_æSoundUpd©eTime
;

522 
m_æH—rdSoundTime
;

523 
m_æTimeCampšg
;

524 
m_iCampDœeùiÚ
;

525 
m_æNextCampDœTime
;

526 
m_iCampBu‰Ús
;

528 
m_æJumpTime
;

530 
VeùÜ
 
m_vecMoveAngËs
;

531 
boŞ
 
m_bMoveToGßl
;

532 
boŞ
 
m_bCªChoo£
;

534 
	`BÙOnLadd”
();

535 
	`BÙThšk
();

536 
	`BuyStuff
();

537 
boŞ
 
	`IsRe¡riùedByAMX
(
iId
);

538 
boŞ
 
	`CªDuckUnd”
(
VeùÜ
 
vNÜm®
);

539 
boŞ
 
	`CªJumpUp
(
VeùÜ
 
vNÜm®
);

540 
boŞ
 
	`CªSŒaãLeá
(
T¿ûResuÉ
 *
Œ
);

541 
boŞ
 
	`CªSŒaãRight
(
T¿ûResuÉ
 *
Œ
);

542 
boŞ
 
	`CªtMoveFÜw¬d
(
VeùÜ
 
vNÜm®
,
T¿ûResuÉ
 *
Œ
 );

543 
	`CheckMes§geQueue
();

544 
	`CheckRadioCommªds
();

545 
	`CheckR–ßd
();

546 
	`CheckSmokeG»Çdes
();

547 
boŞ
 
	`CheckW®lOnLeá
();

548 
boŞ
 
	`CheckW®lOnRight
();

549 
	`Choo£AimDœeùiÚ
();

550 
	`Choo£BombWaypošt
();

551 
boŞ
 
	`DoWaypoštNav
();

552 
boŞ
 
	`EÃmyIsTh»©
();

553 
boŞ
 
	`EÁ™yIsVisibË
(
VeùÜ
 
vecDe¡
);

554 
	`FaûPos™iÚ
(
VeùÜ
 
vecPos
);

555 
boŞ
 
	`FInV›wCÚe
(
VeùÜ
 *
pOrigš
);

556 
ediù_t
 *
	`FšdB»akabË
();

557 
	`FšdCov”Waypošt
(
maxdi¡ªû
);

558 
	`FšdDeãndWaypošt
(
VeùÜ
 
vecPos™iÚ
);

559 
	`FšdGßl
();

560 
	`FšdI‹m
();

561 
	`G‘CampDœeùiÚ
(
VeùÜ
 *
vecDe¡
);

562 
	`G‘Mes§geQueue
();

563 
boŞ
 
	`GßlIsV®id
();

564 
boŞ
 
	`H—dTow¬dWaypošt
();

565 
	`InF›ldOfV›w
(
VeùÜ
 
de¡
);

566 
boŞ
 
	`IsBlockedLeá
();

567 
boŞ
 
	`IsBlockedRight
();

568 
šlše
 
boŞ
 
	$IsOnLadd”
(è{  
³v
->
mov‘y³
 =ğ
MOVETYPE_FLY
; }

569 
šlše
 
boŞ
 
	$IsInW©”
(è{  
³v
->
w©”Ëv–
 >ğ2; 
	}
}

570 
boŞ
 
I‹mIsVisibË
(
VeùÜ
 
vecDe¡
,* 
pszI‹mName
);

571 
boŞ
 
La¡EÃmyShoÙabË
();

572 
boŞ
 
La¡EÃmyVisibË
();

573 
PÏyRadioMes§ge
(
iMes§ge
);

574 
RunTask
();

575 
boŞ
 
R©eGroundW—pÚ
(
ediù_t
 *
³Á
);

576 
boŞ
 
R—ùOnEÃmy
();

577 
Re£tCŞlideS‹
();

578 
S‘CÚd™iÚs
();

579 
S‘SŒaãS³ed
(
VeùÜ
 
vecMoveDœ
, 
fSŒaãS³ed
);

580 
S¹Game
();

581 
TaskCom¶‘e
();

582 
boŞ
 
G‘Be¡NextWaypošt
();

583 
G‘Be¡W—pÚC¬r›d
();

584 
G‘V®idWaypošt
();

585 
boŞ
 
IsD—dlyDrİ
(
VeùÜ
 
vecT¬g‘Pos
);

586 
S–eùL—d”EachT—m
(
iT—m
);

588 
VeùÜ
 
BodyT¬g‘
(
ediù_t
 *
pBÙEÃmy
);

589 
CheckG»Çdes
();

590 
CommªdT—m
();

591 
DoA‰ackMovem’t
();

592 
boŞ
 
DoFœePau£
(
fDi¡ªû
);

593 
boŞ
 
G‘EÃmy
();

594 
boŞ
 
FœeW—pÚ
(
VeùÜ
 
v_’emy
);

595 
FocusEÃmy
();

596 
S–eùBe¡W—pÚ
();

597 
S–eùPi¡Ş
();

598 
boŞ
 
FœeHu¹sFr›nd
(
fDi¡ªû
);

599 
boŞ
 
IsGroupOfEÃm›s
(
VeùÜ
 
vLoÿtiÚ
);

600 
boŞ
 
IsShoÙabËThruOb¡aşe
(
VeùÜ
 
vecDe¡
);

601 
NumEÃm›sN—rPos
(
VeùÜ
 
vecPos™iÚ
,
iRadius
);

602 
NumT—mm©esN—rPos
(
VeùÜ
 
vecPos™iÚ
,
iRadius
);

603 
S–eùW—pÚByName
(cÚ¡ * 
pszName
);

604 
S–eùW—pÚbyNumb”
(
iNum
);

606 
boŞ
 
P¬£Ch©
(*
pszR•ly
);

607 
boŞ
 
R•l›sToPÏy”
();

608 
SayText
(cÚ¡ *
pText
);

609 
T—mSayText
(cÚ¡ *
pText
);

611 
G‘AimšgWaypošt
();

612 
G‘AimšgWaypošt
(
VeùÜ
 
vecT¬g‘Pos
, 
iCouÁ
);

613 
FšdShÜ‹¡P©h
(
iSourûIndex
, 
iDe¡Index
);

614 
FšdP©h
(
iSourûIndex
, 
iDe¡Index
, 
byP©hTy³
 = 0);

616 
	gpublic
:

617 
’tv¬s_t
 *
³v
;

619 
	gm_Wª‹dT—m
;

620 
	gm_Wª‹dCÏss
;

622 
	gm_iSkl
;

623 
	gm_iAccouÁ
;

624 
³rsÚ®™y_t
 
	gm_ucP”sÚ®™y
;

625 
	gm_iS´ayLogo
;

627 
	gm_æS·wnTime
;

629 
boŞ
 
	gm_bIsVIP
;

630 
	gm_æTimeT—mOrd”
;

631 
boŞ
 
	gm_bIsDeãndšgT—m
;

633 
	gm_iS¹AùiÚ
;

634 
boŞ
 
	gm_bNÙKËd
;

635 
boŞ
 
	gm_bNÙS¹ed
;

637 
	gm_iVÙeKickIndex
;

638 
	gm_iLa¡VÙeKick
;

639 
	gm_iVÙeM­
;

641 
	gm_æInBombZÚeTime
;

643 
boŞ
 
	gm_bInBuyZÚe
;

644 
boŞ
 
	gm_bBuyšgFšished
;

645 
boŞ
 
	gm_bBuyP’dšg
;

646 
	gm_iBuyCouÁ
;

647 
boŞ
 
	gm_bHasDefu£r
;

648 
	gm_æNextBuyTime
;

650 
	gm_æBlšdTime
;

651 
	gm_æBlšdMoveS³ed
;

652 
	gm_æBlšdSidemoveS³ed
;

654 
ediù_t
 *
	gm_³ÁRadioEÁ™y
;

655 
	gm_iRadioOrd”
;

657 
	gm_æBa£Ag»ssiÚLev–
;

658 
	gm_æBa£F—rLev–
;

659 
	gm_æAg»ssiÚLev–
;

660 
	gm_æF—rLev–
;

661 
	gm_æNextEmÙiÚUpd©e
;

663 
	gm_iAùMes§geIndex
;

664 
	gm_iPushMes§geIndex
;

666 
	gm_iP»vGßlIndex
;

667 
	gm_iCho£nGßlIndex
;

668 
	gm_æGßlV®ue
;

670 
VeùÜ
 
	gm_vecW±Origš
;

671 
VeùÜ
 
	gm_vecDe¡Origš
;

673 
	gm_æV›wDi¡ªû
;

674 
	gm_æMaxV›wDi¡ªû
;

677 
§y‹xt_t
 
	gm_Say‹xtBufãr
;

679 
ediù_t
 *
	gm_³ÁEÃmy
;

680 
	gm_æEÃmyUpd©eTime
;

681 
	gm_æEÃmyR—chabËTim”
;

682 
boŞ
 
	gm_bEÃmyR—chabË
;

684 
	gm_æS“EÃmyTime
;

685 
	gm_æEÃmySu½ri£Time
;

686 
	gm_æId—lR—ùiÚTime
;

687 
	gm_æAùu®R—ùiÚTime
;

689 
ediù_t
 *
	gm_³ÁLa¡EÃmy
;

690 
VeùÜ
 
	gm_vecLa¡EÃmyOrigš
;

691 
	gm_ucVisib™y
;

692 
ediù_t
 *
	gm_³ÁLa¡Viùim
;

693 
ediù_t
 *
	gm_³ÁT¿ckšgEdiù
;

694 
	gm_æTimeNextT¿ckšg
;

696 
	gm_æTimeFœePau£
;

697 
	gm_æShoÙTime
;

698 
	gm_iLa¡DamageTy³
;

700 
	gm_iCu¼’tW—pÚ
;

701 
	gm_rgAmmoInCl
[
MAX_WEAPONS
];

702 
	gm_rgAmmo
[
MAX_AMMO_SLOTS
];

704 
šlše
 
	$G‘Ammo
(è{ ià(
w—pÚ_defs
[
m_iCu¼’tW—pÚ
].
iAmmo1
 =ğ-1è 0;  
m_rgAmmo
[w—pÚ_defs[m_iCu¼’tW—pÚ].iAmmo1]; 
	}
}

705 
šlše
 
	$G‘AmmoInCl
(è{  
m_rgAmmoInCl
[
m_iCu¼’tW—pÚ
]; 
	}
}

707 
ediù_t
 *
	$ediù
(è{  
	`ENT
Ğ
³v
 ); 
	}
};

708 
EOFFSET
 
	$eoff£t
(è{  
	`OFFSET
Ğ
³v
 ); 
	}
};

709 
	$’tšdex
(è{  
	`ENTINDEX
Ğ
	`ediù
(è); 
	}
};

711 
VeùÜ
 
	$C’‹r
(è{  (
³v
->
absmax
 +…ev->
absmš
è* 0.5; 
	}
};

712 
VeùÜ
 
	$EyePos™iÚ
(è{  
³v
->
Üigš
 +…ev->
v›w_ofs
; 
	}
};

713 
VeùÜ
 
	$E¬Pos™iÚ
(è{  
³v
->
Üigš
 +…ev->
v›w_ofs
; 
	}
};

715 
VeùÜ
 
	$G‘GunPos™iÚ
(è{  (
³v
->
Üigš
 +…ev->
v›w_ofs
); 
	}
}

717 
Thšk
();

718 
NewRound
();

719 
PushMes§geQueue
(
iMes§ge
);

720 
P»·»Ch©Mes§ge
(*
pszText
);

721 
boŞ
 
FšdWaypošt
();

722 
D–‘eS—rchNodes
();

723 
bÙsk_t
 *
Cu¼’tTask
();

724 
RemoveC”šTask
(
sk_t
 
iTaskNum
);

725 
S¹Task
(
bÙsk_t
 *
pTask
);

726 
Re£tTasks
();

728 
boŞ
 
HasHo¡age
();

729 
boŞ
 
U£sRiæe
();

730 
boŞ
 
U£sSn”
();

731 
boŞ
 
U£sZoomabËRiæe
();

732 
boŞ
 
HasPrim¬yW—pÚ
();

733 
boŞ
 
HasSh›ld
();

734 
boŞ
 
IsSh›ldD¿wn
();

736 
CBa£BÙ
(
ediù_t
 *
BÙEÁ
, 
skl
, 
iP”sÚ®™y
, 
iT—m
, 
iCÏss
);

737 ~
CBa£BÙ
();

739 
CBa£BÙ
 *
In¡ªû
Ğ
ediù_t
 *
³Á
 );

740 
CBa£BÙ
 *
	$In¡ªû
Ğ
’tv¬s_t
 *
³v
 ) {  
	`In¡ªû
Ğ
	`ENT
Ğ³v ) ); 
	}
}

741 
CBa£BÙ
 *
	$In¡ªû
Ğ
eoff£t
 ) {  
	`In¡ªû
Ğ
	`ENT
Ğeoff£tè); 
	}
}

744 
CBa£BÙ
 *
g_rgpBÙs
[32];

745 
ü—‹bÙ_t
 
BÙC»©eTab
[32];

746 
th»©_t
 
Th»©Tab
[32];

747 
ex³r›nû_t
 *
pBÙEx³r›nûD©a
;

748 
bÙaim_t
 
BÙAimTab
[6];

749 
STRINGNODE
 *
pBÙNames
;

750 
STRINGNODE
 *
pU£dBÙNames
[31];

751 
STRINGNODE
 *
pKlCh©
;

752 
STRINGNODE
 *
pBombCh©
;

753 
STRINGNODE
 *
pD—dCh©
;

754 
STRINGNODE
 *
pU£dD—dSŒšgs
[8];

755 
STRINGNODE
 *
pCh©NoKeywÜd
;

756 
»¶ynode_t
 *
pCh©R•l›s
;

758 
ediù_t
 *
pHo¡Ediù
;

760 
VeùÜ
 
g_vecBomb
;

762 
U£rAddBÙ
(cÚ¡ *
skl
 = 
NULL
, cÚ¡ *
³rsÚ®™y
 = NULL, cÚ¡ *
‹am
 = NULL, cÚ¡ *
Çme
 = NULL, cÚ¡ *
mod–
 = NULL);

763 
U£rFlS”v”
(
iS–eùiÚ
, 
iP”sÚ®™y
);

764 
U£rRemoveAÎBÙs
();

765 
U£rKlAÎBÙs
();

766 
U£rKickRªdomBÙ
();

767 
U£rNewroundAÎ
();

768 
U£rS–eùW—pÚMode
(
iS–eùiÚ
);

770 
BÙC»©e
(
ediù_t
 *
pPÏy”
, cÚ¡ *
¬g1
, cÚ¡ *
¬g2
, cÚ¡ *
¬g3
, cÚ¡ *
¬g4
, cÚ¡ *
¬g5
);

771 
CTBombPoštCË¬
(
iIndex
);

773 
Highe¡W—pÚOfEdiù
(
ediù_t
 *
pEdiù
);

775 
boŞ
 
W—pÚIsSn”
(
iId
);

776 
boŞ
 
W—pÚShoÙsThru
(
iId
);

778 
FixedSigÃd16
Ğ
v®ue
, 
sÿË
 );

779 
UTIL_S–eùM’uI‹m
Ğ
ediù_t
 *
pFakeCl›Á
, 
iM’uI‹m
 );

780 
UTIL_G‘T—m
(
ediù_t
 *
pEÁ™y
);

781 
UTIL_G‘BÙIndex
(
ediù_t
 *
³Á
);

782 
boŞ
 
IsAlive
(
ediù_t
 *
pEdiù
);

783 
boŞ
 
FInV›wCÚe
(
VeùÜ
 *
pOrigš
, 
ediù_t
 *
pEdiù
);

784 
G‘ShoÙšgCÚeDevŸtiÚ
(
ediù_t
 *
pEdiù
, 
VeùÜ
 *
pvecPos™iÚ
);

785 
boŞ
 
IsShoÙabËB»akabË
(
ediù_t
 *
³Á
);

786 
boŞ
 
FBoxVisibË
(
ediù_t
 *
pEdiù
,ƒdiù_ˆ*
pT¬g‘Ediù
, 
VeùÜ
* 
pvH™
, * 
ucBodyP¬t
);

787 
boŞ
 
FVisibË
(cÚ¡ 
VeùÜ
 &
vecOrigš
, 
ediù_t
 *
pEdiù
);

788 
VeùÜ
 
C’‹r
(
ediù_t
 *
pEdiù
);

789 
VeùÜ
 
VecBMod–Origš
(
ediù_t
 *
pEdiù
);

790 
UTIL_ShowM’u
Ğ
ediù_t
 *
pEdiù
, 
¦Ùs
, 
di¥Ïytime
, 
boŞ
 
ÃedmÜe
, cÚ¡ *
pText
 );

791 
UTIL_DeÿlT¿û
Ğ
T¿ûResuÉ
 *
pT¿û
, * 
pszDeÿlName
 );

792 
UTIL_G‘N—»¡PÏy”Index
(
VeùÜ
 
vecOrigš
);

793 
UTIL_Ho¡Pršt
(
ediù_t
 *
pEÁ™y
, 
PRINT_TYPE
 
msg_de¡
, cÚ¡ *
fmt
, ...);

794 
FixedUnsigÃd16
(
v®ue
, 
sÿË
);

795 
FixedSigÃd16
(
v®ue
, 
sÿË
);

796 
VeùÜ
 
G‘BombPos™iÚ
();

797 
boŞ
 
BÙH—rsBomb
(
VeùÜ
 
vecBÙPos
,VeùÜ *
pBombPos
);

798 
F»eAÎTheStuff
();

799 
STRINGNODE
 *
G‘NodeSŒšg
(STRINGNODE* 
pNode
,
NodeNum
);

800 
RoundIn™
();

801 
G‘Highe¡F¿gsBÙ
(
iT—m
);

802 
boŞ
 
WasBombPoštVis™ed
(
iIndex
);

803 
Upd©eGlob®Ex³r›nûD©a
();

804 
BÙCŞËùEx³r›nûD©a
(
ediù_t
 *
pViùimEdiù
,ediù_ˆ*
pA‰ack”Ediù
, 
iDamage
);

805 
BÙCŞËùGßlEx³r›nû
(
CBa£BÙ
 *
pBÙ
, 
iDamage
, 
iT—m
);

806 
T”mš©eOnE¼Ü
(cÚ¡ *
¡ršg
);

807 
FakeCl›ÁCommªd
(
ediù_t
 *
pFakeCl›Á
, cÚ¡ *
fmt
, ...);

808 cÚ¡ *
G‘Arg
(cÚ¡ *
commªd
, 
¬g_numb”
);

809 
FlBufãrFromFe
(
FILE
* 
åFe
, *
pszBufãr
, 
fe_šdex
);

810 
G‘GameDœeùÜy
(*
mod_Çme
);

811 
C»©eP©h
(*
·th
);

812 
boŞ
 
IsR—chabË
(cÚ¡ 
VeùÜ
 &
v_¤c
, cÚ¡ VeùÜ &
v_de¡
);

813 
UTIL_D¿wB—m
(
ediù_t
 *
pEÁ™y
, 
VeùÜ
 
¡¬t
, VeùÜ 
’d
, 
width
,

814 
noi£
, 
»d
, 
g»’
, 
blue
, 
brighŠess
, 
¥“d
, 
liã
);

815 
UTIL_D¿wA¼ow
(
ediù_t
 *
pEÁ™y
, 
VeùÜ
 
¡¬t
, VeùÜ 
’d
, 
width
,

816 
noi£
, 
»d
, 
g»’
, 
blue
, 
brighŠess
, 
¥“d
, 
liã
);

817 
VeùÜ
 
VecCheckToss
Ğ
’tv¬s_t
 *
³v
, cÚ¡ VeùÜ &
vecSpÙ1
, VeùÜ 
vecSpÙ2
, 
æG¿v™yAdj
 = 1.0 );

818 
VeùÜ
 
VecCheckThrow
Ğ
’tv¬s_t
 *
³v
, cÚ¡ VeùÜ &
vecSpÙ1
, VeùÜ 
vecSpÙ2
, 
æS³ed
, 
æG¿v™yAdj
 = 1.0 );

820 
šlše
 
boŞ
 
	$IsNuÎSŒšg
(cÚ¡ *
¡r
) {

821 ià(
¡r
 =ğ
NULL
)

822  
TRUE
;

823  (*
¡r
 == '\0');

824 
	}
}

826 
šlše
 
boŞ
 
	$P¬amIsV®id
(cÚ¡ *
¡r
) {

827 ià(
	`IsNuÎSŒšg
(
¡r
))

828  
FALSE
;

829  (*
¡r
 != '*' || *(str + 1) != '\0');

830 
	}
}

832 
šlše
 
boŞ
 
	$IsPÏy”
(
ediù_t
 *
pEdiù
) {

833 ià(
	`FNuÎEÁ
(
pEdiù
))

834  
FALSE
;

835 ià(
pEdiù
->
ä“
)

836  
FALSE
;

837 ià(
pEdiù
->
v
.
æags
 & (
FL_CLIENT
 | 
FL_FAKECLIENT
))

838  (
	`STRING
(
pEdiù
->
v
.
ÃŠame
)[0] != 0);

839  
FALSE
;

840 
	}
}

842 
SoundA‰achToTh»©
(
ediù_t
 *
pEdiù
, cÚ¡ *
pszSam¶e
, 
fVŞume
);

843 
SoundSimuÏ‹Upd©e
(
iPÏy”Index
);

844 * 
UTIL_V¬Args
ĞcÚ¡ *
fÜm©
, ... );

846 
»¶ynode_t
 *
pCh©R•l›s
;

847 
STRINGNODE
 *
pCh©NoKeywÜd
;

848 
iNumNoKeySŒšgs
;

850 
BÙCl›Á_CS_VGUI
(*
p
, 
bÙ_šdex
);

851 
BÙCl›Á_CS_ShowM’u
(*
p
, 
bÙ_šdex
);

852 
BÙCl›Á_CS_W—pÚLi¡
(*
p
, 
bÙ_šdex
);

853 
BÙCl›Á_CS_Cu¼’tW—pÚ
(*
p
, 
bÙ_šdex
);

854 
BÙCl›Á_CS_AmmoX
(*
p
, 
bÙ_šdex
);

855 
BÙCl›Á_CS_AmmoPickup
(*
p
, 
bÙ_šdex
);

856 
BÙCl›Á_CS_I‹mPickup
(*
p
, 
bÙ_šdex
);

857 
BÙCl›Á_CS_Damage
(*
p
, 
bÙ_šdex
);

858 
BÙCl›Á_CS_MÚey
(*
p
, 
bÙ_šdex
);

859 
BÙCl›Á_CS_StusIcÚ
(*
p
, 
bÙ_šdex
);

860 
BÙCl›Á_CS_RoundTime
(*
p
, 
bÙ_šdex
);

861 
BÙCl›Á_CS_D—thMsg
(*
p
, 
bÙ_šdex
);

862 
BÙCl›Á_CS_Sü“nFade
(*
p
, 
bÙ_šdex
);

863 
BÙCl›Á_CS_HLTV
(*
p
, 
bÙ_šdex
);

864 
BÙCl›Á_CS_TextMsg
(*
p
, 
bÙ_šdex
);

865 
BÙCl›Á_CS_TextMsgAÎ
(*
p
, 
bÙ_šdex
);

866 
BÙCl›Á_CS_T—mInfo
(*
p
, 
bÙ_šdex
);

868 
	~"waypošt.h
"

869 
	~"m©hlib.h
"

871 
F»eNameFuncGlob®s
();

872 
LßdSymbŞs
(cÚ¡ *
f’ame
);

873 
ušt32
 
FunùiÚFromName
(cÚ¡ *
pName
);

874 cÚ¡ *
NameFÜFunùiÚ
(
ušt32
 
funùiÚ
);

876 
In™Lªg
();

877 
F»eLªg
();

878 cÚ¡ *
Œ
(cÚ¡ *
s
);

	@bot_ai.cpp

5 
	~"bÙ.h
"

12 
skld–ay_t
 
	gBÙSklD–ays
[] = {

25 
bÙsk_t
 
	gskF‹rs
[] = {

26 {
NULL
, NULL, 
TASK_NORMAL
, 0.0, -1, 0, 
TRUE
},

27 {
NULL
, NULL, 
TASK_PAUSE
, 0.0, -1, 0, 
FALSE
},

28 {
NULL
, NULL, 
TASK_MOVETOPOSITION
, 0.0, -1, 0, 
TRUE
},

29 {
NULL
, NULL, 
TASK_FOLLOWUSER
, 0.0, -1, 0, 
TRUE
},

30 {
NULL
, NULL, 
TASK_WAITFORGO
, 0.0, -1, 0, 
TRUE
},

31 {
NULL
, NULL, 
TASK_PICKUPITEM
, 0.0, -1, 0, 
TRUE
},

32 {
NULL
, NULL, 
TASK_CAMP
, 0.0, -1, 0, 
TRUE
},

33 {
NULL
, NULL, 
TASK_PLANTBOMB
, 0.0, -1, 0, 
FALSE
},

34 {
NULL
, NULL, 
TASK_DEFUSEBOMB
, 0.0, -1, 0, 
FALSE
},

35 {
NULL
, NULL, 
TASK_ATTACK
, 0.0, -1, 0, 
FALSE
},

36 {
NULL
, NULL, 
TASK_ENEMYHUNT
, 0.0, -1, 0, 
FALSE
},

37 {
NULL
, NULL, 
TASK_SEEKCOVER
, 0.0, -1, 0, 
FALSE
},

38 {
NULL
, NULL, 
TASK_THROWHEGRENADE
, 0.0, -1, 0, 
FALSE
},

39 {
NULL
, NULL, 
TASK_THROWFLASHBANG
, 0.0, -1, 0, 
FALSE
},

40 {
NULL
, NULL, 
TASK_THROWSMOKEGRENADE
, 0.0, -1, 0, 
FALSE
},

41 {
NULL
, NULL, 
TASK_SHOOTBREAKABLE
, 0.0, -1, 0, 
FALSE
},

42 {
NULL
, NULL, 
TASK_HIDE
, 0.0, -1, 0, 
FALSE
},

43 {
NULL
, NULL, 
TASK_BLINDED
, 0.0, -1, 0, 
FALSE
},

44 {
NULL
, NULL, 
TASK_SPRAYLOGO
, 0.0, -1, 0, 
FALSE
}

47 
VeùÜ
 
	gg_vecBomb
;

52 
	gCBa£BÙ
::
	$G‘Mes§geQueue
()

54 
iMSG
 = 
m_aMes§geQueue
[
m_iAùMes§geIndex
++];

55 
m_iAùMes§geIndex
 &= 0x1f;

56  
iMSG
;

57 
	}
}

62 
	gCBa£BÙ
::
	$PushMes§geQueue
(
iMes§ge
)

64 ià(
iMes§ge
 =ğ
MSG_CS_SAY
)

68 
iEÁIndex
 = 
	`’tšdex
();

70 
bÙ_šdex
 = 0; bÙ_šdex < 
gpGlob®s
->
maxCl›Ás
; bot_index++)

72 
CBa£BÙ
 *
pOth”BÙ
 = 
g_rgpBÙs
[
bÙ_šdex
];

73 ià(
pOth”BÙ
)

75 ià(
pOth”BÙ
->
³v
 !=…ev)

77 ià(
	`IsAlive
(
	`ediù
()è=ğIsAlive(
pOth”BÙ
->edict()))

79 
pOth”BÙ
->
m_Say‹xtBufãr
.
iEÁ™yIndex
 = 
iEÁIndex
;

80 
	`¡rıy
(
pOth”BÙ
->
m_Say‹xtBufãr
.
szSayText
, 
m_szMiscSŒšgs
);

82 
pOth”BÙ
->
m_Say‹xtBufãr
.
fTimeNextCh©
 = 
gpGlob®s
->
time
 +…Oth”BÙ->m_Say‹xtBufãr.
fCh©D–ay
;

88 
m_aMes§geQueue
[
m_iPushMes§geIndex
++] = 
iMes§ge
;

89 
m_iPushMes§geIndex
 &= 0x1f;

90 
	}
}

92 
	gCBa£BÙ
::
	$InF›ldOfV›w
(
VeùÜ
 
de¡
)

95 
’t™y_ªgË
 = 
	`UTIL_AngËMod
(
	`UTIL_VecToYaw
(
de¡
));

98 
v›w_ªgË
 = 
	`UTIL_AngËMod
(
³v
->
v_ªgË
.
y
);

105 
ªgË
 = 
	`abs
(()
v›w_ªgË
 - ()
’t™y_ªgË
);

106 ià(
ªgË
 > 180)

107 
ªgË
 = 360 -‡ngle;

108  
ªgË
;

110 
	}
}

116 
boŞ
 
	gCBa£BÙ
::
	$FInV›wCÚe
(
VeùÜ
 *
pOrigš
)

118 
	`UTIL_MakeVeùÜs
(
³v
->
v_ªgË
);

120 
VeùÜ
 
vecLOS
 = (*
pOrigš
 - 
	`G‘GunPos™iÚ
()).
	`NÜm®ize
();

121 
æDÙ
 = 
	`DÙProduù
(
vecLOS
, 
gpGlob®s
->
v_fÜw¬d
);

123 iàĞ
æDÙ
 >ğ
	`cos
((
³v
->
fov
 / 2è* 
M_PI
 / 180))

124  
TRUE
;

126  
FALSE
;

127 
	}
}

129 
boŞ
 
	gCBa£BÙ
::
	$I‹mIsVisibË
(
VeùÜ
 
vecDe¡
, * 
pszI‹mName
)

131 
T¿ûResuÉ
 
Œ
;

134 
	`UTIL_T¿ûLše
Ğ
	`EyePos™iÚ
(), 
vecDe¡
, 
ignÜe_mÚ¡”s
, 
	`ediù
(), &
Œ
 );

137 ià(
Œ
.
æF¿ùiÚ
 != 1.0)

138  (
	`FCÏs¢ameIs
(
Œ
.
pH™
, 
pszI‹mName
è!ğ
FALSE
);

140  
TRUE
;

141 
	}
}

143 
boŞ
 
	gCBa£BÙ
::
	$EÁ™yIsVisibË
Ğ
VeùÜ
 
vecDe¡
 )

145 
T¿ûResuÉ
 
Œ
;

148 
	`UTIL_T¿ûLše
(
	`EyePos™iÚ
(), 
vecDe¡
, 
ignÜe_mÚ¡”s
, 
	`ediù
(), &
Œ
);

151  (
Œ
.
æF¿ùiÚ
 >= 1.0);

152 
	}
}

159 
	gCBa£BÙ
::
	$CheckSmokeG»Çdes
()

161 
ediù_t
 *
³Á
 = 
m_³ÁAvoidG»Çde
;

162 
fDi¡ªû
;

164 ià(!
	`FNuÎEÁ
(
³Á
))

166 ià((
³Á
->
v
.
æags
 & 
FL_ONGROUND
è|| (³Á->v.
efãùs
 & 
EF_NODRAW
))

168 
m_³ÁAvoidG»Çde
 = 
NULL
;

169 
m_cAvoidG»Çde
 = 0;

174 
m_³ÁAvoidG»Çde
 = 
NULL
;

175 
m_cAvoidG»Çde
 = 0;

178 
³Á
 = 
NULL
;

181 !
	`FNuÎEÁ
(
³Á
 = 
	`FIND_ENTITY_BY_CLASSNAME
(pent, "grenade")))

184 ià(
³Á
->
v
.
efãùs
 & 
EF_NODRAW
)

188 ià(!
	`EÁ™yIsVisibË
(
³Á
->
v
.
Üigš
) &&

189 
	`InF›ldOfV›w
(
³Á
->
v
.
Üigš
 - 
	`EyePos™iÚ
()è> 
³v
->
fov
 / 2)

192 ià(
	`FNuÎEÁ
(
m_³ÁAvoidG»Çde
))

195 ià((
³Á
->
v
.
æags
 & 
FL_ONGROUND
) == 0)

197 
fDi¡ªû
 = (
³Á
->
v
.
Üigš
 - 
³v
->Üigš).
	`L’gth
();

198 
fDi¡ªûMoved
 = ((
³Á
->
v
.
Üigš
 +…’t->v.
v–oc™y
 * 
g_æTimeF¿meIÁ”v®
è- 
³v
->Üigš).
	`L’gth
();

201 ià(
fDi¡ªûMoved
 < 
fDi¡ªû
 && fDistance < 600)

203 
VeùÜ2D
 
vec2DœToPošt
;

206 
	`UTIL_MakeVeùÜs
(
³v
->
ªgËs
);

208 
vec2DœToPošt
 = (
³v
->
Üigš
 - 
³Á
->
v
.Üigš).
	`Make2D
().
	`NÜm®ize
();

210 iàĞ
	`DÙProduù
(
vec2DœToPošt
, 
gpGlob®s
->
v_right
.
	`Make2D
()) > 0 )

211 
m_cAvoidG»Çde
 = -1;

213 
m_cAvoidG»Çde
 = 1;

215 
m_³ÁAvoidG»Çde
 = 
³Á
;

222 ià(!
	`FSŒEq
(
	`STRING
(
³Á
->
v
.
mod–
) + 9, "smokegrenade.mdl") ||

223 (
³Á
->
v
.
æags
 & 
FL_ONGROUND
) == 0)

226 
fDi¡ªû
 = (
³Á
->
v
.
Üigš
 - 
³v
->Üigš).
	`L’gth
();

229 ià(
m_æV›wDi¡ªû
 > 
fDi¡ªû
)

230 
m_æV›wDi¡ªû
 = 
fDi¡ªû
;

232 
	}
}

238 
	gCBa£BÙ
::
	$G‘Be¡W—pÚC¬r›d
()

240 * 
±rW—pÚTab
 = 
±rW—pÚP»fs
[
m_ucP”sÚ®™y
];

241 
bÙ_w—pÚ_£Ëù_t
 *
pW—pÚTab
 = 
cs_w—pÚ_£Ëù
;

242 
iW—pÚIndex
 = 0;

243 
iW—pÚs
 = 
³v
->
w—pÚs
;

246 ià(
	`HasSh›ld
())

247 
iW—pÚs
 |ğ(1 << 
WEAPON_SHIELDGUN
);

249 
i
 = 0; i < 
NUM_WEAPONS
; i++)

251 ià(
iW—pÚs
 & (1<<
pW—pÚTab
[*
±rW—pÚTab
].
iId
))

252 
iW—pÚIndex
 = 
i
;

253 
±rW—pÚTab
++;

256  
iW—pÚIndex
;

257 
	}
}

262 
boŞ
 
	gCBa£BÙ
::
	$R©eGroundW—pÚ
(
ediù_t
 *
³Á
)

264 
iHasW—pÚ
 = 
	`G‘Be¡W—pÚC¬r›d
();

266 * 
±rW—pÚTab
 = 
±rW—pÚP»fs
[
m_ucP”sÚ®™y
];

267 
bÙ_w—pÚ_£Ëù_t
 *
pW—pÚTab
 = 
cs_w—pÚ_£Ëù
;

269 
iGroundIndex
 = 0;

270 
szMod–Name
[40];

272 
	`¡rıy
(
szMod–Name
, 
	`STRING
(
³Á
->
v
.
mod–
) + 9);

274 
i
 = 0; i < 
NUM_WEAPONS
; i++)

276 ià(
	`FSŒEq
(
pW—pÚTab
[*
±rW—pÚTab
].
mod–_Çme
, 
szMod–Name
))

277 
iGroundIndex
 = 
i
;

278 
±rW—pÚTab
++;

281 ià(
iGroundIndex
 < 7)

283 
±rW—pÚTab
 = 
±rW—pÚP»fs
[
m_ucP”sÚ®™y
];

284 
iHasW—pÚ
 = 0;

286 
i
 = 0; i < 7; i++)

288 ià(
³v
->
w—pÚs
 & (1 << 
pW—pÚTab
[*
±rW—pÚTab
].
iId
))

289 
iHasW—pÚ
 = 
i
;

290 
±rW—pÚTab
++;

294  (
iGroundIndex
 > 
iHasW—pÚ
);

295 
	}
}

301 
ediù_t
 *
	gCBa£BÙ
::
	$FšdB»akabË
()

303 
T¿ûResuÉ
 
Œ
;

304 
ediù_t
 *
³Á
;

306 
VeùÜ
 
v_¤c
 = 
³v
->
Üigš
;

307 
VeùÜ
 
vecDœeùiÚ
 = (
m_vecDe¡Origš
 - 
v_¤c
).
	`NÜm®ize
();

308 
VeùÜ
 
v_de¡
 = 
v_¤c
 + 
vecDœeùiÚ
 * 72;

310 
	`UTIL_T¿ûLše
(
v_¤c
, 
v_de¡
, 
dÚt_ignÜe_mÚ¡”s
, 
dÚt_ignÜe_gÏss
, 
	`ediù
(), &
Œ
);

312 ià(
Œ
.
æF¿ùiÚ
 != 1.0)

314 
³Á
 = 
Œ
.
pH™
;

318 ià(
	`IsShoÙabËB»akabË
(
³Á
))

320 
m_vecB»akabË
 = 
Œ
.
vecEndPos
;

321  
³Á
;

325 
v_¤c
 = 
	`EyePos™iÚ
();

326 
vecDœeùiÚ
 = (
m_vecDe¡Origš
 - 
v_¤c
).
	`NÜm®ize
();

327 
v_de¡
 = 
v_¤c
 + 
vecDœeùiÚ
 * 72;

329 
	`UTIL_T¿ûLše
(
v_¤c
, 
v_de¡
, 
dÚt_ignÜe_mÚ¡”s
, 
dÚt_ignÜe_gÏss
, 
	`ediù
(), &
Œ
);

331 ià(
Œ
.
æF¿ùiÚ
 != 1.0)

333 
³Á
 = 
Œ
.
pH™
;

335 ià(
	`IsShoÙabËB»akabË
(
³Á
))

337 
m_vecB»akabË
 = 
Œ
.
vecEndPos
;

338  
³Á
;

342 
m_³ÁShoÙB»akabË
 = 
NULL
;

343 
m_vecB»akabË
 = 
g_vecZ”o
;

344  
NULL
;

345 
	}
}

350 
	gCBa£BÙ
::
	$FšdI‹m
()

352 
ediù_t
 *
³Á
 = 
NULL
;

353 
ediù_t
 *
pPickupEÁ™y
;

354 
boŞ
 
bCªPickup
;

355 
di¡ªû
, 
mš_di¡ªû
;

356 
™em_Çme
[40];

357 cÚ¡ 
¿dius
 = 500;

360 ià(
³v
->
mov‘y³
 =ğ
MOVETYPE_FLY
)

362 
m_³ÁPickupI‹m
 = 
NULL
;

363 
m_iPickupTy³
 = 
PICKUP_NONE
;

367 ià(!
	`FNuÎEÁ
(
m_³ÁPickupI‹m
))

369 
boŞ
 
bI‹mExi¡s
 = 
FALSE
;

370 
pPickupEÁ™y
 = 
m_³ÁPickupI‹m
;

371 !
	`FNuÎEÁ
(
³Á
 = 
	`FIND_ENTITY_IN_SPHERE
Ğ³Á, 
³v
->
Üigš
, 
¿dius
 )))

373 ià(
³Á
->
v
.
efãùs
 & 
EF_NODRAW
)

376 ià(
³Á
 =ğ
pPickupEÁ™y
)

378 
VeùÜ
 
vecPos™iÚ
;

379 ià(
	`¡ºcmp
("func_", 
	`STRING
(
³Á
->
v
.
şas¢ame
), 5) == 0 ||

380 
	`FB™S‘
(
³Á
->
v
.
æags
, 
FL_MONSTER
))

381 
vecPos™iÚ
 = 
	`VecBMod–Origš
(
³Á
);

383 
vecPos™iÚ
 = 
³Á
->
v
.
Üigš
;

385 ià(
	`I‹mIsVisibË
(
vecPos™iÚ
, (*)
	`STRING
(
³Á
->
v
.
şas¢ame
)))

386 
bI‹mExi¡s
 = 
TRUE
;

390 ià(
bI‹mExi¡s
)

394 
m_³ÁPickupI‹m
 = 
NULL
;

395 
m_iPickupTy³
 = 
PICKUP_NONE
;

399 
³Á
 = 
NULL
;

400 
pPickupEÁ™y
 = 
NULL
;

401 
pickup_t
 
iPickTy³
 = 
PICKUP_NONE
;

402 
VeùÜ
 
pickup_Üigš
 = 
g_vecZ”o
;

403 
VeùÜ
 
’t™y_Üigš
 = 
g_vecZ”o
;

404 
VeùÜ
 
vecEnd
;

406 
m_³ÁPickupI‹m
 = 
NULL
;

407 
m_iPickupTy³
 = 
PICKUP_NONE
;

408 
mš_di¡ªû
 = 
¿dius
 + 1.0;

410 !
	`FNuÎEÁ
(
³Á
 = 
	`FIND_ENTITY_IN_SPHERE
Ğ³Á, 
³v
->
Üigš
, 
¿dius
 )))

412 
bCªPickup
 = 
FALSE
;

414 ià(
³Á
->
v
.
efãùs
 & 
EF_NODRAW
 ||…’ˆ=ğ
m_³ÁI‹mIgnÜe
)

417 
	`¡rıy
 (
™em_Çme
, 
	`STRING
(
³Á
->
v
.
şas¢ame
));

420 ià(
	`¡ºcmp
("func_", 
™em_Çme
, 5è=ğ0 || 
	`FB™S‘
(
³Á
->
v
.
æags
, 
FL_MONSTER
))

421 
’t™y_Üigš
 = 
	`VecBMod–Origš
(
³Á
);

423 
’t™y_Üigš
 = 
³Á
->
v
.
Üigš
;

425 
vecEnd
 = 
’t™y_Üigš
;

428 ià(
	`I‹mIsVisibË
(
vecEnd
, (*)
	`STRING
(
³Á
->
v
.
şas¢ame
)))

430 ià(
	`¡ºcmp
("ho¡age_’t™y", 
™em_Çme
, 14) == 0)

434 ià(
³Á
->
v
.
v–oc™y
.
	`L’gth
(è< 5.0 && 
	`UTIL_G‘T—m
(
	`ediù
()è=ğ
TEAM_CT
)

436 
bCªPickup
 = 
TRUE
;

437 
iPickTy³
 = 
PICKUP_HOSTAGE
;

440 ià((
	`¡ºcmp
("w—pÚbox", 
™em_Çme
, 9) == 0) &&

441 
	`FSŒEq
(
	`STRING
(
³Á
->
v
.
mod–
) + 9, "backpack.mdl") )

443 
bCªPickup
 = 
TRUE
;

444 
iPickTy³
 = 
PICKUP_DROPPED_C4
;

446 ià((
	`¡ºcmp
("w—pÚbox", 
™em_Çme
, 9) == 0 ||

447 
	`¡ºcmp
("¬moury_’t™y", 
™em_Çme
, 14) == 0) &&

448 !
m_bUsšgG»Çde
)

450 
bCªPickup
 = 
TRUE
;

451 
iPickTy³
 = 
PICKUP_WEAPON
;

453 ià(
	`¡ºcmp
("w—pÚ_sh›ld", 
™em_Çme
, 13) == 0 &&

454 !
m_bUsšgG»Çde
)

456 
bCªPickup
 = 
TRUE
;

457 
iPickTy³
 = 
PICKUP_SHIELD
;

459 ià((
	`¡ºcmp
("g»Çde", 
™em_Çme
, 7) == 0) &&

460 (
	`FSŒEq
(
	`STRING
(
³Á
->
v
.
mod–
) + 9, "c4.mdl")) )

462 
bCªPickup
 = 
TRUE
;

463 
iPickTy³
 = 
PICKUP_PLANTED_C4
;

465 ià(
	`¡ºcmp
("™em_thigh·ck", 
™em_Çme
, 14) == 0)

467 ià(
	`UTIL_G‘T—m
(
	`ediù
()è=ğ
TEAM_CT
 && !
m_bHasDefu£r
)

469 
bCªPickup
 = 
TRUE
;

470 
iPickTy³
 = 
PICKUP_DEFUSEKIT
;

475 ià(
bCªPickup
)

477 
di¡ªû
 = (
’t™y_Üigš
 - 
³v
->
Üigš
).
	`L’gth
();

480 ià(
di¡ªû
 < 
mš_di¡ªû
)

482 
i
;

484 ià(
iPickTy³
 =ğ
PICKUP_WEAPON
)

486 ià(
m_bIsVIP
)

487 
bCªPickup
 = 
FALSE
;

488 ià(
	`FSŒEq
(
	`STRING
(
³Á
->
v
.
mod–
) + 9, "kevlar.mdl"))

491 ià(
³v
->
¬mÜv®ue
 >= 100)

492 
bCªPickup
 = 
FALSE
;

494 ià(
	`FSŒEq
(
	`STRING
(
³Á
->
v
.
mod–
) + 9, "flashbang.mdl"))

497 ià(
³v
->
w—pÚs
 & (1 << 
WEAPON_FLASHBANG
))

498 
bCªPickup
 = 
FALSE
;

500 ià(
	`FSŒEq
(
	`STRING
(
³Á
->
v
.
mod–
) + 9, "hegrenade.mdl"))

503 ià(
³v
->
w—pÚs
 & (1 << 
WEAPON_HEGRENADE
))

504 
bCªPickup
 = 
FALSE
;

506 ià(
	`FSŒEq
(
	`STRING
(
³Á
->
v
.
mod–
) + 9, "smokegrenade.mdl"))

509 ià(
³v
->
w—pÚs
 & (1 << 
WEAPON_SMOKEGRENADE
))

510 
bCªPickup
 = 
FALSE
;

512 ià(!
	`R©eGroundW—pÚ
(
³Á
))

513 
bCªPickup
 = 
FALSE
;

515 ià(
iPickTy³
 =ğ
PICKUP_SHIELD
)

517 ià((
³v
->
w—pÚs
 & (1 << 
WEAPON_ELITE
)è|| 
	`HasSh›ld
(è|| 
m_bIsVIP
)

518 
bCªPickup
 = 
FALSE
;

519 ià(
	`HasPrim¬yW—pÚ
())

521 ià(!
	`R©eGroundW—pÚ
(
³Á
))

522 
bCªPickup
 = 
FALSE
;

525 ià(
	`UTIL_G‘T—m
(
	`ediù
()è=ğ
TEAM_TERRORIST
)

527 ià(
iPickTy³
 =ğ
PICKUP_PLANTED_C4
)

529 
bCªPickup
 = 
FALSE
;

530 ià(!
m_bDeãndedBomb
)

532 
m_bDeãndedBomb
 = 
TRUE
;

533 
iIndex
 = 
	`FšdDeãndWaypošt
(
’t™y_Üigš
);

535 
fT¿v–time
 = 
	`G‘T¿v–Time
(
³v
->
max¥“d
,…ev->
Üigš
, 
·ths
[
iIndex
]->origin);

536 
fTimeMidBlowup
 = 
	`CVAR_GET_FLOAT
("mp_c4timer");

537 
fTimeMidBlowup
 = 
g_fTimeBombPÏÁed
 + fTimeMidBlowup / 2;

538 
fTimeMidBlowup
 -ğ
fT¿v–time
;

540 ià(
fTimeMidBlowup
 > 
gpGlob®s
->
time
)

543 
	`RemoveC”šTask
(
TASK_MOVETOPOSITION
);

546 
bÙsk_t
 
TempTask
 = {
NULL
, NULL, 
TASK_CAMP
, 
TASKPRI_CAMP
, -1, 
fTimeMidBlowup
, 
TRUE
};

547 
	`S¹Task
(&
TempTask
);

550 
TempTask
.
iTask
 = 
TASK_MOVETOPOSITION
;

551 
TempTask
.
fDesœe
 = 
TASKPRI_MOVETOPOSITION
;

552 
TempTask
.
iD©a
 = 
iIndex
;

553 
	`S¹Task
(&
TempTask
);

555 ià(
·ths
[
iIndex
]->
vis
.
üouch
 <ğ·ths[iIndex]->vis.
¡ªd
)

556 
m_iCampBu‰Ús
 |ğ
IN_DUCK
;

558 
m_iCampBu‰Ús
 &ğ~
IN_DUCK
;

563 
	`PÏyRadioMes§ge
(
RADIO_SHESGONNABLOW
);

570 ià(
iPickTy³
 =ğ
PICKUP_HOSTAGE
)

572 ià(!
	`IsAlive
(
³Á
))

575 
bCªPickup
 = 
FALSE
;

577 
i
 = 0; i < 
gpGlob®s
->
maxCl›Ás
; i++)

579 ià(
g_rgpBÙs
[
i
])

581 ià(!
	`IsAlive
(
g_rgpBÙs
[
i
]->
	`ediù
()))

583 
h
 = 0; h < 
MAX_HOSTAGES
; h++)

585 ià(
g_rgpBÙs
[
i
]->
m_rgpHo¡ages
[
h
] =ğ
³Á
)

587 
bCªPickup
 = 
FALSE
;

594 ià(
iPickTy³
 =ğ
PICKUP_PLANTED_C4
)

596 
ediù_t
 *
pPÏy”
;

597 
di¡ªû
;

600 
i
 = 0; i < 
gpGlob®s
->
maxCl›Ás
; i++)

602 ià(
Th»©Tab
[
i
].
IsU£d
 =ğ
FALSE
 || Th»©Tab[i].
IsAlive
 == FALSE ||

603 
Th»©Tab
[
i
].
iT—m
 !ğ
	`UTIL_G‘T—m
(
	`ediù
()è|| Th»©Tab[i].
pEdiù
 ==ƒdict())

606 
pPÏy”
 = 
Th»©Tab
[
i
].
pEdiù
;

609 
di¡ªû
 = (
pPÏy”
->
v
.
Üigš
 - 
’t™y_Üigš
).
	`L’gth
();

611 ià(
di¡ªû
 < 60)

613 
bCªPickup
 = 
FALSE
;

615 ià(!
m_bDeãndedBomb
)

617 
m_bDeãndedBomb
 = 
TRUE
;

618 
iIndex
 = 
	`FšdDeãndWaypošt
(
’t™y_Üigš
);

619 
fT¿v–time
 = 
	`G‘T¿v–Time
(
³v
->
max¥“d
,…ev->
Üigš
, 
·ths
[
iIndex
]->origin);

620 
fTimeBlowup
 = 
	`CVAR_GET_FLOAT
("mp_c4timer");

621 
fTimeBlowup
 +ğ
g_fTimeBombPÏÁed
 - 
fT¿v–time
;

624 
	`RemoveC”šTask
(
TASK_MOVETOPOSITION
);

627 
bÙsk_t
 
TempTask
 = {
NULL
, NULL, 
TASK_CAMP
, 
TASKPRI_CAMP
, -1, 
fTimeBlowup
, 
TRUE
};

628 
	`S¹Task
(&
TempTask
);

631 
TempTask
.
iTask
 = 
TASK_MOVETOPOSITION
;

632 
TempTask
.
fDesœe
 = 
TASKPRI_MOVETOPOSITION
;

633 
TempTask
.
iD©a
 = 
iIndex
;

634 
	`S¹Task
(&
TempTask
);

635 ià(
·ths
[
iIndex
]->
vis
.
üouch
 <ğ·ths[iIndex]->vis.
¡ªd
)

636 
m_iCampBu‰Ús
 |ğ
IN_DUCK
;

638 
m_iCampBu‰Ús
 &ğ~
IN_DUCK
;

645 ià(
iPickTy³
 =ğ
PICKUP_DROPPED_C4
)

647 
m_³ÁI‹mIgnÜe
 = 
³Á
;

648 
bCªPickup
 = 
FALSE
;

650 
time
 = 
g_fTimeRoundEnd
 - 
	`CVAR_GET_FLOAT
("mp_c4timer");

651 ià(
time
 > 
gpGlob®s
->tim+ 
	`RANDOM_FLOAT
(30, 60))

654 
bÙsk_t
 
TempTask
 = {
NULL
, NULL, 
TASK_CAMP
, 
TASKPRI_CAMP
, -1, 
time
, 
TRUE
};

655 
	`S¹Task
(&
TempTask
);

658 
iIndex
 = 
	`FšdDeãndWaypošt
(
’t™y_Üigš
);

659 
TempTask
.
iTask
 = 
TASK_MOVETOPOSITION
;

660 
TempTask
.
fDesœe
 = 
TASKPRI_MOVETOPOSITION
;

661 
TempTask
.
iD©a
 = 
iIndex
;

662 
	`S¹Task
(&
TempTask
);

663 ià(
·ths
[
iIndex
]->
vis
.
üouch
 <ğ·ths[iIndex]->vis.
¡ªd
)

664 
m_iCampBu‰Ús
 |ğ
IN_DUCK
;

666 
m_iCampBu‰Ús
 &ğ~
IN_DUCK
;

673 ià(
bCªPickup
)

675 
mš_di¡ªû
 = 
di¡ªû
;

676 
pPickupEÁ™y
 = 
³Á
;

677 
pickup_Üigš
 = 
’t™y_Üigš
;

678 
m_iPickupTy³
 = 
iPickTy³
;

681 
iPickTy³
 = 
PICKUP_NONE
;

686 ià(!
	`FNuÎEÁ
(
pPickupEÁ™y
))

688 
i
 = 0; i < 
gpGlob®s
->
maxCl›Ás
; i++)

690 ià(
g_rgpBÙs
[
i
])

692 ià(!
	`IsAlive
(
g_rgpBÙs
[
i
]->
	`ediù
()))

694 ià(
g_rgpBÙs
[
i
]->
m_³ÁPickupI‹m
 =ğ
pPickupEÁ™y
)

696 
m_³ÁPickupI‹m
 = 
NULL
;

697 
m_iPickupTy³
 = 
PICKUP_NONE
;

703 ià(
pickup_Üigš
.
z
 > 
	`EyePos™iÚ
().z)

705 
m_³ÁPickupI‹m
 = 
NULL
;

706 
m_iPickupTy³
 = 
PICKUP_NONE
;

710 ià(!
	`IsD—dlyDrİ
(
pickup_Üigš
))

711 
m_³ÁPickupI‹m
 = 
pPickupEÁ™y
;

714 
m_³ÁPickupI‹m
 = 
NULL
;

715 
m_iPickupTy³
 = 
PICKUP_NONE
;

718 
	}
}

726 
	gCBa£BÙ
::
	$G‘CampDœeùiÚ
(
VeùÜ
 *
vecDe¡
)

728 
T¿ûResuÉ
 
Œ
;

730 
VeùÜ
 
vecSourû
 = 
	`EyePos™iÚ
();

732 
	`UTIL_T¿ûLše
Ğ
vecSourû
, *
vecDe¡
, 
ignÜe_mÚ¡”s
, 
	`ediù
(), &
Œ
);

735 ià(
Œ
.
æF¿ùiÚ
 < 1.0)

737 
f_Ëngth
 = 
	`L’gthSqu¬ed
(
Œ
.
vecEndPos
 - 
vecSourû
);

738 ià(
f_Ëngth
 > 10000)

741 
mš_di¡ªû1
 = 
FLT_MAX
;

742 
mš_di¡ªû2
 = 
FLT_MAX
;

743 
šdexbÙ
 = -1,
šdex’emy
 = -1, 
i
;

746 
i
 = 0; i < 
g_iNumWaypošts
; i++)

748 
di¡ªû
 = 
	`L’gthSqu¬ed
(
·ths
[
i
]->
Üigš
 - 
³v
->origin);

750 ià(
di¡ªû
 < 
mš_di¡ªû1
)

752 
mš_di¡ªû1
 = 
di¡ªû
;

753 
šdexbÙ
 = 
i
;

756 
di¡ªû
 = 
	`L’gthSqu¬ed
(
·ths
[
i
]->
Üigš
 - *
vecDe¡
);

758 ià(
di¡ªû
 < 
mš_di¡ªû2
)

760 
mš_di¡ªû2
 = 
di¡ªû
;

761 
šdex’emy
 = 
i
;

765 ià(
šdexbÙ
 =ğ-1 || 
šdex’emy
 == -1)

768 
mš_di¡ªû1
 = 
FLT_MAX
;

769 
PATH
 *
p
 = 
·ths
[
šdexbÙ
];

770 
iLookAtWaypošt
 = -1;

771 
i
 = 0; i < 
MAX_PATH_INDEX
; i++)

773 ià(
p
->
šdex
[
i
] == -1)

776 
di¡ªû
 = 
	`G‘P©hDi¡ªû
(
p
->
šdex
[
i
], 
šdex’emy
);

778 ià(
di¡ªû
 < 
mš_di¡ªû1
)

780 
mš_di¡ªû1
 = 
di¡ªû
;

781 
iLookAtWaypošt
 = 
i
;

784 ià(
iLookAtWaypošt
 !ğ-1 && iLookAtWaypošˆ< 
g_iNumWaypošts
)

785 *
vecDe¡
 = 
·ths
[
iLookAtWaypošt
]->
Üigš
;

787 
	}
}

792 
	gCBa£BÙ
::
	$PÏyRadioMes§ge
(
iMes§ge
)

794 ià(!
g_bBÙU£Radio
)

797 
m_iRadioS–eù
 = 
iMes§ge
;

798 
	`PushMes§geQueue
(
MSG_CS_RADIO
);

799 
	}
}

805 
	gCBa£BÙ
::
	$CheckMes§geQueue
()

808 ià(
m_iAùMes§geIndex
 =ğ
m_iPushMes§geIndex
)

812 
iCu¼’tMSG
 = 
	`G‘Mes§geQueue
();

815 ià(
iCu¼’tMSG
 =ğ
MSG_CS_IDLE
)

818 
‹am
 = 
	`UTIL_G‘T—m
(
	`ediù
());

820 
iCu¼’tMSG
)

823 
MSG_CS_BUY
:

825 ià(
m_æNextBuyTime
 > 
gpGlob®s
->
time
)

828 
	`PushMes§geQueue
(
MSG_CS_BUY
);

832 ià(!
m_bInBuyZÚe
)

834 
m_bBuyP’dšg
 = 
TRUE
;

835 
m_bBuyšgFšished
 = 
TRUE
;

839 
m_bBuyP’dšg
 = 
FALSE
;

842 ià(!
g_bBÙBuy
)

843 
m_iBuyCouÁ
 = 5;

846 ià(
g_bJasÚMode
)

848 
m_iBuyCouÁ
 = 5;

849 
	`S–eùW—pÚByName
("weapon_knife");

853 ià(
g_iM­Ty³
 & 
MAP_AS
)

855 *
šfobufãr
 = 
g_’gfuncs
.
	`pâG‘InfoKeyBufãr
Ğ
	`ediù
() );

856 ià(*(
g_’gfuncs
.
	`pâInfoKeyV®ue
(
šfobufãr
, "model")) == 'v')

858 
m_bIsVIP
 = 
TRUE
;

859 
m_iBuyCouÁ
 = 5;

863 ià(
m_iBuyCouÁ
 > 4)

865 
m_bBuyšgFšished
 = 
TRUE
;

869 
	`PushMes§geQueue
(
MSG_CS_IDLE
);

871 
	`BuyStuff
();

875 
MSG_CS_RADIO
:

877 ià(
g_rgfLa¡RadioTime
[
‹am
] + 1.0 < 
gpGlob®s
->
time
)

880 ià(
m_iRadioS–eù
 !ğ
RADIO_AFFIRMATIVE
 && m_iRadioS–eù !ğ
RADIO_NEGATIVE
 && m_iRadioS–eù !ğ
RADIO_REPORTINGIN
)

882 ià(
m_iRadioS–eù
 =ğ
g_rgfLa¡Radio
[
‹am
] && 
g_rgfLa¡RadioTime
[‹am] + 1.5 > 
gpGlob®s
->
time
)

883 
m_iRadioS–eù
 = 
RADIO_AFFIRMATIVE
;

886 
g_rgfLa¡Radio
[
‹am
] = 
m_iRadioS–eù
;

888 
i
 = 0; i < 
gpGlob®s
->
maxCl›Ás
; i++)

890 ià(
g_rgpBÙs
[
i
])

892 ià(
³v
 !ğ
g_rgpBÙs
[
i
]->³v && 
	`UTIL_G‘T—m
(g_rgpBÙs[i]->
	`ediù
()è=ğ
‹am
)

894 
g_rgpBÙs
[
i
]->
m_iRadioOrd”
 = 
m_iRadioS–eù
;

895 
g_rgpBÙs
[
i
]->
m_³ÁRadioEÁ™y
 = 
	`ediù
();

902 ià(
m_iRadioS–eù
 =ğ
RADIO_REPORTINGIN
)

904 
szR•Üt
[80];

905 
sk_t
 
iTask
 = 
	`Cu¼’tTask
()->iTask;

906 
iWPT
 = 
	`Cu¼’tTask
()->
iD©a
;

908 
iTask
)

910 
TASK_NORMAL
:

911 ià(
iWPT
 != -1)

913 ià(
·ths
[
iWPT
]->
æags
 & 
W_FL_GOAL
)

914 
	`¥rštf
(
szR•Üt
, "Heading for‡ Map Goal!\n");

915 ià(
·ths
[
iWPT
]->
æags
 & 
W_FL_RESCUE
)

916 
	`¥rštf
(
szR•Üt
, "Headingohe Rescue Point\n");

917 ià(
·ths
[
iWPT
]->
æags
 & 
W_FL_CAMP
)

918 
	`¥rštf
(
szR•Üt
, "Movingo Camp Spot\n");

920 
	`¥rštf
(
szR•Üt
, "Roaming‡round\n");

923 
	`¥rštf
(
szR•Üt
, "Roaming‡round\n");

926 
TASK_MOVETOPOSITION
:

927 
	`¥rštf
(
szR•Üt
, "Movingo…osition\n");

930 
TASK_FOLLOWUSER
:

931 ià(!
	`FNuÎEÁ
(
m_³ÁT¬g‘EÁ
))

932 
	`¥rštf
(
szR•Üt
, "FŞlowšg %s\n", 
	`STRING
(
m_³ÁT¬g‘EÁ
->
v
.
ÃŠame
));

935 
TASK_WAITFORGO
:

936 
	`¥rštf
(
szR•Üt
, "Waiting for GO!\n");

939 
TASK_CAMP
:

940 
	`¥rštf
(
szR•Üt
, "Camping...\n");

943 
TASK_PLANTBOMB
:

944 
	`¥rštf
(
szR•Üt
, "Plantinghe Bomb!\n");

947 
TASK_DEFUSEBOMB
:

948 
	`¥rštf
(
szR•Üt
, "Defusinghe Bomb!\n");

951 
TASK_ATTACK
:

952 ià(!
	`FNuÎEÁ
(
m_³ÁEÃmy
))

953 
	`¥rštf
(
szR•Üt
, "A‰ackšg %s\n", 
	`STRING
(
m_³ÁEÃmy
->
v
.
ÃŠame
));

956 
TASK_ENEMYHUNT
:

957 ià(!
	`FNuÎEÁ
(
m_³ÁLa¡EÃmy
))

958 
	`¥rštf
(
szR•Üt
, "HuÁšg %s\n", 
	`STRING
(
m_³ÁLa¡EÃmy
->
v
.
ÃŠame
));

961 
TASK_SEEKCOVER
:

962 
	`¥rštf
(
szR•Üt
, "Fleeing from Battle\n");

965 
TASK_HIDE
:

966 
	`¥rštf
(
szR•Üt
, "Hiding from Enemy\n");

970 
	`¥rštf
(
szR•Üt
, "Nothing special here...\n");

974 
	`T—mSayText
(
szR•Üt
);

977 ià(
m_iRadioS–eù
 < 
RADIO_GOGOGO
)

978 
	`FakeCl›ÁCommªd
(
	`ediù
(), "radio1");

979 ià(
m_iRadioS–eù
 < 
RADIO_AFFIRMATIVE
)

981 
m_iRadioS–eù
 -ğ
RADIO_GOGOGO
 - 1;

982 
	`FakeCl›ÁCommªd
(
	`ediù
(), "radio2");

986 
m_iRadioS–eù
 -ğ
RADIO_AFFIRMATIVE
 - 1;

987 
	`FakeCl›ÁCommªd
(
	`ediù
(), "radio3");

991 
	`FakeCl›ÁCommªd
(
	`ediù
(), "m’u£Ëù %d", 
m_iRadioS–eù
);

994 
g_rgfLa¡RadioTime
[
‹am
] = 
gpGlob®s
->
time
;

997 
	`PushMes§geQueue
(
MSG_CS_RADIO
);

1001 
MSG_CS_SAY
:

1002 
	`SayText
(
m_szMiscSŒšgs
);

1006 
MSG_CS_TEAMSAY
:

1007 
	`T—mSayText
(
m_szMiscSŒšgs
);

1010 
MSG_CS_IDLE
:

1014 
	}
}

1020 
boŞ
 
	gCBa£BÙ
::
	$IsRe¡riùedByAMX
(
iId
)

1022 cÚ¡ *
¡rRe¡W—p
 = 
	`CVAR_GET_STRING
("pb_restrweapons");

1023 cÚ¡ *
¡rRe¡Equi
 = 
	`CVAR_GET_STRING
("pb_restrequipammo");

1024 ià((1 << 
iId
è& (
WEAPON_PRIMARY
 | 
WEAPON_SECONDARY
 | 
WEAPON_SHIELDGUN
))

1026 ià(
¡rRe¡W—p
 =ğ
NULL
 || *strRestWeap == '\0')

1027  
FALSE
;

1029 
šdex
[] = {4, 25, 20, -1, 8, -1, 12, 19, -1, 5, 6, 13, 23, 17, 18,

1032 
i
 = 
šdex
[
iId
 - 1], 
Ëngth
 = 
	`¡¾’
(
¡rRe¡W—p
);

1033 ià(
i
 < 0 || i >ğ
Ëngth
)

1034  
FALSE
;

1035  (
¡rRe¡W—p
[
i
] != '0');

1039 ià(
¡rRe¡Equi
 =ğ
NULL
 || *strRestEqui == '\0')

1040  
FALSE
;

1042 
šdex
[] = {-1, -1, -1, 3, -1, -1, -1, -1, 4, -1, -1, -1, -1, -1, -1,

1046 
i
 = 
šdex
[
iId
 - 1], 
Ëngth
 = 
	`¡¾’
(
¡rRe¡Equi
);

1047 ià(
i
 < 0 || i >ğ
Ëngth
)

1048  
FALSE
;

1049  (
¡rRe¡Equi
[
i
] != '0');

1052  
FALSE
;

1053 
	}
}

1059 
	gCBa£BÙ
::
	$BuyStuff
()

1061 
m_æNextBuyTime
 = 
gpGlob®s
->
time
;

1063 
bÙ_w—pÚ_£Ëù_t
 *
pS–eùedW—pÚ
;

1065 
iCouÁ
 = 0;

1066 
iFoundW—pÚs
 = 0;

1067 
iBuyChoiûs
[
NUM_WEAPONS
];

1070 * 
±rW—pÚTab
 = 
±rW—pÚP»fs
[
m_ucP”sÚ®™y
] + 
NUM_WEAPONS
;

1072 
‹am
 = 
	`UTIL_G‘T—m
(
	`ediù
());

1074 
m_iBuyCouÁ
)

1077 ià(
³v
->
¬mÜv®ue
 < 
	`RANDOM_LONG
(50, 80è&& 
m_iAccouÁ
 > 1000)

1080 ià(
m_iAccouÁ
 > 3000)

1081 
	`FakeCl›ÁCommªd
(
	`ediù
(), "buyequip;menuselect 2");

1083 
	`FakeCl›ÁCommªd
(
	`ediù
(), "buyequip;menuselect 1");

1088 ià(!
	`HasPrim¬yW—pÚ
(è&& !
	`HasSh›ld
())

1092 
±rW—pÚTab
--;

1094 
	`as£¹
(*
±rW—pÚTab
 > -1);

1095 
	`as£¹
(*
±rW—pÚTab
 < 
NUM_WEAPONS
);

1097 
pS–eùedW—pÚ
 = &
cs_w—pÚ_£Ëù
[*
±rW—pÚTab
];

1098 
iCouÁ
++;

1100 ià(
pS–eùedW—pÚ
->
iBuyGroup
 == 1)

1104 ià(
	`IsRe¡riùedByAMX
(
pS–eùedW—pÚ
->
iId
))

1108 ià(
g_iM­Ty³
 & 
MAP_AS
)

1110 ià(
pS–eùedW—pÚ
->
iT—mAS
 != 2)

1112 ià(
pS–eùedW—pÚ
->
iT—mAS
 !ğ
‹am
)

1117 ià(!
g_bIsV”siÚ16
 && 
pS–eùedW—pÚ
->
iBuyS–eù
 == -1)

1120 ià(
pS–eùedW—pÚ
->
iT—mSnd¬d
 != 2)

1122 ià(
pS–eùedW—pÚ
->
iT—mSnd¬d
 !ğ
‹am
)

1126 ià(
pS–eùedW—pÚ
->
iPriû
 <ğ
m_iAccouÁ
 - 
	`RANDOM_LONG
(100, 200))

1127 
iBuyChoiûs
[
iFoundW—pÚs
++] = *
±rW—pÚTab
;

1128 } 
iCouÁ
 < 
NUM_WEAPONS
 && 
iFoundW—pÚs
 < 4);

1131 ià(
iFoundW—pÚs
 > 0)

1133 
iCho£nW—pÚ
;

1135 ià(
iFoundW—pÚs
 > 1)

1136 
iCho£nW—pÚ
 = 
iBuyChoiûs
[
	`RANDOM_LONG
(0, 
iFoundW—pÚs
 - 1)];

1138 
iCho£nW—pÚ
 = 
iBuyChoiûs
[
iFoundW—pÚs
 - 1];

1139 
pS–eùedW—pÚ
 = &
cs_w—pÚ_£Ëù
[
iCho£nW—pÚ
];

1142 
pS–eùedW—pÚ
 = 
NULL
;

1144 ià(
pS–eùedW—pÚ
)

1146 
m_æNextBuyTime
 = 
gpGlob®s
->
time
 + 
	`RANDOM_FLOAT
(0.2, 0.6);

1148 
	`FakeCl›ÁCommªd
(
	`ediù
(), "buy;m’u£Ëù %d", 
pS–eùedW—pÚ
->
iBuyGroup
);

1149 ià(
g_bIsV”siÚ16
)

1151 ià(
	`UTIL_G‘T—m
(
	`ediù
()è=ğ
TEAM_TERRORIST
)

1152 
	`FakeCl›ÁCommªd
(
	`ediù
(), "m’u£Ëù %d", 
pS–eùedW—pÚ
->
iNewBuyS–eùT
);

1154 
	`FakeCl›ÁCommªd
(
	`ediù
(), "m’u£Ëù %d", 
pS–eùedW—pÚ
->
iNewBuyS–eùCT
);

1157 
	`FakeCl›ÁCommªd
(
	`ediù
(), "m’u£Ëù %d", 
pS–eùedW—pÚ
->
iBuyS–eù
);

1161 
	`FakeCl›ÁCommªd
(
	`ediù
(), "buy;menuselect 6");

1165 ià((
m_iAccouÁ
 > 1200 || !
	`HasPrim¬yW—pÚ
()) &&

1166 (
³v
->
w—pÚs
 & ((1<<
WEAPON_USP
è| (1<<
WEAPON_GLOCK18
))))

1170 
±rW—pÚTab
--;

1172 
	`as£¹
(*
±rW—pÚTab
 > -1);

1173 
	`as£¹
(*
±rW—pÚTab
 < 
NUM_WEAPONS
);

1175 
pS–eùedW—pÚ
 = &
cs_w—pÚ_£Ëù
[*
±rW—pÚTab
];

1176 
iCouÁ
++;

1178 ià(
pS–eùedW—pÚ
->
iBuyGroup
 != 1)

1182 ià(
	`IsRe¡riùedByAMX
(
pS–eùedW—pÚ
->
iId
))

1186 ià(
g_iM­Ty³
 & 
MAP_AS
)

1188 ià(
pS–eùedW—pÚ
->
iT—mAS
 != 2)

1190 ià(
pS–eùedW—pÚ
->
iT—mAS
 !ğ
‹am
)

1195 ià(!
g_bIsV”siÚ16
 && 
pS–eùedW—pÚ
->
iBuyS–eù
 == -1)

1198 ià(
pS–eùedW—pÚ
->
iT—mSnd¬d
 != 2)

1200 ià(
pS–eùedW—pÚ
->
iT—mSnd¬d
 !ğ
‹am
)

1204 ià(
pS–eùedW—pÚ
->
iPriû
 <ğ
m_iAccouÁ
 - 
	`RANDOM_LONG
(100, 200))

1205 
iBuyChoiûs
[
iFoundW—pÚs
++] = *
±rW—pÚTab
;

1206 } 
iCouÁ
 < 
NUM_WEAPONS
 && 
iFoundW—pÚs
 < 4);

1209 ià(
iFoundW—pÚs
 > 0)

1211 
iCho£nW—pÚ
;

1213 ià(
iFoundW—pÚs
 > 1)

1214 
iCho£nW—pÚ
 = 
iBuyChoiûs
[
	`RANDOM_LONG
(0, 
iFoundW—pÚs
 - 1)];

1216 
iCho£nW—pÚ
 = 
iBuyChoiûs
[
iFoundW—pÚs
 - 1];

1217 
pS–eùedW—pÚ
 = &
cs_w—pÚ_£Ëù
[
iCho£nW—pÚ
];

1220 
pS–eùedW—pÚ
 = 
NULL
;

1222 ià(
pS–eùedW—pÚ
)

1224 
	`FakeCl›ÁCommªd
(
	`ediù
(), "buy;m’u£Ëù %d", 
pS–eùedW—pÚ
->
iBuyGroup
);

1225 ià(
g_bIsV”siÚ16
)

1227 ià(
	`UTIL_G‘T—m
(
	`ediù
()è=ğ
TEAM_TERRORIST
)

1228 
	`FakeCl›ÁCommªd
(
	`ediù
(), "m’u£Ëù %d", 
pS–eùedW—pÚ
->
iNewBuyS–eùT
);

1230 
	`FakeCl›ÁCommªd
(
	`ediù
(), "m’u£Ëù %d", 
pS–eùedW—pÚ
->
iNewBuyS–eùCT
);

1233 
	`FakeCl›ÁCommªd
(
	`ediù
(), "m’u£Ëù %d", 
pS–eùedW—pÚ
->
iBuyS–eù
);

1237 
	`FakeCl›ÁCommªd
(
	`ediù
(), "buy;menuselect 7");

1241 ià(
	`RANDOM_LONG
(1, 100è< 75 && 
m_iAccouÁ
 >= 300 &&

1242 !(
³v
->
w—pÚs
 & 
WEAPON_HEGRENADE
è&& !
	`IsRe¡riùedByAMX
(WEAPON_HEGRENADE))

1245 
	`FakeCl›ÁCommªd
(
	`ediù
(), "buyequip");

1246 
	`FakeCl›ÁCommªd
(
	`ediù
(), "menuselect 4");

1249 ià(
	`RANDOM_LONG
(1, 100è< 50 && 
m_iAccouÁ
 >= 200 &&

1250 !(
³v
->
w—pÚs
 & 
WEAPON_FLASHBANG
è&& !
	`IsRe¡riùedByAMX
(WEAPON_FLASHBANG))

1253 
	`FakeCl›ÁCommªd
(
	`ediù
(), "buyequip");

1254 
	`FakeCl›ÁCommªd
(
	`ediù
(), "menuselect 3");

1257 ià(
	`RANDOM_LONG
(1, 100è< 30 && 
m_iAccouÁ
 >= 300 &&

1258 !(
³v
->
w—pÚs
 & 
WEAPON_SMOKEGRENADE
è&& !
	`IsRe¡riùedByAMX
(WEAPON_SMOKEGRENADE))

1261 
	`FakeCl›ÁCommªd
(
	`ediù
(), "buyequip");

1262 
	`FakeCl›ÁCommªd
(
	`ediù
(), "menuselect 5");

1267 ià((
g_iM­Ty³
 & 
MAP_DE
è&& 
	`UTIL_G‘T—m
(
	`ediù
()è=ğ
TEAM_CT
 &&

1268 
	`RANDOM_LONG
(1, 100è< 50 && 
m_iAccouÁ
 > 200 && !
	`IsRe¡riùedByAMX
(
WEAPON_DEFUSER
))

1270 ià(
g_bIsV”siÚ16
)

1271 
	`FakeCl›ÁCommªd
(
	`ediù
(), "defuser");

1273 
	`FakeCl›ÁCommªd
(
	`ediù
(), "buyequip;menuselect 6");

1277 ià(!
g_bJasÚMode
)

1278 
	`S–eùBe¡W—pÚ
();

1283 
m_iBuyCouÁ
++;

1284 
	`PushMes§geQueue
(
MSG_CS_BUY
);

1285 
	}
}

1302 
šlše
 
bÙsk_t
* 
	$şampdesœe
(
bÙsk_t
* 
t1
, 
fMš
, 
fMax
)

1304 ià(
t1
->
fDesœe
 < 
fMš
)

1305 
t1
->
fDesœe
 = 
fMš
;

1306 ià(
t1
->
fDesœe
 > 
fMax
)

1307 
t1
->
fDesœe
 = 
fMax
;

1308  
t1
;

1309 
	}
}

1315 
šlše
 
bÙsk_t
* 
	$maxdesœe
(
bÙsk_t
* 
t1
, bÙsk_ˆ*
t2
)

1317 ià(
t1
->
fDesœe
 > 
t2
->fDesire)

1318  
t1
;

1320  
t2
;

1321 
	}
}

1327 
šlše
 
bÙsk_t
* 
	$subsumedesœe
(
bÙsk_t
* 
t1
, bÙsk_ˆ*
t2
)

1329 ià(
t1
->
fDesœe
 > 0)

1330  
t1
;

1332  
t2
;

1333 
	}
}

1340 
šlše
 
bÙsk_t
* 
	$th»shŞddesœe
(
bÙsk_t
* 
t1
, 
t
, 
d
)

1342 ià(
t1
->
fDesœe
 < 
t
)

1343 
t1
->
fDesœe
 = 
d
;

1344  
t1
;

1345 
	}
}

1351 
šlše
 
	$hy¡”esisdesœe
(
x
, 
mš
, 
max
, 
Şdv®
)

1353 ià(
x
 <ğ
mš
 || x >ğ
max
)

1354 
Şdv®
 = 
x
;

1355  
Şdv®
;

1356 
	}
}

1363 
	gCBa£BÙ
::
	$S‘CÚd™iÚs
()

1365 
f_di¡ªû
;

1366 
bÙ_‹am
 = 
	`UTIL_G‘T—m
(
	`ediù
());

1368 
m_iAimFÏgs
 = 0;

1372 ià(
m_æNextEmÙiÚUpd©e
 < 
gpGlob®s
->
time
)

1374 ià(
m_æAg»ssiÚLev–
 > 
m_æBa£Ag»ssiÚLev–
)

1375 
m_æAg»ssiÚLev–
 -= 0.05;

1377 
m_æAg»ssiÚLev–
 += 0.05;

1378 ià(
m_æF—rLev–
 > 
m_æBa£F—rLev–
)

1379 
m_æF—rLev–
 -= 0.05;

1381 
m_æF—rLev–
 += 0.05;

1383 ià(
m_æAg»ssiÚLev–
 < 0.0)

1384 
m_æAg»ssiÚLev–
 = 0.0;

1385 ià(
m_æF—rLev–
 < 0.0)

1386 
m_æF—rLev–
 = 0.0;

1388 
m_æNextEmÙiÚUpd©e
 = 
gpGlob®s
->
time
 + 0.5;

1392 ià(
	`G‘EÃmy
())

1393 
m_iS‹s
 |ğ
STATE_SEEINGENEMY
;

1396 
m_iS‹s
 &ğ~
STATE_SEEINGENEMY
;

1397 
m_³ÁEÃmy
 = 
NULL
;

1401 ià(!
	`FNuÎEÁ
(
m_³ÁLa¡Viùim
))

1403 ià(
	`UTIL_G‘T—m
(
m_³ÁLa¡Viùim
è!ğ
bÙ_‹am
)

1406 
m_æAg»ssiÚLev–
 += 0.1;

1407 ià(
m_æAg»ssiÚLev–
 > 1.0)

1408 
m_æAg»ssiÚLev–
 = 1.0;

1410 ià(
g_bBÙCh©
 && 
	`RANDOM_LONG
(1, 100) > 50)

1412 
STRINGNODE
 *
pTempNode
;

1413 
pTempNode
 = 
	`G‘NodeSŒšg
(
pKlCh©
, 
	`RANDOM_LONG
(0, 
iNumKlCh©s
 - 1));

1415 ià(
pTempNode
 &&…TempNode->
pszSŒšg
)

1417 
	`P»·»Ch©Mes§ge
(
pTempNode
->
pszSŒšg
);

1418 
	`PushMes§geQueue
(
MSG_CS_SAY
);

1422 ià(
	`RANDOM_LONG
(1,100) > 75)

1423 
	`PÏyRadioMes§ge
(
RADIO_ENEMYDOWN
);

1425 
m_³ÁLa¡Viùim
 = 
NULL
;

1429 ià(!
	`FNuÎEÁ
(
m_³ÁLa¡EÃmy
))

1431 ià(!
m_³ÁLa¡EÃmy
->
ä“
)

1433 ià(!
	`IsAlive
(
m_³ÁLa¡EÃmy
è&& 
m_æShoÙAtD—dTime
 < 
gpGlob®s
->
time
)

1435 
m_vecLa¡EÃmyOrigš
 = 
g_vecZ”o
;

1436 
m_³ÁLa¡EÃmy
 = 
NULL
;

1441 
m_vecLa¡EÃmyOrigš
 = 
g_vecZ”o
;

1442 
m_³ÁLa¡EÃmy
 = 
NULL
;

1447 
m_³ÁLa¡EÃmy
 = 
NULL
;

1448 
m_vecLa¡EÃmyOrigš
 = 
g_vecZ”o
;

1459 ià(
m_æSoundUpd©eTime
 <ğ
gpGlob®s
->
time
 && 
	`FNuÎEÁ
(
m_³ÁEÃmy
è&& 
m_æBlšdTime
 < gpGlobals->time)

1461 
šd
;

1462 
ediù_t
 *
pPÏy”
;

1463 
h—¹ab_t
 
Di¡Tab
[32];

1465 
TabIndex
 = 0;

1466 
VeùÜ
 
v_di¡ªû
;

1467 
fDi¡ªû
;

1468 
m_æSoundUpd©eTime
 = 
gpGlob®s
->
time
 + 
g_fTimeSoundUpd©e
;

1472 
fS’s™iv™y
 = 
³v
->
v–oc™y
.
	`L’gth2D
();

1473 ià(
fS’s™iv™y
 != 0.0)

1475 
fS’s™iv™y
 /= 240.0;

1476 
fS’s™iv™y
 = -fSensitivity;

1478 
fS’s™iv™y
 += 1.5;

1481 ià(
³v
->
Şdbu‰Ús
 & 
IN_ATTACK
)

1482 
fS’s™iv™y
 *= 0.5;

1486 
VeùÜ
 
vecOrg
 = 
	`E¬Pos™iÚ
();

1487 iàĞ
³v
->
æags
 & 
FL_DUCKING
 )

1488 
vecOrg
 = vecOrg + ( 
VEC_HULL_MIN
 - 
VEC_DUCK_HULL_MIN
 );

1490 *
·s
 = 
	`ENGINE_SET_PAS
((*)&
vecOrg
);

1493 
šd
 = 0; ind < 
gpGlob®s
->
maxCl›Ás
; ind++)

1495 ià(
Th»©Tab
[
šd
].
IsU£d
 =ğ
FALSE
 || Th»©Tab[šd].
IsAlive
 == FALSE ||

1496 
Th»©Tab
[
šd
].
iT—m
 =ğ
bÙ_‹am
 || Th»©Tab[šd].
pEdiù
 =ğ
	`ediù
() ||

1497 
Th»©Tab
[
šd
].
fTimeSoundLa¡šg
 < 
gpGlob®s
->
time
)

1500 
pPÏy”
 = 
Th»©Tab
[
šd
].
pEdiù
;

1507 ià(!
	`ENGINE_CHECK_VISIBILITY
(
pPÏy”
, 
·s
))

1510 
fDi¡ªû
 = (
Th»©Tab
[
šd
].
vecSoundPos™iÚ
 - 
³v
->
Üigš
).
	`L’gth
();

1512 ià(
fDi¡ªû
 > 
Th»©Tab
[
šd
].
fH—ršgDi¡ªû
)

1515 
Di¡Tab
[
TabIndex
].
di¡ªû
 = 
fDi¡ªû
;

1516 
Di¡Tab
[
TabIndex
].
pEdiù
 = 
pPÏy”
;

1517 
TabIndex
++;

1521 ià(
TabIndex
 != 0)

1523 
m_æH—rdSoundTime
 = 
gpGlob®s
->
time
;

1526 ià(
TabIndex
 > 1)

1529 
h—¹ab_t
 
‹m±ab
;

1530 
boŞ
 
bSÜtšg
;

1533 
bSÜtšg
 = 
FALSE
;

1534 
j
 = 0; j < 
TabIndex
 - 1; j++)

1536 ià(
Di¡Tab
[
j
].
di¡ªû
 > DistTab[j + 1].distance)

1538 
‹m±ab
 = 
Di¡Tab
[
j
];

1539 
Di¡Tab
[
j
] = DistTab[j+1];

1540 
Di¡Tab
[
j
 + 1] = 
‹m±ab
;

1541 
bSÜtšg
 = 
TRUE
;

1544 } 
bSÜtšg
);

1548 ià((
³v
->
æags
 & (
FL_ONGROUND
 | 
FL_PARTIALGROUND
)) &&

1549 
m_iCu¼’tW—pÚ
 !ğ
WEAPON_C4
 &&

1550 
m_iCu¼’tW—pÚ
 !ğ
WEAPON_HEGRENADE
 &&

1551 
m_iCu¼’tW—pÚ
 !ğ
WEAPON_SMOKEGRENADE
 &&

1552 
m_iCu¼’tW—pÚ
 !ğ
WEAPON_FLASHBANG
 && !
g_bJasÚMode
 &&

1553 
m_æShoÙTime
 < 
gpGlob®s
->
time
 - 5.0)

1554 
	`S–eùBe¡W—pÚ
();

1556 
m_iS‹s
 |ğ
STATE_HEARINGENEMY
;

1557 
pPÏy”
 = 
Di¡Tab
[0].
pEdiù
;

1560 ià(
m_vecLa¡EÃmyOrigš
 =ğ
g_vecZ”o
)

1562 
m_³ÁLa¡EÃmy
 = 
pPÏy”
;

1563 
m_vecLa¡EÃmyOrigš
 = 
pPÏy”
->
v
.
Üigš
;

1567 ià(
pPÏy”
 =ğ
m_³ÁLa¡EÃmy
)

1570 ià(
m_iS‹s
 & 
STATE_SEEINGENEMY
)

1571 
’dh—ršg
;

1572 
m_vecLa¡EÃmyOrigš
 = 
pPÏy”
->
v
.
Üigš
;

1577 
f_di¡ªû
 = (
m_vecLa¡EÃmyOrigš
 - 
³v
->
Üigš
).
	`L’gth
();

1578 ià(
f_di¡ªû
 > (
pPÏy”
->
v
.
Üigš
 - 
³v
->Üigš).
	`L’gth
()

1579 && 
m_æS“EÃmyTime
 + 2.0 < 
gpGlob®s
->
time
)

1581 
m_³ÁLa¡EÃmy
 = 
pPÏy”
;

1582 
m_vecLa¡EÃmyOrigš
 = 
pPÏy”
->
v
.
Üigš
;

1585 
’dh—ršg
;

1589 
cH™
;

1590 
VeùÜ
 
vecVisPos
;

1593 ià(
	`FBoxVisibË
(
	`ediù
(), 
pPÏy”
, &
vecVisPos
, &
cH™
))

1595 
m_³ÁEÃmy
 = 
pPÏy”
;

1596 
m_³ÁLa¡EÃmy
 = 
pPÏy”
;

1597 
m_vecLa¡EÃmyOrigš
 = 
vecVisPos
;

1598 
m_ucVisib™y
 = 
cH™
;

1599 
m_iS‹s
 |ğ
STATE_SEEINGENEMY
;

1600 
m_æS“EÃmyTime
 = 
gpGlob®s
->
time
;

1604 ià(
m_³ÁLa¡EÃmy
 =ğ
pPÏy”
 &&

1605 
m_æS“EÃmyTime
 + 3.0 > 
gpGlob®s
->
time
)

1607 
iShoÙThruF»q
 = 
BÙAimTab
[
m_iSkl
 / 20].
iH—rdShoÙThruProb
;

1608 ià(
g_bShoÙThruW®ls
 && 
	`RANDOM_LONG
(1,100è< 
iShoÙThruF»q
)

1610 ià(
	`IsShoÙabËThruOb¡aşe
(
pPÏy”
->
v
.
Üigš
))

1612 
m_³ÁEÃmy
 = 
pPÏy”
;

1613 
m_³ÁLa¡EÃmy
 = 
pPÏy”
;

1614 
m_vecLa¡EÃmyOrigš
 = 
pPÏy”
->
v
.
Üigš
;

1615 
m_iS‹s
 |ğ
STATE_SEEINGENEMY
;

1616 
m_iS‹s
 |ğ
STATE_SUSPECTENEMY
;

1617 
m_æS“EÃmyTime
 = 
gpGlob®s
->
time
;

1625 
m_iS‹s
 &ğ~
STATE_HEARINGENEMY
;

1627 
’dh—ršg
:

1628 ià(
	`FNuÎEÁ
(
m_³ÁEÃmy
è&& !FNuÎEÁ(
m_³ÁLa¡EÃmy
))

1630 
m_iAimFÏgs
 |ğ
AIM_PREDICTPATH
;

1631 ià(
	`EÁ™yIsVisibË
(
m_vecLa¡EÃmyOrigš
))

1632 
m_iAimFÏgs
 |ğ
AIM_LASTENEMY
;

1636 ià(
m_æG»ÇdeCheckTime
 < 
gpGlob®s
->
time
 && !
m_bUsšgG»Çde
 && !
m_bIsR–ßdšg
 &&

1637 
	`Cu¼’tTask
()->
iTask
 !ğ
TASK_PLANTBOMB
)

1640 
m_æG»ÇdeCheckTime
 = 
gpGlob®s
->
time
 + 
g_fTimeG»ÇdeUpd©e
;

1642 ià(!
	`FNuÎEÁ
(
m_³ÁLa¡EÃmy
è&& 
	`IsAlive
(m_³ÁLa¡EÃmyè&& 
	`RANDOM_LONG
(1, 100) < 30)

1645 
iG»ÇdeTy³
 = 
	`CheckG»Çdes
();

1648 ià(
iG»ÇdeTy³
 == -1)

1650 
m_æG»ÇdeCheckTime
 = 
gpGlob®s
->
time
 + 9999.0;

1651 
m_iS‹s
 &ğ~(
STATE_THROWHEGREN
 | 
STATE_THROWFLASHBANG
 | 
STATE_THROWSMOKEGREN
);

1655 
ediù_t
 *
pEÃmy
 = 
m_³ÁLa¡EÃmy
;

1656 
f_di¡ªû
 = (
m_vecLa¡EÃmyOrigš
 - 
³v
->
Üigš
).
	`L’gth2D
();

1659 iàĞ!(
pEÃmy
->
v
.
æags
 & 
FL_ONGROUND
 ) &&…EÃmy->v.
w©”Ëv–
 =ğ0 && 
m_vecLa¡EÃmyOrigš
.
z
 > 
³v
->
absmax
.z )

1660 
f_di¡ªû
 = 9999;

1663 ià(
pEÃmy
->
v
.
Üigš
.
z
 > 
³v
->origin.z + 500.0)

1664 
f_di¡ªû
 = 9999;

1667 ià(
f_di¡ªû
 > 400 && f_distance < 1200)

1669 
VeùÜ
 
v_’emypos
;

1670 
VeùÜ
 
vecSourû
;

1671 
VeùÜ
 
v_de¡
;

1672 
T¿ûResuÉ
 
Œ
;

1673 
boŞ
 
bThrowG»Çde
 = 
TRUE
;

1674 
iThrowIndex
;

1675 
VeùÜ
 
vecP»diù
;

1676 
rgi_WaypoštTab
[4];

1677 
iIndexCouÁ
;

1678 
fRadius
;

1681 
iG»ÇdeTy³
)

1683 
WEAPON_HEGRENADE
:

1684 ià(
	`NumT—mm©esN—rPos
(
m_³ÁLa¡EÃmy
->
v
.
Üigš
, 256) > 0)

1685 
bThrowG»Çde
 = 
FALSE
;

1688 
vecP»diù
 = 
m_³ÁLa¡EÃmy
->
v
.
v–oc™y
 * 0.5;

1689 
vecP»diù
.
z
 = 0.0;

1690 
vecP»diù
 = vecP»diù + 
m_³ÁLa¡EÃmy
->
v
.
Üigš
;

1691 
fRadius
 = 
m_³ÁLa¡EÃmy
->
v
.
v–oc™y
.
	`L’gth2D
();

1693 ià(
fRadius
 < 128)

1694 
fRadius
 = 128;

1696 
iIndexCouÁ
 = 4;

1697 
	`WaypoštFšdInRadius
(
vecP»diù
, 
fRadius
, 
rgi_WaypoštTab
, &
iIndexCouÁ
);

1699 
iIndexCouÁ
 > -1)

1701 
bThrowG»Çde
 = 
TRUE
;

1702 
m_vecThrow
 = 
·ths
[
rgi_WaypoštTab
[
iIndexCouÁ
--]]->
Üigš
;

1704 
vecSourû
 = 
	`VecCheckThrow
(
³v
, 
	`G‘GunPos™iÚ
(), 
m_vecThrow
, 400, 0.55);

1705 ià(
	`L’gthSqu¬ed
(
vecSourû
) < 100)

1706 
vecSourû
 = 
	`VecCheckToss
(
³v
, 
	`G‘GunPos™iÚ
(), 
m_vecThrow
, 0.55);

1708 ià(
vecSourû
 =ğ
g_vecZ”o
)

1709 
bThrowG»Çde
 = 
FALSE
;

1716 ià(
bThrowG»Çde
)

1717 
m_iS‹s
 |ğ
STATE_THROWHEGREN
;

1719 
m_iS‹s
 &ğ~
STATE_THROWHEGREN
;

1722 
WEAPON_FLASHBANG
:

1723 
vecP»diù
 = 
m_³ÁLa¡EÃmy
->
v
.
v–oc™y
 * 0.5;

1724 
vecP»diù
.
z
 = 0.0;

1725 
vecP»diù
 = vecP»diù + 
m_³ÁLa¡EÃmy
->
v
.
Üigš
;

1726 
iThrowIndex
 = 
	`WaypoštFšdN—»¡
(
vecP»diù
);

1727 
m_vecThrow
 = 
·ths
[
iThrowIndex
]->
Üigš
;

1728 ià(
	`NumT—mm©esN—rPos
(
m_vecThrow
, 256) > 0)

1729 
bThrowG»Çde
 = 
FALSE
;

1730 ià(
bThrowG»Çde
)

1732 
vecSourû
 = 
	`VecCheckThrow
(
³v
, 
	`G‘GunPos™iÚ
(), 
m_vecThrow
, 400, 0.55);

1733 ià(
	`L’gthSqu¬ed
(
vecSourû
) < 100)

1734 
vecSourû
 = 
	`VecCheckToss
(
³v
, 
	`G‘GunPos™iÚ
(), 
m_vecThrow
, 0.55);

1736 ià(
vecSourû
 =ğ
g_vecZ”o
)

1737 
bThrowG»Çde
 = 
FALSE
;

1739 ià(
bThrowG»Çde
)

1740 
m_iS‹s
 |ğ
STATE_THROWFLASHBANG
;

1742 
m_iS‹s
 &ğ~
STATE_THROWFLASHBANG
;

1745 
WEAPON_SMOKEGRENADE
:

1747 ià(
bThrowG»Çde
 && !
	`FNuÎEÁ
(
m_³ÁEÃmy
))

1749 ià(
	`G‘ShoÙšgCÚeDevŸtiÚ
(
m_³ÁEÃmy
, &
³v
->
Üigš
) >= 0.9)

1750 
bThrowG»Çde
 = 
FALSE
;

1753 ià(
bThrowG»Çde
)

1754 
m_iS‹s
 |ğ
STATE_THROWSMOKEGREN
;

1756 
m_iS‹s
 &ğ~
STATE_THROWSMOKEGREN
;

1760 
bÙsk_t
 
TempTask
 = {
NULL
, NULL, 
TASK_THROWHEGRENADE
, 
TASKPRI_THROWGRENADE
, -1,

1761 
gpGlob®s
->
time
 + 1.2, 
FALSE
};

1763 ià(
m_iS‹s
 & 
STATE_THROWHEGREN
)

1764 
	`S¹Task
(&
TempTask
);

1765 ià(
m_iS‹s
 & 
STATE_THROWFLASHBANG
)

1767 
TempTask
.
iTask
 = 
TASK_THROWFLASHBANG
;

1768 
	`S¹Task
(&
TempTask
);

1770 ià(
m_iS‹s
 & 
STATE_THROWSMOKEGREN
)

1772 
TempTask
.
iTask
 = 
TASK_THROWSMOKEGRENADE
;

1773 
	`S¹Task
(&
TempTask
);

1777 
m_iS‹s
 &ğ~(
STATE_THROWHEGREN
 | 
STATE_THROWFLASHBANG
 | 
STATE_THROWSMOKEGREN
);

1782 
m_iS‹s
 &ğ~(
STATE_THROWHEGREN
 | 
STATE_THROWFLASHBANG
 | 
STATE_THROWSMOKEGREN
);

1785 ià(
m_æI‹mCheckTime
 < 
gpGlob®s
->
time
 || !
	`FNuÎEÁ
(
m_³ÁPickupI‹m
))

1787 
m_æI‹mCheckTime
 = 
gpGlob®s
->
time
 + 
g_fTimePickupUpd©e
;

1788 
	`FšdI‹m
();

1791 
fTempF—r
 = 
m_æF—rLev–
;

1792 
fTempAg»ssiÚ
 = 
m_æAg»ssiÚLev–
;

1795 
iFr›ndlyNum
 = 0;

1797 ià(
m_vecLa¡EÃmyOrigš
 !ğ
g_vecZ”o
)

1798 
iFr›ndlyNum
 = 
	`NumT—mm©esN—rPos
(
³v
->
Üigš
, 300è- 
	`NumEÃm›sN—rPos
(
m_vecLa¡EÃmyOrigš
, 500);

1800 ià(
iFr›ndlyNum
 > 0)

1801 
fTempF—r
 = fTempFear * 0.5;

1805 ià(
	`U£sSn”
())

1807 
fTempF—r
 = fTempFear * 1.5;

1808 
fTempAg»ssiÚ
 = fTempAgression * 0.5;

1814 
	`Cu¼’tTask
();

1817 ià(!
	`FNuÎEÁ
(
m_³ÁPickupI‹m
))

1819 
m_iS‹s
 |ğ
STATE_PICKUPITEM
;

1821 ià(
m_iPickupTy³
 =ğ
PICKUP_BUTTON
)

1822 
skF‹rs
[
TASK_PICKUPITEM
].
fDesœe
 = 50;

1825 
ediù_t
 *
pI‹m
 = 
m_³ÁPickupI‹m
;

1826 
VeùÜ
 
vecPickme
;

1828 ià(
	`¡ºcmp
("func_", 
	`STRING
(
pI‹m
->
v
.
şas¢ame
), 5) == 0)

1829 
vecPickme
 = 
	`VecBMod–Origš
(
pI‹m
);

1831 
vecPickme
 = 
pI‹m
->
v
.
Üigš
;

1833 
f_di¡ªû
 = (500 - (
vecPickme
 - 
³v
->
Üigš
).
	`L’gth
()) / 5;

1835 ià(
f_di¡ªû
 > 50)

1836 
f_di¡ªû
 = 50;

1838 
skF‹rs
[
TASK_PICKUPITEM
].
fDesœe
 = 
f_di¡ªû
;

1843 
m_³ÁPickupI‹m
 = 
NULL
;

1844 
m_iS‹s
 &ğ~
STATE_PICKUPITEM
;

1845 
skF‹rs
[
TASK_PICKUPITEM
].
fDesœe
 = 0.0;

1848 
fLev–
;

1851 ià(
m_iS‹s
 & 
STATE_SEEINGENEMY
)

1853 ià(
	`R—ùOnEÃmy
())

1854 
skF‹rs
[
TASK_ATTACK
].
fDesœe
 = 
TASKPRI_ATTACK
;

1856 
skF‹rs
[
TASK_ATTACK
].
fDesœe
 = 0;

1859 
skF‹rs
[
TASK_ATTACK
].
fDesœe
 = 0;

1862 ià(!
	`FNuÎEÁ
(
m_³ÁLa¡EÃmy
))

1864 
f_di¡ªû
 = (
m_vecLa¡EÃmyOrigš
 - 
³v
->
Üigš
).
	`L’gth
();

1867 
fR‘»©Lev–
 = (100 - 
³v
->
h—Éh
è* 
fTempF—r
;

1868 
fTimeS“n
 = 
m_æS“EÃmyTime
 - 
gpGlob®s
->
time
;

1869 
fTimeH—rd
 = 
m_æH—rdSoundTime
 - 
gpGlob®s
->
time
;

1870 
fR©io
;

1872 ià(
fTimeS“n
 > 
fTimeH—rd
)

1874 
fTimeS“n
 += 10.0;

1875 
fR©io
 = 
fTimeS“n
 / 10;

1879 
fTimeH—rd
 += 10.0;

1880 
fR©io
 = 
fTimeH—rd
 / 10;

1883 ià(
g_bBombPÏÁed
)

1884 
fR©io
 /= 3;

1885 ià(
m_bIsVIP
 || 
m_bIsR–ßdšg
)

1886 
fR©io
 *= 2;

1888 
skF‹rs
[
TASK_SEEKCOVER
].
fDesœe
 = 
fR‘»©Lev–
 * 
fR©io
;

1892 ià(
	`FNuÎEÁ
(
m_³ÁEÃmy
è&& 
g_fTimeRoundMid
 < 
gpGlob®s
->
time
 && !
m_bUsšgG»Çde
)

1894 
fLev–
 = 4096.0 - (1.0 - 
fTempAg»ssiÚ
è* 
f_di¡ªû
;

1895 
fLev–
 = 100 * fLevel / 4096.0;

1896 
fLev–
 -ğ
fR‘»©Lev–
;

1897 ià(
fLev–
 > 89)

1898 
fLev–
 = 89;

1899 
skF‹rs
[
TASK_ENEMYHUNT
].
fDesœe
 = 
fLev–
;

1902 
skF‹rs
[
TASK_ENEMYHUNT
].
fDesœe
 = 0;

1906 
skF‹rs
[
TASK_SEEKCOVER
].
fDesœe
 = 0;

1907 
skF‹rs
[
TASK_ENEMYHUNT
].
fDesœe
 = 0;

1911 ià(
m_æBlšdTime
 > 
gpGlob®s
->
time
)

1912 
skF‹rs
[
TASK_BLINDED
].
fDesœe
 = 
TASKPRI_BLINDED
;

1914 
skF‹rs
[
TASK_BLINDED
].
fDesœe
 = 0.0;

1928 
m_æOldComb©Desœe
 = 
	`hy¡”esisdesœe
(
skF‹rs
[
TASK_ATTACK
].
fDesœe
, 40.0, 90.0, m_flOldCombatDesire);

1929 
skF‹rs
[
TASK_ATTACK
].
fDesœe
 = 
m_æOldComb©Desœe
;

1930 
bÙsk_t
 *
±askOfãnsive
 = &
skF‹rs
[
TASK_ATTACK
];

1932 
bÙsk_t
 *
±askPickup
 = &
skF‹rs
[
TASK_PICKUPITEM
];

1935 
bÙsk_t
 *
±askSurvive
 = 
	`th»shŞddesœe
(&
skF‹rs
[
TASK_SEEKCOVER
], 40.0, 0.0);

1936 
±askSurvive
 = 
	`subsumedesœe
(&
skF‹rs
[
TASK_HIDE
] ,…taskSurvive);

1939 
bÙsk_t
 *
pDeçuÉ
 = 
	`th»shŞddesœe
(&
skF‹rs
[
TASK_ENEMYHUNT
], 60.0, 0.0);

1942 
±askOfãnsive
 = 
	`subsumedesœe
ÕskOfãnsive, 
±askPickup
);

1945 
bÙsk_t
 *
pSub1
 = 
	`maxdesœe
(
±askOfãnsive
, 
pDeçuÉ
);

1948 
bÙsk_t
 *
pFš®
 = 
	`maxdesœe
(
±askSurvive
, 
pSub1
);

1950 
pFš®
 = 
	`subsumedesœe
(&
skF‹rs
[
TASK_BLINDED
],…Final);

1952 ià(
m_pTasks
 !ğ
NULL
)

1953 
pFš®
 = 
	`maxdesœe
ÕFš®, 
m_pTasks
);

1955 
	`S¹Task
(
pFš®
);

1956 
	}
}

1959 
	gCBa£BÙ
::
	$Re£tTasks
()

1961 ià(
m_pTasks
 =ğ
NULL
)

1964 
bÙsk_t
 *
pNextTask
 = 
m_pTasks
->pNextTask;

1965 
bÙsk_t
 *
pP»vTask
 = 
m_pTasks
;

1967 
pP»vTask
 !ğ
NULL
)

1969 
pP»vTask
 = 
m_pTasks
->
pP»viousTask
;

1970 
	`ä“
(
m_pTasks
);

1971 
m_pTasks
 = 
pP»vTask
;

1974 
m_pTasks
 = 
pNextTask
;

1975 
pNextTask
 !ğ
NULL
)

1977 
pNextTask
 = 
m_pTasks
->pNextTask;

1978 
	`ä“
(
m_pTasks
);

1979 
m_pTasks
 = 
pNextTask
;

1981 
m_pTasks
 = 
NULL
;

1982 
	}
}

1985 
	gCBa£BÙ
::
	$S¹Task
(
bÙsk_t
 *
pTask
)

1987 ià(
m_pTasks
 !ğ
NULL
)

1989 ià(
m_pTasks
->
iTask
 =ğ
pTask
->iTask)

1991 ià(
m_pTasks
->
fDesœe
 !ğ
pTask
->fDesire)

1992 
m_pTasks
->
fDesœe
 = 
pTask
->fDesire;

1996 
	`D–‘eS—rchNodes
();

1999 
m_æNoCŞlTime
 = 
gpGlob®s
->
time
 + 0.5;

2001 
bÙsk_t
* 
pNewTask
 = (bÙsk_ˆ*)
	`m®loc
((bottask_t));

2002 ià(
pNewTask
 =ğ
NULL
)

2003 
	`T”mš©eOnE¼Ü
("Memory Allocation Error!");

2005 
pNewTask
->
iTask
 = 
pTask
->iTask;

2006 
pNewTask
->
fDesœe
 = 
pTask
->fDesire;

2007 
pNewTask
->
iD©a
 = 
pTask
->iData;

2008 
pNewTask
->
fTime
 = 
pTask
->fTime;

2009 
pNewTask
->
bCªCÚtšue
 = 
pTask
->bCanContinue;

2011 
pNewTask
->
pP»viousTask
 = 
NULL
;

2012 
pNewTask
->
pNextTask
 = 
NULL
;

2014 ià(
m_pTasks
 !ğ
NULL
)

2016 
m_pTasks
->
pNextTask
)

2017 
m_pTasks
 = m_pTasks->
pNextTask
;

2019 
m_pTasks
->
pNextTask
 = 
pNewTask
;

2020 
pNewTask
->
pP»viousTask
 = 
m_pTasks
;

2023 
m_pTasks
 = 
pNewTask
;

2026 ià(
m_bIsL—d”
 && 
pNewTask
->
iTask
 =ğ
TASK_SEEKCOVER
)

2027 
	`CommªdT—m
();

2029 ià(
pNewTask
->
iTask
 =ğ
TASK_CAMP
)

2030 
	`S–eùBe¡W—pÚ
();

2031 
	}
}

2033 
bÙsk_t
 *
	gCBa£BÙ
::
	$Cu¼’tTask
()

2035 ià(
m_pTasks
 =ğ
NULL
)

2037 
bÙsk_t
 
TempTask
 = {
NULL
, NULL, 
TASK_NORMAL
, 
TASKPRI_NORMAL
, -1, 0.0, 
TRUE
};

2038 
	`S¹Task
(&
TempTask
);

2041  
m_pTasks
;

2042 
	}
}

2044 
	gCBa£BÙ
::
	$RemoveC”šTask
(
sk_t
 
iTaskNum
)

2046 ià(
m_pTasks
 =ğ
NULL
)

2049 
bÙsk_t
 *
pTask
 = 
m_pTasks
;

2051 
pTask
->
pP»viousTask
 !ğ
NULL
)

2052 
pTask
 =…Task->
pP»viousTask
;

2054 
bÙsk_t
 *
pNextTask
;

2055 
bÙsk_t
 *
pP»vTask
 = 
NULL
;

2057 
pTask
 !ğ
NULL
)

2059 
pNextTask
 = 
pTask
->pNextTask;

2060 
pP»vTask
 = 
pTask
->
pP»viousTask
;

2062 ià(
pTask
->
iTask
 =ğ
iTaskNum
)

2064 ià(
pP»vTask
 !ğ
NULL
)

2065 
pP»vTask
->
pNextTask
 =…NextTask;

2066 ià(
pNextTask
 !ğ
NULL
)

2067 
pNextTask
->
pP»viousTask
 = 
pP»vTask
;

2068 
	`ä“
 (
pTask
);

2070 
pTask
 = 
pNextTask
;

2072 
m_pTasks
 = 
pP»vTask
;

2073 
	`D–‘eS—rchNodes
();

2074 
	}
}

2079 
	gCBa£BÙ
::
	$TaskCom¶‘e
()

2081 ià(
m_pTasks
 =ğ
NULL
)

2084 
	`D–‘eS—rchNodes
();

2088 
bÙsk_t
* 
pP»vTask
;

2091 
pP»vTask
 = 
m_pTasks
->
pP»viousTask
;

2092 
	`ä“
(
m_pTasks
);

2093 
m_pTasks
 = 
NULL
;

2095 ià(
pP»vTask
 !ğ
NULL
)

2097 
pP»vTask
->
pNextTask
 = 
NULL
;

2098 
m_pTasks
 = 
pP»vTask
;

2101 ià(
m_pTasks
 =ğ
NULL
)

2103 } !
m_pTasks
->
bCªCÚtšue
);

2106 
	`D–‘eS—rchNodes
();

2109 ià(
m_pTasks
)

2111 ià(
m_pTasks
->
iTask
 =ğ
TASK_CAMP
)

2112 
	`S–eùBe¡W—pÚ
();

2114 
	}
}

2116 
boŞ
 
	gCBa£BÙ
::
	$EÃmyIsTh»©
()

2118 ià(
	`FNuÎEÁ
(
m_³ÁEÃmy
è|| (
m_iS‹s
 & 
STATE_SUSPECTENEMY
)

2119 || 
	`Cu¼’tTask
()->
iTask
 =ğ
TASK_SEEKCOVER
)

2120  
FALSE
;

2122 
f_di¡ªû
;

2124 ià(!
	`FNuÎEÁ
(
m_³ÁEÃmy
))

2126 
VeùÜ
 
vDe¡
 = 
m_³ÁEÃmy
->
v
.
Üigš
 - 
³v
->origin;

2127 
f_di¡ªû
 = 
vDe¡
.
	`L’gth
();

2130  
FALSE
;

2133 ià(
	`Cu¼’tTask
()->
iTask
 =ğ
TASK_CAMP
)

2134  
FALSE
;

2137 ià(
f_di¡ªû
 < 256 || 
	`G‘ShoÙšgCÚeDevŸtiÚ
(
m_³ÁEÃmy
, &
³v
->
Üigš
) >= 0.9)

2138  
TRUE
;

2140  
FALSE
;

2141 
	}
}

2147 
boŞ
 
	gCBa£BÙ
::
	$R—ùOnEÃmy
()

2149 ià(
	`EÃmyIsTh»©
())

2151 ià(
m_æEÃmyR—chabËTim”
 < 
gpGlob®s
->
time
)

2153 
iBÙIndex
 = 
	`WaypoštFšdN—»¡
(
³v
->
Üigš
);

2154 
iEÃmyIndex
 = 
	`WaypoštFšdN—»¡
(
m_³ÁEÃmy
->
v
.
Üigš
);

2155 
fLšDi¡
 = (
m_³ÁEÃmy
->
v
.
Üigš
 - 
³v
->Üigš).
	`L’gth
();

2156 
fP©hDi¡
 = 
	`G‘P©hDi¡ªû
(
iBÙIndex
, 
iEÃmyIndex
);

2158 ià(
fP©hDi¡
 - 
fLšDi¡
 > 112)

2159 
m_bEÃmyR—chabË
 = 
FALSE
;

2161 
m_bEÃmyR—chabË
 = 
TRUE
;

2163 
m_æEÃmyR—chabËTim”
 = 
gpGlob®s
->
time
 + 1.0;

2166 ià(
m_bEÃmyR—chabË
)

2169 
m_æW±Time£t
 = 
gpGlob®s
->
time
;

2170  
TRUE
;

2174  
FALSE
;

2175 
	}
}

2180 
boŞ
 
	gCBa£BÙ
::
	$La¡EÃmyVisibË
()

2182 
T¿ûResuÉ
 
Œ
;

2185 
	`UTIL_T¿ûLše
Ğ
	`EyePos™iÚ
(), 
m_vecLa¡EÃmyOrigš
, 
ignÜe_mÚ¡”s
, 
	`ediù
(), &
Œ
 );

2188  (
Œ
.
æF¿ùiÚ
 >= 1.0);

2189 
	}
}

2192 
boŞ
 
	gCBa£BÙ
::
	$La¡EÃmyShoÙabË
()

2194 ià(
	`FNuÎEÁ
(
m_³ÁLa¡EÃmy
))

2195  
FALSE
;

2197 ià(!(
m_iAimFÏgs
 & 
AIM_LASTENEMY
))

2198  
FALSE
;

2201 ià(
	`Cu¼’tTask
()->
iTask
 =ğ
TASK_PAUSE
 || Cu¼’tTask()->iTask =ğ
TASK_CAMP
)

2202  
FALSE
;

2204  (
	`G‘ShoÙšgCÚeDevŸtiÚ
(
	`ediù
(), &
m_vecLa¡EÃmyOrigš
) >= 0.9);

2205 
	}
}

2210 
	gCBa£BÙ
::
	$CheckRadioCommªds
()

2212 
f_di¡ªû
 = (
m_³ÁRadioEÁ™y
->
v
.
Üigš
 - 
³v
->Üigš).
	`L’gth
();

2214 
m_iRadioOrd”
)

2216 
RADIO_FOLLOWME
:

2218 ià(
	`EÁ™yIsVisibË
(
m_³ÁRadioEÁ™y
->
v
.
Üigš
))

2220 ià(
	`FNuÎEÁ
(
m_³ÁT¬g‘EÁ
è&& FNuÎEÁ(
m_³ÁEÃmy
) &&

2221 
	`RANDOM_LONG
(0,100è< (
m_ucP”sÚ®™y
 =ğ
PERSONALITY_DEFENSIVE
 ? 60 : 40))

2223 
iNumFŞlow”s
 = 0;

2225 
i
 = 0; i < 
gpGlob®s
->
maxCl›Ás
; i++)

2227 ià(
g_rgpBÙs
[
i
])

2229 ià(
	`IsAlive
(
g_rgpBÙs
[
i
]->
	`ediù
()))

2231 ià(
g_rgpBÙs
[
i
]->
m_³ÁT¬g‘EÁ
 =ğ
m_³ÁRadioEÁ™y
)

2232 
iNumFŞlow”s
++;

2237 ià(
iNumFŞlow”s
 < 
g_iMaxNumFŞlow
)

2239 
	`PÏyRadioMes§ge
(
RADIO_AFFIRMATIVE
);

2240 
m_³ÁT¬g‘EÁ
 = 
m_³ÁRadioEÁ™y
;

2243 
sk_t
 
iTask
 = 
	`Cu¼’tTask
()->iTask;

2244 ià(
iTask
 =ğ
TASK_PAUSE
 || iTask =ğ
TASK_CAMP
)

2245 
m_pTasks
->
fTime
 = 
gpGlob®s
->
time
;

2247 
bÙsk_t
 
TempTask
 = {
NULL
, NULL, 
TASK_FOLLOWUSER
,

2248 
TASKPRI_FOLLOWUSER
, -1, 0.0, 
TRUE
};

2249 
	`S¹Task
(&
TempTask
);

2252 
	`PÏyRadioMes§ge
(
RADIO_NEGATIVE
);

2255 
	`PÏyRadioMes§ge
(
RADIO_NEGATIVE
);

2259 
RADIO_HOLDPOSITION
:

2260 ià(!
	`FNuÎEÁ
(
m_³ÁT¬g‘EÁ
))

2262 ià(
m_³ÁT¬g‘EÁ
 =ğ
m_³ÁRadioEÁ™y
)

2264 
m_³ÁT¬g‘EÁ
 = 
NULL
;

2265 
	`PÏyRadioMes§ge
(
RADIO_AFFIRMATIVE
);

2266 
m_iCampBu‰Ús
 = 0;

2267 
bÙsk_t
 
TempTask
 = {
NULL
, NULL, 
TASK_PAUSE
, 
TASKPRI_PAUSE
, -1,

2268 
gpGlob®s
->
time
 + 
	`RANDOM_FLOAT
(30.0, 60.0), 
FALSE
};

2269 
	`S¹Task
(&
TempTask
);

2274 
RADIO_TAKINGFIRE
:

2275 ià(
	`FNuÎEÁ
(
m_³ÁT¬g‘EÁ
))

2277 ià(
	`FNuÎEÁ
(
m_³ÁEÃmy
))

2280 
m_æF—rLev–
 -= 0.2;

2281 ià(
m_æF—rLev–
 < 0.0)

2282 
m_æF—rLev–
 = 0.0;

2283 
	`PÏyRadioMes§ge
(
RADIO_AFFIRMATIVE
);

2286 
sk_t
 
iTask
 = 
	`Cu¼’tTask
()->iTask;

2287 ià(
iTask
 =ğ
TASK_PAUSE
 || iTask =ğ
TASK_CAMP
)

2288 
m_pTasks
->
fTime
 = 
gpGlob®s
->
time
;

2290 
m_vecPos™iÚ
 = 
m_³ÁRadioEÁ™y
->
v
.
Üigš
;

2291 
	`D–‘eS—rchNodes
();

2292 
bÙsk_t
 
TempTask
 = {
NULL
, NULL, 
TASK_MOVETOPOSITION
, 
TASKPRI_MOVETOPOSITION
, -1, 0.0, 
TRUE
};

2293 
	`S¹Task
(&
TempTask
);

2296 
	`PÏyRadioMes§ge
(
RADIO_NEGATIVE
);

2300 
RADIO_NEEDBACKUP
:

2301 ià((
	`FNuÎEÁ
(
m_³ÁEÃmy
è&& 
	`EÁ™yIsVisibË
(
m_³ÁRadioEÁ™y
->
v
.
Üigš
)è|| 
f_di¡ªû
 < 2048)

2303 
m_æF—rLev–
 -= 0.1;

2304 ià(
m_æF—rLev–
 < 0.0)

2305 
m_æF—rLev–
 = 0.0;

2306 
	`PÏyRadioMes§ge
(
RADIO_AFFIRMATIVE
);

2309 
sk_t
 
iTask
 = 
	`Cu¼’tTask
()->iTask;

2310 ià(
iTask
 =ğ
TASK_PAUSE
 || iTask =ğ
TASK_CAMP
)

2311 
m_pTasks
->
fTime
 = 
gpGlob®s
->
time
;

2313 
m_vecPos™iÚ
 = 
m_³ÁRadioEÁ™y
->
v
.
Üigš
;

2315 
iIndex
 = 
	`WaypoštFšdN—»¡
(
m_vecPos™iÚ
);

2317 ià(
iIndex
 != -1)

2320 
i
 = 0; i < 8; i++)

2322 
iRªdom
 = 
	`RANDOM_LONG
(0, 
MAX_PATH_INDEX
 - 1);

2323 
iN—rIndex
 = 
·ths
[
iIndex
]->
šdex
[
iRªdom
];

2324 ià(
iN—rIndex
 != -1 &&

2325 !(
·ths
[
iIndex
]->
cÚÃùæag
[
iRªdom
] & 
C_FL_JUMP
))

2327 
iIndex
 = 
iN—rIndex
;

2333 
	`D–‘eS—rchNodes
();

2334 
bÙsk_t
 
TempTask
 = {
NULL
, NULL, 
TASK_MOVETOPOSITION
, 
TASKPRI_MOVETOPOSITION
, 
iIndex
, 0.0, 
TRUE
};

2335 
	`S¹Task
(&
TempTask
);

2338 
	`PÏyRadioMes§ge
(
RADIO_NEGATIVE
);

2341 
RADIO_GOGOGO
:

2342 ià(
m_³ÁRadioEÁ™y
 =ğ
m_³ÁT¬g‘EÁ
)

2344 
	`PÏyRadioMes§ge
(
RADIO_AFFIRMATIVE
);

2345 
m_³ÁT¬g‘EÁ
 = 
NULL
;

2346 
m_æF—rLev–
 -= 0.3;

2347 ià(
m_æF—rLev–
 < 0.0)

2348 
m_æF—rLev–
 = 0.0;

2350 ià((
	`FNuÎEÁ
(
m_³ÁEÃmy
è&& 
	`EÁ™yIsVisibË
(
m_³ÁRadioEÁ™y
->
v
.
Üigš
)è|| 
f_di¡ªû
 < 2048)

2352 
sk_t
 
iTask
 = 
	`Cu¼’tTask
()->iTask;

2353 ià(
iTask
 =ğ
TASK_PAUSE
 || iTask =ğ
TASK_CAMP
)

2355 
m_æF—rLev–
 -= 0.3;

2356 ià(
m_æF—rLev–
 < 0.0)

2357 
m_æF—rLev–
 = 0.0;

2358 
	`PÏyRadioMes§ge
(
RADIO_AFFIRMATIVE
);

2360 
m_pTasks
->
fTime
 = 
gpGlob®s
->
time
;

2362 
m_³ÁT¬g‘EÁ
 = 
NULL
;

2363 
	`UTIL_MakeVeùÜs
Ğ
m_³ÁRadioEÁ™y
->
v
.
v_ªgË
 );

2364 
m_vecPos™iÚ
 = 
m_³ÁRadioEÁ™y
->
v
.
Üigš
 + 
gpGlob®s
->
v_fÜw¬d
 * 
	`RANDOM_LONG
(1024, 2048);

2365 
	`D–‘eS—rchNodes
();

2366 
bÙsk_t
 
TempTask
 = {
NULL
, NULL, 
TASK_MOVETOPOSITION
, 
TASKPRI_MOVETOPOSITION
, -1, 0.0, 
TRUE
};

2367 
	`S¹Task
(&
TempTask
);

2371 
	`PÏyRadioMes§ge
(
RADIO_NEGATIVE
);

2374 
RADIO_STORMTHEFRONT
:

2375 ià((
	`FNuÎEÁ
(
m_³ÁEÃmy
è&& 
	`EÁ™yIsVisibË
(
m_³ÁRadioEÁ™y
->
v
.
Üigš
)è|| 
f_di¡ªû
 < 1024)

2377 
	`PÏyRadioMes§ge
(
RADIO_AFFIRMATIVE
);

2379 
sk_t
 
iTask
 = 
	`Cu¼’tTask
()->iTask;

2380 if(
iTask
 =ğ
TASK_PAUSE
 || iTask =ğ
TASK_CAMP
)

2381 
m_pTasks
->
fTime
 = 
gpGlob®s
->
time
;

2383 
m_³ÁT¬g‘EÁ
 = 
NULL
;

2384 
	`UTIL_MakeVeùÜs
Ğ
m_³ÁRadioEÁ™y
->
v
.
v_ªgË
 );

2385 
m_vecPos™iÚ
 = 
m_³ÁRadioEÁ™y
->
v
.
Üigš
 + 
gpGlob®s
->
v_fÜw¬d
 * 
	`RANDOM_LONG
(1024, 2048);

2386 
	`D–‘eS—rchNodes
();

2387 
bÙsk_t
 
TempTask
 = {
NULL
, NULL, 
TASK_MOVETOPOSITION
, 
TASKPRI_MOVETOPOSITION
, -1, 0.0, 
TRUE
};

2388 
	`S¹Task
(&
TempTask
);

2389 
m_æF—rLev–
 -= 0.3;

2390 ià(
m_æF—rLev–
 < 0.0)

2391 
m_æF—rLev–
 = 0.0;

2392 
m_æAg»ssiÚLev–
 += 0.3;

2393 ià(
m_æAg»ssiÚLev–
 > 1.0)

2394 
m_æAg»ssiÚLev–
 = 1.0;

2398 
RADIO_FALLBACK
:

2399 ià((
	`FNuÎEÁ
(
m_³ÁEÃmy
è&& 
	`EÁ™yIsVisibË
(
m_³ÁRadioEÁ™y
->
v
.
Üigš
)è|| 
f_di¡ªû
 < 1024)

2401 
m_æF—rLev–
 += 0.5;

2402 ià(
m_æF—rLev–
 > 1.0)

2403 
m_æF—rLev–
 = 1.0;

2405 
m_æAg»ssiÚLev–
 -= 0.5;

2406 ià(
m_æAg»ssiÚLev–
 < 0.0)

2407 
m_æAg»ssiÚLev–
 = 0.0;

2409 
	`PÏyRadioMes§ge
(
RADIO_AFFIRMATIVE
);

2411 ià(
	`Cu¼’tTask
()->
iTask
 =ğ
TASK_CAMP
)

2412 
m_pTasks
->
fTime
 +ğ
	`RANDOM_FLOAT
(10.0, 15.0);

2416 
sk_t
 
iTask
 = 
	`Cu¼’tTask
()->iTask;

2417 ià(
iTask
 =ğ
TASK_PAUSE
)

2418 
m_pTasks
->
fTime
 = 
gpGlob®s
->
time
;

2420 
m_³ÁT¬g‘EÁ
 = 
NULL
;

2423 
m_æS“EÃmyTime
 = 
gpGlob®s
->
time
;

2426 ià(
m_vecLa¡EÃmyOrigš
 =ğ
g_vecZ”o
)

2428 
iT—m
 = 
	`UTIL_G‘T—m
(
	`ediù
());

2429 
Ã¬e¡di¡ªû
 = 
FLT_MAX
;

2432 
šd
 = 0; ind < 
gpGlob®s
->
maxCl›Ás
; ind++)

2434 ià(
Th»©Tab
[
šd
].
IsU£d
 =ğ
FALSE
 || Th»©Tab[šd].
IsAlive
 == FALSE ||

2435 
Th»©Tab
[
šd
].
iT—m
 == iTeam)

2438 
ediù_t
 *
pEÃmy
 = 
Th»©Tab
[
šd
].
pEdiù
;

2439 
di¡ªû
 = 
	`L’gthSqu¬ed
(
m_³ÁRadioEÁ™y
->
v
.
Üigš
 - 
pEÃmy
->v.origin);

2440 ià(
di¡ªû
 < 
Ã¬e¡di¡ªû
)

2442 
Ã¬e¡di¡ªû
 = 
di¡ªû
;

2443 
m_³ÁLa¡EÃmy
 = 
pEÃmy
;

2444 
m_vecLa¡EÃmyOrigš
 = 
pEÃmy
->
v
.
Üigš
;

2448 
	`D–‘eS—rchNodes
();

2453 
RADIO_REPORTTEAM
:

2454 
	`PÏyRadioMes§ge
(
RADIO_REPORTINGIN
);

2457 
RADIO_SECTORCLEAR
:

2459 ià(
g_bBombPÏÁed
)

2462 ià(
	`UTIL_G‘T—m
(
m_³ÁRadioEÁ™y
è=ğ
TEAM_CT
 && UTIL_G‘T—m(
	`ediù
()) == TEAM_CT)

2464 ià(
g_fTimeNextBombUpd©e
 < 
gpGlob®s
->
time
)

2466 
mš_di¡ªû
 = 
FLT_MAX
;

2468 
i
 = 0; i <ğ
g_iNumGßlPošts
; i++)

2470 
f_di¡ªû
 = 
	`L’gthSqu¬ed
(
·ths
[
g_pGßlWaypošts
[
i
]]->
Üigš
 - 
m_³ÁRadioEÁ™y
->
v
.origin);

2472 ià(
f_di¡ªû
 < 
mš_di¡ªû
)

2474 
mš_di¡ªû
 = 
f_di¡ªû
;

2475 
g_iLa¡BombPošt
 = 
g_pGßlWaypošts
[
i
];

2480 
	`CTBombPoštCË¬
(
g_iLa¡BombPošt
);

2481 
g_fTimeNextBombUpd©e
 = 
gpGlob®s
->
time
 + 0.5;

2484 ià(
	`Cu¼’tTask
()->
iTask
 =ğ
TASK_NORMAL
)

2487 ià(
m_pTasks
->
iD©a
 =ğ
g_iLa¡BombPošt
)

2489 
m_pTasks
->
iD©a
 = -1;

2490 
	`PÏyRadioMes§ge
(
RADIO_AFFIRMATIVE
);

2497 
RADIO_GETINPOSITION
:

2498 ià((
	`FNuÎEÁ
(
m_³ÁEÃmy
è&& 
	`EÁ™yIsVisibË
(
m_³ÁRadioEÁ™y
->
v
.
Üigš
)è|| 
f_di¡ªû
 < 1024)

2500 
	`PÏyRadioMes§ge
(
RADIO_AFFIRMATIVE
);

2501 ià(
	`Cu¼’tTask
()->
iTask
 =ğ
TASK_CAMP
)

2502 
m_pTasks
->
fTime
 = 
gpGlob®s
->
time
 + 
	`RANDOM_FLOAT
(30.0, 60.0);

2506 
sk_t
 
iTask
 = 
	`Cu¼’tTask
()->iTask;

2507 ià(
iTask
 =ğ
TASK_PAUSE
)

2508 
m_pTasks
->
fTime
 = 
gpGlob®s
->
time
;

2510 
m_³ÁT¬g‘EÁ
 = 
NULL
;

2513 
m_æS“EÃmyTime
 = 
gpGlob®s
->
time
;

2516 ià(
m_vecLa¡EÃmyOrigš
 =ğ
g_vecZ”o
)

2518 
iT—m
 = 
	`UTIL_G‘T—m
(
	`ediù
());

2519 
di¡ªû
;

2520 
Ã¬e¡di¡ªû
 = 
FLT_MAX
;

2522 
šd
 = 0; ind < 
gpGlob®s
->
maxCl›Ás
; ind++)

2524 ià(
Th»©Tab
[
šd
].
IsU£d
 =ğ
FALSE
 || Th»©Tab[šd].
IsAlive
 == FALSE ||

2525 
Th»©Tab
[
šd
].
iT—m
 == iTeam)

2527 
ediù_t
 *
pEÃmy
 = 
Th»©Tab
[
šd
].
pEdiù
;

2528 
di¡ªû
 = 
	`L’gthSqu¬ed
(
m_³ÁRadioEÁ™y
->
v
.
Üigš
 - 
pEÃmy
->v.origin);

2529 ià(
di¡ªû
 < 
Ã¬e¡di¡ªû
)

2531 
Ã¬e¡di¡ªû
 = 
di¡ªû
;

2532 
m_³ÁLa¡EÃmy
 = 
pEÃmy
;

2533 
m_vecLa¡EÃmyOrigš
 = 
pEÃmy
->
v
.
Üigš
;

2537 
	`D–‘eS—rchNodes
();

2539 
bÙsk_t
 
TempTask
 = {
NULL
, NULL, 
TASK_CAMP
, 
TASKPRI_CAMP
, -1,

2540 
gpGlob®s
->
time
 + 
	`RANDOM_FLOAT
(30.0, 60.0), 
TRUE
};

2541 
	`S¹Task
(&
TempTask
);

2543 
TempTask
.
iTask
 = 
TASK_MOVETOPOSITION
;

2544 
TempTask
.
fDesœe
 = 
TASKPRI_MOVETOPOSITION
;

2545 
TempTask
.
iD©a
 = 
	`FšdDeãndWaypošt
(
m_³ÁRadioEÁ™y
->
v
.
Üigš
);

2546 
	`S¹Task
(&
TempTask
);

2548 ià(
·ths
[
TempTask
.
iD©a
]->
vis
.
üouch
 <ğ·ths[TempTask.iD©a]->vis.
¡ªd
)

2549 
m_iCampBu‰Ús
 |ğ
IN_DUCK
;

2551 
m_iCampBu‰Ús
 &ğ~
IN_DUCK
;

2558 
m_iRadioOrd”
 = 0;

2559 
	}
}

2561 
	gCBa£BÙ
::
	$S–eùL—d”EachT—m
(
iT—m
)

2563 
CBa£BÙ
 *
pBÙL—d”
;

2565 ià(
g_iM­Ty³
 & 
MAP_AS
)

2567 ià(
m_bIsVIP
 && !
g_bL—d”Cho£nCT
)

2570 
m_bIsL—d”
 = 
TRUE
;

2571 ià(
	`RANDOM_LONG
(1, 100) < 45)

2573 
	`PÏyRadioMes§ge
(
RADIO_FOLLOWME
);

2574 
m_iCampBu‰Ús
 = 0;

2576 
g_bL—d”Cho£nCT
 = 
TRUE
;

2578 ià(
iT—m
 =ğ
TEAM_TERRORIST
 && !
g_bL—d”Cho£nT
)

2580 
pBÙL—d”
 = 
g_rgpBÙs
[
	`G‘Highe¡F¿gsBÙ
(
iT—m
)];

2581 ià(
pBÙL—d”
)

2583 
pBÙL—d”
->
m_bIsL—d”
 = 
TRUE
;

2584 ià(
	`RANDOM_LONG
(1, 100) < 25)

2585 
pBÙL—d”
->
	`PÏyRadioMes§ge
(
RADIO_FOLLOWME
);

2587 
g_bL—d”Cho£nT
 = 
TRUE
;

2590 ià(
g_iM­Ty³
 & 
MAP_DE
)

2592 ià(
iT—m
 =ğ
TEAM_TERRORIST
 && !
g_bL—d”Cho£nT
)

2594 ià(
³v
->
w—pÚs
 & (1<<
WEAPON_C4
))

2597 
m_bIsL—d”
 = 
TRUE
;

2599 ià(
	`RANDOM_LONG
(1, 100) < 45)

2601 
	`PÏyRadioMes§ge
(
RADIO_FOLLOWME
);

2602 
m_iCampBu‰Ús
 = 0;

2604 
g_bL—d”Cho£nT
 = 
TRUE
;

2607 ià(!
g_bL—d”Cho£nCT
)

2609 
pBÙL—d”
 = 
g_rgpBÙs
[
	`G‘Highe¡F¿gsBÙ
(
iT—m
)];

2610 ià(
pBÙL—d”
)

2612 
pBÙL—d”
->
m_bIsL—d”
 = 
TRUE
;

2613 ià(
	`RANDOM_LONG
(1, 100) < 25)

2614 
pBÙL—d”
->
	`PÏyRadioMes§ge
(
RADIO_FOLLOWME
);

2616 
g_bL—d”Cho£nCT
 = 
TRUE
;

2621 ià(
iT—m
 =ğ
TEAM_TERRORIST
)

2623 
pBÙL—d”
 = 
g_rgpBÙs
[
	`G‘Highe¡F¿gsBÙ
(
iT—m
)];

2624 ià(
pBÙL—d”
)

2626 
pBÙL—d”
->
m_bIsL—d”
 = 
TRUE
;

2627 ià(
	`RANDOM_LONG
(1, 100) < 25)

2628 
pBÙL—d”
->
	`PÏyRadioMes§ge
(
RADIO_FOLLOWME
);

2633 
pBÙL—d”
 = 
g_rgpBÙs
[
	`G‘Highe¡F¿gsBÙ
(
iT—m
)];

2634 ià(
pBÙL—d”
)

2636 
pBÙL—d”
->
m_bIsL—d”
 = 
TRUE
;

2637 ià(
	`RANDOM_LONG
(1, 100) < 25)

2638 
pBÙL—d”
->
	`PÏyRadioMes§ge
(
RADIO_FOLLOWME
);

2642 
	}
}

2644 
	gCBa£BÙ
::
	$Choo£AimDœeùiÚ
()

2646 
iFÏgs
 = 
m_iAimFÏgs
;

2647 
T¿ûResuÉ
 
Œ
;

2650 ià(!(
iFÏgs
 & (
AIM_GRENADE
 | 
AIM_ENEMY
 | 
AIM_ENTITY
)))

2652 ià(
	`IsOnLadd”
(è|| 
	`IsInW©”
(è|| (
m_iWPTFÏgs
 & 
W_FL_LADDER
) ||

2653 (
m_uiCu¼T¿v–FÏgs
 & 
C_FL_JUMP
))

2655 
iFÏgs
 &ğ~(
AIM_LASTENEMY
 | 
AIM_PREDICTPATH
);

2656 
m_bCªChoo£
 = 
FALSE
;

2660 ià(
iFÏgs
 & 
AIM_OVERRIDE
)

2661 
m_vecLookAt
 = 
m_vecCamp
;

2662 ià(
iFÏgs
 & 
AIM_GRENADE
)

2663 
m_vecLookAt
 = 
	`G‘GunPos™iÚ
(è+ 
m_vecG»Çde
 * 64;

2664 ià(
iFÏgs
 & 
AIM_ENEMY
)

2665 
	`FocusEÃmy
();

2666 ià(
iFÏgs
 & 
AIM_ENTITY
)

2667 
m_vecLookAt
 = 
m_vecEÁ™y
;

2668 ià(
iFÏgs
 & 
AIM_LASTENEMY
)

2670 
m_vecLookAt
 = 
m_vecLa¡EÃmyOrigš
;

2672 ià(
m_æS“EÃmyTime
 - 
m_æAùu®R—ùiÚTime
 +

2673 
m_æBa£Ag»ssiÚLev–
 > 
gpGlob®s
->
time
)

2676 ià(
	`La¡EÃmyShoÙabË
())

2677 
m_bWªtsToFœe
 = 
TRUE
;

2680 ià(
iFÏgs
 & 
AIM_PREDICTPATH
)

2682 
boŞ
 
bReÿlcP©h
 = 
TRUE
;

2684 ià(
m_³ÁT¿ckšgEdiù
 =ğ
m_³ÁLa¡EÃmy
)

2686 ià(
m_æTimeNextT¿ckšg
 < 
gpGlob®s
->
time
)

2687 
bReÿlcP©h
 = 
FALSE
;

2690 ià(
bReÿlcP©h
)

2692 
m_vecLookAt
 = 
·ths
[
	`G‘AimšgWaypošt
(
m_vecLa¡EÃmyOrigš
, 8)]->
Üigš
;

2693 
m_vecCamp
 = 
m_vecLookAt
;

2694 
m_æTimeNextT¿ckšg
 = 
gpGlob®s
->
time
 + 0.5;

2695 
m_³ÁT¿ckšgEdiù
 = 
m_³ÁLa¡EÃmy
;

2698 
m_vecLookAt
 = 
m_vecCamp
;

2700 ià(
iFÏgs
 & 
AIM_CAMP
)

2701 
m_vecLookAt
 = 
m_vecCamp
;

2702 ià(
iFÏgs
 & 
AIM_DEST
)

2704 
m_vecLookAt
 = 
m_vecDe¡Origš
;

2706 ià(
m_bCªChoo£
 && 
g_bU£Ex³r›nû
 && 
m_iCu¼W±Index
 != -1)

2708 ià((
·ths
[
m_iCu¼W±Index
]->
æags
 & 
W_FL_LADDER
) == 0)

2710 
iIndex
 = 
m_iCu¼W±Index
;

2711 ià(
	`UTIL_G‘T—m
(
	`ediù
()è=ğ
TEAM_TERRORIST
)

2713 ià((
pBÙEx³r›nûD©a
 + 
iIndex
 * 
g_iNumWaypošts
 + iIndex)->
iT—m0_dªg”_šdex
 != -1)

2714 
m_vecLookAt
 = 
·ths
[(
pBÙEx³r›nûD©a
 + 
iIndex
 * 
g_iNumWaypošts
 + iIndex)->
iT—m0_dªg”_šdex
]->
Üigš
;

2718 ià((
pBÙEx³r›nûD©a
 + 
iIndex
 * 
g_iNumWaypošts
 + iIndex)->
iT—m1_dªg”_šdex
 != -1)

2719 
m_vecLookAt
 = 
·ths
[(
pBÙEx³r›nûD©a
 + 
iIndex
 * 
g_iNumWaypošts
 + iIndex)->
iT—m1_dªg”_šdex
]->
Üigš
;

2725 ià(
m_vecLookAt
 =ğ
g_vecZ”o
)

2726 
m_vecLookAt
 = 
m_vecDe¡Origš
;

2727 
	}
}

2729 
	gCBa£BÙ
::
	$Thšk
()

2731 
boŞ
 
bBÙMovem’t
 = 
FALSE
;

2733 
³v
->
bu‰Ú
 = 0;

2735 
m_æMoveS³ed
 = 0.0;

2736 
m_æSideMoveS³ed
 = 0.0;

2737 
m_vecMoveAngËs
 = 
g_vecZ”o
;

2739 
m_bNÙKËd
 = 
	`IsAlive
(
	`ediù
());

2741 ià(
m_bNÙS¹ed
)

2742 
	`S¹Game
();

2743 ià(!
m_bNÙKËd
)

2745 ià(
m_iVÙeKickIndex
 !ğ
m_iLa¡VÙeKick
 && 
g_bAÎowVÙes
)

2747 
	`FakeCl›ÁCommªd
(
	`ediù
(), "vÙ%d", 
m_iVÙeKickIndex
);

2748 
m_iLa¡VÙeKick
 = 
m_iVÙeKickIndex
;

2750 ià(
m_iVÙeM­
 != 0)

2752 
	`FakeCl›ÁCommªd
(
	`ediù
(), "vÙem­ %d", 
m_iVÙeM­
);

2753 
m_iVÙeM­
 = 0;

2756 ià(
g_bBÙCh©
)

2758 ià(!
	`R•l›sToPÏy”
(è&& 
m_æLa¡Ch©Time
 + 10.0 < 
gpGlob®s
->
time
 &&

2759 
g_fLa¡Ch©Time
 + 5.0 < 
gpGlob®s
->
time
)

2762 ià(
	`RANDOM_LONG
(1, 1500) < 2)

2764 
m_æLa¡Ch©Time
 = 
gpGlob®s
->
time
;

2765 
g_fLa¡Ch©Time
 = 
gpGlob®s
->
time
;

2768 
pU£dD—dSŒšgs
[7] =…UsedDeadStrings[6];

2769 
pU£dD—dSŒšgs
[6] =…UsedDeadStrings[5];

2770 
pU£dD—dSŒšgs
[5] =…UsedDeadStrings[4];

2771 
pU£dD—dSŒšgs
[4] =…UsedDeadStrings[3];

2772 
pU£dD—dSŒšgs
[3] =…UsedDeadStrings[2];

2773 
pU£dD—dSŒšgs
[2] =…UsedDeadStrings[1];

2774 
pU£dD—dSŒšgs
[1] =…UsedDeadStrings[0];

2776 
boŞ
 
bSŒšgU£d
 = 
TRUE
;

2777 
STRINGNODE
* 
pTempNode
 = 
NULL
;

2778 
iCouÁ
 = 0;

2779 
bSŒšgU£d
)

2781 
pTempNode
 = 
	`G‘NodeSŒšg
(
pD—dCh©
, 
	`RANDOM_LONG
(0, 
iNumD—dCh©s
 - 1));

2783 ià(
pTempNode
 =ğ
NULL
 ||…TempNode->
pszSŒšg
 == NULL)

2786 
bSŒšgU£d
 = 
FALSE
;

2787 
i
 = 0; i < 8; i++)

2789 ià(
pU£dD—dSŒšgs
[
i
] =ğ
pTempNode
)

2791 
iCouÁ
++;

2792 ià(
iCouÁ
 < 9)

2793 
bSŒšgU£d
 = 
TRUE
;

2798 ià(
pTempNode
 &&…TempNode->
pszSŒšg
)

2801 
pU£dD—dSŒšgs
[0] = 
pTempNode
;

2802 
	`P»·»Ch©Mes§ge
(
pTempNode
->
pszSŒšg
);

2803 
	`PushMes§geQueue
(
MSG_CS_SAY
);

2809 ià(
m_bBuyšgFšished
)

2810 
bBÙMovem’t
 = 
TRUE
;

2812 
	`CheckMes§geQueue
();

2814 ià(
³v
->
max¥“d
 < 10 && 
	`Cu¼’tTask
()->
iTask
 !ğ
TASK_PLANTBOMB
 &&

2815 
	`Cu¼’tTask
()->
iTask
 !ğ
TASK_DEFUSEBOMB
)

2816 
bBÙMovem’t
 = 
FALSE
;

2818 ià(
bBÙMovem’t
)

2819 
	`BÙThšk
();

2821 
g_’gfuncs
.
	`pâRunPÏy”Move
Ğ
	`ediù
(), 
m_vecMoveAngËs
, 
m_æMoveS³ed
,

2822 
m_æSideMoveS³ed
, 0, 
³v
->
bu‰Ú
,…ev->
impul£
, 
g_iM£cv®
);

2823 
	}
}

2826 
	gCBa£BÙ
::
	$RunTask
()

2828 
iT—m
 = 
	`UTIL_G‘T—m
(
	`ediù
());

2829 
iDe¡Index
;

2830 
VeùÜ
 
v_¤c
, 
v_de¡
;

2831 
T¿ûResuÉ
 
Œ
;

2832 
boŞ
 
bShoÙLa¡Pos™iÚ
 = 
FALSE
;

2833 
boŞ
 
bMadShoÙ
 = 
FALSE
;

2834 
i
;

2836 
	`Cu¼’tTask
()->
iTask
)

2839 
TASK_NORMAL
:

2840 
m_iAimFÏgs
 |ğ
AIM_DEST
;

2843 ià(
g_iDebugGßlIndex
 != -1)

2845 ià(
	`Cu¼’tTask
()->
iD©a
 !ğ
g_iDebugGßlIndex
)

2847 
	`D–‘eS—rchNodes
();

2848 
m_pTasks
->
iD©a
 = 
g_iDebugGßlIndex
;

2852 ià(
	`IsSh›ldD¿wn
())

2853 
³v
->
bu‰Ú
 |ğ
IN_ATTACK2
;

2857 ià(
g_bBombPÏÁed
 && 
iT—m
 =ğ
TEAM_CT
)

2859 ià(
	`Cu¼’tTask
()->
iD©a
 != -1)

2861 ià(!(
·ths
[
m_pTasks
->
iD©a
]->
æags
 & 
W_FL_GOAL
))

2863 
	`D–‘eS—rchNodes
();

2864 
m_pTasks
->
iD©a
 = -1;

2870 ià(
	`DoWaypoštNav
())

2872 
	`TaskCom¶‘e
();

2873 
m_iP»vGßlIndex
 = -1;

2876 ià(
m_æTimeLogoS´ay
 <ğ
gpGlob®s
->
time
 && 
g_bBÙS´ay
 && 
	`RANDOM_LONG
(1, 100) < 50)

2878 
bÙsk_t
 
TempTask
 = {
NULL
, NULL, 
TASK_SPRAYLOGO
, 
TASKPRI_SPRAYLOGO
,

2879 -1, 
gpGlob®s
->
time
 + 1.0, 
FALSE
};

2880 
	`S¹Task
(&
TempTask
);

2884 ià(
·ths
[
m_iCu¼W±Index
]->
æags
 & 
W_FL_CAMP
)

2887 ià(
	`HasPrim¬yW—pÚ
(è&& 
m_æTimeCampšg
 + 10.0 < 
gpGlob®s
->
time


2888 && !
	`HasHo¡age
())

2890 
boŞ
 
bCampšgAÎowed
 = 
TRUE
;

2893 ià(
iT—m
 =ğ
TEAM_TERRORIST
)

2896 ià((
·ths
[
m_iCu¼W±Index
]->
æags
 & 
W_FL_COUNTER
) ||

2897 (
³v
->
w—pÚs
 & (1 << 
WEAPON_C4
)))

2898 
bCampšgAÎowed
 = 
FALSE
;

2902 ià(
·ths
[
m_iCu¼W±Index
]->
æags
 & 
W_FL_TERRORIST
)

2903 
bCampšgAÎowed
 = 
FALSE
;

2907 
c
 = 0; c < 
gpGlob®s
->
maxCl›Ás
; c++)

2909 
CBa£BÙ
 *
pOth”BÙ
 = 
g_rgpBÙs
[
c
];

2910 ià(
pOth”BÙ
)

2912 ià(
pOth”BÙ
 =ğ
this
)

2915 ià(
	`IsAlive
(
pOth”BÙ
->
	`ediù
()è&& 
	`UTIL_G‘T—m
ÕOth”BÙ->ediù()è=ğ
iT—m
)

2917 ià(
pOth”BÙ
->
m_iCu¼W±Index
 == m_iCurrWptIndex)

2918 
bCampšgAÎowed
 = 
FALSE
;

2923 ià(
bCampšgAÎowed
)

2926 ià(
·ths
[
m_iCu¼W±Index
]->
æags
 & 
W_FL_CROUCH
)

2927 
m_iCampBu‰Ús
 = 
IN_DUCK
;

2929 
m_iCampBu‰Ús
 = 0;

2931 
	`S–eùBe¡W—pÚ
();

2933 ià(!(
m_iS‹s
 & (
STATE_SEEINGENEMY
 | 
STATE_HEARINGENEMY
)è&& !
m_iR–ßdS‹
)

2934 
m_iR–ßdS‹
 = 
RELOAD_PRIMARY
;

2936 
	`UTIL_MakeVeùÜs
(
³v
->
v_ªgË
);

2938 
m_æTimeCampšg
 = 
gpGlob®s
->
time
 +

2939 
	`RANDOM_FLOAT
(
BÙSklD–ays
[
m_iSkl
 / 20].
fBÙCampS¹D–ay
,

2940 
BÙSklD–ays
[
m_iSkl
 / 20].
fBÙCampEndD–ay
);

2942 
bÙsk_t
 
TempTask
 = {
NULL
, NULL, 
TASK_CAMP
, 
TASKPRI_CAMP
, -1, 
m_æTimeCampšg
, 
TRUE
};

2943 
	`S¹Task
(&
TempTask
);

2944 
VeùÜ
 
v_¤c
;

2945 
v_¤c
.
x
 = 
·ths
[
m_iCu¼W±Index
]->
fÿmp¡¬tx
;

2946 
v_¤c
.
y
 = 
·ths
[
m_iCu¼W±Index
]->
fÿmp¡¬ty
;

2947 
v_¤c
.
z
 = 0;

2948 
m_vecCamp
 = 
v_¤c
;

2949 
m_iAimFÏgs
 |ğ
AIM_CAMP
;

2950 
m_iCampDœeùiÚ
 = 0;

2953 
	`PÏyRadioMes§ge
(
RADIO_IMINPOSITION
);

2954 
m_bMoveToGßl
 = 
FALSE
;

2955 
m_bCheckT”¿š
 = 
FALSE
;

2956 
m_æMoveS³ed
 = 0;

2957 
m_æSideMoveS³ed
 = 0;

2964 ià(
g_iM­Ty³
 & 
MAP_CS
)

2967 ià(
	`HasHo¡age
(è&& 
iT—m
 =ğ
TEAM_CT
)

2970 ià(
·ths
[
m_iCu¼W±Index
]->
æags
 & 
W_FL_RESCUE
)

2972 
i
 = 0; i < 
MAX_HOSTAGES
; i++)

2973 
m_rgpHo¡ages
[
i
] = 
NULL
;

2978 ià(
g_iM­Ty³
 & 
MAP_DE
)

2981 ià(
·ths
[
m_iCu¼W±Index
]->
æags
 & 
W_FL_GOAL
)

2984 ià((
³v
->
w—pÚs
 & (1 << 
WEAPON_C4
)))

2988 
bÙsk_t
 
TempTask
 = {
NULL
, NULL, 
TASK_PLANTBOMB
, 
TASKPRI_PLANTBOMB
,

2989 -1, 0.0, 
FALSE
};

2990 
	`S¹Task
(&
TempTask
);

2993 ià(
iT—m
 =ğ
TEAM_CT
 && 
g_bBombPÏÁed
)

2996 
	`CTBombPoštCË¬
(
m_iCu¼W±Index
);

2997 
	`PÏyRadioMes§ge
(
RADIO_SECTORCLEAR
);

3004 ià(!
	`GßlIsV®id
())

3006 
m_æMoveS³ed
 = 
³v
->
max¥“d
;

3007 
	`D–‘eS—rchNodes
();

3010 ià(
	`Cu¼’tTask
()->
iD©a
 != -1)

3011 
iDe¡Index
 = 
m_pTasks
->
iD©a
;

3013 
iDe¡Index
 = 
	`FšdGßl
();

3015 
m_iP»vGßlIndex
 = 
iDe¡Index
;

3018 
m_pTasks
->
iD©a
 = 
iDe¡Index
;

3022 ià(
iDe¡Index
 !ğ
m_iCu¼W±Index
)

3023 
	`FšdP©h
(
m_iCu¼W±Index
, 
iDe¡Index
, 
g_bBombPÏÁed
 ? 0 : 
m_byP©hTy³
);

3027 ià(!(
³v
->
æags
 & 
FL_DUCKING
è&& 
m_æMšS³ed
 !ğ³v->
max¥“d
)

3028 
m_æMoveS³ed
 = 
m_æMšS³ed
;

3033 
TASK_SPRAYLOGO
:

3034 
m_iAimFÏgs
 |ğ
AIM_ENTITY
;

3036 ià(
m_æTimeLogoS´ay
 <ğ
gpGlob®s
->
time
 && 
m_pTasks
->
fTime
 > gpGlobals->time)

3038 
	`UTIL_MakeVeùÜs
(
³v
->
v_ªgË
);

3039 
VeùÜ
 
vecS´ayPos
 = 
	`EyePos™iÚ
(è+ 
gpGlob®s
->
v_fÜw¬d
 * 128;

3040 
	`UTIL_T¿ûLše
(
	`EyePos™iÚ
(), 
vecS´ayPos
, 
ignÜe_mÚ¡”s
, 
	`ediù
(), &
Œ
);

3043 ià(
Œ
.
æF¿ùiÚ
 >= 1.0)

3044 
vecS´ayPos
.
z
 -= 128.0;

3045 
m_vecEÁ™y
 = 
vecS´ayPos
;

3047 ià(
m_pTasks
->
fTime
 - 0.5 < 
gpGlob®s
->
time
)

3050 
	`EMIT_SOUND_DYN2
(
	`ediù
(), 
CHAN_VOICE
, "player/sprayer.wav", 1.0,

3051 
ATTN_NORM
, 0, 100);

3052 
	`UTIL_T¿ûLše
(
	`EyePos™iÚ
(), EyePos™iÚ(è+ 
gpGlob®s
->
v_fÜw¬d
 * 128,

3053 
ignÜe_mÚ¡”s
, 
	`ediù
(), &
Œ
);

3055 
	`UTIL_DeÿlT¿û
(&
Œ
, 
szS´ayNames
[
m_iS´ayLogo
]);

3056 
m_æTimeLogoS´ay
 = 
gpGlob®s
->
time
 + 
	`RANDOM_FLOAT
(30, 60);

3060 
	`TaskCom¶‘e
();

3062 
m_bMoveToGßl
 = 
FALSE
;

3063 
m_bCheckT”¿š
 = 
FALSE
;

3064 
m_æW±Time£t
 = 
gpGlob®s
->
time
;

3065 
m_æMoveS³ed
 = 0;

3066 
m_æSideMoveS³ed
 = 0.0;

3070 
TASK_ENEMYHUNT
:

3071 
m_iAimFÏgs
 |ğ
AIM_DEST
;

3074 ià(!
	`FNuÎEÁ
(
m_³ÁEÃmy
è|| FNuÎEÁ(
m_³ÁLa¡EÃmy
))

3077 
	`RemoveC”šTask
(
TASK_ENEMYHUNT
);

3078 
m_iP»vGßlIndex
 = -1;

3080 ià(
	`UTIL_G‘T—m
(
m_³ÁLa¡EÃmy
è=ğ
iT—m
)

3083 
	`RemoveC”šTask
(
TASK_ENEMYHUNT
);

3084 
m_iP»vGßlIndex
 = -1;

3085 
m_³ÁLa¡EÃmy
 = 
NULL
;

3087 ià(
	`DoWaypoštNav
())

3090 
	`TaskCom¶‘e
();

3091 
m_iP»vGßlIndex
 = -1;

3092 
m_vecLa¡EÃmyOrigš
 = 
g_vecZ”o
;

3094 ià(
m_pWaypoštNodes
 =ğ
NULL
)

3096 
	`D–‘eS—rchNodes
();

3099 ià(
	`Cu¼’tTask
()->
iD©a
 !ğ-1 && Cu¼’tTask()->iD©¨< 
g_iNumWaypošts
)

3100 
iDe¡Index
 = 
m_pTasks
->
iD©a
;

3102 
iDe¡Index
 = 
	`WaypoštFšdN—»¡
(
m_vecLa¡EÃmyOrigš
);

3105 
m_iP»vGßlIndex
 = 
iDe¡Index
;

3106 
m_pTasks
->
iD©a
 = 
iDe¡Index
;

3107 
	`FšdP©h
(
m_iCu¼W±Index
, 
iDe¡Index
);

3111 ià(
m_iSkl
 > 70)

3114 ià(!(
m_uiCu¼T¿v–FÏgs
 & 
C_FL_JUMP
))

3116 ià(
m_iCu¼W±Index
 != -1)

3118 ià(
·ths
[
m_iCu¼W±Index
]->
Radius
 < 32 && !
	`IsOnLadd”
()

3119 && !
	`IsInW©”
(è&& 
m_æS“EÃmyTime
 + 1.0 < 
gpGlob®s
->
time
)

3121 
³v
->
bu‰Ú
 |ğ
IN_DUCK
;

3124 
VeùÜ
 
v_diff
 = 
m_vecLa¡EÃmyOrigš
 - 
³v
->
Üigš
;

3125 
fDi¡ªû
 = 
v_diff
.
	`L’gth
();

3126 ià(
fDi¡ªû
 < 700.0)

3128 ià(!(
³v
->
æags
 & 
FL_DUCKING
) )

3129 
m_æMoveS³ed
 = 120.0;

3136 
TASK_SEEKCOVER
:

3137 
m_iAimFÏgs
 |ğ
AIM_DEST
;

3139 ià(
	`FNuÎEÁ
(
m_³ÁLa¡EÃmy
è|| !
	`IsAlive
(m_pentLastEnemy))

3141 
	`TaskCom¶‘e
();

3142 
m_iP»vGßlIndex
 = -1;

3144 ià(
	`DoWaypoštNav
())

3147 
	`TaskCom¶‘e
();

3148 
m_iP»vGßlIndex
 = -1;

3149 
bÙsk_t
 
TempTask
 = {
NULL
, NULL, 
TASK_HIDE
, 
TASKPRI_HIDE
, -1,

3150 
gpGlob®s
->
time
 + 
	`RANDOM_FLOAT
(2.0, 10.0), 
FALSE
};

3151 
	`S¹Task
(&
TempTask
);

3152 
v_de¡
 = 
m_vecLa¡EÃmyOrigš
;

3155 
	`G‘CampDœeùiÚ
(&
v_de¡
);

3156 
m_iAimFÏgs
 |ğ
AIM_CAMP
;

3157 
m_vecCamp
 = 
v_de¡
;

3158 
m_iCampDœeùiÚ
 = 0;

3161 ià(
·ths
[
m_iCu¼W±Index
]->
æags
 & 
W_FL_CAMP
)

3164 ià(
·ths
[
m_iCu¼W±Index
]->
æags
 & 
W_FL_CROUCH
)

3165 
m_iCampBu‰Ús
 = 
IN_DUCK
;

3167 
m_iCampBu‰Ús
 = 0;

3173 ià(
·ths
[
m_iCu¼W±Index
]->
vis
.
üouch
 <ğ·ths[m_iCu¼W±Index]->vis.
¡ªd
)

3174 
m_iCampBu‰Ús
 = 
IN_DUCK
;

3176 
m_iCampBu‰Ús
 = 0;

3179 
·ths
[
m_iCu¼W±Index
]->
fÿmp¡¬tx
 = 
v_de¡
.
x
;

3180 
·ths
[
m_iCu¼W±Index
]->
fÿmp¡¬ty
 = 
v_de¡
.
y
;

3181 
·ths
[
m_iCu¼W±Index
]->
fÿm³ndx
 = 
v_de¡
.
x
;

3182 
·ths
[
m_iCu¼W±Index
]->
fÿm³ndy
 = 
v_de¡
.
y
;

3185 ià(
m_iR–ßdS‹
 =ğ
RELOAD_NONE
 && 
	`G‘AmmoInCl
() < 5 &&

3186 
w—pÚ_defs
[
m_iCu¼’tW—pÚ
].
iAmmo1
 !ğ-1 && 
	`G‘Ammo
() != 0)

3187 
m_iR–ßdS‹
 = 
RELOAD_PRIMARY
;

3189 
m_æMoveS³ed
 = 0;

3190 
m_æSideMoveS³ed
 = 0;

3191 
m_bMoveToGßl
 = 
FALSE
;

3192 
m_bCheckT”¿š
 = 
FALSE
;

3194 ià(!
	`GßlIsV®id
())

3196 
	`D–‘eS—rchNodes
();

3197 ià(
	`Cu¼’tTask
()->
iD©a
 != -1)

3198 
iDe¡Index
 = 
m_pTasks
->
iD©a
;

3201 
iDe¡Index
 = 
	`FšdCov”Waypošt
(1024);

3202 ià(
iDe¡Index
 == -1)

3203 
iDe¡Index
 = 
	`RANDOM_LONG
(0, 
g_iNumWaypošts
-1);

3205 
m_iCampDœeùiÚ
 = 0;

3206 
m_iP»vGßlIndex
 = 
iDe¡Index
;

3207 
m_pTasks
->
iD©a
 = 
iDe¡Index
;

3208 ià(
iDe¡Index
 !ğ
m_iCu¼W±Index
)

3209 
	`FšdP©h
(
m_iCu¼W±Index
, 
iDe¡Index
);

3214 
TASK_ATTACK
:

3215 
m_bMoveToGßl
 = 
FALSE
;

3216 
m_bCheckT”¿š
 = 
FALSE
;

3218 ià(!
	`FNuÎEÁ
(
m_³ÁEÃmy
) &&

3219 (
³v
->
æags
 & (
FL_ONGROUND
 | 
FL_PARTIALGROUND
)))

3220 
	`DoA‰ackMovem’t
();

3223 
	`TaskCom¶‘e
();

3224 
m_vecDe¡Origš
 = 
m_vecLa¡EÃmyOrigš
;

3227 
m_æW±Time£t
 = 
gpGlob®s
->
time
;

3231 
TASK_PAUSE
:

3232 
m_bMoveToGßl
 = 
FALSE
;

3233 
m_bCheckT”¿š
 = 
FALSE
;

3234 
m_æW±Time£t
 = 
gpGlob®s
->
time
;

3235 
m_æMoveS³ed
 = 0.0;

3236 
m_æSideMoveS³ed
 = 0.0;

3237 
m_iAimFÏgs
 |ğ
AIM_DEST
;

3240 ià(
m_æV›wDi¡ªû
 < 500.0 && 
m_iSkl
 > 60)

3243 
m_æMoveS³ed
 = -
	`çbs
((
m_æV›wDi¡ªû
 - 500.0) / 2);

3244 ià(
m_æMoveS³ed
 < -
³v
->
max¥“d
)

3245 
m_æMoveS³ed
 = -
³v
->
max¥“d
;

3246 
VeùÜ
 
v_dœeùiÚ
;

3247 
	`UTIL_MakeVeùÜs
Ğ
³v
->
v_ªgË
 );

3248 
m_vecCamp
 = 
	`G‘GunPos™iÚ
(è+ 
gpGlob®s
->
v_fÜw¬d
 * 500;

3249 
m_iAimFÏgs
 |ğ
AIM_OVERRIDE
;

3250 
m_bWªtsToFœe
 = 
TRUE
;

3253 
³v
->
bu‰Ú
 |ğ
m_iCampBu‰Ús
;

3256 ià(
m_pTasks
->
fTime
 < 
gpGlob®s
->
time
 || 
m_iLa¡DamageTy³
 > 0)

3257 
	`TaskCom¶‘e
();

3261 
TASK_BLINDED
:

3262 
m_bMoveToGßl
 = 
FALSE
;

3263 
m_bCheckT”¿š
 = 
FALSE
;

3264 
m_æW±Time£t
 = 
gpGlob®s
->
time
;

3266 
m_ucP”sÚ®™y
)

3268 
PERSONALITY_NORMAL
:

3269 ià(
m_iSkl
 > 60 && 
m_vecLa¡EÃmyOrigš
 !ğ
g_vecZ”o
)

3270 
bShoÙLa¡Pos™iÚ
 = 
TRUE
;

3273 
PERSONALITY_AGRESSIVE
:

3274 ià(
m_vecLa¡EÃmyOrigš
 !ğ
g_vecZ”o
)

3275 
bShoÙLa¡Pos™iÚ
 = 
TRUE
;

3277 
bMadShoÙ
 = 
TRUE
;

3281 ià(
bShoÙLa¡Pos™iÚ
)

3284 
m_vecLookAt
 = 
m_vecLa¡EÃmyOrigš
;

3285 
m_bWªtsToFœe
 = 
TRUE
;

3287 ià(
bMadShoÙ
)

3290 
	`UTIL_MakeVeùÜs
Ğ
³v
->
v_ªgË
 );

3291 
m_vecLookAt
 = 
	`G‘GunPos™iÚ
(è+ 
gpGlob®s
->
v_fÜw¬d
 * 500;

3292 
m_bWªtsToFœe
 = 
TRUE
;

3295 
m_æMoveS³ed
 = 
m_æBlšdMoveS³ed
;

3296 
m_æSideMoveS³ed
 = 
m_æBlšdSidemoveS³ed
;

3298 ià(
m_æBlšdTime
 < 
gpGlob®s
->
time
)

3299 
	`TaskCom¶‘e
();

3303 
TASK_CAMP
:

3304 
m_iAimFÏgs
 |ğ
AIM_CAMP
;

3305 
m_bCheckT”¿š
 = 
FALSE
;

3306 
m_bMoveToGßl
 = 
FALSE
;

3309 
m_æId—lR—ùiÚTime
 = (
	`RANDOM_FLOAT
(
BÙSklD–ays
[
m_iSkl
 / 20].
fMšSu½ri£D–ay
,

3310 
BÙSklD–ays
[
m_iSkl
 / 20].
fMaxSu½ri£D–ay
)) / 2;

3311 
m_æW±Time£t
 = 
gpGlob®s
->
time
;

3312 
m_æMoveS³ed
 = 0;

3313 
m_æSideMoveS³ed
 = 0.0;

3314 
	`G‘V®idWaypošt
();

3316 ià(
m_æNextCampDœTime
 < 
gpGlob®s
->
time
)

3318 
m_æNextCampDœTime
 = 
gpGlob®s
->
time
 + 
	`RANDOM_FLOAT
(2, 6);

3320 ià(
·ths
[
m_iCu¼W±Index
]->
æags
 & 
W_FL_CAMP
)

3322 
v_de¡
.
z
 = 0;

3326 ià(
m_iCampDœeùiÚ
 < 1)

3328 
v_de¡
.
x
 = 
·ths
[
m_iCu¼W±Index
]->
fÿmp¡¬tx
;

3329 
v_de¡
.
y
 = 
·ths
[
m_iCu¼W±Index
]->
fÿmp¡¬ty
;

3330 
m_iCampDœeùiÚ
 ^= 1;

3334 
v_de¡
.
x
 = 
·ths
[
m_iCu¼W±Index
]->
fÿm³ndx
;

3335 
v_de¡
.
y
 = 
·ths
[
m_iCu¼W±Index
]->
fÿm³ndy
;

3336 
m_iCampDœeùiÚ
 ^= 1;

3341 
iNumFoundWP
 = 0;

3342 
rgiFoundWP
[3];

3343 
rgiDi¡ªû
[3];

3345 
VeùÜ2D
 
a
 = (
v_de¡
 - 
³v
->
Üigš
).
	`Make2D
().
	`NÜm®ize
();

3347 
i
 = 0; i < 
g_iNumWaypošts
; i++)

3350 ià(!
	`WaypoštIsVisibË
(
m_iCu¼W±Index
, 
i
) || i == m_iCurrWptIndex)

3353 
VeùÜ2D
 
b
 = (
·ths
[
i
]->
Üigš
 - 
³v
->Üigš).
	`Make2D
().
	`NÜm®ize
();

3355 ià(
	`DÙProduù
(
a
, 
b
) > 0.9)

3357 
di¡
 = (
³v
->
Üigš
 - 
·ths
[
i
]->Üigš).
	`L’gth
();

3358 ià(
iNumFoundWP
 >= 3)

3360 
j
 = 0; j < 3; j++)

3362 ià(
di¡
 > 
rgiDi¡ªû
[
j
])

3364 
rgiDi¡ªû
[
j
] = 
di¡
;

3365 
rgiFoundWP
[
j
] = 
i
;

3372 
rgiFoundWP
[
iNumFoundWP
] = 
i
;

3373 
rgiDi¡ªû
[
iNumFoundWP
] = 
di¡
;

3374 
iNumFoundWP
++;

3379 ià(--
iNumFoundWP
 >= 0)

3380 
m_vecCamp
 = 
·ths
[
rgiFoundWP
[
	`RANDOM_LONG
(0, 
iNumFoundWP
)]]->
Üigš
;

3382 
m_vecCamp
 = 
·ths
[
	`G‘AimšgWaypošt
()]->
Üigš
;

3385 
m_vecCamp
 = 
·ths
[
	`G‘AimšgWaypošt
()]->
Üigš
;

3389 
³v
->
bu‰Ú
 |ğ
m_iCampBu‰Ús
;

3392 ià(
m_pTasks
->
fTime
 < 
gpGlob®s
->
time
 || 
m_iLa¡DamageTy³
 > 0)

3393 
	`TaskCom¶‘e
();

3397 
TASK_HIDE
:

3398 
m_iAimFÏgs
 |ğ
AIM_CAMP
;

3399 
m_bCheckT”¿š
 = 
FALSE
;

3400 
m_bMoveToGßl
 = 
FALSE
;

3403 
m_æId—lR—ùiÚTime
 = (
	`RANDOM_FLOAT
(
BÙSklD–ays
[
m_iSkl
 / 20].
fMšSu½ri£D–ay
,

3404 
BÙSklD–ays
[
m_iSkl
 / 20].
fMaxSu½ri£D–ay
)) / 2;

3406 
m_æW±Time£t
 = 
gpGlob®s
->
time
;

3407 
m_æMoveS³ed
 = 0;

3408 
m_æSideMoveS³ed
 = 0.0;

3409 
	`G‘V®idWaypošt
();

3411 ià(
	`HasSh›ld
())

3413 ià(!
m_bIsR–ßdšg
)

3415 ià(!
	`IsSh›ldD¿wn
())

3416 
³v
->
bu‰Ú
 |ğ
IN_ATTACK2
;

3418 
³v
->
bu‰Ú
 |ğ
IN_DUCK
;

3423 ià(
m_iS‹s
 & 
STATE_SEEINGENEMY
)

3425 ià(!(
·ths
[
m_iCu¼W±Index
]->
æags
 & 
W_FL_CAMP
))

3427 
	`TaskCom¶‘e
();

3428 
m_iCampBu‰Ús
 = 0;

3429 
m_iP»vGßlIndex
 = -1;

3431 ià(!
	`FNuÎEÁ
(
m_³ÁEÃmy
))

3432 
	`DoA‰ackMovem’t
();

3437 ià(
m_vecLa¡EÃmyOrigš
 =ğ
g_vecZ”o
)

3439 
	`TaskCom¶‘e
();

3440 
m_iCampBu‰Ús
 = 0;

3441 
m_iP»vGßlIndex
 = -1;

3442 ià(
	`Cu¼’tTask
()->
iTask
 =ğ
TASK_HIDE
)

3443 
	`TaskCom¶‘e
();

3447 
³v
->
bu‰Ú
 |ğ
m_iCampBu‰Ús
;

3448 
m_æW±Time£t
 = 
gpGlob®s
->
time
;

3450 ià(
	`Cu¼’tTask
()->
fTime
 < 
gpGlob®s
->
time
 || 
m_iLa¡DamageTy³
 > 0)

3451 
	`TaskCom¶‘e
();

3456 
TASK_MOVETOPOSITION
:

3457 
m_iAimFÏgs
 |ğ
AIM_DEST
;

3459 ià(
	`IsSh›ldD¿wn
())

3460 
³v
->
bu‰Ú
 |ğ
IN_ATTACK2
;

3462 ià(
	`DoWaypoštNav
())

3465 
	`TaskCom¶‘e
();

3466 
m_iP»vGßlIndex
 = -1;

3467 
m_vecPos™iÚ
 = 
g_vecZ”o
;

3469 ià(!
	`GßlIsV®id
())

3471 
	`D–‘eS—rchNodes
();

3472 ià(
	`Cu¼’tTask
()->
iD©a
 !ğ-1 && Cu¼’tTask()->iD©¨< 
g_iNumWaypošts
)

3473 
iDe¡Index
 = 
m_pTasks
->
iD©a
;

3475 
iDe¡Index
 = 
	`WaypoštFšdN—»¡
(
m_vecPos™iÚ
);

3477 ià(
iDe¡Index
 >ğ0 && iDe¡Index < 
g_iNumWaypošts
)

3479 
m_iP»vGßlIndex
 = 
iDe¡Index
;

3480 
m_pTasks
->
iD©a
 = 
iDe¡Index
;

3481 
	`FšdP©h
(
m_iCu¼W±Index
, 
iDe¡Index
);

3484 
	`TaskCom¶‘e
();

3489 
TASK_PLANTBOMB
:

3490 
m_iAimFÏgs
 |ğ
AIM_DEST
;

3492 ià(
³v
->
w—pÚs
 & (1<<
WEAPON_C4
))

3494 
	`S–eùW—pÚByName
("weapon_c4");

3496 ià(!
	`FNuÎEÁ
(
m_³ÁEÃmy
))

3497 
	`TaskCom¶‘e
();

3500 
m_bMoveToGßl
 = 
FALSE
;

3501 
m_bCheckT”¿š
 = 
FALSE
;

3502 
m_æW±Time£t
 = 
gpGlob®s
->
time
;

3503 
³v
->
bu‰Ú
 |ğ
IN_ATTACK
;

3504 
³v
->
bu‰Ú
 |ğ
IN_DUCK
;

3505 
m_æMoveS³ed
 = 0;

3506 
m_æSideMoveS³ed
 = 0;

3511 
	`TaskCom¶‘e
();

3514 ià(
	`NumT—mm©esN—rPos
(
³v
->
Üigš
, 650) < 2)

3515 
	`PÏyRadioMes§ge
(
RADIO_NEEDBACKUP
);

3517 
	`D–‘eS—rchNodes
();

3521 
f_c4tim”
 = 
	`CVAR_GET_FLOAT
("mp_c4timer");

3522 
bÙsk_t
 
TempTask
 = {
NULL
, NULL, 
TASK_CAMP
, 
TASKPRI_CAMP
, -1, 
gpGlob®s
->
time
 + 
f_c4tim”
 / 2, 
TRUE
};

3524 
	`S¹Task
(&
TempTask
);

3527 
TempTask
.
iTask
 = 
TASK_MOVETOPOSITION
;

3528 
TempTask
.
fDesœe
 = 
TASKPRI_MOVETOPOSITION
;

3529 
TempTask
.
iD©a
 = 
	`FšdDeãndWaypošt
(
³v
->
Üigš
);

3530 
	`S¹Task
(&
TempTask
);

3532 ià(
·ths
[
TempTask
.
iD©a
]->
vis
.
üouch
 <ğ·ths[TempTask.iD©a]->vis.
¡ªd
)

3533 
m_iCampBu‰Ús
 |ğ
IN_DUCK
;

3535 
m_iCampBu‰Ús
 &ğ~
IN_DUCK
;

3541 
TASK_DEFUSEBOMB
:

3542 
m_iAimFÏgs
 |ğ
AIM_ENTITY
;

3543 
m_bMoveToGßl
 = 
FALSE
;

3544 
m_bCheckT”¿š
 = 
FALSE
;

3546 
m_æW±Time£t
 = 
gpGlob®s
->
time
;

3548 ià(!
	`FNuÎEÁ
(
m_³ÁPickupI‹m
))

3551 
m_vecEÁ™y
 = 
m_³ÁPickupI‹m
->
v
.
Üigš
;

3552 
³v
->
bu‰Ú
 |ğ
IN_DUCK
;

3553 
³v
->
bu‰Ú
 |ğ
IN_USE
;

3556 
	`TaskCom¶‘e
();

3558 
m_æMoveS³ed
 = 0;

3559 
m_æSideMoveS³ed
 = 0;

3563 
TASK_FOLLOWUSER
:

3564 ià(
	`FNuÎEÁ
(
m_³ÁT¬g‘EÁ
))

3566 
m_³ÁT¬g‘EÁ
 = 
NULL
;

3567 
	`TaskCom¶‘e
();

3571 ià(!
	`IsAlive
(
m_³ÁT¬g‘EÁ
))

3574 
m_³ÁT¬g‘EÁ
 = 
NULL
;

3575 
	`TaskCom¶‘e
();

3579 ià((
m_³ÁT¬g‘EÁ
->
v
.
Üigš
 - 
³v
->Üigš).
	`L’gth
() > 150)

3580 
m_æFŞlowWa™Time
 = 0.0;

3583 
m_æMoveS³ed
 = 0.0;

3585 ià(
m_æFŞlowWa™Time
 == 0.0)

3586 
m_æFŞlowWa™Time
 = 
gpGlob®s
->
time
;

3589 ià(
m_æFŞlowWa™Time
 + 3.0 < 
gpGlob®s
->
time
)

3592 
m_³ÁT¬g‘EÁ
 = 
NULL
;

3593 
	`PÏyRadioMes§ge
(
RADIO_YOUTAKEPOINT
);

3594 
	`TaskCom¶‘e
();

3600 
m_iAimFÏgs
 |ğ
AIM_DEST
;

3602 ià(
	`IsSh›ldD¿wn
())

3603 
³v
->
bu‰Ú
 |ğ
IN_ATTACK2
;

3605 ià(
	`DoWaypoštNav
())

3606 
	`Cu¼’tTask
()->
iD©a
 = -1;

3608 ià(!
	`GßlIsV®id
())

3610 
	`D–‘eS—rchNodes
();

3612 
iDe¡Index
 = 
	`WaypoštFšdN—»¡
(
m_³ÁT¬g‘EÁ
->
v
.
Üigš
);

3614 ià(
iDe¡Index
 >ğ0 && iDe¡Index < 
g_iNumWaypošts
)

3616 
m_iP»vGßlIndex
 = 
iDe¡Index
;

3617 
m_pTasks
->
iD©a
 = 
iDe¡Index
;

3619 
	`FšdShÜ‹¡P©h
(
m_iCu¼W±Index
, 
iDe¡Index
);

3623 
m_³ÁT¬g‘EÁ
 = 
NULL
;

3624 
	`TaskCom¶‘e
();

3631 
TASK_THROWHEGRENADE
:

3632 
m_iAimFÏgs
 |ğ
AIM_GRENADE
;

3634 
v_de¡
 = 
m_vecThrow
;

3635 ià(!(
m_iS‹s
 & 
STATE_SEEINGENEMY
))

3637 
m_æMoveS³ed
 = 0.0;

3638 
m_æSideMoveS³ed
 = 0.0;

3639 
m_bMoveToGßl
 = 
FALSE
;

3643 ià(!(
m_iS‹s
 & 
STATE_SUSPECTENEMY
è&& !
	`FNuÎEÁ
(
m_³ÁEÃmy
))

3646 
v_de¡
 = 
m_³ÁEÃmy
->
v
.
Üigš
;

3647 
v_¤c
 = 
m_³ÁEÃmy
->
v
.
v–oc™y
;

3648 
v_¤c
.
z
 = 0.0;

3649 
v_de¡
 = v_de¡ + 
v_¤c
 * 0.3;

3653 
m_bUsšgG»Çde
 = 
TRUE
;

3654 
m_bCheckT”¿š
 = 
FALSE
;

3656 ià(
	`L’gthSqu¬ed
(
³v
->
Üigš
 - 
v_de¡
) < 400 * 400)

3659 
m_æG»ÇdeCheckTime
 = 
gpGlob®s
->
time
 + 6;

3660 
	`S–eùBe¡W—pÚ
();

3661 
	`TaskCom¶‘e
();

3665 
m_vecG»Çde
 = 
	`VecCheckThrow
(
³v
, 
	`G‘GunPos™iÚ
(), 
v_de¡
, 400, 0.55);

3666 ià(
	`L’gthSqu¬ed
(
m_vecG»Çde
) < 100)

3667 
m_vecG»Çde
 = 
	`VecCheckToss
(
³v
,…ev->
Üigš
, 
v_de¡
, 0.55);

3669 ià(
	`L’gthSqu¬ed
(
m_vecG»Çde
) <= 100)

3671 
m_æG»ÇdeCheckTime
 = 
gpGlob®s
->
time
 + 3;

3672 
	`S–eùBe¡W—pÚ
();

3673 
	`TaskCom¶‘e
();

3677 
ediù_t
 *
³Á
 = 
NULL
;

3678 !
	`FNuÎEÁ
(
³Á
 = 
	`FIND_ENTITY_BY_CLASSNAME
(pent, "grenade")))

3680 ià(
³Á
->
v
.
owÃr
 =ğ
	`ediù
() &&

3681 
	`FSŒEq
(
	`STRING
(
³Á
->
v
.
mod–
) + 9, "hegrenade.mdl"))

3684 ià(
	`L’gthSqu¬ed
(
m_vecG»Çde
) > 100)

3685 
³Á
->
v
.
v–oc™y
 = 
m_vecG»Çde
;

3686 
m_æG»ÇdeCheckTime
 = 
gpGlob®s
->
time
 + 3;

3687 
	`S–eùBe¡W—pÚ
();

3688 
	`TaskCom¶‘e
();

3693 ià(
	`FNuÎEÁ
(
³Á
))

3695 ià(
m_iCu¼’tW—pÚ
 !ğ
WEAPON_HEGRENADE
)

3697 ià(
³v
->
w—pÚs
 & (1 << 
WEAPON_HEGRENADE
))

3698 
	`S–eùW—pÚByName
("weapon_hegrenade");

3700 ià(!(
³v
->
Şdbu‰Ús
 & 
IN_ATTACK
))

3701 
³v
->
bu‰Ú
 |ğ
IN_ATTACK
;

3705 
³v
->
bu‰Ú
 |ğ
m_iCampBu‰Ús
;

3710 
TASK_THROWFLASHBANG
:

3711 
m_iAimFÏgs
 |ğ
AIM_GRENADE
;

3713 
v_de¡
 = 
m_vecThrow
;

3714 ià(!(
m_iS‹s
 & 
STATE_SEEINGENEMY
))

3716 
m_æMoveS³ed
 = 0.0;

3717 
m_æSideMoveS³ed
 = 0.0;

3718 
m_bMoveToGßl
 = 
FALSE
;

3722 ià(!(
m_iS‹s
 & 
STATE_SUSPECTENEMY
è&& !
	`FNuÎEÁ
(
m_³ÁEÃmy
))

3725 
v_de¡
 = 
m_³ÁEÃmy
->
v
.
Üigš
;

3726 
v_¤c
 = 
m_³ÁEÃmy
->
v
.
v–oc™y
;

3727 
v_¤c
.
z
 = 0.0;

3728 
v_de¡
 = v_de¡ + 
v_¤c
 * 0.3;

3732 
m_bUsšgG»Çde
 = 
TRUE
;

3733 
m_bCheckT”¿š
 = 
FALSE
;

3735 ià(
	`L’gthSqu¬ed
(
³v
->
Üigš
 - 
v_de¡
) < 400 * 400)

3738 
m_æG»ÇdeCheckTime
 = 
gpGlob®s
->
time
 + 3;

3739 
	`S–eùBe¡W—pÚ
();

3740 
	`TaskCom¶‘e
();

3744 
m_vecG»Çde
 = 
	`VecCheckThrow
(
³v
, 
	`G‘GunPos™iÚ
(), 
v_de¡
, 400, 0.55);

3745 ià(
	`L’gthSqu¬ed
(
m_vecG»Çde
) < 100)

3746 
m_vecG»Çde
 = 
	`VecCheckToss
(
³v
,…ev->
Üigš
, 
v_de¡
, 0.55);

3748 ià(
	`L’gthSqu¬ed
(
m_vecG»Çde
) <= 100)

3750 
m_æG»ÇdeCheckTime
 = 
gpGlob®s
->
time
 + 3;

3751 
	`S–eùBe¡W—pÚ
();

3752 
	`TaskCom¶‘e
();

3756 
ediù_t
 *
³Á
 = 
NULL
;

3757 !
	`FNuÎEÁ
(
³Á
 = 
	`FIND_ENTITY_BY_CLASSNAME
(pent, "grenade")))

3759 ià(
³Á
->
v
.
owÃr
 =ğ
	`ediù
() &&

3760 
	`FSŒEq
(
	`STRING
(
³Á
->
v
.
mod–
) + 9, "flashbang.mdl"))

3763 ià(
	`L’gthSqu¬ed
(
m_vecG»Çde
) > 100)

3764 
³Á
->
v
.
v–oc™y
 = 
m_vecG»Çde
;

3765 
m_æG»ÇdeCheckTime
 = 
gpGlob®s
->
time
 + 6;

3766 
	`S–eùBe¡W—pÚ
();

3767 
	`TaskCom¶‘e
();

3772 ià(
	`FNuÎEÁ
(
³Á
))

3774 ià(
m_iCu¼’tW—pÚ
 !ğ
WEAPON_FLASHBANG
)

3776 ià(
³v
->
w—pÚs
 & (1<<
WEAPON_FLASHBANG
))

3777 
	`S–eùW—pÚByName
("weapon_flashbang");

3779 ià(!(
³v
->
Şdbu‰Ús
 & 
IN_ATTACK
))

3780 
³v
->
bu‰Ú
 |ğ
IN_ATTACK
;

3784 
³v
->
bu‰Ú
 |ğ
m_iCampBu‰Ús
;

3789 
TASK_THROWSMOKEGRENADE
:

3790 
m_iAimFÏgs
 |ğ
AIM_GRENADE
;

3792 ià(!(
m_iS‹s
 & 
STATE_SEEINGENEMY
))

3794 
m_æMoveS³ed
 = 0.0;

3795 
m_æSideMoveS³ed
 = 0.0;

3796 
m_bMoveToGßl
 = 
FALSE
;

3799 
m_bCheckT”¿š
 = 
FALSE
;

3800 
m_bUsšgG»Çde
 = 
TRUE
;

3801 
v_¤c
 = 
m_vecLa¡EÃmyOrigš
;

3802 
v_¤c
 = v_¤ø- 
³v
->
v–oc™y
;

3805 ià(!
	`FNuÎEÁ
(
m_³ÁEÃmy
))

3806 
v_¤c
 = v_¤ø+ 
m_³ÁEÃmy
->
v
.
v–oc™y
 * 0.5;

3808 
m_vecG»Çde
 = (
v_¤c
 - 
	`G‘GunPos™iÚ
()).
	`NÜm®ize
();

3810 ià(
m_pTasks
->
fTime
 < 
gpGlob®s
->
time
)

3812 
	`TaskCom¶‘e
();

3816 ià(
m_iCu¼’tW—pÚ
 !ğ
WEAPON_SMOKEGRENADE
)

3818 ià(
³v
->
w—pÚs
 & (1 << 
WEAPON_SMOKEGRENADE
))

3820 
	`S–eùW—pÚByName
("weapon_smokegrenade");

3821 
m_pTasks
->
fTime
 = 
gpGlob®s
->
time
 + 1.2;

3824 
m_pTasks
->
fTime
 = 
gpGlob®s
->
time
 + 0.1;

3826 ià(!(
³v
->
Şdbu‰Ús
 & 
IN_ATTACK
))

3827 
³v
->
bu‰Ú
 |ğ
IN_ATTACK
;

3832 
TASK_SHOOTBREAKABLE
:

3833 
m_iAimFÏgs
 |ğ
AIM_OVERRIDE
;

3836 ià(!
	`FšdB»akabË
())

3838 
	`TaskCom¶‘e
();

3842 
³v
->
bu‰Ú
 |ğ
m_iCampBu‰Ús
;

3844 
m_bCheckT”¿š
 = 
FALSE
;

3845 
m_bMoveToGßl
 = 
FALSE
;

3846 
m_æW±Time£t
 = 
gpGlob®s
->
time
;

3847 
v_¤c
 = 
m_vecB»akabË
;

3848 
m_vecCamp
 = 
v_¤c
;

3851 ià(
	`G‘ShoÙšgCÚeDevŸtiÚ
(
	`ediù
(), &
v_¤c
) >= 0.90)

3853 
m_æMoveS³ed
 = 0.0;

3854 
m_æSideMoveS³ed
 = 0.0;

3855 
m_bWªtsToFœe
 = 
TRUE
;

3859 
m_bCheckT”¿š
 = 
TRUE
;

3860 
m_bMoveToGßl
 = 
TRUE
;

3865 
TASK_PICKUPITEM
:

3866 ià(
	`FNuÎEÁ
(
m_³ÁPickupI‹m
))

3868 
m_³ÁPickupI‹m
 = 
NULL
;

3869 
	`TaskCom¶‘e
();

3874 ià(
	`¡ºcmp
("func_", 
	`STRING
(
m_³ÁPickupI‹m
->
v
.
şas¢ame
), 5) == 0

3875 || 
	`FB™S‘
(
m_³ÁPickupI‹m
->
v
.
æags
, 
FL_MONSTER
))

3876 
v_de¡
 = 
	`VecBMod–Origš
(
m_³ÁPickupI‹m
);

3878 
v_de¡
 = 
m_³ÁPickupI‹m
->
v
.
Üigš
;

3880 
m_vecDe¡Origš
 = 
v_de¡
;

3881 
m_vecEÁ™y
 = 
v_de¡
;

3884 
f_™em_di¡ªû
 = (
v_de¡
 - 
³v
->
Üigš
).
	`L’gth
();

3886 
m_iPickupTy³
)

3888 
PICKUP_WEAPON
:

3889 
m_iAimFÏgs
 |ğ
AIM_DEST
;

3894 ià(
	`FSŒEq
(
	`STRING
(
m_³ÁPickupI‹m
->
v
.
mod–
) + 9, "kevlar.mdl"))

3896 ià(
³v
->
¬mÜv®ue
 >= 100)

3899 
m_³ÁPickupI‹m
 = 
NULL
;

3900 
	`TaskCom¶‘e
();

3904 ià(
	`FSŒEq
(
	`STRING
(
m_³ÁPickupI‹m
->
v
.
mod–
) + 9, "flashbang.mdl"))

3906 ià(
³v
->
w—pÚs
 & (1 << 
WEAPON_FLASHBANG
))

3909 
m_³ÁPickupI‹m
 = 
NULL
;

3910 
	`TaskCom¶‘e
();

3914 ià(
	`FSŒEq
(
	`STRING
(
m_³ÁPickupI‹m
->
v
.
mod–
) + 9, "hegrenade.mdl"))

3916 ià(
³v
->
w—pÚs
 & (1 << 
WEAPON_HEGRENADE
))

3919 
m_³ÁPickupI‹m
 = 
NULL
;

3920 
	`TaskCom¶‘e
();

3924 ià(
	`FSŒEq
(
	`STRING
(
m_³ÁPickupI‹m
->
v
.
mod–
) + 9, "smokegrenade.mdl"))

3926 ià(
³v
->
w—pÚs
 & (1 << 
WEAPON_SMOKEGRENADE
))

3929 
m_³ÁPickupI‹m
 = 
NULL
;

3930 
	`TaskCom¶‘e
();

3934 ià(
f_™em_di¡ªû
 < 50)

3936 
i
 = 0; i < 7; i++)

3938 ià(
	`¡rcmp
(
cs_w—pÚ_£Ëù
[
i
].
mod–_Çme
, 
	`STRING
(
m_³ÁPickupI‹m
->
v
.
mod–
) + 9) == 0)

3942 ià(
i
 < 7)

3945 
iW—pÚNum
 = 0;

3947 
i
 = 0; i < 7; i++)

3949 ià(
³v
->
w—pÚs
 & (1 << 
cs_w—pÚ_£Ëù
[
i
].
iId
))

3950 
iW—pÚNum
 = 
i
;

3953 ià(
iW—pÚNum
 > 0)

3955 
	`S–eùW—pÚbyNumb”
(
iW—pÚNum
);

3956 
	`FakeCl›ÁCommªd
(
	`ediù
(), "drop");

3957 ià(
	`HasSh›ld
())

3958 
	`FakeCl›ÁCommªd
(
	`ediù
(), "drop");

3961 ià(
m_bInBuyZÚe
 &&

3962 
g_fTimeRoundS¹
 + 
	`CVAR_GET_FLOAT
("mp_buytime"è< 
gpGlob®s
->
time
)

3964 
m_bBuyšgFšished
 = 
FALSE
;

3965 
m_iBuyCouÁ
 = 0;

3966 
	`PushMes§geQueue
(
MSG_CS_BUY
);

3967 
m_æNextBuyTime
 = 
gpGlob®s
->
time
;

3974 
iW—pÚNum
 = 
	`Highe¡W—pÚOfEdiù
(
	`ediù
());

3975 ià(
iW—pÚNum
 > 6 || 
	`HasSh›ld
())

3977 
	`S–eùW—pÚbyNumb”
(
iW—pÚNum
);

3978 
	`FakeCl›ÁCommªd
(
	`ediù
(), "drop");

3982 ià(
m_bInBuyZÚe
 &&

3983 
g_fTimeRoundS¹
 + 
	`CVAR_GET_FLOAT
("mp_buytime"è< 
gpGlob®s
->
time
)

3985 
m_bBuyšgFšished
 = 
FALSE
;

3986 
m_iBuyCouÁ
 = 0;

3987 
	`PushMes§geQueue
(
MSG_CS_BUY
);

3988 
m_æNextBuyTime
 = 
gpGlob®s
->
time
;

3994 
PICKUP_SHIELD
:

3995 
m_iAimFÏgs
 |ğ
AIM_DEST
;

3997 ià(
	`HasSh›ld
())

3999 
m_³ÁPickupI‹m
 = 
NULL
;

4002 ià(
f_™em_di¡ªû
 < 50)

4005 
iW—pÚNum
 = 
	`Highe¡W—pÚOfEdiù
(
	`ediù
());

4006 ià(
iW—pÚNum
 > 6)

4008 
	`S–eùW—pÚbyNumb”
(
iW—pÚNum
);

4009 
	`FakeCl›ÁCommªd
(
	`ediù
(), "drop");

4014 
PICKUP_HOSTAGE
:

4015 
m_iAimFÏgs
 |ğ
AIM_ENTITY
;

4016 
v_¤c
 = 
	`EyePos™iÚ
();

4018 ià(!
	`IsAlive
(
m_³ÁPickupI‹m
))

4021 
m_³ÁPickupI‹m
 = 
NULL
;

4022 
	`TaskCom¶‘e
();

4026 ià(
f_™em_di¡ªû
 < 50)

4028 
ªgË_to_’t™y
 = 
	`InF›ldOfV›w
Ğ
v_de¡
 - 
v_¤c
 );

4030 ià(
ªgË_to_’t™y
 <= 10)

4033 
	`MDLL_U£
(
m_³ÁPickupI‹m
, 
	`ediù
());

4035 
i
 = 0; i < 
MAX_HOSTAGES
; i++)

4039 ià(
m_rgpHo¡ages
[
i
] =ğ
NULL
)

4041 
m_rgpHo¡ages
[
i
] = 
m_³ÁPickupI‹m
;

4042 
m_³ÁPickupI‹m
 = 
NULL
;

4048 
m_æMoveS³ed
 = 0.0;

4049 
m_æNoCŞlTime
 = 
gpGlob®s
->
time
 + 0.1;

4053 
PICKUP_PLANTED_C4
:

4054 
m_iAimFÏgs
 |ğ
AIM_ENTITY
;

4056 ià(
iT—m
 =ğ
TEAM_CT
 && 
f_™em_di¡ªû
 < 50)

4059 ià(
	`NumT—mm©esN—rPos
(
³v
->
Üigš
, 650) < 2)

4060 
	`PÏyRadioMes§ge
(
RADIO_NEEDBACKUP
);

4062 
m_bMoveToGßl
 = 
FALSE
;

4063 
m_bCheckT”¿š
 = 
FALSE
;

4064 
m_æMoveS³ed
 = 0;

4065 
m_æSideMoveS³ed
 = 0;

4066 
³v
->
bu‰Ú
 |ğ
IN_DUCK
;

4068 
bÙsk_t
 
TempTask
 = {
NULL
, NULL, 
TASK_DEFUSEBOMB
, 
TASKPRI_DEFUSEBOMB
, -1, 0.0, 
FALSE
};

4069 
	`S¹Task
(&
TempTask
);

4073 
PICKUP_DEFUSEKIT
:

4074 
m_iAimFÏgs
 |ğ
AIM_DEST
;

4076 ià(
m_bHasDefu£r
)

4078 
m_³ÁPickupI‹m
 = 
NULL
;

4079 
m_iPickupTy³
 = 
PICKUP_NONE
;

4083 
PICKUP_BUTTON
:

4084 
m_iAimFÏgs
 |ğ
AIM_ENTITY
;

4086 ià(
	`FNuÎEÁ
(
m_³ÁPickupI‹m
))

4088 
	`TaskCom¶‘e
();

4089 
m_iPickupTy³
 = 
PICKUP_NONE
;

4094 
v_¤c
 = 
	`EyePos™iÚ
();

4095 
ªgË_to_’t™y
 = 
	`InF›ldOfV›w
Ğ
v_de¡
 - 
v_¤c
 );

4097 ià(
f_™em_di¡ªû
 < 50)

4099 
m_æMoveS³ed
 = 0.0;

4100 
m_æSideMoveS³ed
 = 0.0;

4101 
m_bMoveToGßl
 = 
FALSE
;

4102 
m_bCheckT”¿š
 = 
FALSE
;

4104 ià(
ªgË_to_’t™y
 <= 10)

4107 
	`MDLL_U£
(
m_³ÁPickupI‹m
, 
	`ediù
());

4109 
³v
->
bu‰Ú
 |ğ
IN_USE
;

4111 
m_³ÁPickupI‹m
 = 
NULL
;

4112 
m_iPickupTy³
 = 
PICKUP_NONE
;

4113 
	`TaskCom¶‘e
();

4122 
	}
}

4128 
	gCBa£BÙ
::
	$BÙThšk
()

4130 
VeùÜ
 
v_diff
;

4131 
moved_di¡ªû
;

4132 
T¿ûResuÉ
 
Œ
;

4134 
iT—m
 = 
	`UTIL_G‘T—m
(
	`ediù
());

4137 ià(
m_bCheckW—pÚSw™ch
 && 
m_bBuyšgFšished
 && 
m_æS·wnTime
 + 4.0 < 
gpGlob®s
->
time
)

4139 
boŞ
 
bSw™chToKniã
 = 
TRUE
;

4141 ià(
	`HasSh›ld
())

4143 ià(
	`IsSh›ldD¿wn
())

4144 
³v
->
bu‰Ú
 |ğ
IN_ATTACK2
;

4148 
m_iCu¼’tW—pÚ
)

4150 
WEAPON_M4A1
:

4151 
WEAPON_USP
:

4153 ià(
	`RANDOM_LONG
(1, 100) <=

4154 (
m_ucP”sÚ®™y
 =ğ
PERSONALITY_AGRESSIVE
 ? 35 : 65))

4156 ià(
³v
->
w—pÚªim
 > 6)

4158 
³v
->
bu‰Ú
 |ğ
IN_ATTACK2
;

4159 
bSw™chToKniã
 = 
FALSE
;

4164 ià(
³v
->
w—pÚªim
 <= 6)

4166 
³v
->
bu‰Ú
 |ğ
IN_ATTACK2
;

4167 
bSw™chToKniã
 = 
FALSE
;

4172 
WEAPON_FAMAS
:

4173 
WEAPON_GLOCK18
:

4174 ià(
	`RANDOM_LONG
(1, 100) < 50)

4176 
³v
->
bu‰Ú
 |ğ
IN_ATTACK2
;

4177 
bSw™chToKniã
 = 
FALSE
;

4183 ià(
	`RANDOM_LONG
(1, 100è< 20 && 
g_bBÙS´ay
)

4185 
bÙsk_t
 
TempTask
 = {
NULL
, NULL, 
TASK_SPRAYLOGO
, 
TASKPRI_SPRAYLOGO
, -1,

4186 
gpGlob®s
->
time
 + 1.0, 
FALSE
};

4187 
	`S¹Task
(&
TempTask
);

4190 ià(
bSw™chToKniã
 && (
m_ucP”sÚ®™y
 =ğ
PERSONALITY_AGRESSIVE
 ||

4191 
m_ucP”sÚ®™y
 =ğ
PERSONALITY_NORMAL
 && 
	`RANDOM_LONG
(1, 100) > 50))

4192 
	`S–eùW—pÚByName
("weapon_knife");

4195 
	`S–eùL—d”EachT—m
(
iT—m
);

4197 
m_bCheckW—pÚSw™ch
 = 
FALSE
;

4204 
m_æAùu®R—ùiÚTime
 += 0.2;

4205 ià(
m_æAùu®R—ùiÚTime
 > 
m_æId—lR—ùiÚTime
)

4206 
m_æAùu®R—ùiÚTime
 = 
m_æId—lR—ùiÚTime
;

4209 
m_æV›wDi¡ªû
 += 3.0;

4210 ià(
m_æV›wDi¡ªû
 > 
m_æMaxV›wDi¡ªû
)

4211 
m_æV›wDi¡ªû
 = 
m_æMaxV›wDi¡ªû
;

4213 
m_æMoveS³ed
 = 
³v
->
max¥“d
;

4215 ià(
m_æP»vTime
 <ğ
gpGlob®s
->
time
)

4218 
v_diff
 = 
m_vecP»vOrigš
 - 
³v
->
Üigš
;

4219 
moved_di¡ªû
 = 
v_diff
.
	`L’gth
();

4222 
m_vecP»vOrigš
 = 
³v
->
Üigš
;

4223 
m_æP»vTime
 = 
gpGlob®s
->
time
 + 0.2;

4226 
moved_di¡ªû
 = 2.0;

4228 
VeùÜ
 
v_dœeùiÚ
;

4229 
VeùÜ
 
v_ªgËs
;

4232 ià(
m_iRadioOrd”
 != 0)

4233 
	`CheckRadioCommªds
();

4236 
	`S‘CÚd™iÚs
();

4238 
m_bCheckT”¿š
 = 
TRUE
;

4239 
m_bMoveToGßl
 = 
TRUE
;

4240 
VeùÜ
 
v_de¡
;

4241 
VeùÜ
 
v_¤c
;

4242 
m_bWªtsToFœe
 = 
FALSE
;

4246 
	`CheckSmokeG»Çdes
();

4247 
m_bUsšgG»Çde
 = 
FALSE
;

4249 
m_bCªChoo£
 = 
TRUE
;

4252 
	`RunTask
();

4257 ià(
m_iCu¼W±Index
 != -1)

4258 
m_iWPTFÏgs
 = 
·ths
[
m_iCu¼W±Index
]->
æags
;

4260 
m_iWPTFÏgs
 = 0;

4262 
	`Choo£AimDœeùiÚ
();

4263 
	`FaûPos™iÚ
(
m_vecLookAt
);

4266 ià(
m_bWªtsToFœe
 && !
m_bUsšgG»Çde
 && 
m_æShoÙTime
 <ğ
gpGlob®s
->
time
)

4269 ià(!
	`FœeW—pÚ
(
m_vecLookAt
 - 
	`G‘GunPos™iÚ
()))

4270 
m_æShoÙTime
 = 
gpGlob®s
->
time
;

4274 ià(
m_æR–ßdCheckTime
 <ğ
gpGlob®s
->
time
)

4275 
	`CheckR–ßd
();

4278 
m_æId—lR—ùiÚTime
 = 
	`RANDOM_FLOAT
(
BÙSklD–ays
[
m_iSkl
 / 20].
fMšSu½ri£D–ay
,

4279 
BÙSklD–ays
[
m_iSkl
 / 20].
fMaxSu½ri£D–ay
);

4282 
v_dœeùiÚ
 = 
m_vecDe¡Origš
 - (
³v
->
Üigš
 +…ev->
v–oc™y
 * 
g_æTimeF¿meIÁ”v®
);

4283 
VeùÜ
 
vecDœeùiÚNÜm®
 = 
v_dœeùiÚ
.
	`NÜm®ize
();

4284 
VeùÜ
 
vecDœeùiÚ
 = 
vecDœeùiÚNÜm®
;

4285 
vecDœeùiÚNÜm®
.
z
 = 0.0;

4287 
m_vecMoveAngËs
 = 
	`UTIL_VecToAngËs
(
v_dœeùiÚ
);

4289 
	`CÏmpAngËs
(
m_vecMoveAngËs
);

4290 
m_vecMoveAngËs
.
x
 *= -1.0;

4293 ià(
m_bMoveToGßl
)

4295 
	`G‘V®idWaypošt
();

4298 ià(
·ths
[
m_iCu¼W±Index
]->
æags
 & 
W_FL_CROUCH
)

4299 
³v
->
bu‰Ú
 |ğ
IN_DUCK
;

4301 
fDi¡ªû
 = (
m_vecDe¡Origš
 - (
³v
->
Üigš
 +…ev->
v–oc™y
 * 
g_æTimeF¿meIÁ”v®
)).
	`L’gth2D
();

4302 ià(
fDi¡ªû
 < 
m_æMoveS³ed
 * 
g_æTimeF¿meIÁ”v®
)

4303 
m_æMoveS³ed
 = 
fDi¡ªû
;

4305 ià(
m_æMoveS³ed
 < 2)

4306 
m_æMoveS³ed
 = 2;

4308 
m_æTimeWaypoštMove
 = 
gpGlob®s
->
time
;

4310 ià(
	`IsOnLadd”
())

4312 ià(
	`Cu¼’tTask
()->
iTask
 !ğ
TASK_SHOOTBREAKABLE
 &&

4313 
	`Cu¼’tTask
()->
iTask
 !ğ
TASK_ATTACK
)

4314 
	`BÙOnLadd”
();

4318 
³v
->
bu‰Ú
 |ğ(
IN_FORWARD
 | 
IN_BACK
 | 
IN_MOVELEFT
 | 
IN_MOVERIGHT
);

4319 
m_æMoveS³ed
 = 0.0;

4320 
m_æSideMoveS³ed
 = 0.0;

4323 ià(
	`IsInW©”
())

4325 
VeùÜ
 
vecV›wPos
 = 
	`EyePos™iÚ
();

4328 
iAngË
 = 
	`InF›ldOfV›w
(
m_vecDe¡Origš
 - 
vecV›wPos
);

4331 ià(
iAngË
 > 90)

4332 
³v
->
bu‰Ú
 |ğ
IN_BACK
;

4334 
³v
->
bu‰Ú
 |ğ
IN_FORWARD
;

4336 ià(
m_vecMoveAngËs
.
x
 > 60.0)

4337 
³v
->
bu‰Ú
 |ğ
IN_DUCK
;

4338 ià(
m_vecMoveAngËs
.
x
 < -60.0)

4339 
³v
->
bu‰Ú
 |ğ
IN_JUMP
;

4343 ià(
m_bCheckT”¿š
)

4345 
ediù_t
 *
³Á
;

4346 
boŞ
 
bBÙIsStuck
 = 
FALSE
;

4349 ià(!
	`FNuÎEÁ
(
³Á
 = 
	`FšdB»akabË
()))

4351 
m_³ÁShoÙB»akabË
 = 
³Á
;

4352 
m_iCampBu‰Ús
 = 
³v
->
bu‰Ú
 & 
IN_DUCK
;

4353 
bÙsk_t
 
TempTask
 = {
NULL
, NULL, 
TASK_SHOOTBREAKABLE
, 
TASKPRI_SHOOTBREAKABLE
, -1, 0.0, 
FALSE
};

4354 
	`S¹Task
(&
TempTask
);

4358 
³Á
 = 
NULL
;

4359 
ediù_t
 *
pN—»¡PÏy”
 = 
NULL
;

4360 
f_Ã¬e¡di¡ªû
 = 300.0;

4361 
f_di¡ªû_now
;

4364 !
	`FNuÎEÁ
(
³Á
 = 
	`FIND_ENTITY_IN_SPHERE
Õ’t, 
³v
->
Üigš
,…ev->
max¥“d
)))

4367 ià(
³Á
->
v
.
efãùs
 & 
EF_NODRAW
)

4371 ià(
	`IsPÏy”
(
³Á
))

4374 ià(
	`UTIL_G‘T—m
(
³Á
è!ğ
iT—m
 || !
	`IsAlive
Õ’tè||…’ˆ=ğ
	`ediù
())

4377 
f_di¡ªû_now
 = (
³Á
->
v
.
Üigš
 - 
³v
->Üigš).
	`L’gth
();

4378 ià(
f_di¡ªû_now
 < 
f_Ã¬e¡di¡ªû
)

4380 
pN—»¡PÏy”
 = 
³Á
;

4381 
f_Ã¬e¡di¡ªû
 = 
f_di¡ªû_now
;

4386 ià(!
	`FNuÎEÁ
(
pN—»¡PÏy”
))

4388 
VeùÜ
 
vecOth”
 = 
pN—»¡PÏy”
->
v
.
Üigš
;

4391 
	`UTIL_MakeVeùÜs
(
m_vecMoveAngËs
);

4394 
VeùÜ
 
vecMoved
 = 
³v
->
Üigš
 + 
gpGlob®s
->
v_fÜw¬d
 * 
m_æMoveS³ed
 * 
g_æTimeF¿meIÁ”v®
;

4395 
vecMoved
 = vecMoved + 
gpGlob®s
->
v_right
 * 
m_æSideMoveS³ed
 * 
g_æTimeF¿meIÁ”v®
;

4396 
vecMoved
 = vecMoved + 
³v
->
v–oc™y
 * 
g_æTimeF¿meIÁ”v®
;

4397 
f_di¡ªû_moved
 = (
vecOth”
 - 
vecMoved
).
	`L’gth
();

4399 
vecOth”
 = vecOth” + 
pN—»¡PÏy”
->
v
.
v–oc™y
 * 
g_æTimeF¿meIÁ”v®
;

4400 
fDi¡ªûNextF¿me
 = (
vecOth”
 - 
³v
->
Üigš
).
	`L’gth
();

4403 ià(
f_di¡ªû_moved
 <= 48.0 ||

4404 (
f_Ã¬e¡di¡ªû
 <ğ56.0 && 
fDi¡ªûNextF¿me
 < f_nearestdistance))

4407 
VeùÜ2D
 
vec2DœToPošt
 = (
³v
->
Üigš
 - 
pN—»¡PÏy”
->
v
.Üigš).
	`Make2D
().
	`NÜm®ize
();

4409 ià(
	`DÙProduù
(
vec2DœToPošt
, 
gpGlob®s
->
v_right
.
	`Make2D
()) > 0)

4410 
	`S‘SŒaãS³ed
(
vecDœeùiÚNÜm®
, 
³v
->
max¥“d
);

4412 
	`S‘SŒaãS³ed
(
vecDœeùiÚNÜm®
, -
³v
->
max¥“d
);

4414 ià(
f_Ã¬e¡di¡ªû
 < 56.0)

4416 ià(
	`DÙProduù
(
vec2DœToPošt
, 
gpGlob®s
->
v_fÜw¬d
.
	`Make2D
()) < 0)

4417 
m_æMoveS³ed
 = -
³v
->
max¥“d
;

4425 ià((
m_æMoveS³ed
 >ğ10 || 
m_æSideMoveS³ed
 >= 10) &&

4426 
m_æNoCŞlTime
 < 
gpGlob®s
->
time
 && 
	`Cu¼’tTask
()->
iTask
 !ğ
TASK_ATTACK
)

4428 ià(
moved_di¡ªû
 < 2.0 && 
m_æP»vS³ed
 > 20.0)

4431 
m_æP»vTime
 = 
gpGlob®s
->
time
;

4432 
bBÙIsStuck
 = 
TRUE
;

4433 ià(
m_æFœ¡CŞlideTime
 == 0.0)

4434 
m_æFœ¡CŞlideTime
 = 
gpGlob®s
->
time
 + 0.2;

4439 ià(
	`CªtMoveFÜw¬d
(
vecDœeùiÚNÜm®
, &
Œ
è&& !
	`IsOnLadd”
())

4441 ià(
m_æFœ¡CŞlideTime
 == 0.0)

4442 
m_æFœ¡CŞlideTime
 = 
gpGlob®s
->
time
 + 0.2;

4443 ià(
m_æFœ¡CŞlideTime
 <ğ
gpGlob®s
->
time
)

4444 
bBÙIsStuck
 = 
TRUE
;

4447 
m_æFœ¡CŞlideTime
 = 0.0;

4450 ià(!
bBÙIsStuck
)

4452 ià(
m_æProbeTime
 + 0.5 < 
gpGlob®s
->
time
)

4455 
	`Re£tCŞlideS‹
();

4460 ià(
m_rgcCŞlideMoves
[
m_cCŞlS‹Index
] =ğ
COLLISION_DUCK
 &&

4461 ((
³v
->
æags
 & 
FL_ONGROUND
è|| 
	`IsInW©”
()))

4462 
³v
->
bu‰Ú
 |ğ
IN_DUCK
;

4468 ià(
m_cCŞlisiÚS‹
 =ğ
COLLISION_NOTDECIDED
)

4470 
cB™s
;

4472 ià(
	`IsOnLadd”
())

4473 
cB™s
 = 
PROBE_STRAFE
;

4474 ià(
	`IsInW©”
())

4475 
cB™s
 = (
PROBE_JUMP
 | 
PROBE_STRAFE
);

4477 
cB™s
 = (
PROBE_JUMP
 | 
PROBE_STRAFE
 | 
PROBE_DUCK
);

4480 ià((
³v
->
æags
 & 
FL_ONGROUND
è|| 
	`IsOnLadd”
(è|| 
	`IsInW©”
())

4482 
cS‹
[8];

4483 
i
 = 0;

4486 
cS‹
[
i
++] = 
COLLISION_JUMP
;

4487 
cS‹
[
i
++] = 
COLLISION_DUCK
;

4488 
cS‹
[
i
++] = 
COLLISION_STRAFELEFT
;

4489 
cS‹
[
i
++] = 
COLLISION_STRAFERIGHT
;

4492 ià(
cB™s
 & 
PROBE_JUMP
)

4494 
cS‹
[
i
] = 0;

4495 ià(
	`CªJumpUp
(
vecDœeùiÚNÜm®
))

4496 
cS‹
[
i
] += 10;

4497 ià(
m_vecDe¡Origš
.
z
 >ğ
³v
->
Üigš
.z + 18.0)

4498 
cS‹
[
i
] += 5;

4499 ià(
	`EÁ™yIsVisibË
(
m_vecDe¡Origš
))

4501 
	`UTIL_MakeVeùÜs
(
m_vecMoveAngËs
);

4502 
v_¤c
 = 
	`EyePos™iÚ
();

4503 
v_¤c
 = v_¤ø+ 
gpGlob®s
->
v_right
 * 15;

4504 
	`UTIL_T¿ûLše
Ğ
v_¤c
, 
m_vecDe¡Origš
, 
ignÜe_mÚ¡”s
, 
ignÜe_gÏss
, 
	`ediù
(), &
Œ
);

4505 ià(
Œ
.
æF¿ùiÚ
 >= 1.0)

4507 
v_¤c
 = 
	`EyePos™iÚ
();

4508 
v_¤c
 = v_¤ø- 
gpGlob®s
->
v_right
 * 15;

4509 
	`UTIL_T¿ûLše
Ğ
v_¤c
, 
m_vecDe¡Origš
, 
ignÜe_mÚ¡”s
, 
ignÜe_gÏss
, 
	`ediù
(), &
Œ
);

4510 ià(
Œ
.
æF¿ùiÚ
 >= 1.0)

4511 
cS‹
[
i
] += 5;

4514 ià(
³v
->
æags
 & 
FL_DUCKING
)

4515 
v_¤c
 = 
³v
->
Üigš
;

4517 
v_¤c
 = 
³v
->
Üigš
 + 
	`VeùÜ
(0, 0, -17);

4518 
v_de¡
 = 
v_¤c
 + 
vecDœeùiÚNÜm®
 * 30;

4519 
	`UTIL_T¿ûLše
Ğ
v_¤c
, 
v_de¡
, 
ignÜe_mÚ¡”s
, 
ignÜe_gÏss
, 
	`ediù
(), &
Œ
);

4520 ià(
Œ
.
æF¿ùiÚ
 != 1.0)

4521 
cS‹
[
i
] += 10;

4524 
cS‹
[
i
] = 0;

4525 
i
++;

4527 ià(
cB™s
 & 
PROBE_DUCK
)

4529 
cS‹
[
i
] = 0;

4530 ià(
	`CªDuckUnd”
(
vecDœeùiÚNÜm®
))

4531 
cS‹
[
i
] += 10;

4532 ià(
m_vecDe¡Origš
.
z
 + 36.0 <ğ
³v
->
Üigš
.z && 
	`EÁ™yIsVisibË
(m_vecDestOrigin))

4533 
cS‹
[
i
] += 5;

4536 
cS‹
[
i
] = 0;

4537 
i
++;

4539 ià(
cB™s
 & 
PROBE_STRAFE
)

4541 
cS‹
[
i
] = 0;

4542 
cS‹
[
i
 + 1] = 0;

4544 
VeùÜ2D
 
vec2DœToPošt
;

4545 
VeùÜ2D
 
vec2RightSide
;

4548 
	`UTIL_MakeVeùÜs
(
m_vecMoveAngËs
);

4550 
vec2DœToPošt
 = (
³v
->
Üigš
 - 
m_vecDe¡Origš
).
	`Make2D
().
	`NÜm®ize
();

4551 
vec2RightSide
 = 
gpGlob®s
->
v_right
.
	`Make2D
().
	`NÜm®ize
();

4552 
boŞ
 
bDœRight
 = 
FALSE
;

4553 
boŞ
 
bDœLeá
 = 
FALSE
;

4554 
boŞ
 
bBlockedLeá
 = 
FALSE
;

4555 
boŞ
 
bBlockedRight
 = 
FALSE
;

4557 iàĞ
	`DÙProduù
 ( 
vec2DœToPošt
, 
vec2RightSide
 ) > 0 )

4558 
bDœRight
 = 
TRUE
;

4560 
bDœLeá
 = 
TRUE
;

4562 ià(
m_æMoveS³ed
 > 0)

4563 
vecDœeùiÚ
 = 
gpGlob®s
->
v_fÜw¬d
;

4565 
vecDœeùiÚ
 = -
gpGlob®s
->
v_fÜw¬d
;

4568 
v_¤c
 = 
³v
->
Üigš
 + 
gpGlob®s
->
v_right
 * 32;

4569 
v_de¡
 = 
v_¤c
 + 
vecDœeùiÚ
 * 32;

4570 
	`UTIL_T¿ûHuÎ
(
v_¤c
, 
v_de¡
, 
ignÜe_mÚ¡”s
, 
h—d_huÎ
, 
	`ediù
(), &
Œ
);

4571 ià(
Œ
.
æF¿ùiÚ
 != 1.0)

4572 
bBlockedRight
 = 
TRUE
;

4574 
v_¤c
 = 
³v
->
Üigš
 - 
gpGlob®s
->
v_right
 * 32;

4575 
v_de¡
 = 
v_¤c
 + 
vecDœeùiÚ
 * 32;

4576 
	`UTIL_T¿ûHuÎ
(
v_¤c
, 
v_de¡
, 
ignÜe_mÚ¡”s
, 
h—d_huÎ
, 
	`ediù
(), &
Œ
);

4577 ià(
Œ
.
æF¿ùiÚ
 != 1.0)

4578 
bBlockedLeá
 = 
TRUE
;

4580 ià(
bDœLeá
)

4581 
cS‹
[
i
] += 5;

4583 
cS‹
[
i
] -= 5;

4585 ià(
bBlockedLeá
)

4586 
cS‹
[
i
] -= 5;

4588 
i
++;

4590 ià(
bDœRight
)

4591 
cS‹
[
i
] += 5;

4593 
cS‹
[
i
] -= 5;

4595 ià(
bBlockedRight
)

4596 
cS‹
[
i
] -= 5;

4600 
cS‹
[
i
] = 0;

4601 
i
++;

4602 
cS‹
[
i
] = 0;

4606 
cTemp
;

4607 
boŞ
 
bSÜtšg
;

4610 
bSÜtšg
 = 
FALSE
;

4611 
i
 = 0; i < 3; i++)

4613 ià(
cS‹
[
i
 + 4] < cState[i + 5])

4615 
cTemp
 = 
cS‹
[
i
];

4616 
cS‹
[
i
] = cState[i + 1];

4617 
cS‹
[
i
 + 1] = 
cTemp
;

4618 
cTemp
 = 
cS‹
[
i
 + 4];

4619 
cS‹
[
i
 + 4] = cState[i + 5];

4620 
cS‹
[
i
 + 5] = 
cTemp
;

4621 
bSÜtšg
 = 
TRUE
;

4624 } 
bSÜtšg
);

4626 
i
 = 0; i < 4; i++)

4627 
m_rgcCŞlideMoves
[
i
] = 
cS‹
[i];

4628 
m_æCŞlideTime
 = 
gpGlob®s
->
time
;

4629 
m_æProbeTime
 = 
gpGlob®s
->
time
 + 0.5;

4630 
m_cCŞlisiÚProbeB™s
 = 
cB™s
;

4631 
m_cCŞlisiÚS‹
 = 
COLLISION_PROBING
;

4632 
m_cCŞlS‹Index
 = 0;

4636 ià(
m_cCŞlisiÚS‹
 =ğ
COLLISION_PROBING
)

4638 ià(
m_æProbeTime
 < 
gpGlob®s
->
time
)

4640 
m_cCŞlS‹Index
++;

4641 
m_æProbeTime
 = 
gpGlob®s
->
time
 + 0.5;

4642 ià(
m_cCŞlS‹Index
 > 4)

4644 
m_æW±Time£t
 = 
gpGlob®s
->
time
 - 5.0;

4645 
	`Re£tCŞlideS‹
();

4649 ià(
m_cCŞlS‹Index
 <= 4)

4651 
m_rgcCŞlideMoves
[
m_cCŞlS‹Index
])

4653 
COLLISION_JUMP
:

4654 ià((
³v
->
æags
 & 
FL_ONGROUND
è|| 
	`IsInW©”
())

4655 
³v
->
bu‰Ú
 |ğ
IN_JUMP
;

4658 
COLLISION_DUCK
:

4659 ià((
³v
->
æags
 & 
FL_ONGROUND
è|| 
	`IsInW©”
())

4660 
³v
->
bu‰Ú
 |ğ
IN_DUCK
;

4663 
COLLISION_STRAFELEFT
:

4664 
	`S‘SŒaãS³ed
(
vecDœeùiÚNÜm®
, -
³v
->
max¥“d
);

4667 
COLLISION_STRAFERIGHT
:

4668 
	`S‘SŒaãS³ed
(
vecDœeùiÚNÜm®
, 
³v
->
max¥“d
);

4679 ià(
m_cAvoidG»Çde
 != 0)

4682 
³v
->
bu‰Ú
 &ğ~
IN_DUCK
;

4683 
m_æMoveS³ed
 = -
³v
->
max¥“d
;

4684 
m_æSideMoveS³ed
 = 
³v
->
max¥“d
 * 
m_cAvoidG»Çde
;

4689 ià(
m_æW±Time£t
 + 5.0 < 
gpGlob®s
->
time
 && 
	`FNuÎEÁ
(
m_³ÁEÃmy
))

4691 
	`G‘V®idWaypošt
();

4694 ià(!
	`FNuÎEÁ
(
m_³ÁPickupI‹m
))

4696 ià(!(
	`¡ºcmp
("g»Çde", 
	`STRING
(
m_³ÁPickupI‹m
->
v
.
şas¢ame
), 7) == 0 &&

4697 
	`FSŒEq
(
	`STRING
(
m_³ÁPickupI‹m
->
v
.
mod–
) + 9, "c4.mdl")))

4699 
m_³ÁI‹mIgnÜe
 = 
m_³ÁPickupI‹m
;

4700 
m_³ÁPickupI‹m
 = 
NULL
;

4701 
m_iPickupTy³
 = 
PICKUP_NONE
;

4702 
m_æI‹mCheckTime
 = 
gpGlob®s
->
time
 + 5.0;

4706 
m_³ÁShoÙB»akabË
 = 
NULL
;

4709 ià(
³v
->
bu‰Ú
 & 
IN_JUMP
)

4710 
m_æJumpTime
 = 
gpGlob®s
->
time
;

4712 ià(
m_æJumpTime
 + 1.0 > 
gpGlob®s
->
time
)

4714 ià(!(
³v
->
æags
 & 
FL_ONGROUND
è&& !
	`IsInW©”
())

4715 
³v
->
bu‰Ú
 |ğ
IN_DUCK
;

4718 #ifdeà
_DEBUG


4719 
æTimeDebugUpd©e
 = 0.0;

4721 ià(!
	`FNuÎEÁ
(
pHo¡Ediù
))

4723 
iS³cIndex
 = 
pHo¡Ediù
->
v
.
iu£r2
;

4724 ià(
iS³cIndex
 =ğ
	`ENTINDEX
(
	`ediù
()))

4726 
iIndex
, 
iGßl
, 
iTask
;

4728 ià(
m_pTasks
)

4730 ià(
iTask
 !ğ
m_pTasks
->iTask || 
iIndex
 !ğ
m_iCu¼W±Index
 ||

4731 
iGßl
 !ğ
m_pTasks
->
iD©a
 || 
æTimeDebugUpd©e
 < 
gpGlob®s
->
time
)

4733 
iTask
 = 
m_pTasks
->iTask;

4734 
iIndex
 = 
m_iCu¼W±Index
;

4735 
iGßl
 = 
m_pTasks
->
iD©a
;

4736 
szTaskÇme
[80];

4738 
iTask
)

4740 
TASK_NORMAL
:

4741 
	`¥rštf
(
szTaskÇme
, "TASK_NORMAL");

4744 
TASK_PAUSE
:

4745 
	`¥rštf
(
szTaskÇme
,"TASK_PAUSE");

4748 
TASK_MOVETOPOSITION
:

4749 
	`¥rštf
(
szTaskÇme
,"TASK_MOVETOPOSITION");

4752 
TASK_FOLLOWUSER
:

4753 
	`¥rštf
(
szTaskÇme
,"TASK_FOLLOWUSER");

4756 
TASK_PICKUPITEM
:

4757 
	`¥rštf
(
szTaskÇme
,"TASK_PICKUPITEM");

4760 
TASK_CAMP
:

4761 
	`¥rštf
(
szTaskÇme
,"TASK_CAMP");

4764 
TASK_PLANTBOMB
:

4765 
	`¥rštf
(
szTaskÇme
,"TASK_PLANTBOMB");

4768 
TASK_DEFUSEBOMB
:

4769 
	`¥rštf
(
szTaskÇme
,"TASK_DEFUSEBOMB");

4772 
TASK_ATTACK
:

4773 
	`¥rštf
(
szTaskÇme
,"TASK_ATTACK");

4776 
TASK_ENEMYHUNT
:

4777 
	`¥rštf
(
szTaskÇme
,"TASK_ENEMYHUNT");

4780 
TASK_SEEKCOVER
:

4781 
	`¥rštf
(
szTaskÇme
,"TASK_SEEKCOVER");

4784 
TASK_THROWHEGRENADE
:

4785 
	`¥rštf
(
szTaskÇme
,"TASK_THROWHEGRENADE");

4788 
TASK_THROWFLASHBANG
:

4789 
	`¥rštf
(
szTaskÇme
,"TASK_THROWFLASHBANG");

4792 
TASK_THROWSMOKEGRENADE
:

4793 
	`¥rštf
(
szTaskÇme
,"TASK_THROWSMOKEGRENADE");

4796 
TASK_SHOOTBREAKABLE
:

4797 
	`¥rštf
(
szTaskÇme
,"TASK_SHOOTBREAKABLE");

4800 
TASK_HIDE
:

4801 
	`¥rštf
(
szTaskÇme
,"TASK_HIDE");

4804 
TASK_BLINDED
:

4805 
	`¥rštf
(
szTaskÇme
,"TASK_BLINDED");

4808 
TASK_SPRAYLOGO
:

4809 
	`¥rštf
(
szTaskÇme
,"TASK_SPRAYLOGO");

4813 
szEÃmyName
[80];

4815 ià(
m_³ÁEÃmy
 !ğ
NULL
)

4816 
	`¡rıy
(
szEÃmyName
, 
	`STRING
(
m_³ÁEÃmy
->
v
.
ÃŠame
));

4817 ià(
m_³ÁLa¡EÃmy
 !ğ
NULL
)

4819 
	`¡rıy
(
szEÃmyName
, "(L)");

4820 
	`¡rÿt
(
szEÃmyName
, 
	`STRING
(
m_³ÁLa¡EÃmy
->
v
.
ÃŠame
));

4823 
	`¡rıy
(
szEÃmyName
,"(null)");

4825 
szPickupName
[80];

4827 ià(
m_³ÁPickupI‹m
 !ğ
NULL
)

4828 
	`¡rıy
(
szPickupName
, 
	`STRING
(
m_³ÁPickupI‹m
->
v
.
şas¢ame
));

4830 
	`¡rıy
(
szPickupName
,"(null)");

4832 
bÙ_w—pÚ_£Ëù_t
 *
pS–eù
 = &
cs_w—pÚ_£Ëù
[0];

4833 
cW—pÚCouÁ
 = 0;

4834 
m_iCu¼’tW—pÚ
 !ğ
pS–eù
->
iId
 && 
cW—pÚCouÁ
 < 
NUM_WEAPONS
)

4836 
pS–eù
++;

4837 
cW—pÚCouÁ
++;

4840 
szW—pÚName
[80];

4842 ià(
cW—pÚCouÁ
 >ğ
NUM_WEAPONS
)

4843 
	`¥rštf
(
szW—pÚName
,"UNKNOWN! (%d)",
m_iCu¼’tW—pÚ
);

4845 
	`¥rštf
(
szW—pÚName
,
pS–eù
->
w—pÚ_Çme
);

4847 
szOuut
[512];

4849 
	`¥rštf
(
szOuut
,

4854 
	`STRING
(
³v
->
ÃŠame
), 
iTask
, 
szTaskÇme
, 
	`Cu¼’tTask
()->
fDesœe
,

4855 
szW—pÚName
, 
	`G‘AmmoInCl
(), 
	`G‘Ammo
(),

4856 
m_iAimFÏgs
, 
m_æMoveS³ed
, 
m_æSideMoveS³ed
,

4857 
iIndex
, 
m_iP»vGßlIndex
, 
iGßl
, 
m_æW±Time£t
 - 
gpGlob®s
->
time
,

4858 
³v
->
mov‘y³
, 
szEÃmyName
, 
szPickupName
);

4860 
	`MESSAGE_BEGIN
Ğ
MSG_ONE_UNRELIABLE
, 
SVC_TEMPENTITY
,
NULL
,
pHo¡Ediù
);

4861 
	`WRITE_BYTE
(
TE_TEXTMESSAGE
);

4862 
	`WRITE_BYTE
(1);

4863 
	`WRITE_SHORT
(
	`FixedSigÃd16
(-1, 1<<13));

4864 
	`WRITE_SHORT
(
	`FixedSigÃd16
(0, 1<<13));

4865 
	`WRITE_BYTE
(0);

4866 
	`WRITE_BYTE
(255);

4867 
	`WRITE_BYTE
(255);

4868 
	`WRITE_BYTE
(255);

4869 
	`WRITE_BYTE
(0);

4870 
	`WRITE_BYTE
(255);

4871 
	`WRITE_BYTE
(255);

4872 
	`WRITE_BYTE
(255);

4873 
	`WRITE_BYTE
(0);

4874 
	`WRITE_SHORT
(
	`FixedUnsigÃd16
(0, 1<<8));

4875 
	`WRITE_SHORT
(
	`FixedUnsigÃd16
(0, 1<<8));

4876 
	`WRITE_SHORT
(
	`FixedUnsigÃd16
(1.0, 1<<8));

4877 
	`WRITE_STRING
(
szOuut
);

4878 
	`MESSAGE_END
();

4880 
æTimeDebugUpd©e
 = 
gpGlob®s
->
time
 + 1.0;

4883 
	`UTIL_D¿wA¼ow
(
pHo¡Ediù
, 
³v
->
Üigš
, 
m_vecDe¡Origš
, 30, 0, 255, 0, 0, 250, 5, 9);

4889 ià(!(
³v
->
bu‰Ú
 & (
IN_FORWARD
 | 
IN_BACK
)))

4891 ià(
m_æMoveS³ed
 > 0)

4892 
³v
->
bu‰Ú
 |ğ
IN_FORWARD
;

4893 ià(
m_æMoveS³ed
 < 0)

4894 
³v
->
bu‰Ú
 |ğ
IN_BACK
;

4897 ià(!(
³v
->
bu‰Ú
 & (
IN_MOVELEFT
 | 
IN_MOVERIGHT
)))

4899 ià(
m_æSideMoveS³ed
 > 0)

4900 
³v
->
bu‰Ú
 |ğ
IN_MOVERIGHT
;

4901 ià(
m_æSideMoveS³ed
 < 0)

4902 
³v
->
bu‰Ú
 |ğ
IN_MOVELEFT
;

4906 
m_æP»vS³ed
 = 
	`çbs
(
m_æMoveS³ed
);

4908 
m_iLa¡DamageTy³
 = -1;

4910 
	`CÏmpAngËs
(
³v
->
ªgËs
);

4911 
	`CÏmpAngËs
(
³v
->
v_ªgË
);

4912 
	}
}

4914 
boŞ
 
	gCBa£BÙ
::
	$HasHo¡age
()

4916 
i
 = 0; i < 
MAX_HOSTAGES
; i++)

4918 ià(!
	`FNuÎEÁ
(
m_rgpHo¡ages
[
i
]))

4921 ià(!
	`IsAlive
(
m_rgpHo¡ages
[
i
]))

4923 
m_rgpHo¡ages
[
i
] = 
NULL
;

4926  
TRUE
;

4929  
FALSE
;

4930 
	}
}

4932 
	gCBa£BÙ
::
	$Re£tCŞlideS‹
()

4934 
m_æCŞlideTime
 = 0.0;

4935 
m_æProbeTime
 = 0.0;

4936 
m_cCŞlisiÚProbeB™s
 = 0;

4937 
m_cCŞlisiÚS‹
 = 
COLLISION_NOTDECIDED
;

4938 
m_cCŞlS‹Index
 = 0;

4939 
	}
}

	@bot_chat.cpp

7 
	~"bÙ.h
"

9 
	#NUM_TAGS
 22

	)

16 *
	gg1
[
NUM_TAGS
] = {

18 *
	gg2
[
NUM_TAGS
] = {

21 
	$BÙTrimBÏnks
(*
š_¡ršg
, *
out_¡ršg
)

23 
i
, 
pos
;

24 *
de¡
;

26 
pos
 = 0;

27 
pos
 < 80 && 
š_¡ršg
[pos] == ' ')

28 
pos
++;

30 
de¡
 = 
out_¡ršg
;

32 
pos
 < 80 && 
š_¡ršg
[pos])

34 *
de¡
++ = 
š_¡ršg
[
pos
];

35 
pos
++;

37 *
de¡
 = 0;

39 
i
 = 
	`¡¾’
(
out_¡ršg
) - 1;

40 
i
 > 0 && 
out_¡ršg
[i] == ' ')

42 
out_¡ršg
[
i
] = 0;

43 
i
--;

45 
	}
}

47 
	$BÙCh©TrimTag
(*
Üigš®_Çme
, *
out_Çme
)

49 
i
;

50 *
pos1
, *
pos2
, *
¤c
, *
de¡
;

51 
š_Çme
[80];

52 
»suÉ
 = 0;

54 
	`¡ºıy
(
š_Çme
, 
Üigš®_Çme
, 31);

55 
š_Çme
[32] = 0;

57 
i
 = 0; i < 
NUM_TAGS
; i++)

59 
pos1
=
	`¡r¡r
(
š_Çme
, 
g1
[
i
]);

60 ià(
pos1
)

61 
pos2
 = 
	`¡r¡r
(
pos1
 + 
	`¡¾’
(
g1
[
i
]), 
g2
[i]);

63 
pos2
 = 
NULL
;

65 ià(
pos1
 && 
pos2
 &&…os1 <…os2)

67 
¤c
 = 
pos2
 + 
	`¡¾’
(
g2
[
i
]);

68 
de¡
 = 
pos1
;

69 *
¤c
)

70 *
de¡
++ = *
¤c
++;

71 *
de¡
 = *
¤c
;

73 
»suÉ
 = 1;

77 
	`¡rıy
(
out_Çme
, 
š_Çme
);

79 
	`BÙTrimBÏnks
(
out_Çme
, 
š_Çme
);

81 ià(
	`¡¾’
(
š_Çme
) == 0)

83 
	`¡ºıy
(
š_Çme
, 
Üigš®_Çme
, 31);

84 
š_Çme
[32] = 0;

87 
i
 = 0; i < 
NUM_TAGS
; i++)

89 
pos1
 = 
	`¡r¡r
(
š_Çme
, 
g1
[
i
]);

90 ià(
pos1
)

91 
pos2
 = 
	`¡r¡r
(
pos1
 + 
	`¡¾’
(
g1
[
i
]), 
g2
[i]);

93 
pos2
 = 
NULL
;

95 ià(
pos1
 && 
pos2
 &&…os1 <…os2)

97 
¤c
 = 
pos1
 + 
	`¡¾’
(
g1
[
i
]);

98 
de¡
 = 
pos1
;

99 *
¤c
)

100 *
de¡
++ = *
¤c
++;

101 *
de¡
 = *
¤c
;

103 
¤c
 = 
pos2
 - 
	`¡¾’
(
g2
[
i
]);

104 *
¤c
 = 0;

108 
	`BÙTrimBÏnks
(
š_Çme
, 
out_Çme
);

109 
out_Çme
[31] = 0;

111  
»suÉ
;

112 
	}
}

115 
	$CÚv”tNameToHumª
(*
Üigš®_Çme
, *
out_Çme
)

117 
pos
;

118 
‹mp_Çme
[80];

120 
	`¡ºıy
(
‹mp_Çme
, 
Üigš®_Çme
, 31);

121 
‹mp_Çme
[31] = 0;

123 
	`BÙCh©TrimTag
(
‹mp_Çme
, 
out_Çme
))

124 
	`¡rıy
(
‹mp_Çme
, 
out_Çme
);

126 
Ën
 = 
	`¡¾’
(
out_Çme
);

128 ià(
out_Çme
[
Ën
-1] == ')')

130 
pos
 = 
Ën
 - 1;…os >=†en-5;…os--)

132 ià(
out_Çme
[
pos
] == '(')

134 
out_Çme
[
pos
] = 0;

139 
	}
}

145 
	$BÙDrİCh¬aù”
(*
out_¡ršg
)

147 
Ën
, 
pos
;

148 
couÁ
 = 0;

149 *
¤c
, *
de¡
;

151 
Ën
 = 
	`¡¾’
(
out_¡ršg
);

152 
pos
 = 
	`RANDOM_LONG
(1, 
Ën
-1);

154 !
	`i§Íha
(
out_¡ršg
[
pos
]è&& 
couÁ
 < 20)

156 
pos
 = 
	`RANDOM_LONG
(1, 
Ën
-1);

157 
couÁ
++;

160 ià(
couÁ
 < 20)

162 
¤c
 = &
out_¡ršg
[
pos
+1];

163 
de¡
 = &
out_¡ršg
[
pos
];

164 *
¤c
)

165 *
de¡
++ = *
¤c
++;

166 *
de¡
 = *
¤c
;

168 
	}
}

171 
	$BÙSw­Ch¬aù”
(*
out_¡ršg
)

173 
Ën
, 
pos
;

174 
couÁ
 = 0;

175 
‹mp
;

176 
boŞ
 
is_bad
;

178 
Ën
 = 
	`¡¾’
(
out_¡ršg
);

179 
pos
 = 
	`RANDOM_LONG
(1, 
Ën
-2);

181 
is_bad
 = !
	`i§Íha
(
out_¡ršg
[
pos
]) || !isalpha(out_string[pos+1]);

183 (
is_bad
è&& (
couÁ
 < 20))

185 
pos
 = 
	`RANDOM_LONG
(1, 
Ën
-2);

186 
is_bad
 = !
	`i§Íha
(
out_¡ršg
[
pos
]) || !isalpha(out_string[pos+1]);

187 
couÁ
++;

190 ià(
couÁ
 < 20)

192 
‹mp
 = 
out_¡ršg
[
pos
];

193 
out_¡ršg
[
pos
] = out_string[pos+1];

194 
out_¡ršg
[
pos
+1] = 
‹mp
;

196 
	}
}

202 
	gCBa£BÙ
::
	$P»·»Ch©Mes§ge
(*
pszText
)

204 
iL’
;

205 
szNamePÏûhŞd”
[80];

207 
	`mem£t
(&
m_szMiscSŒšgs
, 0, (m_szMiscStrings));

209 *
pszTextS¹
 = 
pszText
;

210 *
pszP©‹º
 = 
pszText
;

211 
ediù_t
 *
pT®kEdiù
;

213 
pszP©‹º
)

216 
pszP©‹º
 = 
	`¡r¡r
(
pszTextS¹
,"%");

217 if(
pszP©‹º
)

219 
iL’
 = 
pszP©‹º
 - 
pszTextS¹
;

220 ià(
iL’
 > 0)

221 
	`¡ºıy
(
m_szMiscSŒšgs
, 
pszTextS¹
, 
iL’
);

222 
pszP©‹º
++;

225 if(*
pszP©‹º
 == 'f')

227 
iHighe¡F¿gs
 = -9000;

228 
iCu¼F¿gs
;

229 
iIndex
 = 0;

231 
i
;

232 
i
 = 0; i < 
gpGlob®s
->
maxCl›Ás
; i++)

234 ià(
Th»©Tab
[
i
].
IsU£d
 =ğ
FALSE
 || Th»©Tab[i].
pEdiù
 =ğ
	`ediù
())

236 
iCu¼F¿gs
 = 
Th»©Tab
[
i
].
pEdiù
->
v
.
äags
;

237 ià(
iCu¼F¿gs
 > 
iHighe¡F¿gs
)

239 
iHighe¡F¿gs
 = 
iCu¼F¿gs
;

240 
iIndex
 = 
i
;

244 
pT®kEdiù
 = 
Th»©Tab
[
iIndex
].
pEdiù
;

245 ià(!
	`FNuÎEÁ
(
pT®kEdiù
è&& !pT®kEdiù->
ä“
)

247 
	`CÚv”tNameToHumª
((*)
	`STRING
(
pT®kEdiù
->
v
.
ÃŠame
),
szNamePÏûhŞd”
);

248 
	`¡rÿt
(
m_szMiscSŒšgs
, 
szNamePÏûhŞd”
);

252 ià(*
pszP©‹º
 == 'm')

253 
	`¡rÿt
(
m_szMiscSŒšgs
, 
	`STRING
(
gpGlob®s
->
m­Çme
));

255 ià(*
pszP©‹º
 == 'r')

257 
szTime
[6];

258 
iTime
 = ()(
g_fTimeRoundEnd
 - 
gpGlob®s
->
time
);

260 
	`¥rštf
(
szTime
,"%02d:%02d", 
iTime
 / 60, iTime % 60);

261 
	`¡rÿt
(
m_szMiscSŒšgs
,
szTime
);

264 ià(*
pszP©‹º
 == 's')

266 
pT®kEdiù
 = 
	`INDEXENT
(
m_Say‹xtBufãr
.
iEÁ™yIndex
);

267 ià(!
	`FNuÎEÁ
(
pT®kEdiù
è&& !pT®kEdiù->
ä“
)

269 
	`CÚv”tNameToHumª
((*)
	`STRING
(
pT®kEdiù
->
v
.
ÃŠame
),
szNamePÏûhŞd”
);

270 
	`¡rÿt
(
m_szMiscSŒšgs
,
szNamePÏûhŞd”
);

274 ià(*
pszP©‹º
 == 't')

276 
iT—m
 = 
	`UTIL_G‘T—m
(
	`ediù
());

277 
i
;

278 
i
 = 0; i < 
gpGlob®s
->
maxCl›Ás
; i++)

280 ià(
Th»©Tab
[
i
].
IsU£d
 =ğ
FALSE
 || Th»©Tab[i].
IsAlive
 == FALSE ||

281 
Th»©Tab
[
i
].
iT—m
 !ğiT—m || Th»©Tab[i].
pEdiù
 =ğ
	`ediù
())

285 ià(
i
 < 
gpGlob®s
->
maxCl›Ás
)

287 
pT®kEdiù
 = 
Th»©Tab
[
i
].
pEdiù
;

288 ià(!
	`FNuÎEÁ
(
pT®kEdiù
è&& !pT®kEdiù->
ä“
)

290 
	`CÚv”tNameToHumª
((*)
	`STRING
(
pT®kEdiù
->
v
.
ÃŠame
),
szNamePÏûhŞd”
);

291 
	`¡rÿt
(
m_szMiscSŒšgs
, 
szNamePÏûhŞd”
);

296 
i
 = 0; i < 
gpGlob®s
->
maxCl›Ás
; i++)

298 ià(
Th»©Tab
[
i
].
IsU£d
 =ğ
FALSE
 || Th»©Tab[i].
iT—m
 != iTeam ||

299 
Th»©Tab
[
i
].
pEdiù
 =ğ
	`ediù
())

303 ià(
i
 < 
gpGlob®s
->
maxCl›Ás
)

305 
pT®kEdiù
 = 
Th»©Tab
[
i
].
pEdiù
;

306 ià(!
	`FNuÎEÁ
(
pT®kEdiù
è&& !pT®kEdiù->
ä“
)

308 
	`CÚv”tNameToHumª
((*)
	`STRING
(
pT®kEdiù
->
v
.
ÃŠame
), 
szNamePÏûhŞd”
);

309 
	`¡rÿt
(
m_szMiscSŒšgs
, 
szNamePÏûhŞd”
);

314 ià(*
pszP©‹º
 == 'v')

316 
pT®kEdiù
 = 
m_³ÁLa¡Viùim
;

317 ià(!
	`FNuÎEÁ
(
pT®kEdiù
è&& !pT®kEdiù->
ä“
)

319 
	`CÚv”tNameToHumª
((*)
	`STRING
(
pT®kEdiù
->
v
.
ÃŠame
),
szNamePÏûhŞd”
);

320 
	`¡rÿt
(
m_szMiscSŒšgs
, 
szNamePÏûhŞd”
);

323 
pszP©‹º
++;

324 
pszTextS¹
 = 
pszP©‹º
;

329 
‹mp_‹xt
[160];

330 
	`¡ºıy
(
‹mp_‹xt
, 
pszTextS¹
, 159);

332 ià(
	`RANDOM_LONG
(1, 100) <= 8)

333 
	`BÙDrİCh¬aù”
(
‹mp_‹xt
);

335 ià(
	`RANDOM_LONG
(1, 100) <= 8)

336 
	`BÙSw­Ch¬aù”
(
‹mp_‹xt
);

338 ià(
	`RANDOM_LONG
(1, 100) <= 10)

340 
pos
 = 0;

342 
‹mp_‹xt
[
pos
])

344 
‹mp_‹xt
[
pos
] = 
	`tŞow”
(temp_text[pos]);

345 
pos
++;

349 
	`¡rÿt
(
m_szMiscSŒšgs
, 
‹mp_‹xt
);

350 
	}
}

353 
boŞ
 
	$BÙCheckKeywÜds
(*
pszMes§ge
, *
pszR•ly
)

355 
»¶ynode_t
 *
pR•ly
 = 
pCh©R•l›s
;

356 
szKeywÜd
[128];

357 *
pszCu¼KeywÜd
;

358 *
pszKeywÜdEnd
;

359 
iL’
, 
iRªdom
;

360 
cNumR‘r›s
;

362 
pR•ly
 !ğ
NULL
)

364 
pszCu¼KeywÜd
 = (*)&
pR•ly
->
pszKeywÜds
;

365 
pszCu¼KeywÜd
)

367 
pszKeywÜdEnd
 = 
	`¡r¡r
(
pszCu¼KeywÜd
, "@");

368 ià(
pszKeywÜdEnd
)

370 
iL’
=
pszKeywÜdEnd
 - 
pszCu¼KeywÜd
;

371 
	`¡ºıy
Ğ
szKeywÜd
, 
pszCu¼KeywÜd
, 
iL’
);

372 
szKeywÜd
[
iL’
] = 0x0;

374 *
pP©‹º
 = 
	`¡r¡r
(
pszMes§ge
, 
szKeywÜd
);

375 ià(
pP©‹º
)

377 
STRINGNODE
 *
pNode
 = 
pR•ly
->
pR•l›s
;

378 ià(
pR•ly
->
cNumR•l›s
 == 1)

379 
	`¡rıy
(
pszR•ly
, 
pNode
->
pszSŒšg
);

382 
cNumR‘r›s
 = 0;

385 
iRªdom
 = 
	`RANDOM_LONG
(1, 
pR•ly
->
cNumR•l›s
);

386 
cNumR‘r›s
++;

387 } 
iRªdom
 =ğ
pR•ly
->
cLa¡R•ly


388 && 
cNumR‘r›s
 <ğ
pR•ly
->
cNumR•l›s
);

389 
pR•ly
->
cLa¡R•ly
 = 
iRªdom
;

390 
cNumR‘r›s
 = 1;

391 
cNumR‘r›s
 < 
iRªdom
)

393 
pNode
 =…Node->
Next
;

394 
cNumR‘r›s
++;

396 
	`¡rıy
(
pszR•ly
, 
pNode
->
pszSŒšg
);

398  
TRUE
;

400 
pszKeywÜdEnd
++;

401 ià(*
pszKeywÜdEnd
 == 0x0)

402 
pszKeywÜdEnd
 = 
NULL
;

404 
pszCu¼KeywÜd
 = 
pszKeywÜdEnd
;

406 
pR•ly
 =…R•ly->
pNextR•lyNode
;

410 ià(
	`RANDOM_LONG
(1, 100) < 50)

412 
STRINGNODE
 *
pTempNode
 = 
	`G‘NodeSŒšg
(
pCh©NoKeywÜd
, 
	`RANDOM_LONG
(0, 
iNumNoKeySŒšgs
));

414 ià(
pTempNode
 &&…TempNode->
pszSŒšg
)

416 
	`¡rıy
 (
pszR•ly
, 
pTempNode
->
pszSŒšg
);

417  
TRUE
;

421  
FALSE
;

422 
	}
}

424 
boŞ
 
	gCBa£BÙ
::
	$P¬£Ch©
(*
pszR•ly
)

426 
szMes§ge
[512];

428 
	`¡rıy
(
szMes§ge
, 
m_Say‹xtBufãr
.
szSayText
);

430 
iMes§geL’
 = 
	`¡¾’
(
szMes§ge
);

433 
i
 = 0; i < 
iMes§geL’
; i++)

434 
szMes§ge
[
i
] = 
	`touµ”
(szMessage[i]);

436  
	`BÙCheckKeywÜds
(
szMes§ge
, 
pszR•ly
);

437 
	}
}

440 
boŞ
 
	gCBa£BÙ
::
	$R•l›sToPÏy”
()

442 ià(
m_Say‹xtBufãr
.
iEÁ™yIndex
 != -1

443 && 
m_Say‹xtBufãr
.
szSayText
[0] != 0x0)

445 
szText
[256];

446 ià(
m_Say‹xtBufãr
.
fTimeNextCh©
 < 
gpGlob®s
->
time
)

448 ià(
	`RANDOM_LONG
(1,100è< 
m_Say‹xtBufãr
.
cCh©Probab™y


449 && 
	`P¬£Ch©
(
szText
))

451 
	`P»·»Ch©Mes§ge
(
szText
);

452 
	`PushMes§geQueue
(
MSG_CS_SAY
);

453 
m_Say‹xtBufãr
.
iEÁ™yIndex
 = -1;

454 
m_Say‹xtBufãr
.
szSayText
[0] = 0x0;

455 
m_Say‹xtBufãr
.
fTimeNextCh©
 = 
gpGlob®s
->
time
 + m_Say‹xtBufãr.
fCh©D–ay
;

456  
TRUE
;

458 
m_Say‹xtBufãr
.
iEÁ™yIndex
 = -1;

459 
m_Say‹xtBufãr
.
szSayText
[0] = 0x0;

462  
FALSE
;

463 
	}
}

465 
	gCBa£BÙ
::
	$SayText
(cÚ¡ *
pText
)

467 ià(
	`IsNuÎSŒšg
(
pText
))

470 
	`FakeCl›ÁCommªd
(
	`ediù
(), "§y \"%s\"", 
pText
);

471 
	}
}

473 
	gCBa£BÙ
::
	$T—mSayText
(cÚ¡ *
pText
)

475 ià(
	`IsNuÎSŒšg
(
pText
))

478 
	`FakeCl›ÁCommªd
(
	`ediù
(), "§y_‹am \"%s\"", 
pText
);

479 
	}
}

	@bot_client.cpp

7 
	~"bÙ.h
"

9 
bÙ_w—pÚ_t
 
	gw—pÚ_defs
[
MAX_WEAPONS
];

11 
g_iMsgS‹
;

16 
	$BÙCl›Á_CS_VGUI
(*
p
, 
bÙ_šdex
)

18 ià(
g_iMsgS‹
 == 0)

20 *(*)
p
)

22 
MENU_TEAM
:

23 
g_rgpBÙs
[
bÙ_šdex
]->
m_iS¹AùiÚ
 = 
MSG_CS_TEAM_SELECT
;

25 
MENU_TERRORIST
:

26 
MENU_CT
:

27 
g_rgpBÙs
[
bÙ_šdex
]->
m_iS¹AùiÚ
 = 
MSG_CS_CLASS_SELECT
;

31 
g_iMsgS‹
++;

32 
	}
}

37 
	$BÙCl›Á_CS_ShowM’u
(*
p
, 
bÙ_šdex
)

39 ià(
g_iMsgS‹
 < 3)

41 
g_iMsgS‹
++;

45 ià(
	`¡rcmp
((*)
p
, "#Team_Select") == 0)

46 
g_rgpBÙs
[
bÙ_šdex
]->
m_iS¹AùiÚ
 = 
MSG_CS_TEAM_SELECT
;

47 ià(
	`¡rcmp
((*)
p
, "#Team_Select_Spect") == 0)

48 
g_rgpBÙs
[
bÙ_šdex
]->
m_iS¹AùiÚ
 = 
MSG_CS_TEAM_SELECT
;

49 ià(
	`¡rcmp
((*)
p
, "#IG_Team_Select_Spect") == 0)

50 
g_rgpBÙs
[
bÙ_šdex
]->
m_iS¹AùiÚ
 = 
MSG_CS_TEAM_SELECT
;

51 ià(
	`¡rcmp
((*)
p
, "#IG_Team_Select") == 0)

52 
g_rgpBÙs
[
bÙ_šdex
]->
m_iS¹AùiÚ
 = 
MSG_CS_TEAM_SELECT
;

53 ià(
	`¡rcmp
((*)
p
, "#IG_VIP_Team_Select") == 0)

54 
g_rgpBÙs
[
bÙ_šdex
]->
m_iS¹AùiÚ
 = 
MSG_CS_TEAM_SELECT
;

55 ià(
	`¡rcmp
((*)
p
, "#IG_VIP_Team_Select_Spect") == 0)

56 
g_rgpBÙs
[
bÙ_šdex
]->
m_iS¹AùiÚ
 = 
MSG_CS_TEAM_SELECT
;

57 ià(
	`¡rcmp
((*)
p
, "#Terrorist_Select") == 0)

58 
g_rgpBÙs
[
bÙ_šdex
]->
m_iS¹AùiÚ
 = 
MSG_CS_CLASS_SELECT
;

59 ià(
	`¡rcmp
((*)
p
, "#CT_Select") == 0)

60 
g_rgpBÙs
[
bÙ_šdex
]->
m_iS¹AùiÚ
 = 
MSG_CS_CLASS_SELECT
;

61 
	}
}

68 
	$BÙCl›Á_CS_W—pÚLi¡
(*
p
, 
bÙ_šdex
)

70 
bÙ_w—pÚ_t
 
bÙ_w—pÚ
;

72 
g_iMsgS‹
)

75 
	`¡rıy
(
bÙ_w—pÚ
.
szCÏs¢ame
, (*)
p
);

79 
bÙ_w—pÚ
.
iAmmo1
 = *(*)
p
;

83 
bÙ_w—pÚ
.
iAmmo1Max
 = *(*)
p
;

87 
bÙ_w—pÚ
.
iSlÙ
 = *(*)
p
;

91 
bÙ_w—pÚ
.
iPos™iÚ
 = *(*)
p
;

95 
bÙ_w—pÚ
.
iId
 = *(*)
p
;

99 
bÙ_w—pÚ
.
iFÏgs
 = *(*)
p
;

100 
w—pÚ_defs
[
bÙ_w—pÚ
.
iId
] = bot_weapon;

103 
g_iMsgS‹
++;

104 
	}
}

114 
	$BÙCl›Á_CS_Cu¼’tW—pÚ
(*
p
, 
bÙ_šdex
)

116 
iS‹
;

117 
iId
;

118 
iCl
;

120 
CBa£BÙ
 *
pBÙ
 = 
g_rgpBÙs
[
bÙ_šdex
];

121 
g_iMsgS‹
)

124 
iS‹
 = *(*)
p
;

128 
iId
 = *(*)
p
;

132 
iCl
 = *(*)
p
;

133 ià(
iId
 <= 31)

135 ià(
iS‹
 != 0)

136 
pBÙ
->
m_iCu¼’tW—pÚ
 = 
iId
;

138 
pBÙ
->
m_rgAmmoInCl
[
iId
] = 
iCl
;

142 
g_iMsgS‹
++;

143 
	}
}

151 
	$BÙCl›Á_CS_AmmoX
(*
p
, 
bÙ_šdex
)

153 
šdex
;

154 
amouÁ
;

156 
CBa£BÙ
 *
pBÙ
 = 
g_rgpBÙs
[
bÙ_šdex
];

158 
g_iMsgS‹
)

161 
šdex
 = *(*)
p
;

165 
amouÁ
 = *(*)
p
;

167 
pBÙ
->
m_rgAmmo
[
šdex
] = 
amouÁ
;

171 
g_iMsgS‹
++;

172 
	}
}

184 
	$BÙCl›Á_CS_AmmoPickup
(*
p
, 
bÙ_šdex
)

186 
šdex
;

187 
amouÁ
;

189 
g_iMsgS‹
)

192 
šdex
 = *(*)
p
;

196 
amouÁ
 = *(*)
p
;

198 
g_rgpBÙs
[
bÙ_šdex
]->
m_rgAmmo
[
šdex
] = 
amouÁ
;

203 
g_iMsgS‹
++;

204 
	}
}

210 
	$BÙCl›Á_CS_Damage
(*
p
, 
bÙ_šdex
)

212 
damage_¬mÜ
;

213 
damage_k’
;

214 
damage_b™s
;

215 
VeùÜ
 
damage_Üigš
;

217 ià(
g_iMsgS‹
 == 0)

218 
damage_¬mÜ
 = *(*)
p
;

220 ià(
g_iMsgS‹
 == 1)

221 
damage_k’
 = *(*)
p
;

223 ià(
g_iMsgS‹
 == 2)

224 
damage_b™s
 = *(*)
p
;

226 ià(
g_iMsgS‹
 == 3)

227 
damage_Üigš
.
x
 = *(*)
p
;

229 ià(
g_iMsgS‹
 == 4)

230 
damage_Üigš
.
y
 = *(*)
p
;

232 ià(
g_iMsgS‹
 == 5)

234 
damage_Üigš
.
z
 = *(*)
p
;

236 ià(
damage_¬mÜ
 > 0 || 
damage_k’
 > 0)

238 
CBa£BÙ
 *
pBÙ
 = 
g_rgpBÙs
[
bÙ_šdex
];

239 
pBÙ
->
m_iLa¡DamageTy³
 = 
damage_b™s
;

241 
iT—m
 = 
	`UTIL_G‘T—m
(
pBÙ
->
	`ediù
());

243 
	`BÙCŞËùGßlEx³r›nû
(
pBÙ
, 
damage_k’
, 
iT—m
);

245 
ediù_t
 *
pEÁ
 = 
pBÙ
->
³v
->
dmg_šæiùÜ
;

246 ià(
	`IsPÏy”
(
pEÁ
))

248 ià(
	`UTIL_G‘T—m
(
pEÁ
è=ğ
iT—m
)

251 ià(
	`RANDOM_LONG
(1, 100è< (100 - 
pBÙ
->
³v
->
h—Éh
) / 4)

253 
pBÙ
->
	`P»·»Ch©Mes§ge
("%t is‡ Teamkiller! Admin kick him!\n");

254 
pBÙ
->
	`PushMes§geQueue
(
MSG_CS_SAY
);

255 ià(
pBÙ
->
m_³ÁEÃmy
 =ğ
NULL
 &&…BÙ->
m_æS“EÃmyTime
 + 2.0 < 
gpGlob®s
->
time
)

258 
pBÙ
->
m_æS“EÃmyTime
 = 
gpGlob®s
->
time
;

259 
pBÙ
->
m_³ÁEÃmy
 = 
pEÁ
;

260 
pBÙ
->
m_³ÁLa¡EÃmy
 = 
pEÁ
;

261 
pBÙ
->
m_vecLa¡EÃmyOrigš
 = 
pEÁ
->
v
.
Üigš
;

268 ià(
pBÙ
->
³v
->
h—Éh
 > 70)

270 
pBÙ
->
m_æAg»ssiÚLev–
 += 0.1;

271 ià(
pBÙ
->
m_æAg»ssiÚLev–
 > 1.0)

272 
pBÙ
->
m_æAg»ssiÚLev–
 = 1.0;

276 
pBÙ
->
m_æF—rLev–
 += 0.05;

277 ià(
pBÙ
->
m_æF—rLev–
 > 1.0)

278 
pBÙ
->
m_æF—rLev–
 = 1.0;

281 
pBÙ
->
	`RemoveC”šTask
(
TASK_HIDE
);

283 ià(
pBÙ
->
m_³ÁEÃmy
 =ğ
NULL
)

285 
pBÙ
->
m_³ÁLa¡EÃmy
 = 
pEÁ
;

286 
pBÙ
->
m_vecLa¡EÃmyOrigš
 = 
pEÁ
->
v
.
Üigš
;

288 
pBÙ
->
m_æS“EÃmyTime
 = 
gpGlob®s
->
time
;

291 
	`BÙCŞËùEx³r›nûD©a
(
pBÙ
->
	`ediù
(), 
pEÁ
, 
damage_¬mÜ
 + 
damage_k’
);

297 ià(!
	`WaypoštR—chabË
(
pBÙ
->
³v
->
Üigš
,…BÙ->
m_vecDe¡Origš
))

299 
pBÙ
->
	`D–‘eS—rchNodes
();

300 
pBÙ
->
	`FšdWaypošt
();

305 
g_iMsgS‹
++;

306 
	}
}

312 
	$BÙCl›Á_CS_MÚey
(*
p
, 
bÙ_šdex
)

314 ià(
g_iMsgS‹
 == 0)

315 
g_rgpBÙs
[
bÙ_šdex
]->
m_iAccouÁ
 = *(*)
p
;

317 
g_iMsgS‹
++;

318 
	}
}

324 
	$BÙCl›Á_CS_StusIcÚ
(*
p
, 
bÙ_šdex
)

326 
byEÇbË
;

328 ià(
g_iMsgS‹
 == 0)

329 
byEÇbË
 = *(*)
p
;

331 ià(
g_iMsgS‹
 == 1)

333 
CBa£BÙ
 *
pBÙ
 = 
g_rgpBÙs
[
bÙ_šdex
];

334 ià(
	`¡rcmp
 ((*)
p
, "defuser") == 0)

335 
pBÙ
->
m_bHasDefu£r
 = (
byEÇbË
 != 0);

336 ià(
	`¡rcmp
 ((*)
p
, "buyzone") == 0)

338 
pBÙ
->
m_bInBuyZÚe
 = (
byEÇbË
 != 0);

340 ià(
byEÇbË
 && 
pBÙ
->
m_bBuyP’dšg
)

342 
pBÙ
->
m_bBuyšgFšished
 = 
FALSE
;

343 
pBÙ
->
	`PushMes§geQueue
(
MSG_CS_BUY
);

346 ià(
byEÇbË
 &&

347 
g_fTimeRoundS¹
 + 
	`CVAR_GET_FLOAT
("mp_buytime"è< 
gpGlob®s
->
time
)

349 
pBÙ
->
m_bBuyšgFšished
 = 
FALSE
;

350 
pBÙ
->
m_iBuyCouÁ
 = 0;

351 
pBÙ
->
	`PushMes§geQueue
(
MSG_CS_BUY
);

352 
pBÙ
->
m_æNextBuyTime
 = 
gpGlob®s
->
time
;

358 
g_iMsgS‹
++;

359 
	}
}

365 
	$BÙCl›Á_CS_D—thMsg
(*
p
, 
bÙ_šdex
)

367 
kËr_šdex
;

368 
viùim_šdex
;

370 ià(
g_iMsgS‹
 == 0)

371 
kËr_šdex
 = *(*)
p
;

372 ià(
g_iMsgS‹
 == 1)

373 
viùim_šdex
 = *(*)
p
;

374 ià(
g_iMsgS‹
 == 2)

376 ià(
kËr_šdex
 !ğ0 && kËr_šdex !ğ
viùim_šdex
)

378 
ediù_t
 *
kËr_ediù
 = 
	`INDEXENT
(
kËr_šdex
);

379 
ediù_t
 *
viùim_ediù
 = 
	`INDEXENT
(
viùim_šdex
);

381 
CBa£BÙ
 *
pBÙ
 = CBa£BÙ::
	`In¡ªû
(
kËr_ediù
);

383 ià(
pBÙ
)

384 
pBÙ
->
m_³ÁLa¡Viùim
 = 
viùim_ediù
;

388 
CBa£BÙ
 *
pBÙ
 = CBa£BÙ::
	`In¡ªû
(
viùim_ediù
);

389 ià(
pBÙ
)

391 ià(
	`UTIL_G‘T—m
(
kËr_ediù
è=ğUTIL_G‘T—m(
viùim_ediù
))

392 
pBÙ
->
m_iVÙeKickIndex
 = 
kËr_šdex
;

393 
pBÙ
->
m_bNÙKËd
 = 
FALSE
;

398 
g_iMsgS‹
++;

399 
	}
}

405 
	$BÙCl›Á_CS_Sü“nFade
(*
p
, 
bÙ_šdex
)

407 
r
;

408 
g
;

409 
b
;

411 ià(
g_iMsgS‹
 == 3)

412 
r
 = *(*)
p
;

413 ià(
g_iMsgS‹
 == 4)

414 
g
 = *(*)
p
;

415 ià(
g_iMsgS‹
 == 5)

416 
b
 = *(*)
p
;

417 ià(
g_iMsgS‹
 == 6)

419 
®pha
 = *(*)
p
;

421 ià(
r
 =ğ255 && 
g
 =ğ255 && 
b
 =ğ255 && 
®pha
 > 200)

423 
CBa£BÙ
 *
pBÙ
 = 
g_rgpBÙs
[
bÙ_šdex
];

424 
	`as£¹
(
pBÙ
 !ğ
NULL
);

425 
pBÙ
->
m_³ÁEÃmy
 = 
NULL
;

426 
pBÙ
->
m_æMaxV›wDi¡ªû
 = 1;

428 
pBÙ
->
m_æBlšdTime
 = 
gpGlob®s
->
time
 + (()
®pha
 - 200.0) / 15;

429 ià(
pBÙ
->
m_iSkl
 < 50)

431 
pBÙ
->
m_æBlšdMoveS³ed
 = 0.0;

432 
pBÙ
->
m_æBlšdSidemoveS³ed
 = 0.0;

434 ià(
pBÙ
->
m_iSkl
 < 80)

436 
pBÙ
->
m_æBlšdMoveS³ed
 = -pBÙ->
³v
->
max¥“d
;

437 
pBÙ
->
m_æBlšdSidemoveS³ed
 = 0.0;

441 ià(
	`RANDOM_LONG
(1, 100) < 50)

443 ià(
	`RANDOM_LONG
(1, 100) < 50)

444 
pBÙ
->
m_æBlšdSidemoveS³ed
 =…BÙ->
³v
->
max¥“d
;

446 
pBÙ
->
m_æBlšdSidemoveS³ed
 = -pBÙ->
³v
->
max¥“d
;

450 ià(
pBÙ
->
³v
->
h—Éh
 > 80)

451 
pBÙ
->
m_æBlšdMoveS³ed
 =…BÙ->
³v
->
max¥“d
;

453 
pBÙ
->
m_æBlšdMoveS³ed
 = -pBÙ->
³v
->
max¥“d
;

458 
g_iMsgS‹
++;

459 
	}
}

461 
	$BÙCl›Á_CS_HLTV
(*
p
, 
bÙ_šdex
)

463 ià(
g_iMsgS‹
 == 0)

465 ià((*(*)
p
) == 0)

466 
	`RoundIn™
();

468 
g_iMsgS‹
++;

469 
	}
}

471 
	$BÙCl›Á_CS_TextMsgAÎ
(*
p
, 
bÙ_šdex
)

473 ià(
g_iMsgS‹
 == 1)

475 *
sz
 = (*)
p
;

476 iàĞ
	`FSŒEq
(
sz
, "#CTs_Win")

477 || 
	`FSŒEq
(
sz
, "#Bomb_Defused")

478 || 
	`FSŒEq
(
sz
, "#Terrorists_Win")

479 || 
	`FSŒEq
(
sz
, "#Round_Draw")

480 || 
	`FSŒEq
(
sz
, "#All_Hostages_Rescued")

481 || 
	`FSŒEq
(
sz
, "#Target_Saved")

482 || 
	`FSŒEq
(
sz
, "#Hostages_Not_Rescued")

483 || 
	`FSŒEq
(
sz
, "#Terrorists_Not_Escaped")

484 || 
	`FSŒEq
(
sz
, "#VIP_Not_Escaped")

485 || 
	`FSŒEq
(
sz
, "#Escaping_Terrorists_Neutralized")

486 || 
	`FSŒEq
(
sz
, "#VIP_Assassinated")

487 || 
	`FSŒEq
(
sz
, "#VIP_Escaped")

488 || 
	`FSŒEq
(
sz
, "#Terrorists_Escaped")

489 || 
	`FSŒEq
(
sz
, "#CTs_PreventEscape")

490 || 
	`FSŒEq
(
sz
, "#Target_Bombed")

491 || 
	`FSŒEq
(
sz
, "#Game_Commencing")

492 || 
	`FSŒEq
(
sz
, "#Game_will_restart_in"))

494 
g_bRoundEnded
 = 
TRUE
;

495 
g_bBombPÏÁed
 = 
FALSE
;

498 
g_iMsgS‹
++;

499 
	}
}

501 
	$BÙCl›Á_CS_TextMsg
(*
p
, 
bÙ_šdex
)

503 ià(
g_iMsgS‹
 == 1)

505 ià(
	`FSŒEq
((*)
p
, "#Got_bomb") || FStrEq((*)p, "#Game_bomb_pickup"))

507 
i
 = 0; i < 
gpGlob®s
->
maxCl›Ás
; i++)

509 
CBa£BÙ
 *
pBÙ
 = 
g_rgpBÙs
[
i
];

510 ià(
pBÙ
)

512 
ediù_t
 *
pEdiù
 = 
pBÙ
->
	`ediù
();

513 ià(
	`IsPÏy”
(
pEdiù
è&& 
	`IsAlive
(pEdict) &&

514 
	`UTIL_G‘T—m
(
pEdiù
è=ğ
TEAM_CT
)

517 
pBÙ
->
	`D–‘eS—rchNodes
();

519 
pBÙ
->
	`Re£tTasks
();

522 
pBÙ
->
m_æAg»ssiÚLev–
 += 0.1;

523 ià(
pBÙ
->
m_æAg»ssiÚLev–
 > 1.0)

524 
pBÙ
->
m_æAg»ssiÚLev–
 = 1.0;

530 
g_iMsgS‹
++;

531 
	}
}

534 
	$BÙCl›Á_CS_T—mInfo
(*
p
, 
i
)

536 
iPÏy”Index
;

538 
g_iMsgS‹
)

541 
iPÏy”Index
 = *(*)
p
;

544 ià((
	`¡rcmp
((*)
p
, "TERRORIST"è=ğ0è&& (
iPÏy”Index
 > 0è&& (iPÏy”Index <ğ
gpGlob®s
->
maxCl›Ás
))

545 
Th»©Tab
[
iPÏy”Index
 - 1].
iT—m
 = 
TEAM_TERRORIST
;

546 ià((
	`¡rcmp
((*)
p
, "CT"è=ğ0è&& (
iPÏy”Index
 > 0è&& (iPÏy”Index <ğ
gpGlob®s
->
maxCl›Ás
))

547 
Th»©Tab
[
iPÏy”Index
 - 1].
iT—m
 = 
TEAM_CT
;

550 
g_iMsgS‹
++;

551 
	}
}

	@bot_combat.cpp

7 
	~"bÙ.h
"

12 
bÙ_w—pÚ_£Ëù_t
 
	gcs_w—pÚ_£Ëù
[
NUM_WEAPONS
 + 1] = {

13 {
WEAPON_KNIFE
, "weapon_knife", "knife.mdl",

14 
TRUE
, 0, 0, -1, -1, 0, 0, 0, 0, 
FALSE
},

15 {
WEAPON_USP
, "weapon_usp", "usp.mdl",

16 
FALSE
, 500, 1, -1, -1, 1, 1, 2, 2, FALSE},

17 {
WEAPON_GLOCK18
, "weapon_glock18", "glock18.mdl",

18 
FALSE
, 400, 1, -1, -1, 1, 2, 1, 1, FALSE},

19 {
WEAPON_DEAGLE
, "weapon_deagle", "deagle.mdl",

20 
FALSE
, 650, 1, 2, 2, 1, 3, 4, 4, 
TRUE
},

21 {
WEAPON_P228
, "weapon_p228", "p228.mdl",

22 
FALSE
, 600, 1, 2, 2, 1, 4, 3, 3, FALSE},

23 {
WEAPON_ELITE
, "weapon_elite", "elite.mdl",

24 
FALSE
, 1000, 1, 0, 0, 1, 5, 5, 5, FALSE},

25 {
WEAPON_FIVESEVEN
, "weapon_fiveseven", "fiveseven.mdl",

26 
FALSE
, 750, 1, 1, 1, 1, 6, 5, 5, FALSE},

27 {
WEAPON_M3
, "weapon_m3", "m3.mdl",

28 
FALSE
, 1700, 1, 2, -1, 2, 1, 1, 1, FALSE},

29 {
WEAPON_XM1014
, "weapon_xm1014", "xm1014.mdl",

30 
FALSE
, 3000, 1, 2, -1, 2, 2, 2, 2, FALSE},

31 {
WEAPON_MP5NAVY
, "weapon_mp5navy", "mp5.mdl",

32 
TRUE
, 1500, 1, 2, 1, 3, 1, 2, 2, 
FALSE
},

33 {
WEAPON_TMP
, "weapon_tmp", "tmp.mdl",

34 
TRUE
, 1250, 1, 1, 1, 3, 2, 1, 1, 
FALSE
},

35 {
WEAPON_P90
, "weapon_p90", "p90.mdl",

36 
TRUE
, 2350, 1, 2, 1, 3, 3, 4, 4, 
FALSE
},

37 {
WEAPON_MAC10
, "weapon_mac10", "mac10.mdl",

38 
TRUE
, 1400, 1, 0, 0, 3, 4, 1, 1, 
FALSE
},

39 {
WEAPON_UMP45
, "weapon_ump45", "ump45.mdl",

40 
TRUE
, 1700, 1, 2, 2, 3, 5, 3, 3, 
FALSE
},

41 {
WEAPON_AK47
, "weapon_ak47", "ak47.mdl",

42 
TRUE
, 2500, 1, 0, 0, 4, 1, 2, 2, TRUE},

43 {
WEAPON_SG552
, "weapon_sg552", "sg552.mdl",

44 
TRUE
, 3500, 1, 0, -1, 4, 2, 4, 4, TRUE},

45 {
WEAPON_M4A1
, "weapon_m4a1", "m4a1.mdl",

46 
TRUE
, 3100, 1, 1, 1, 4, 3, 3, 3, TRUE},

47 {
WEAPON_AUG
, "weapon_aug", "aug.mdl",

48 
TRUE
, 3500, 1, 1, 1, 4, 4, 4, 4, TRUE},

49 {
WEAPON_SCOUT
, "weapon_scout", "scout.mdl",

50 
FALSE
, 2750, 1, 2, 0, 4, 5, 3, 2, 
TRUE
},

51 {
WEAPON_AWP
, "weapon_awp", "awp.mdl",

52 
FALSE
, 4750, 1, 2, 0, 4, 6, 5, 6, 
TRUE
},

53 {
WEAPON_G3SG1
, "weapon_g3sg1", "g3sg1.mdl",

54 
FALSE
, 5000, 1, 0, 2, 4, 7, 6, 6, 
TRUE
},

55 {
WEAPON_SG550
, "weapon_sg550", "sg550.mdl",

56 
FALSE
, 4200, 1, 1, 1, 4, 8, 5, 5, 
TRUE
},

57 {
WEAPON_M249
, "weapon_m249", "m249.mdl",

58 
TRUE
, 5750, 1, 2, 1, 5, 1, 1, 1, TRUE},

59 {
WEAPON_FAMAS
, "weapon_famas", "famas.mdl",

60 
TRUE
, 2250, 1, 1, 1, 4, -1, 1, 1, TRUE},

61 {
WEAPON_GALIL
, "weapon_galil", "galil.mdl",

62 
TRUE
, 2000, 1, 0, 0, 4, -1, 1, 1, TRUE},

63 {
WEAPON_SHIELDGUN
, "weapon_shield", "shield.mdl",

64 
FALSE
, 2200, 0, 1, 1, 8, -1, 8, 8, FALSE},

65 {
NULL
, "", "", 
FALSE
, 0, 0, 0, 0, 0, 0, 0, 0, FALSE}

73 
bÙaim_t
 
	gBÙAimTab
[6]={

82 
	gCBa£BÙ
::
	$NumT—mm©esN—rPos
(
VeùÜ
 
vecPos™iÚ
, 
iRadius
)

84 
iCouÁ
 = 0;

85 
fDi¡ªû
;

86 
iT—m
 = 
	`UTIL_G‘T—m
(
	`ediù
());

88 
fRadius2
 = ()
iRadius
 * ()iRadius;

90 
i
 = 0; i < 
gpGlob®s
->
maxCl›Ás
; i++)

92 ià(
Th»©Tab
[
i
].
IsU£d
 =ğ
FALSE
 || Th»©Tab[i].
IsAlive
 == FALSE

93 || 
Th»©Tab
[
i
].
iT—m
 !ğiT—m || Th»©Tab[i].
pEdiù
 =ğ
	`ediù
())

96 
fDi¡ªû
 = 
	`L’gthSqu¬ed
(
Th»©Tab
[
i
].
vOrigš
 - 
vecPos™iÚ
);

98 ià(
fDi¡ªû
 < 
fRadius2
)

99 
iCouÁ
++;

102  
iCouÁ
;

103 
	}
}

105 
	gCBa£BÙ
::
	$NumEÃm›sN—rPos
(
VeùÜ
 
vecPos™iÚ
, 
iRadius
)

107 
iCouÁ
 = 0;

108 
fDi¡ªû
;

109 
iT—m
 = 
	`UTIL_G‘T—m
(
	`ediù
());

111 
fRadius2
 = ()
iRadius
 * ()iRadius;

113 
i
 = 0; i < 
gpGlob®s
->
maxCl›Ás
; i++)

115 ià(
Th»©Tab
[
i
].
IsU£d
 =ğ
FALSE
 || Th»©Tab[i].
IsAlive
 =ğFALSE || Th»©Tab[i].
iT—m
 == iTeam)

118 
fDi¡ªû
 = 
	`L’gthSqu¬ed
(
Th»©Tab
[
i
].
vOrigš
 - 
vecPos™iÚ
);

120 ià(
fDi¡ªû
 < 
fRadius2
)

121 
iCouÁ
++;

124  
iCouÁ
;

125 
	}
}

132 
boŞ
 
	gCBa£BÙ
::
	$G‘EÃmy
()

134 
m_ucVisib™y
 = 0;

135 
m_vecEÃmy
 = 
g_vecZ”o
;

138 ià(
m_æBlšdTime
 > 
gpGlob®s
->
time
)

139  
FALSE
;

141 
VeùÜ
 
vecEnd
, 
vecVisibË
;

142 
ediù_t
 *
pPÏy”
, *
pNewEÃmy
 = 
NULL
;

143 
Ã¬e¡di¡ªû
 = 
m_æV›wDi¡ªû
;

144 
cH™
;

145 
i
, 
‹am
 = 
	`UTIL_G‘T—m
(
	`ediù
());

148 
VeùÜ
 
vecOrg
 = 
	`EyePos™iÚ
();

149 ià(
³v
->
æags
 & 
FL_DUCKING
)

150 
vecOrg
 = vecOrg + (
VEC_HULL_MIN
 - 
VEC_DUCK_HULL_MIN
);

152 *
pvs
 = 
	`ENGINE_SET_PVS
((*)&
vecOrg
);

155 
m_iS‹s
 &ğ~
STATE_SUSPECTENEMY
;

157 ià(
m_³ÁEÃmy
 && 
m_æEÃmyUpd©eTime
 > 
gpGlob®s
->
time
)

159 
pPÏy”
 = 
m_³ÁEÃmy
;

160 ià(
	`IsAlive
(
pPÏy”
))

162 
vecEnd
 = 
	`EyePos™iÚ
();

163 ià(
	`FInV›wCÚe
(&
vecEnd
è&& 
	`FBoxVisibË
(
	`ediù
(), 
pPÏy”
, &
vecVisibË
, &
cH™
))

165 
pNewEÃmy
 = 
pPÏy”
;

166 
m_vecEÃmy
 = 
vecVisibË
;

167 
m_ucVisib™y
 = 
cH™
;

172 ià(
	`FNuÎEÁ
(
pNewEÃmy
))

174 
m_æEÃmyUpd©eTime
 = 
gpGlob®s
->
time
 + 0.5;

177 
i
 = 0; i < 
gpGlob®s
->
maxCl›Ás
; i++)

179 ià(
Th»©Tab
[
i
].
IsU£d
 =ğ
FALSE
 || Th»©Tab[i].
IsAlive
 == FALSE ||

180 
Th»©Tab
[
i
].
iT—m
 =ğ
‹am
 || Th»©Tab[i].
pEdiù
 =ğ
	`ediù
())

183 
pPÏy”
 = 
Th»©Tab
[
i
].
pEdiù
;

186 ià(!
	`ENGINE_CHECK_VISIBILITY
(
pPÏy”
, 
pvs
))

189 
vecEnd
 = 
pPÏy”
->
v
.
Üigš
 +…PÏy”->v.
v›w_ofs
;

192 ià(
	`FInV›wCÚe
(&
vecEnd
è&& 
	`FBoxVisibË
(
	`ediù
(), 
pPÏy”
, &
vecVisibË
, &
cH™
))

194 
di¡ªû
;

195 
di¡ªû
 = (
pPÏy”
->
v
.
Üigš
 - 
³v
->Üigš).
	`L’gth
();

196 ià(
di¡ªû
 < 
Ã¬e¡di¡ªû
)

198 
Ã¬e¡di¡ªû
 = 
di¡ªû
;

199 
pNewEÃmy
 = 
pPÏy”
;

200 
m_vecEÃmy
 = 
vecVisibË
;

201 
m_ucVisib™y
 = 
cH™
;

203 ià(
g_iM­Ty³
 & 
MAP_AS
)

205 *
šfobufãr
 = 
g_’gfuncs
.
	`pâG‘InfoKeyBufãr
(
pPÏy”
);

206 ià(*(
g_’gfuncs
.
	`pâInfoKeyV®ue
(
šfobufãr
, "model")) == 'v')

214 ià(
pNewEÃmy
)

216 
g_bBÙsCªPau£
 = 
TRUE
;

217 
m_iAimFÏgs
 |ğ
AIM_ENEMY
;

219 ià(
pNewEÃmy
 =ğ
m_³ÁEÃmy
)

223 
m_æS“EÃmyTime
 = 
gpGlob®s
->
time
;

225 
m_æAùu®R—ùiÚTime
 = 0.0;

226 
m_³ÁLa¡EÃmy
 = 
pNewEÃmy
;

227 
m_vecLa¡EÃmyOrigš
 = 
m_vecEÃmy
;

228  
TRUE
;

232 ià(
m_æS“EÃmyTime
 + 3.0 < 
gpGlob®s
->
time
 && (
³v
->
w—pÚs
 & (1<<
WEAPON_C4
) ||

233 
	`HasHo¡age
(è|| !
	`FNuÎEÁ
(
m_³ÁT¬g‘EÁ
)))

234 
	`PÏyRadioMes§ge
(
RADIO_ENEMYSPOTTED
);

236 
m_³ÁT¬g‘EÁ
 = 
NULL
;

238 
m_æEÃmySu½ri£Time
 = 
gpGlob®s
->
time
 + 
m_æAùu®R—ùiÚTime
;

241 
m_æAùu®R—ùiÚTime
 = 0.0;

242 
m_³ÁEÃmy
 = 
pNewEÃmy
;

243 
m_³ÁLa¡EÃmy
 = 
pNewEÃmy
;

244 
m_vecLa¡EÃmyOrigš
 = 
m_vecEÃmy
;

245 
m_æEÃmyR—chabËTim”
 = 0.0;

248 
m_æS“EÃmyTime
 = 
gpGlob®s
->
time
;

252 
CBa£BÙ
 *
pFr›ndlyBÙ
;

253 
j
 = 0; j < 
gpGlob®s
->
maxCl›Ás
; j++)

255 ià(
Th»©Tab
[
j
].
IsU£d
 =ğ
FALSE
 || Th»©Tab[j].
IsAlive
 == FALSE ||

256 
Th»©Tab
[
j
].
iT—m
 !ğ
‹am
 || Th»©Tab[j].
pEdiù
 =ğ
	`ediù
())

259 
pFr›ndlyBÙ
 = 
CBa£BÙ
::
	`In¡ªû
(
Th»©Tab
[
j
].
pEdiù
);

261 ià(
pFr›ndlyBÙ
 !ğ
NULL
)

263 ià(
pFr›ndlyBÙ
->
m_æS“EÃmyTime
 + 3.0 < 
gpGlob®s
->
time
 ||

264 
	`FNuÎEÁ
(
pFr›ndlyBÙ
->
m_³ÁLa¡EÃmy
))

266 ià(
	`FVisibË
(
³v
->
Üigš
, 
	`ENT
(
pFr›ndlyBÙ
->pev)))

268 
pFr›ndlyBÙ
->
m_³ÁLa¡EÃmy
 = 
pNewEÃmy
;

269 
pFr›ndlyBÙ
->
m_vecLa¡EÃmyOrigš
 = m_vecLastEnemyOrigin;

270 
pFr›ndlyBÙ
->
m_æS“EÃmyTime
 = 
gpGlob®s
->
time
;

275  
TRUE
;

278 ià(!
	`FNuÎEÁ
(
m_³ÁEÃmy
))

280 
pNewEÃmy
 = 
m_³ÁEÃmy
;

281 
m_³ÁLa¡EÃmy
 = 
pNewEÃmy
;

282 ià(!
	`IsAlive
(
pNewEÃmy
))

284 
m_³ÁEÃmy
 = 
NULL
;

287 ià(
m_æS“EÃmyTime
 + 0.1 > 
gpGlob®s
->
time
)

289 ià(!
	`U£sSn”
())

291 
m_æShoÙAtD—dTime
 = 
gpGlob®s
->
time
 + 
m_æAg»ssiÚLev–
 * 1.5;

292 
m_æAùu®R—ùiÚTime
 = 0.0;

293 
m_iS‹s
 |ğ
STATE_SUSPECTENEMY
;

294  
TRUE
;

296  
FALSE
;

298 ià(
m_æShoÙAtD—dTime
 > 
gpGlob®s
->
time
)

300 
m_æAùu®R—ùiÚTime
 = 0.0;

301 
m_iS‹s
 |ğ
STATE_SUSPECTENEMY
;

302  
TRUE
;

304  
FALSE
;

308 
iShoÙThruF»q
 = 
BÙAimTab
[
m_iSkl
 / 20].
iS“nShoÙThruProb
;

310 ià(
g_bShoÙThruW®ls
 && 
	`RANDOM_LONG
(1, 100è< 
iShoÙThruF»q
)

312 ià(
	`IsShoÙabËThruOb¡aşe
(
pNewEÃmy
->
v
.
Üigš
))

314 
m_æS“EÃmyTime
 = 
gpGlob®s
->
time
;

315 
m_iS‹s
 |ğ
STATE_SUSPECTENEMY
;

316 
m_iAimFÏgs
 |ğ
AIM_LASTENEMY
;

317 
m_³ÁLa¡EÃmy
 = 
pNewEÃmy
;

318 
m_vecLa¡EÃmyOrigš
 = 
pNewEÃmy
->
v
.
Üigš
;

319  
TRUE
;

325 ià((
m_iAimFÏgs
 <ğ
AIM_PREDICTPATH
 &&

326 
m_æS“EÃmyTime
 + 5.0 < 
gpGlob®s
->
time
 &&

327 !(
m_iS‹s
 & (
STATE_SEEINGENEMY
 | 
STATE_HEARINGENEMY
)) &&

328 
	`Cu¼’tTask
()->
iTask
 !ğ
TASK_SHOOTBREAKABLE
 &&

329 
	`Cu¼’tTask
()->
iTask
 !ğ
TASK_PLANTBOMB
 &&

330 
	`Cu¼’tTask
()->
iTask
 !ğ
TASK_DEFUSEBOMB
è|| 
g_bRoundEnded
)

332 ià(!
m_iR–ßdS‹
)

333 
m_iR–ßdS‹
 = 
RELOAD_PRIMARY
;

337 ià((
	`U£sSn”
(è|| 
	`U£sZoomabËRiæe
()è&& 
m_æZoomCheckTime
 + 1.0 < 
gpGlob®s
->
time
)

341 ià(
³v
->
fov
 < 90)

342 
³v
->
bu‰Ú
 |ğ
IN_ATTACK2
;

344 
m_æZoomCheckTime
 = 0.0;

347  
FALSE
;

348 
	}
}

355 
VeùÜ
 
	gCBa£BÙ
::
	$BodyT¬g‘
Ğ
ediù_t
 *
pBÙEÃmy
 )

357 
VeùÜ
 
rg‘
;

358 
ucVis
 = 
m_ucVisib™y
;

360 ià(
ucVis
 & 
WAIST_VISIBLE
)

363 
fDi¡ªû
 = (
pBÙEÃmy
->
v
.
Üigš
 - 
³v
->Üigš).
	`L’gth
();

364 ià(
fDi¡ªû
 > 1500)

365 
ucVis
 &ğ~
HEAD_VISIBLE
;

368 
TabOffs
 = 
m_iSkl
 / 20;

371 ià(
m_iS‹s
 & 
STATE_SUSPECTENEMY
)

373 
rg‘
 = 
pBÙEÃmy
->
v
.
Üigš
;

374 
rg‘
.
x
 +ğ
	`RANDOM_FLOAT
(-32.0, 32.0);

375 
rg‘
.
y
 +ğ
	`RANDOM_FLOAT
(-32.0, 32.0);

376 
rg‘
.
z
 +ğ
	`RANDOM_FLOAT
(-32.0, 32.0);

380 ià((
ucVis
 & 
HEAD_VISIBLE
è&& (ucVi & 
WAIST_VISIBLE
))

382 ià(
	`RANDOM_LONG
(1, 100è< 
BÙAimTab
[
TabOffs
].
iH—dShÙ_F»qu’cy
)

383 
rg‘
 = 
pBÙEÃmy
->
v
.
Üigš
 +…BÙEÃmy->v.
v›w_ofs
;

385 
rg‘
 = 
pBÙEÃmy
->
v
.
Üigš
;

387 ià(
ucVis
 & 
HEAD_VISIBLE
)

389 
rg‘
 = 
pBÙEÃmy
->
v
.
Üigš
 +…BÙEÃmy->v.
v›w_ofs
;

390 
rg‘
.
z
 -= 8.0;

392 ià(
ucVis
 & 
WAIST_VISIBLE
)

393 
rg‘
 = 
pBÙEÃmy
->
v
.
Üigš
;

394 ià(
ucVis
 & 
CUSTOM_VISIBLE
)

395 
rg‘
 = 
m_vecEÃmy
;

397 
rg‘
 = 
m_vecLa¡EÃmyOrigš
;

399 
fOff£t
, 
fDi¡ªû
 = (
m_vecEÃmy
 - 
³v
->
Üigš
).
	`L’gth
();

401 ià(
³v
->
fov
 < 40)

402 
fOff£t
 = 
fDi¡ªû
 / 4000;

403 ià(
³v
->
fov
 < 90)

404 
fOff£t
 = 
fDi¡ªû
 / 2000;

406 
fOff£t
 = 
fDi¡ªû
 / 1000;

408 
rg‘
.
x
 +ğ
fOff£t
 * 
	`RANDOM_FLOAT
(-
BÙAimTab
[
TabOffs
].
fAim_X
, BotAimTab[TabOffs].fAim_X);

409 
rg‘
.
y
 +ğ
fOff£t
 * 
	`RANDOM_FLOAT
(-
BÙAimTab
[
TabOffs
].
fAim_Y
, BotAimTab[TabOffs].fAim_Y);

410 
rg‘
.
z
 +ğ
fOff£t
 * 
	`RANDOM_FLOAT
(-
BÙAimTab
[
TabOffs
].
fAim_Z
, BotAimTab[TabOffs].fAim_Z);

413 
m_vecEÃmy
 = 
rg‘
;

414  
rg‘
;

415 
	}
}

417 
boŞ
 
	gCBa£BÙ
::
	$FœeHu¹sFr›nd
(
fDi¡ªû
)

419 ià(
	`CVAR_GET_FLOAT
("mp_friendlyfire") == 0)

420  
FALSE
;

422 
ediù_t
 *
pPÏy”
;

423 
iT—m
 = 
	`UTIL_G‘T—m
(
	`ediù
());

425 
fDi¡ªû
 *= fDistance;

428 
i
 = 0; i < 
gpGlob®s
->
maxCl›Ás
; i++)

430 ià(
Th»©Tab
[
i
].
IsU£d
 =ğ
FALSE
 || Th»©Tab[i].
IsAlive
 == FALSE ||

431 
Th»©Tab
[
i
].
iT—m
 !ğiT—m || Th»©Tab[i].
pEdiù
 =ğ
	`ediù
())

434 
pPÏy”
 = 
Th»©Tab
[
i
].
pEdiù
;

436 ià(
	`G‘ShoÙšgCÚeDevŸtiÚ
(
	`ediù
(), &
pPÏy”
->
v
.
Üigš
) > 0.95)

438 ià(
	`L’gthSqu¬ed
(
pPÏy”
->
v
.
Üigš
 - 
³v
->Üigšè<ğ
fDi¡ªû
)

439  
TRUE
;

443  
FALSE
;

444 
	}
}

449 
boŞ
 
	gCBa£BÙ
::
	$IsShoÙabËThruOb¡aşe
(
VeùÜ
 
vecDe¡
)

451 ià(!
	`W—pÚShoÙsThru
(
m_iCu¼’tW—pÚ
))

452  
FALSE
;

454 
VeùÜ
 
vecSrc
 = 
	`EyePos™iÚ
();

455 
VeùÜ
 
vecDœ
 = (
vecDe¡
 - 
vecSrc
).
	`NÜm®ize
();

456 
VeùÜ
 
vecPošt
 = 
g_vecZ”o
;

457 
iThickÃss
 = 0;

458 
iH™s
 = 0;

460 
ediù_t
 *
³ÁIgnÜe
 = 
³v
->
pCÚššgEÁ™y
;

461 
T¿ûResuÉ
 
Œ
;

462 
	`UTIL_T¿ûLše
(
vecSrc
, 
vecDe¡
, 
ignÜe_mÚ¡”s
, 
ignÜe_gÏss
, 
³ÁIgnÜe
, &
Œ
);

464 
Œ
.
æF¿ùiÚ
 !ğ1.0 && 
iH™s
 < 3)

466 
iH™s
++;

467 
iThickÃss
++;

468 
vecPošt
 = 
Œ
.
vecEndPos
 + 
vecDœ
;

469 
	`POINT_CONTENTS
(
vecPošt
è=ğ
CONTENTS_SOLID
 && 
iThickÃss
 < 64)

471 
vecPošt
 = vecPošˆ+ 
vecDœ
;

472 
iThickÃss
++;

474 
	`UTIL_T¿ûLše
(
vecPošt
, 
vecDe¡
, 
ignÜe_mÚ¡”s
, 
ignÜe_gÏss
, 
³ÁIgnÜe
, &
Œ
);

477 ià(
iH™s
 < 3 && 
iThickÃss
 < 64)

479 ià(
	`L’gthSqu¬ed
(
vecDe¡
 - 
vecPošt
) < 12544)

480  
TRUE
;

483  
FALSE
;

484 
	}
}

491 
boŞ
 
	gCBa£BÙ
::
	$DoFœePau£
(
fDi¡ªû
)

493 ià(
m_æTimeFœePau£
 > 
gpGlob®s
->
time
)

495 
m_æShoÙTime
 = 
gpGlob®s
->
time
;

496  
TRUE
;

499 
ªgË
 = (
	`çbs
(
³v
->
punchªgË
.
y
è+ fabsÕev->punchªgË.
x
)è* 
M_PI
 / 360;

502 ià(
	`n
(
ªgË
è* 
fDi¡ªû
 > 20 + (100 - 
m_iSkl
) / 5)

504 ià(
m_æTimeFœePau£
 < 
gpGlob®s
->
time
 - 0.4)

505 
m_æTimeFœePau£
 = 
gpGlob®s
->
time
 + 
	`RANDOM_FLOAT
(0.4, 0.4 + 1.2 * (100 - 
m_iSkl
) / 100.0);

507 
m_æShoÙTime
 = 
gpGlob®s
->
time
;

509  
TRUE
;

512  
FALSE
;

513 
	}
}

519 
boŞ
 
	gCBa£BÙ
::
	$FœeW—pÚ
Ğ
VeùÜ
 
v_’emy
 )

521 
di¡ªû
 = 
v_’emy
.
	`L’gth
();

523 ià(
m_bUsšgG»Çde
 || 
	`FœeHu¹sFr›nd
(
di¡ªû
))

525  
FALSE
;

527 
bÙ_w—pÚ_£Ëù_t
 *
pS–eù
 = 
cs_w—pÚ_£Ëù
;

528 
ediù_t
 *
pEÃmy
 = 
m_³ÁEÃmy
;

530 
iS–eùId
 = 
WEAPON_KNIFE
, 
£Ëù_šdex
 = 0, 
iCho£nW—pÚIndex
 = 0;

531 
iW—pÚs
 = 
³v
->
w—pÚs
;

534 ià(
g_bJasÚMode
)

535 
W—pÚS–eùEnd
;

538 ià(
m_iSkl
 > 80 && !
	`FNuÎEÁ
(
pEÃmy
))

540 ià(
di¡ªû
 < 100 && 
³v
->
h—Éh
 > 80 &&

541 
³v
->
h—Éh
 >ğ
pEÃmy
->
v
.h—Éh && !
	`IsGroupOfEÃm›s
Õev->
Üigš
))

542 
W—pÚS–eùEnd
;

546 
pS–eù
[
£Ëù_šdex
].
iId
)

549 ià(
iW—pÚs
 & (1 << 
pS–eù
[
£Ëù_šdex
].
iId
))

551 
iId
 = 
pS–eù
[
£Ëù_šdex
].iId;

554 ià(
m_rgAmmoInCl
[
iId
] > 0)

555 
iCho£nW—pÚIndex
 = 
£Ëù_šdex
;

559 
£Ëù_šdex
++;

562 
iS–eùId
 = 
pS–eù
[
iCho£nW—pÚIndex
].
iId
;

565 ià(
iCho£nW—pÚIndex
 == 0)

567 
£Ëù_šdex
 = 0;

570 
pS–eù
[
£Ëù_šdex
].
iId
)

572 
iId
 = 
pS–eù
[
£Ëù_šdex
].iId;

575 ià(
iW—pÚs
 & (1 << 
iId
))

577 ià(
w—pÚ_defs
[
iId
].
iAmmo1
 != -1 &&

578 
m_rgAmmo
[
w—pÚ_defs
[
iId
].
iAmmo1
] >ğ
pS–eù
[
£Ëù_šdex
].
mš_´im¬y_ammo
)

581 ià(!
m_iR–ßdS‹
 || 
m_æR–ßdCheckTime
 > 
gpGlob®s
->
time
)

583 
m_iR–ßdS‹
 = 
RELOAD_PRIMARY
;

584 
m_æR–ßdCheckTime
 = 
gpGlob®s
->
time
;

587  
FALSE
;

591 
£Ëù_šdex
++;

595 
iS–eùId
 = 
WEAPON_KNIFE
;

598 
W—pÚS–eùEnd
:

600 
m_iR–ßdS‹
 = 
RELOAD_NONE
;

601 
m_æR–ßdCheckTime
 = 
gpGlob®s
->
time
 + 3.0;

604 ià(
m_iCu¼’tW—pÚ
 !ğ
iS–eùId
)

606 
	`S–eùW—pÚByName
(
w—pÚ_defs
[
iS–eùId
].
szCÏs¢ame
);

609 
m_æTimeFœePau£
 = 0.0;

610  
FALSE
;

613 ià(
pS–eù
[
iCho£nW—pÚIndex
].
iId
 !ğ
iS–eùId
)

615 
iCho£nW—pÚIndex
 = 0;

618 
pS–eù
[
iCho£nW—pÚIndex
].
iId
)

620 ià(
pS–eù
[
iCho£nW—pÚIndex
].
iId
 =ğ
iS–eùId
)

623 
iCho£nW—pÚIndex
++;

626 
	`as£¹
(
pS–eù
[
iCho£nW—pÚIndex
].
iId
);

630 ià(
	`IsSh›ldD¿wn
())

631 
³v
->
bu‰Ú
 |ğ
IN_ATTACK2
;

633 ià(
	`U£sSn”
(è&& 
m_æZoomCheckTime
 + 1.0 < 
gpGlob®s
->
time
)

635 ià(
di¡ªû
 > 1500 && 
³v
->
fov
 >= 40)

636 
³v
->
bu‰Ú
 |ğ
IN_ATTACK2
;

638 ià(
di¡ªû
 > 150 && 
³v
->
fov
 >= 90)

639 
³v
->
bu‰Ú
 |ğ
IN_ATTACK2
;

641 ià(
di¡ªû
 <ğ150 && 
³v
->
fov
 < 90)

642 
³v
->
bu‰Ú
 |ğ
IN_ATTACK2
;

644 
m_æZoomCheckTime
 = 
gpGlob®s
->
time
;

646 ià(
	`U£sZoomabËRiæe
())

648 ià(
di¡ªû
 > 400 && 
³v
->
fov
 >= 90)

649 
³v
->
bu‰Ú
 |ğ
IN_ATTACK2
;

651 ià(
di¡ªû
 <ğ400 && 
³v
->
fov
 < 90)

652 
³v
->
bu‰Ú
 |ğ
IN_ATTACK2
;

654 
m_æZoomCheckTime
 = 
gpGlob®s
->
time
;

658 ià(
di¡ªû
 < 
MIN_BURST_DISTANCE
 || 
m_æBlšdTime
 > 
gpGlob®s
->
time
)

660 ià(
iS–eùId
 =ğ
WEAPON_KNIFE
)

662 ià(
di¡ªû
 < 64)

664 ià(
	`RANDOM_LONG
(1, 100è> 40 || 
	`HasSh›ld
())

665 
³v
->
bu‰Ú
 |ğ
IN_ATTACK
;

667 
³v
->
bu‰Ú
 |ğ
IN_ATTACK2
;

672 ià(
pS–eù
[
iCho£nW—pÚIndex
].
´im¬y_fœe_hŞd
)

673 
³v
->
bu‰Ú
 |ğ
IN_ATTACK
;

676 ià((
³v
->
Şdbu‰Ús
 & 
IN_ATTACK
) == 0)

677 
³v
->
bu‰Ú
 |ğ
IN_ATTACK
;

680 
m_æShoÙTime
 = 
gpGlob®s
->
time
;

684 ià(
	`DoFœePau£
(
di¡ªû
))

685  
FALSE
;

688 ià(
iS–eùId
 =ğ
WEAPON_KNIFE
)

690 
m_æShoÙTime
 = 
gpGlob®s
->
time
;

691  
FALSE
;

694 ià(
pS–eù
[
iCho£nW—pÚIndex
].
´im¬y_fœe_hŞd
)

696 
m_æShoÙTime
 = 
gpGlob®s
->
time
;

697 
m_æZoomCheckTime
 = 
gpGlob®s
->
time
;

698 
³v
->
bu‰Ú
 |ğ
IN_ATTACK
;

702 
³v
->
bu‰Ú
 |ğ
IN_ATTACK
;

704 cÚ¡ 
ba£_d–ay
 = 0.2;

705 cÚ¡ 
mš_d–ay
[6] = {0.0, 0.1, 0.2, 0.3, 0.4, 0.6},

706 
max_d–ay
[6] = {0.1, 0.2, 0.3, 0.4, 0.5, 0.7};

708 
skl
 = 
	`abs
(
m_iSkl
 / 20 - 5);

710 
m_æShoÙTime
 = 
gpGlob®s
->
time
 + 
ba£_d–ay
 + 
	`RANDOM_FLOAT
(
mš_d–ay
[
skl
], 
max_d–ay
[skill]);

711 
m_æZoomCheckTime
 = 
gpGlob®s
->
time
;

715  
TRUE
;

716 
	}
}

719 
	gCBa£BÙ
::
	$FocusEÃmy
()

722 
VeùÜ
 
vecEÃmy
 = 
	`BodyT¬g‘
Ğ
m_³ÁEÃmy
 );

723 
m_vecLookAt
 = 
vecEÃmy
;

725 ià(
m_æEÃmySu½ri£Time
 > 
gpGlob®s
->
time
)

728 
vecEÃmy
 = vecEÃmy - 
	`G‘GunPos™iÚ
();

729 
vecEÃmy
.
z
 = 0;

730 
f_di¡ªû
 = 
vecEÃmy
.
	`L’gth
();

732 ià(
f_di¡ªû
 < 128)

734 ià(
m_iCu¼’tW—pÚ
 =ğ
WEAPON_KNIFE
)

736 ià(
f_di¡ªû
 < 80)

737 
m_bWªtsToFœe
 = 
TRUE
;

740 
m_bWªtsToFœe
 = 
TRUE
;

744 
æDÙ
 = 
	`G‘ShoÙšgCÚeDevŸtiÚ
(
	`ediù
(),&
m_vecEÃmy
);

745 ià(
æDÙ
 < 0.90)

746 
m_bWªtsToFœe
 = 
FALSE
;

749 
æEÃmyDÙ
 = 
	`G‘ShoÙšgCÚeDevŸtiÚ
(
m_³ÁEÃmy
, &
³v
->
Üigš
);

751 ià(
æEÃmyDÙ
 >= 0.90)

752 
m_bWªtsToFœe
 = 
TRUE
;

755 ià(
æDÙ
 > 0.99)

756 
m_bWªtsToFœe
 = 
TRUE
;

758 
m_bWªtsToFœe
 = 
FALSE
;

762 
	}
}

767 
	gCBa£BÙ
::
	$DoA‰ackMovem’t
()

770 ià(
	`FNuÎEÁ
(
m_³ÁEÃmy
))

773 
m_vecDe¡Origš
 = 
m_³ÁEÃmy
->
v
.
Üigš
;

775 
f_di¡ªû
;

776 
T¿ûResuÉ
 
Œ
;

777 
VeùÜ
 
vecEÃmy
 = 
m_vecLookAt
;

778 
vecEÃmy
 = vecEÃmy - 
	`G‘GunPos™iÚ
();

779 
vecEÃmy
.
z
 = 0;

780 
f_di¡ªû
 = 
vecEÃmy
.
	`L’gth
();

782 ià(
m_æTimeWaypoštMove
 + 
g_æTimeF¿meIÁ”v®
 + 0.5 < 
gpGlob®s
->
time
)

784 
iAµrßch
;

785 
boŞ
 
bU£sSn”
 = 
	`U£sSn”
();

788 ià(
m_iS‹s
 & 
STATE_SUSPECTENEMY
)

789 
iAµrßch
 = 49;

791 ià(
m_bIsR–ßdšg
 || 
m_bIsVIP
)

792 
iAµrßch
 = 29;

793 ià(
m_iCu¼’tW—pÚ
 =ğ
WEAPON_KNIFE
)

794 
iAµrßch
 = 100;

797 
iAµrßch
 = 
³v
->
h—Éh
 * 
m_æAg»ssiÚLev–
;

798 ià(
bU£sSn”
 && 
iAµrßch
 > 49)

799 
iAµrßch
 = 49;

804 ià(
iAµrßch
 < 30 && !
g_bBombPÏÁed
 &&

805 (::
	`FInV›wCÚe
(&
³v
->
Üigš
, 
m_³ÁEÃmy
è|| 
m_bIsVIP
))

807 
m_æMoveS³ed
 = -
³v
->
max¥“d
;

808 
	`Cu¼’tTask
()->
iTask
 = 
TASK_SEEKCOVER
;

809 
	`Cu¼’tTask
()->
bCªCÚtšue
 = 
TRUE
;

810 
	`Cu¼’tTask
()->
fDesœe
 = 
TASKPRI_ATTACK
 + 1;

812 ià(
iAµrßch
 < 50)

813 
m_æMoveS³ed
 = 0.0;

815 
m_æMoveS³ed
 = 
³v
->
max¥“d
;

817 ià(
f_di¡ªû
 < 96 && 
m_iCu¼’tW—pÚ
 !ğ
WEAPON_KNIFE
)

818 
m_æMoveS³ed
 = -
³v
->
max¥“d
;

820 
boŞ
 
bU£sRiæe
 = 
	`U£sRiæe
();

821 ià(
bU£sRiæe
)

823 ià(
m_æLa¡FightStyËCheck
 + 3.0 < 
gpGlob®s
->
time
)

825 
iRªd
 = 
	`RANDOM_LONG
(1, 100);

826 ià(
f_di¡ªû
 < 500)

827 
m_ucFightStyË
 = 0;

828 ià(
f_di¡ªû
 < 1024)

830 ià(
iRªd
 < 50)

831 
m_ucFightStyË
 = 0;

833 
m_ucFightStyË
 = 1;

837 ià(
iRªd
 < 90)

838 
m_ucFightStyË
 = 1;

840 
m_ucFightStyË
 = 0;

842 
m_æLa¡FightStyËCheck
 = 
gpGlob®s
->
time
;

846 
m_ucFightStyË
 = 0;

848 ià(
m_iSkl
 > 60 && 
m_ucFightStyË
 == 0)

850 ià(
m_æSŒaãS‘Time
 < 
gpGlob®s
->
time
)

852 
VeùÜ2D
 
vec2DœToPošt
;

853 
VeùÜ2D
 
vec2RightSide
;

856 
	`UTIL_MakeVeùÜs
(
m_³ÁEÃmy
->
v
.
v_ªgË
);

858 
vec2DœToPošt
 = (
³v
->
Üigš
 - 
m_³ÁEÃmy
->
v
.Üigš).
	`Make2D
().
	`NÜm®ize
();

859 
vec2RightSide
 = 
gpGlob®s
->
v_right
.
	`Make2D
().
	`NÜm®ize
();

861 iàĞ
	`DÙProduù
 ( 
vec2DœToPošt
, 
vec2RightSide
 ) < 0 )

862 
m_ucComb©SŒaãDœ
 = 1;

864 
m_ucComb©SŒaãDœ
 = 0;

866 ià(
	`RANDOM_LONG
(1, 100) < 30)

867 
m_ucComb©SŒaãDœ
 ^= 1;

869 
m_æSŒaãS‘Time
 = 
gpGlob®s
->
time
 + 
	`RANDOM_FLOAT
(0.5, 3.0);

872 ià(
m_ucComb©SŒaãDœ
 == 0)

874 ià(!
	`CheckW®lOnLeá
())

875 
m_æSideMoveS³ed
 = -
³v
->
max¥“d
;

878 
m_ucComb©SŒaãDœ
 ^= 1;

879 
m_æSŒaãS‘Time
 = 
gpGlob®s
->
time
 + 1.0;

884 ià(!
	`CheckW®lOnRight
())

885 
m_æSideMoveS³ed
 = 
³v
->
max¥“d
;

888 
m_ucComb©SŒaãDœ
 ^= 1;

889 
m_æSŒaãS‘Time
 = 
gpGlob®s
->
time
 + 1.0;

896 ià(
m_iSkl
 > 80)

898 ià(
m_æJumpTime
 + 1.5 < 
gpGlob®s
->
time
 && (
³v
->
æags
 & 
FL_ONGROUND
))

900 ià(
	`RANDOM_LONG
(1, 100è< 5 && 
³v
->
v–oc™y
.
	`L’gth2D
() > 150)

901 
³v
->
bu‰Ú
 |ğ
IN_JUMP
;

906 ià(
m_ucFightStyË
 == 1)

908 
³v
->
bu‰Ú
 |ğ
IN_DUCK
;

909 ià(
m_ucComb©SŒaãDœ
 == 0)

911 ià(!
	`CheckW®lOnLeá
())

912 
m_æSideMoveS³ed
 = -
³v
->
max¥“d
;

914 
m_ucComb©SŒaãDœ
 ^= 1;

918 ià(!
	`CheckW®lOnRight
())

919 
m_æSideMoveS³ed
 = 
³v
->
max¥“d
;

921 
m_ucComb©SŒaãDœ
 ^= 1;

924 ià(
m_æMoveS³ed
 > 0)

925 
m_æMoveS³ed
 = 0;

930 ià(
m_iSkl
 > 80)

932 ià(
³v
->
æags
 & 
FL_ONGROUND
)

935 ià(
f_di¡ªû
 < 500)

937 ià(
	`RANDOM_LONG
(1, 100è< 5 && 
³v
->
v–oc™y
.
	`L’gth2D
() > 150)

938 
³v
->
bu‰Ú
 |ğ
IN_JUMP
;

941 
³v
->
bu‰Ú
 |ğ
IN_DUCK
;

943 ià(
f_di¡ªû
 > 500)

944 
³v
->
bu‰Ú
 |ğ
IN_DUCK
;

950 ià(
m_bIsR–ßdšg
)

951 
m_æMoveS³ed
 = -
³v
->
max¥“d
;

953 ià(!
	`IsInW©”
(è&& !
	`IsOnLadd”
()

954 && (
m_æMoveS³ed
 !ğ0 || 
m_æSideMoveS³ed
 != 0))

956 
fTimeRªge
 = 
g_æTimeF¿meIÁ”v®
;

957 
VeùÜ
 
vecFÜw¬d
 = 
gpGlob®s
->
v_fÜw¬d
 * 
m_æMoveS³ed
 * 0.2;

958 
VeùÜ
 
vecSide
 = 
gpGlob®s
->
v_right
 * 
m_æSideMoveS³ed
 * 0.2;

959 
VeùÜ
 
vecT¬g‘Pos
 = 
³v
->
Üigš
 + 
vecFÜw¬d
 + 
vecSide
 +…ev->
v–oc™y
 * 
fTimeRªge
;

961 ià(
	`IsD—dlyDrİ
(
vecT¬g‘Pos
))

963 
m_æSideMoveS³ed
 = -m_flSideMoveSpeed;

964 
m_æMoveS³ed
 = -m_flMoveSpeed;

965 
³v
->
bu‰Ú
 &ğ~
IN_JUMP
;

968 
	}
}

971 
boŞ
 
	gCBa£BÙ
::
	$HasPrim¬yW—pÚ
()

973  (
³v
->
w—pÚs
 & 
WEAPON_PRIMARY
) != 0;

974 
	}
}

977 
boŞ
 
	gCBa£BÙ
::
	$HasSh›ld
()

979  (
	`¡ºcmp
(
	`STRING
(
³v
->
v›wmod–
), "models/shield/v_shield_", 23) == 0);

980 
	}
}

983 
boŞ
 
	gCBa£BÙ
::
	$IsSh›ldD¿wn
()

985 ià(!
	`HasSh›ld
())

986  
FALSE
;

987  (
³v
->
w—pÚªim
 == 6 ||…ev->weaponanim == 7);

988 
	}
}

991 
boŞ
 
	gCBa£BÙ
::
	$U£sSn”
()

993  (
m_iCu¼’tW—pÚ
 =ğ
WEAPON_AWP
 ||

994 
m_iCu¼’tW—pÚ
 =ğ
WEAPON_G3SG1
 ||

995 
m_iCu¼’tW—pÚ
 =ğ
WEAPON_SCOUT
 ||

996 
m_iCu¼’tW—pÚ
 =ğ
WEAPON_SG550
);

997 
	}
}

999 
boŞ
 
	gCBa£BÙ
::
	$U£sRiæe
()

1001 
bÙ_w—pÚ_£Ëù_t
 *
pS–eù
 = 
cs_w—pÚ_£Ëù
;

1002 
iCouÁ
 = 0;

1003 
pS–eù
->
iId
)

1005 ià(
m_iCu¼’tW—pÚ
 =ğ
pS–eù
->
iId
)

1007 
pS–eù
++;

1008 
iCouÁ
++;

1011 ià(
pS–eù
->
iId
 && 
iCouÁ
 > 13)

1012  
TRUE
;

1013  
FALSE
;

1014 
	}
}

1016 
boŞ
 
	gCBa£BÙ
::
	$U£sZoomabËRiæe
()

1018  (
m_iCu¼’tW—pÚ
 =ğ
WEAPON_AUG
 ||

1019 
m_iCu¼’tW—pÚ
 =ğ
WEAPON_SG552
);

1020 
	}
}

1022 
	gCBa£BÙ
::
	$CheckG»Çdes
()

1024 
w—pÚs
 = 
³v
->weapons;

1025 ià(
w—pÚs
 & (1 << 
WEAPON_HEGRENADE
))

1026  
WEAPON_HEGRENADE
;

1027 ià(
w—pÚs
 & (1 << 
WEAPON_FLASHBANG
))

1028  
WEAPON_FLASHBANG
;

1029 ià(
w—pÚs
 & (1 << 
WEAPON_SMOKEGRENADE
))

1030  
WEAPON_SMOKEGRENADE
;

1032 
	}
}

1034 
	gCBa£BÙ
::
	$S–eùBe¡W—pÚ
()

1036 ià(
g_bJasÚMode
)

1039 
	`S–eùW—pÚByName
("weapon_knife");

1043 
bÙ_w—pÚ_£Ëù_t
 *
pS–eù
 = 
cs_w—pÚ_£Ëù
;

1044 
£Ëù_šdex
 = 0;

1045 
iCho£nW—pÚIndex
 = 0;

1046 
iId
;

1047 
iW—pÚs
 = 
³v
->
w—pÚs
;

1050 
pS–eù
[
£Ëù_šdex
].
iId
)

1053 ià(!(
iW—pÚs
 & (1 << 
pS–eù
[
£Ëù_šdex
].
iId
)))

1055 
£Ëù_šdex
++;

1059 
iId
 = 
pS–eù
[
£Ëù_šdex
].iId;

1062 ià(
w—pÚ_defs
[
iId
].
iAmmo1
 < 0 || 
m_rgAmmoInCl
[iId] > 0 ||

1063 
m_rgAmmo
[
w—pÚ_defs
[
iId
].
iAmmo1
] >ğ
pS–eù
[
£Ëù_šdex
].
mš_´im¬y_ammo
)

1064 
iCho£nW—pÚIndex
 = 
£Ëù_šdex
;

1066 
£Ëù_šdex
++;

1069 
iCho£nW—pÚIndex
 %ğ
NUM_WEAPONS
 + 1;

1070 
£Ëù_šdex
 = 
iCho£nW—pÚIndex
;

1072 
iId
 = 
pS–eù
[
£Ëù_šdex
].iId;

1075 ià(
m_iCu¼’tW—pÚ
 !ğ
iId
)

1076 
	`S–eùW—pÚByName
(
pS–eù
[
£Ëù_šdex
].
w—pÚ_Çme
);

1078 
m_bIsR–ßdšg
 = 
FALSE
;

1079 
m_iR–ßdS‹
 = 
RELOAD_NONE
;

1080 
	}
}

1082 
	gCBa£BÙ
::
	$S–eùPi¡Ş
()

1084 
iOldW—pÚs
 = 
³v
->
w—pÚs
;

1085 
³v
->
w—pÚs
 &ğ~
WEAPON_PRIMARY
;

1086 
	`S–eùBe¡W—pÚ
();

1087 
³v
->
w—pÚs
 = 
iOldW—pÚs
;

1088 
	}
}

1090 
	$Highe¡W—pÚOfEdiù
(
ediù_t
 *
pEdiù
)

1092 ià(!
	`IsPÏy”
(
pEdiù
))

1095 
bÙ_w—pÚ_£Ëù_t
 *
pS–eù
 = 
cs_w—pÚ_£Ëù
;

1096 
iW—pÚs
 = 
pEdiù
->
v
.
w—pÚs
;

1097 
iNum
 = 0;

1098 
i
 = 0;

1101 
pS–eù
->
iId
)

1104 ià(
iW—pÚs
 & (1 << 
pS–eù
->
iId
))

1105 
iNum
 = 
i
;

1106 
i
++;

1107 
pS–eù
++;

1110  
iNum
;

1111 
	}
}

1113 
	gCBa£BÙ
::
	$S–eùW—pÚByName
(cÚ¡ * 
pszName
)

1115 
	`FakeCl›ÁCommªd
(
	`ediù
(), 
pszName
);

1116 
	}
}

1118 
	gCBa£BÙ
::
	$S–eùW—pÚbyNumb”
(
iNum
)

1120 
	`FakeCl›ÁCommªd
(
	`ediù
(), 
cs_w—pÚ_£Ëù
[
iNum
].
w—pÚ_Çme
);

1121 
	}
}

1123 
	gCBa£BÙ
::
	$CommªdT—m
()

1126 ià(
m_æTimeT—mOrd”
 < 
gpGlob®s
->
time
)

1128 
boŞ
 
bMemb”N—r
 = 
FALSE
;

1129 
boŞ
 
bMemb”Exi¡s
 = 
FALSE
;

1130 
ediù_t
 *
pT—mEdiù
;

1132 
iT—m
 = 
	`UTIL_G‘T—m
(
	`ediù
());

1135 
šd
 = 0; ind < 
gpGlob®s
->
maxCl›Ás
; ind++)

1137 ià(
Th»©Tab
[
šd
].
IsU£d
 =ğ
FALSE
 || Th»©Tab[šd].
IsAlive
 == FALSE ||

1138 
Th»©Tab
[
šd
].
iT—m
 !ğiT—m || Th»©Tab[šd].
pEdiù
 =ğ
	`ediù
())

1141 
bMemb”Exi¡s
 = 
TRUE
;

1143 
pT—mEdiù
 = 
Th»©Tab
[
šd
].
pEdiù
;

1144 ià(
	`EÁ™yIsVisibË
(
pT—mEdiù
->
v
.
Üigš
))

1146 
bMemb”N—r
 = 
TRUE
;

1151 ià(
bMemb”N—r
)

1153 ià(
m_ucP”sÚ®™y
 =ğ
PERSONALITY_AGRESSIVE
)

1154 
	`PÏyRadioMes§ge
(
RADIO_STORMTHEFRONT
);

1156 
	`PÏyRadioMes§ge
(
RADIO_FALLBACK
);

1158 ià(
bMemb”Exi¡s
)

1159 
	`PÏyRadioMes§ge
(
RADIO_TAKINGFIRE
);

1161 
m_æTimeT—mOrd”
 = 
gpGlob®s
->
time
 + 
	`RANDOM_FLOAT
(5.0, 30.0);

1163 
	}
}

1165 
boŞ
 
	gCBa£BÙ
::
	$IsGroupOfEÃm›s
(
VeùÜ
 
vLoÿtiÚ
)

1167 
ediù_t
 *
pPÏy”
;

1168 
iNumPÏy”s
 = 0;

1169 
di¡ªû
;

1171 
‹am
 = 
	`UTIL_G‘T—m
(
	`ediù
());

1174 
i
 = 0; i < 
gpGlob®s
->
maxCl›Ás
; i++)

1176 ià(
Th»©Tab
[
i
].
IsU£d
 =ğ
FALSE
 || Th»©Tab[i].
IsAlive
 == FALSE ||

1177 
Th»©Tab
[
i
].
pEdiù
 =ğ
	`ediù
())

1180 
pPÏy”
 = 
Th»©Tab
[
i
].
pEdiù
;

1181 
di¡ªû
 = (
pPÏy”
->
v
.
Üigš
 - 
vLoÿtiÚ
).
	`L’gth
();

1182 ià(
di¡ªû
 < 256)

1185 ià(
Th»©Tab
[
i
].
iT—m
 =ğ
‹am
)

1186  
FALSE
;

1187 
iNumPÏy”s
++;

1188 ià(
iNumPÏy”s
 > 1)

1189  
TRUE
;

1193  
FALSE
;

1194 
	}
}

1196 
	gCBa£BÙ
::
	$CheckR–ßd
()

1198 
m_bIsR–ßdšg
 = 
FALSE
;

1201 ià((!(
³v
->
æags
 & 
FL_ONGROUND
è&& !
	`IsOnLadd”
()) ||

1202 
	`Cu¼’tTask
()->
iTask
 =ğ
TASK_PLANTBOMB
 ||

1203 
	`Cu¼’tTask
()->
iTask
 =ğ
TASK_DEFUSEBOMB
 ||

1204 
	`Cu¼’tTask
()->
iTask
 =ğ
TASK_PICKUPITEM
 || 
m_bUsšgG»Çde
)

1206 
m_iR–ßdS‹
 = 
RELOAD_NONE
;

1210 ià(
m_iR–ßdS‹
 !ğ
RELOAD_NONE
)

1212 
iW—pÚId
 = 0, 
iMaxCl
 = 0;

1213 
iW—pÚs
 = 
³v
->
w—pÚs
;

1215 ià(
m_iR–ßdS‹
 =ğ
RELOAD_PRIMARY
)

1216 
iW—pÚs
 &ğ
WEAPON_PRIMARY
;

1217 ià(
m_iR–ßdS‹
 =ğ
RELOAD_SECONDARY
)

1218 
iW—pÚs
 &ğ
WEAPON_SECONDARY
;

1220 ià(!
iW—pÚs
)

1222 
m_iR–ßdS‹
++;

1223 ià(
m_iR–ßdS‹
 > 
RELOAD_SECONDARY
)

1224 
m_iR–ßdS‹
 = 
RELOAD_NONE
;

1228 
i
 = 1; i < 
MAX_WEAPONS
; i++)

1230 ià(
iW—pÚs
 & (1 << 
i
))

1232 
iW—pÚId
 = 
i
;

1237 
	`as£¹
(
iW—pÚId
);

1239 
iW—pÚId
)

1241 
WEAPON_M249
:

1242 
iMaxCl
 = 100;

1245 
WEAPON_P90
:

1246 
iMaxCl
 = 50;

1249 
WEAPON_GALIL
:

1250 
iMaxCl
 = 35;

1253 
WEAPON_ELITE
:

1254 
WEAPON_MP5NAVY
:

1255 
WEAPON_TMP
:

1256 
WEAPON_MAC10
:

1257 
WEAPON_M4A1
:

1258 
WEAPON_AK47
:

1259 
WEAPON_SG552
:

1260 
WEAPON_AUG
:

1261 
WEAPON_SG550
:

1262 
iMaxCl
 = 30;

1265 
WEAPON_UMP45
:

1266 
WEAPON_FAMAS
:

1267 
iMaxCl
 = 25;

1270 
WEAPON_GLOCK18
:

1271 
WEAPON_FIVESEVEN
:

1272 
WEAPON_G3SG1
:

1273 
iMaxCl
 = 20;

1276 
WEAPON_P228
:

1277 
iMaxCl
 = 13;

1280 
WEAPON_USP
:

1281 
iMaxCl
 = 12;

1284 
WEAPON_AWP
:

1285 
WEAPON_SCOUT
:

1286 
iMaxCl
 = 10;

1289 
WEAPON_M3
:

1290 
iMaxCl
 = 8;

1293 
WEAPON_DEAGLE
:

1294 
WEAPON_XM1014
:

1295 
iMaxCl
 = 7;

1299 ià(
m_rgAmmoInCl
[
iW—pÚId
] < 
iMaxCl
 &&

1300 
m_rgAmmo
[
w—pÚ_defs
[
iW—pÚId
].
iAmmo1
] > 0)

1302 ià(
m_iCu¼’tW—pÚ
 !ğ
iW—pÚId
)

1303 
	`S–eùW—pÚByName
(
w—pÚ_defs
[
iW—pÚId
].
szCÏs¢ame
);

1305 ià(!(
³v
->
Şdbu‰Ús
 & 
IN_RELOAD
))

1306 
³v
->
bu‰Ú
 |ğ
IN_RELOAD
;

1308 
m_bIsR–ßdšg
 = 
TRUE
;

1313 ià((
m_iS‹s
 & (
STATE_SEEINGENEMY
 | 
STATE_HEARINGENEMY
)) ||

1314 
m_æS“EÃmyTime
 + 5.0 > 
gpGlob®s
->
time
)

1316 
m_iR–ßdS‹
 = 
RELOAD_NONE
;

1320 
m_iR–ßdS‹
++;

1321 ià(
m_iR–ßdS‹
 > 
RELOAD_SECONDARY
)

1322 
m_iR–ßdS‹
 = 
RELOAD_NONE
;

1327 
	}
}

	@bot_globals.cpp

5 
	~"bÙ.h
"

7 
	gg_iM­Ty³
 = 0;

8 
boŞ
 
	gg_bWaypoštOn
 = 
FALSE
;

9 
boŞ
 
	gg_bWaypoštsChªged
 = 
TRUE
;

10 
boŞ
 
	gg_bAutoWaypošt
 = 
FALSE
;

11 
boŞ
 
	gg_bDªg”DœeùiÚ
 = 
FALSE
;

12 
boŞ
 
	gg_bL—ºJumpWaypošt
 = 
FALSE
;

13 
	gg_iFšdWPIndex
 = -1;

14 
	gg_iCacheWaypoštIndex
 = -1;

15 
	gg_iNumWaypošts
;

18 
boŞ
 
	gg_bL—d”Cho£nT
 = 
FALSE
;

19 
boŞ
 
	gg_bL—d”Cho£nCT
 = 
FALSE
;

21 *
	gg_pT”rÜWaypošts
 = 
NULL
;

22 
	gg_iNumT”rÜPošts
 = 0;

23 *
	gg_pCTWaypošts
 = 
NULL
;

24 
	gg_iNumCTPošts
 = 0;

25 *
	gg_pGßlWaypošts
 = 
NULL
;

26 
	gg_iNumGßlPošts
 = 0;

27 *
	gg_pCampWaypošts
 = 
NULL
;

28 
	gg_iNumCampPošts
 = 0;

29 *
	gg_pRescueWaypošts
 = 
NULL
;

30 
	gg_iNumRescuePošts
 = 0;

33 *
	gg_pFloydDi¡ªûM©rix
 = 
NULL
;

34 *
	gg_pFloydP©hM©rix
 = 
NULL
;

36 
	gg_iBÙQuÙa
 = -1;

37 
boŞ
 
	gg_bBÙAutoVaÿ‹
 = 
TRUE
;

39 
boŞ
 
	gg_bM­In™Ÿlized
 = 
FALSE
;

41 
	gg_cKlHi¡Üy
;

44 
	gNÜm®W—pÚP»fs
[
NUM_WEAPONS
] = {

47 
	gAg»ssiveW—pÚP»fs
[
NUM_WEAPONS
] = {

50 
	gDeãnsiveW—pÚP»fs
[
NUM_WEAPONS
] = {

53 *
	g±rW—pÚP»fs
[] = {

54 (*)&
NÜm®W—pÚP»fs
,

55 (*)&
Ag»ssiveW—pÚP»fs
,

56 (*)&
DeãnsiveW—pÚP»fs


59 
	giNumBÙÇmes
;

60 
	giNumKlCh©s
;

61 
	giNumBombCh©s
;

62 
	giNumD—dCh©s
;

63 
	giNumNoKeySŒšgs
;

65 
	gg_æBÙC»©iÚTime
 = 0.0;

67 
	gg_iMšBÙSkl
 = 0;

68 
	gg_iMaxBÙSkl
 = 100;

69 
boŞ
 
	gg_bBÙCh©
 = 
TRUE
;

70 
boŞ
 
	gg_bBÙU£Radio
 = 
TRUE
;

71 
boŞ
 
	gg_bJasÚMode
 = 
FALSE
;

72 
boŞ
 
	gg_bD‘aNames
 = 
TRUE
;

73 
boŞ
 
	gg_bIn¡ªtTuºs
 = 
FALSE
;

74 
	gg_iMaxNumFŞlow
 = 3;

75 
boŞ
 
	gg_bShoÙThruW®ls
 = 
TRUE
;

76 
	gg_fLa¡Ch©Time
 = 0.0;

77 
	gg_fTimeRoundS¹
 = 0.0;

78 
	gg_fTimeRoundEnd
 = 0.0;

79 
boŞ
 
	gg_bRoundEnded
 = 
TRUE
;

80 
	gg_fTimeRoundMid
 = 0.0;

82 
	gg_fTimeSoundUpd©e
 = 1.0;

83 
	gg_fTimePickupUpd©e
 = 0.3;

84 
	gg_fTimeG»ÇdeUpd©e
 = 0.5;

85 
	gg_fTimeNextBombUpd©e
 = 0.0;

86 
	gg_iLa¡BombPošt
;

87 
boŞ
 
	gg_bBombPÏÁed
;

88 
boŞ
 
	gg_bBombSaySŒšg
;

89 
	gg_fTimeBombPÏÁed
 = 0.0;

90 
	gg_rgiBombSpÙsVis™ed
[
MAXNUMBOMBSPOTS
];

91 
boŞ
 
	gg_bAÎowVÙes
 = 
TRUE
;

92 
boŞ
 
	gg_bU£Ex³r›nû
 = 
TRUE
;

93 
boŞ
 
	gg_bAutoSaveEx³r›nû
 = 
TRUE
;

94 
boŞ
 
	gg_bBÙS´ay
 = 
TRUE
;

95 
boŞ
 
	gg_bBÙBuy
 = 
TRUE
;

96 
boŞ
 
	gg_bBÙsCªPau£
 = 
FALSE
;

97 
	giRadioS–eù
[32];

98 
	gg_rgfLa¡Radio
[2];

99 
	gg_rgfLa¡RadioTime
[2] = {0.0, 0.0};

101 
	gg_iNumLogos
 = 5;

103 
	gszS´ayNames
[
NUM_SPRAYPAINTS
][20] = {

111 
	gg_iDebugGßlIndex
 = -1;

113 
boŞ
 
	gg_bIsV”siÚ16
 = 
FALSE
;

115 
	gg_æTimeF¿meIÁ”v®
 = 0.0;

116 
	gg_æTimeP»vThšk
 = -1.0;

117 
	gg_iM£cv®
 = 0;

119 
	gg_szWaypoš‹r
[32];

	@bot_globals.h

5 #iâdeà
BOT_GLOBALSH


6 
	#BOT_GLOBALSH


	)

8 
	#NUM_WEAPONS
 26

	)

9 
	#MAX_WAYPOINTS
 1024

	)

10 
	#MAXNUMBOMBSPOTS
 16

	)

11 
	#NUM_SPRAYPAINTS
 16

	)

13 
g_iM­Ty³
;

14 
boŞ
 
g_bWaypoštOn
;

15 
boŞ
 
g_bWaypoštsChªged
;

16 
boŞ
 
g_bAutoWaypošt
;

17 
boŞ
 
g_bDªg”DœeùiÚ
;

18 
boŞ
 
g_bL—ºJumpWaypošt
;

19 
g_iFšdWPIndex
;

20 
g_iCacheWaypoštIndex
;

21 
g_fTimeNextBombUpd©e
;

22 
g_iNumWaypošts
;

24 
boŞ
 
g_bL—d”Cho£nT
;

25 
boŞ
 
g_bL—d”Cho£nCT
;

27 
g_cKlHi¡Üy
;

29 *
g_pT”rÜWaypošts
;

30 
g_iNumT”rÜPošts
;

31 *
g_pCTWaypošts
;

32 
g_iNumCTPošts
;

33 *
g_pGßlWaypošts
;

34 
g_iNumGßlPošts
;

35 *
g_pCampWaypošts
;

36 
g_iNumCampPošts
;

37 *
g_pRescueWaypošts
;

38 
g_iNumRescuePošts
;

40 *
g_pFloydDi¡ªûM©rix
;

41 *
g_pFloydP©hM©rix
;

43 
g_iBÙQuÙa
;

44 
boŞ
 
g_bBÙAutoVaÿ‹
;

46 
boŞ
 
g_bIsV”siÚ16
;

48 
boŞ
 
g_bM­In™Ÿlized
;

50 
NÜm®W—pÚP»fs
[
NUM_WEAPONS
];

51 
Ag»ssiveW—pÚP»fs
[
NUM_WEAPONS
];

52 
DeãnsiveW—pÚP»fs
[
NUM_WEAPONS
];

53 * 
±rW—pÚP»fs
[];

55 
iNumBÙÇmes
;

56 
iNumKlCh©s
;

57 
iNumBombCh©s
;

58 
iNumD—dCh©s
;

59 
iNumNoKeySŒšgs
;

61 
g_æBÙC»©iÚTime
;

62 
g_iMšBÙSkl
;

63 
g_iMaxBÙSkl
;

64 
boŞ
 
g_bBÙCh©
;

65 
boŞ
 
g_bBÙU£Radio
;

66 
boŞ
 
g_bJasÚMode
;

67 
boŞ
 
g_bD‘aNames
;

68 
boŞ
 
g_bIn¡ªtTuºs
;

69 
g_iMaxNumFŞlow
;

70 
boŞ
 
g_bShoÙThruW®ls
;

71 
g_fLa¡Ch©Time
;

72 
g_fTimeRoundS¹
;

73 
g_fTimeRoundEnd
;

74 
boŞ
 
g_bRoundEnded
;

75 
g_fTimeRoundMid
;

76 
g_fTimeSoundUpd©e
;

77 
g_fTimePickupUpd©e
;

78 
g_fTimeG»ÇdeUpd©e
;

79 
g_fTimeNextBombUpd©e
;

80 
g_iLa¡BombPošt
;

81 
boŞ
 
g_bBombPÏÁed
;

82 
g_fTimeBombPÏÁed
;

83 
boŞ
 
g_bBombSaySŒšg
;

84 
g_rgiBombSpÙsVis™ed
[
MAXNUMBOMBSPOTS
];

85 
boŞ
 
g_bAÎowVÙes
;

86 
boŞ
 
g_bU£Ex³r›nû
;

87 
boŞ
 
g_bAutoSaveEx³r›nû
;

88 
boŞ
 
g_bBÙS´ay
;

89 
boŞ
 
g_bBÙBuy
;

90 
boŞ
 
g_bBÙsCªPau£
;

91 
iRadioS–eù
[32];

92 
g_rgfLa¡Radio
[2];

93 
g_rgfLa¡RadioTime
[2];

95 
g_iNumLogos
;

96 
szS´ayNames
[
NUM_SPRAYPAINTS
][20];

98 
g_iDebugGßlIndex
;

100 
g_æTimeF¿meIÁ”v®
;

101 
g_æTimeP»vThšk
;

102 
g_iM£cv®
;

104 
g_szWaypoš‹r
[32];

	@bot_navigate.cpp

5 
	~"bÙ.h
"

10 
	gCBa£BÙ
::
	$FšdGßl
()

12 
boŞ
 
bHasHo¡age
 = 
	`HasHo¡age
();

13 
iT—m
 = 
	`UTIL_G‘T—m
(
	`ediù
());

14 
i
;

16 ià(
iT—m
 =ğ
TEAM_TERRORIST
 && (
g_iM­Ty³
 & 
MAP_DE
))

19 
ediù_t
 *
³Á
 = 
NULL
;

20 !
	`FNuÎEÁ
(
³Á
 = 
	`FIND_ENTITY_BY_STRING
(pent, "classname", "weaponbox")))

22 ià(
	`¡rcmp
(
	`STRING
(
³Á
->
v
.
mod–
), "models/w_backpack.mdl") == 0)

24 
iIndex
 = 
	`WaypoštFšdN—»¡
(
	`VecBMod–Origš
(
³Á
));

25 ià(
iIndex
 >ğ0 && iIndex < 
g_iNumWaypošts
)

26  
iIndex
;

33 ià(
g_bU£Ex³r›nû
)

35 
iTaùic
;

36 
iOfãnsive
;

37 
iDeãnsive
;

38 
iGßlDesœe
;

39 
iFÜw¬dDesœe
;

40 
iCampDesœe
;

41 
iBackoffDesœe
;

42 
iTaùicChoiû
;

43 *
pOfãnsiveWPTS
;

44 
iNumOfãnsives
;

45 *
pDeãnsiveWPTS
;

46 
iNumDeãnsives
;

48 ià(
iT—m
 =ğ
TEAM_TERRORIST
)

50 
pOfãnsiveWPTS
 = 
g_pCTWaypošts
;

51 
iNumOfãnsives
 = 
g_iNumCTPošts
;

52 
pDeãnsiveWPTS
 = 
g_pT”rÜWaypošts
;

53 
iNumDeãnsives
 = 
g_iNumT”rÜPošts
;

57 
pOfãnsiveWPTS
 = 
g_pT”rÜWaypošts
;

58 
iNumOfãnsives
 = 
g_iNumT”rÜPošts
;

59 
pDeãnsiveWPTS
 = 
g_pCTWaypošts
;

60 
iNumDeãnsives
 = 
g_iNumCTPošts
;

64 ià(
³v
->
w—pÚs
 & (1 << 
WEAPON_C4
è|| 
m_bIsVIP
)

66 
iTaùic
 = 3;

67 
ùiccho£n
;

69 ià(
bHasHo¡age
 && 
iT—m
 =ğ
TEAM_CT
)

71 
iTaùic
 = 2;

72 
pOfãnsiveWPTS
 = 
g_pRescueWaypošts
;

73 
iNumOfãnsives
 = 
g_iNumRescuePošts
;

74 
ùiccho£n
;

77 
iOfãnsive
 = 
m_æAg»ssiÚLev–
 * 100;

78 
iDeãnsive
 = 
m_æF—rLev–
 * 100;

80 ià(
g_iM­Ty³
 & (
MAP_AS
 | 
MAP_CS
))

82 ià(
iT—m
 =ğ
TEAM_TERRORIST
)

84 
iDeãnsive
 += 25;

85 
iOfãnsive
 -= 25;

88 ià(
g_iM­Ty³
 & 
MAP_DE
)

90 ià(
iT—m
 =ğ
TEAM_CT
)

92 ià(
g_bBombPÏÁed
)

94 ià(
g_bBÙCh©
)

96 ià(
g_bBombSaySŒšg
)

98 
STRINGNODE
 *
pTempNode
 = 
	`G‘NodeSŒšg
(
pBombCh©
, 
	`RANDOM_LONG
(0, 
iNumBombCh©s
 - 1));

100 ià(
pTempNode
 &&…TempNode->
pszSŒšg
)

102 
	`P»·»Ch©Mes§ge
(
pTempNode
->
pszSŒšg
);

103 
	`PushMes§geQueue
(
MSG_CS_SAY
);

106 
g_bBombSaySŒšg
 = 
FALSE
;

109  
	`Choo£BombWaypošt
();

111 
iDeãnsive
 += 25;

112 
iOfãnsive
 -= 25;

116 
iGßlDesœe
 = 
	`RANDOM_LONG
(0, 100è+ 
iOfãnsive
;

117 
iFÜw¬dDesœe
 = 
	`RANDOM_LONG
(0, 100è+ 
iOfãnsive
;

118 
iCampDesœe
 = 
	`RANDOM_LONG
(0, 100è+ 
iDeãnsive
;

119 
iBackoffDesœe
 = 
	`RANDOM_LONG
(0, 100è+ 
iDeãnsive
;

121 
iTaùicChoiû
 = 
iBackoffDesœe
;

122 
iTaùic
 = 0;

124 ià(
iCampDesœe
 > 
iTaùicChoiû
)

126 
iTaùicChoiû
 = 
iCampDesœe
;

127 
iTaùic
 = 1;

129 ià(
iFÜw¬dDesœe
 > 
iTaùicChoiû
)

131 
iTaùicChoiû
 = 
iFÜw¬dDesœe
;

132 
iTaùic
 = 2;

134 ià(
iGßlDesœe
 > 
iTaùicChoiû
)

137 
iTaùic
 = 3;

140 
ùiccho£n
:

141 
iGßlChoiûs
[4] = {-1, -1, -1, -1};

143 ià(
iTaùic
 =ğ0 && 
pDeãnsiveWPTS
)

145 
i
 = 0; i < 4; i++)

147 
iGßlChoiûs
[
i
] = 
pDeãnsiveWPTS
[
	`RANDOM_LONG
(0, 
iNumDeãnsives
)];

148 
	`as£¹
(
iGßlChoiûs
[
i
] >ğ0 && iGßlChoiûs[i] < 
g_iNumWaypošts
);

151 ià(
iTaùic
 =ğ1 && 
g_pCampWaypošts
)

153 
i
 = 0; i < 4; i++)

155 
iGßlChoiûs
[
i
] = 
g_pCampWaypošts
[
	`RANDOM_LONG
(0, 
g_iNumCampPošts
)];

156 
	`as£¹
(
iGßlChoiûs
[
i
] >ğ0 && iGßlChoiûs[i] < 
g_iNumWaypošts
);

159 ià(
iTaùic
 =ğ2 && 
pOfãnsiveWPTS
)

161 
i
 = 0; i < 4; i++)

163 
iGßlChoiûs
[
i
] = 
pOfãnsiveWPTS
[
	`RANDOM_LONG
(0, 
iNumOfãnsives
)];

164 
	`as£¹
(
iGßlChoiûs
[
i
] >ğ0 && iGßlChoiûs[i] < 
g_iNumWaypošts
);

167 ià(
iTaùic
 =ğ3 && 
g_pGßlWaypošts
)

169 
i
 = 0; i < 4; i++)

171 
iGßlChoiûs
[
i
] = 
g_pGßlWaypošts
[
	`RANDOM_LONG
(0, 
g_iNumGßlPošts
)];

172 
	`as£¹
(
iGßlChoiûs
[
i
] >ğ0 && iGßlChoiûs[i] < 
g_iNumWaypošts
);

176 ià(
m_iCu¼W±Index
 =ğ-1 || m_iCu¼W±Index >ğ
g_iNumWaypošts
)

177 
m_iCu¼W±Index
 = 
	`WaypoštFšdN—»¡
(
³v
->
Üigš
);

179 ià(
iGßlChoiûs
[0] != -1)

181 
iBÙIndex
 = 
m_iCu¼W±Index
;

182 
iTe¡Index
;

183 
boŞ
 
bSÜtšg
;

187 
bSÜtšg
 = 
FALSE
;

188 
i
 = 0; i < 3; i++)

190 
iTe¡Index
 = 
iGßlChoiûs
[
i
 + 1];

191 ià(
iTe¡Index
 < 0)

194 ià(
iT—m
 =ğ
TEAM_TERRORIST
)

196 ià((
pBÙEx³r›nûD©a
 + 
iBÙIndex
 * 
g_iNumWaypošts
 + 
iGßlChoiûs
[
i
])->
wT—m0V®ue
 <

197 (
pBÙEx³r›nûD©a
 + 
iBÙIndex
 * 
g_iNumWaypošts
 + 
iTe¡Index
)->
wT—m0V®ue
)

199 
iGßlChoiûs
[
i
 + 1] = iGoalChoices[i];

200 
iGßlChoiûs
[
i
] = 
iTe¡Index
;

201 
bSÜtšg
 = 
TRUE
;

206 ià((
pBÙEx³r›nûD©a
 + 
iBÙIndex
 * 
g_iNumWaypošts
 + 
iGßlChoiûs
[
i
])->
wT—m1V®ue
 <

207 (
pBÙEx³r›nûD©a
 + 
iBÙIndex
 * 
g_iNumWaypošts
 + 
iTe¡Index
)->
wT—m1V®ue
)

209 
iGßlChoiûs
[
i
 + 1] = iGoalChoices[i];

210 
iGßlChoiûs
[
i
] = 
iTe¡Index
;

211 
bSÜtšg
 = 
TRUE
;

215 } 
bSÜtšg
);

217  
iGßlChoiûs
[0];

222 
iRªdomPick
 = 
	`RANDOM_LONG
(1, 100);

224 ià(
g_iM­Ty³
 & 
MAP_AS
)

226 ià(
m_bIsVIP
)

229 ià(
iRªdomPick
 < 70 && 
g_pGßlWaypošts
)

230  
g_pGßlWaypošts
[
	`RANDOM_LONG
(0, 
g_iNumGßlPošts
)];

231 ià(
iRªdomPick
 < 90 && 
g_pCTWaypošts
)

232  
g_pCTWaypošts
[
	`RANDOM_LONG
(0, 
g_iNumCTPošts
)];

233 ià(
g_pT”rÜWaypošts
)

234  
g_pT”rÜWaypošts
[
	`RANDOM_LONG
(0, 
g_iNumT”rÜPošts
)];

238 ià(
iT—m
 =ğ
TEAM_TERRORIST
)

240 ià(
iRªdomPick
 < 30 && 
g_pGßlWaypošts
)

241  
g_pGßlWaypošts
[
	`RANDOM_LONG
(0, 
g_iNumGßlPošts
)];

242 ià(
iRªdomPick
 < 60 && 
g_pT”rÜWaypošts
)

243  
g_pT”rÜWaypošts
[
	`RANDOM_LONG
(0, 
g_iNumT”rÜPošts
)];

244 ià(
iRªdomPick
 < 90 && 
g_pCampWaypošts
)

245  
g_pCampWaypošts
[
	`RANDOM_LONG
(0, 
g_iNumCampPošts
)];

246 ià(
g_pCTWaypošts
)

247  
g_pCTWaypošts
[
	`RANDOM_LONG
(0, 
g_iNumCTPošts
)];

251 ià(
iRªdomPick
 < 50 && 
g_pGßlWaypošts
)

252  
g_pGßlWaypošts
[
	`RANDOM_LONG
(0, 
g_iNumGßlPošts
)];

253 ià(
iRªdomPick
 < 70 && 
g_pT”rÜWaypošts
)

254  
g_pT”rÜWaypošts
[
	`RANDOM_LONG
(0, 
g_iNumT”rÜPošts
)];

255 ià(
iRªdomPick
 < 90 && 
g_pCampWaypošts
)

256  
g_pCampWaypošts
[
	`RANDOM_LONG
(0, 
g_iNumCampPošts
)];

257 ià(
g_pCTWaypošts
)

258  
g_pCTWaypošts
[
	`RANDOM_LONG
(0, 
g_iNumCTPošts
)];

262 ià(
g_iM­Ty³
 & 
MAP_CS
)

264 ià(
iT—m
 =ğ
TEAM_TERRORIST
)

266 ià(
iRªdomPick
 < 30 && 
g_pGßlWaypošts
)

267  
g_pGßlWaypošts
[
	`RANDOM_LONG
(0, 
g_iNumGßlPošts
)];

268 ià(
iRªdomPick
 < 60 && 
g_pT”rÜWaypošts
)

269  
g_pT”rÜWaypošts
[
	`RANDOM_LONG
(0, 
g_iNumT”rÜPošts
)];

270 ià(
iRªdomPick
 < 90 && 
g_pCampWaypošts
)

271  
g_pCampWaypošts
[
	`RANDOM_LONG
(0, 
g_iNumCampPošts
)];

272 ià(
g_pCTWaypošts
)

273  
g_pCTWaypošts
[
	`RANDOM_LONG
(0, 
g_iNumCTPošts
)];

277 ià(
bHasHo¡age
 && 
g_pRescueWaypošts
)

278  
g_pRescueWaypošts
[
	`RANDOM_LONG
(0, 
g_iNumRescuePošts
)];

279 ià(
iRªdomPick
 < 50 && 
g_pGßlWaypošts
)

280  
g_pGßlWaypošts
[
	`RANDOM_LONG
(0, 
g_iNumGßlPošts
)];

281 ià(
iRªdomPick
 < 70 && 
g_pT”rÜWaypošts
)

282  
g_pT”rÜWaypošts
[
	`RANDOM_LONG
(0, 
g_iNumT”rÜPošts
)];

283 ià(
iRªdomPick
 < 90 && 
g_pCampWaypošts
)

284  
g_pCampWaypošts
[
	`RANDOM_LONG
(0, 
g_iNumCampPošts
)];

285 ià(
g_pCTWaypošts
)

286  
g_pCTWaypošts
[
	`RANDOM_LONG
(0, 
g_iNumCTPošts
)];

289 ià(
g_iM­Ty³
 & 
MAP_DE
)

291 ià(
iT—m
 =ğ
TEAM_TERRORIST
)

294 ià((
³v
->
w—pÚs
 & (1 << 
WEAPON_C4
)è&& 
g_pGßlWaypošts
)

295  
g_pGßlWaypošts
[
	`RANDOM_LONG
(0, 
g_iNumGßlPošts
)];

296 ià(
iRªdomPick
 < 30 && 
g_pGßlWaypošts
)

297  
g_pGßlWaypošts
[
	`RANDOM_LONG
(0, 
g_iNumGßlPošts
)];

298 ià(
iRªdomPick
 < 60 && 
g_pCTWaypošts
)

299  
g_pCTWaypošts
[
	`RANDOM_LONG
(0, 
g_iNumCTPošts
)];

300 ià(
iRªdomPick
 < 90 && 
g_pCampWaypošts
)

301  
g_pCampWaypošts
[
	`RANDOM_LONG
(0, 
g_iNumCampPošts
)];

302 ià(
g_pT”rÜWaypošts
)

303  
g_pT”rÜWaypošts
[
	`RANDOM_LONG
(0, 
g_iNumT”rÜPošts
)];

307 ià(
g_bBombPÏÁed
)

309 ià(
g_bBÙCh©
)

311 ià(
g_bBombSaySŒšg
)

313 
STRINGNODE
 *
pTempNode
 = 
	`G‘NodeSŒšg
(
pBombCh©
, 
	`RANDOM_LONG
(0, 
iNumBombCh©s
 - 1));

314 ià(
pTempNode
 !ğ
NULL
 &&…TempNode->
pszSŒšg
 != NULL)

316 
	`P»·»Ch©Mes§ge
(
pTempNode
->
pszSŒšg
);

317 
	`PushMes§geQueue
(
MSG_CS_SAY
);

319 
g_bBombSaySŒšg
 = 
FALSE
;

322  
	`Choo£BombWaypošt
();

324 ià(
iRªdomPick
 < 50 && 
g_pGßlWaypošts
)

325  
g_pGßlWaypošts
[
	`RANDOM_LONG
(0, 
g_iNumGßlPošts
)];

326 ià(
iRªdomPick
 < 70 && 
g_pCTWaypošts
)

327  
g_pCTWaypošts
[
	`RANDOM_LONG
(0, 
g_iNumCTPošts
)];

328 ià(
iRªdomPick
 < 90 && 
g_pCampWaypošts
)

329  
g_pCampWaypošts
[
	`RANDOM_LONG
(0, 
g_iNumCampPošts
)];

330 ià(
g_pT”rÜWaypošts
)

331  
g_pT”rÜWaypošts
[
	`RANDOM_LONG
(0, 
g_iNumT”rÜPošts
)];

336  
	`RANDOM_LONG
(0, 
g_iNumWaypošts
 - 1);

337 
	}
}

339 
boŞ
 
	gCBa£BÙ
::
	$GßlIsV®id
()

341 
iGßl
 = 
	`Cu¼’tTask
()->
iD©a
;

343 ià(
iGßl
 == -1)

344  
FALSE
;

345 ià(
iGßl
 =ğ
m_iCu¼W±Index
)

346  
TRUE
;

347 ià(
m_pWaypoštNodes
 =ğ
NULL
)

348  
FALSE
;

351 
PATHNODE
 *
Node
 = 
m_pWaypoštNodes
;

352 
Node
->
NextNode
 !ğ
NULL
)

353 
Node
 = Node->
NextNode
;

355 ià(
Node
->
iIndex
 =ğ
iGßl
)

356  
TRUE
;

358  
FALSE
;

359 
	}
}

364 
boŞ
 
	gCBa£BÙ
::
	$DoWaypoštNav
()

366 
T¿ûResuÉ
 
Œ
;

369 ià(
m_iCu¼W±Index
 < 0 || m_iCu¼W±Index >ğ
g_iNumWaypošts
)

371 
	`G‘V®idWaypošt
();

372 
m_vecW±Origš
 = 
·ths
[
m_iCu¼W±Index
]->
Üigš
;

375 ià(
·ths
[
m_iCu¼W±Index
]->
Radius
 > 0)

377 
	`UTIL_MakeVeùÜs
(
	`VeùÜ
(
³v
->
ªgËs
.
x
, 
	`AngËNÜm®ize
Õev->ªgËs.
y
 + 
	`RANDOM_FLOAT
(-90, 90)), 0));

378 
m_vecW±Origš
 = m_vecW±Origš + 
gpGlob®s
->
v_fÜw¬d
 * 
	`RANDOM_FLOAT
(0, 
·ths
[
m_iCu¼W±Index
]->
Radius
);

381 
m_æW±Time£t
 = 
gpGlob®s
->
time
;

384 
boŞ
 
bIsDuckšg
 = 
FALSE
;

386 iàĞ
³v
->
æags
 & 
FL_DUCKING
 )

388 
bIsDuckšg
 = 
TRUE
;

389 
m_vecDe¡Origš
 = 
m_vecW±Origš
;

392 
m_vecDe¡Origš
 = 
m_vecW±Origš
 + 
³v
->
v›w_ofs
;

394 
w±_di¡ªû
 = (
³v
->
Üigš
 - 
m_vecW±Origš
).
	`L’gth
();

397 ià(
m_uiCu¼T¿v–FÏgs
 & 
C_FL_JUMP
)

403 ià(
³v
->
æags
 & 
FL_ONGROUND
 || 
	`IsOnLadd”
())

406 ià(
³v
->
max¥“d
 < 250.0)

407 
	`S–eùPi¡Ş
();

408 
³v
->
v–oc™y
 = 
m_vecDesœedV–oc™y
;

409 
³v
->
bu‰Ú
 |ğ
IN_JUMP
;

411 
m_vecDesœedV–oc™y
 = 
g_vecZ”o
;

412 
m_bCheckT”¿š
 = 
FALSE
;

413 
m_uiCu¼T¿v–FÏgs
 &ğ~
C_FL_JUMP
;

418 ià(
·ths
[
m_iCu¼W±Index
]->
æags
 & 
W_FL_LADDER
)

420 ià(
³v
->
mov‘y³
 !ğ
MOVETYPE_FLY
)

422 ià(
³v
->
æags
 & 
FL_ONGROUND
)

424 ià(!
bIsDuckšg
 && 
m_vecW±Origš
.
z
 < 
³v
->
Üigš
.z)

427 
m_æMoveS³ed
 = 
w±_di¡ªû
;

428 ià(
m_æMoveS³ed
 < 150.0)

429 
m_æMoveS³ed
 = 150.0;

430 ià(
m_æMoveS³ed
 > 
³v
->
max¥“d
)

431 
m_æMoveS³ed
 = 
³v
->
max¥“d
;

543 
	`UTIL_T¿ûLše
(
³v
->
Üigš
, 
m_vecW±Origš
, 
ignÜe_mÚ¡”s
, 
	`ediù
(), &
Œ
);

545 ià(!
	`FNuÎEÁ
(
Œ
.
pH™
))

547 ià(
	`¡ºcmp
(
	`STRING
(
Œ
.
pH™
->
v
.
şas¢ame
), "func_door", 9) == 0)

550 ià(
	`L’gthSqu¬ed
(
	`VecBMod–Origš
(
Œ
.
pH™
è- 
³v
->
Üigš
) < 2500)

552 
m_æNoCŞlTime
 = 
gpGlob®s
->
time
 + 0.5;

553 ià(
	`RANDOM_LONG
(1, 100) < 50)

554 
	`MDLL_U£
(
Œ
.
pH™
, 
	`ediù
());

558 
m_iAimFÏgs
 &ğ~(
AIM_LASTENEMY
 | 
AIM_PREDICTPATH
);

559 
m_bCªChoo£
 = 
FALSE
;

562 ià(
	`STRING
(
Œ
.
pH™
->
v
.
rg‘Çme
)[0] != 0)

564 
ediù_t
 *
³Á
 = 
NULL
;

565 
ediù_t
 *
³ÁBu‰Ú
 = 
NULL
;

566 
æMšDi¡
 = 
FLT_MAX
;

567 cÚ¡ *
rg‘_Çme
 = 
	`STRING
(
Œ
.
pH™
->
v
.
rg‘Çme
);

570 !
	`FNuÎEÁ
(
³Á
 = 
	`FIND_ENTITY_BY_STRING
Õ’t, "rg‘", 
rg‘_Çme
)))

572 
VeùÜ
 
v
 = 
	`VecBMod–Origš
(
³Á
);

573 
	`UTIL_T¿ûLše
(
³v
->
Üigš
, 
v
, 
ignÜe_mÚ¡”s
, 
	`ediù
(), &
Œ
);

574 ià(
Œ
.
pH™
 =ğ
³Á
 ||r.
æF¿ùiÚ
 > 0.95)

576 ià(!
	`IsD—dlyDrİ
(
³Á
->
v
.
Üigš
))

578 
æDi¡
 = 
	`L’gthSqu¬ed
(
³v
->
Üigš
 - 
v
);

579 ià(
æDi¡
 <ğ
æMšDi¡
)

581 
æMšDi¡
 = 
æDi¡
;

582 
³ÁBu‰Ú
 = 
³Á
;

588 ià(!
	`FNuÎEÁ
(
³ÁBu‰Ú
))

590 
m_³ÁPickupI‹m
 = 
³ÁBu‰Ú
;

591 
m_iPickupTy³
 = 
PICKUP_BUTTON
;

593 
m_æW±Time£t
 = 
gpGlob®s
->
time
;

598 ià(
³v
->
v–oc™y
.
	`L’gth2D
(è< 2 && 
m_æTimeDoÜO³n
 < 
gpGlob®s
->
time
)

600 
bÙsk_t
 
TempTask
 = {
NULL
, NULL, 
TASK_PAUSE
, 
TASKPRI_PAUSE
, -1, 
gpGlob®s
->
time
 + 0.5, 
FALSE
};

601 
	`S¹Task
(&
TempTask
);

602 
m_æTimeDoÜO³n
 = 
gpGlob®s
->
time
 + 1.0;

607 
fDesœedDi¡ªû
;

611 ià(
bIsDuckšg
 || (
·ths
[
m_iCu¼W±Index
]->
æags
 & 
W_FL_GOAL
))

612 
fDesœedDi¡ªû
 = 25;

613 ià(
·ths
[
m_iCu¼W±Index
]->
æags
 & 
W_FL_LADDER
)

614 
fDesœedDi¡ªû
 = 15;

616 
fDesœedDi¡ªû
 = 50;

618 
šdex
 = 
m_iCu¼W±Index
;

622 
i
 = 0; i < 
MAX_PATH_INDEX
; i++)

624 ià(
·ths
[
šdex
]->
cÚÃùæag
[
i
] != 0)

626 
fDesœedDi¡ªû
 = 0;

632 ià(
fDesœedDi¡ªû
 < 16 && 
w±_di¡ªû
 < 30)

634 
VeùÜ
 
v_¤c
 = 
³v
->
Üigš
;

635 
v_¤c
 = v_¤ø+ 
³v
->
v–oc™y
 * 
g_æTimeF¿meIÁ”v®
;

636 
fDi¡ªûNextF¿me
 = (
v_¤c
 - 
m_vecW±Origš
).
	`L’gth
();

637 ià(
fDi¡ªûNextF¿me
 > 
w±_di¡ªû
)

638 
fDesœedDi¡ªû
 = 
w±_di¡ªû
 + 1;

641 ià(
w±_di¡ªû
 < 
fDesœedDi¡ªû
)

644 ià(
	`Cu¼’tTask
()->
iD©a
 =ğ
m_iCu¼W±Index
)

647 ià(
g_bU£Ex³r›nû
 && 
m_iCho£nGßlIndex
 != -1)

649 
iWPTV®ue
;

650 
iS¹Index
 = 
m_iCho£nGßlIndex
;

651 
iGßlIndex
 = 
m_iCu¼W±Index
;

652 ià(
	`UTIL_G‘T—m
(
	`ediù
()è=ğ
TEAM_TERRORIST
)

654 
iWPTV®ue
 = (
pBÙEx³r›nûD©a
 + 
iS¹Index
 * 
g_iNumWaypošts
 + 
iGßlIndex
)->
wT—m0V®ue
;

655 
iWPTV®ue
 +ğ
³v
->
h—Éh
 / 20;

656 
iWPTV®ue
 +ğ
m_æGßlV®ue
 / 20;

657 ià(
iWPTV®ue
 < -
MAX_GOAL_VAL
)

658 
iWPTV®ue
 = -
MAX_GOAL_VAL
;

659 ià(
iWPTV®ue
 > 
MAX_GOAL_VAL
)

660 
iWPTV®ue
 = 
MAX_GOAL_VAL
;

661 (
pBÙEx³r›nûD©a
 + 
iS¹Index
 * 
g_iNumWaypošts
 + 
iGßlIndex
)->
wT—m0V®ue
 = 
iWPTV®ue
;

665 
iWPTV®ue
 = (
pBÙEx³r›nûD©a
 + 
iS¹Index
 * 
g_iNumWaypošts
 + 
iGßlIndex
)->
wT—m1V®ue
;

666 
iWPTV®ue
 +ğ
³v
->
h—Éh
 / 20;

667 
iWPTV®ue
 +ğ
m_æGßlV®ue
 / 20;

668 ià(
iWPTV®ue
 < -
MAX_GOAL_VAL
)

669 
iWPTV®ue
 = -
MAX_GOAL_VAL
;

670 ià(
iWPTV®ue
 > 
MAX_GOAL_VAL
)

671 
iWPTV®ue
 = 
MAX_GOAL_VAL
;

672 (
pBÙEx³r›nûD©a
 + 
iS¹Index
 * 
g_iNumWaypošts
 + 
iGßlIndex
)->
wT—m1V®ue
 = 
iWPTV®ue
;

675  
TRUE
;

677 ià(
m_pWaypoštNodes
 =ğ
NULL
)

678  
FALSE
;

681 ià(
g_iM­Ty³
 & 
MAP_DE
)

684 ià(
g_bBombPÏÁed
 && 
	`UTIL_G‘T—m
(
	`ediù
()è=ğ
TEAM_CT
)

686 
iWPTIndex
 = 
	`Cu¼’tTask
()->
iD©a
;

687 ià(
iWPTIndex
 != -1)

689 
fDi¡ªû
 = (
³v
->
Üigš
 - 
·ths
[
iWPTIndex
]->Üigš).
	`L’gth
();

691 ià(
fDi¡ªû
 < 
BOMBMAXHEARDISTANCE
)

693 
VeùÜ
 
vecBombPos
;

695 ià(
	`BÙH—rsBomb
(
³v
->
Üigš
, &
vecBombPos
))

697 
fDi¡ªû
 = (
vecBombPos
 - 
·ths
[
iWPTIndex
]->
Üigš
).
	`L’gth
();

698 ià(
fDi¡ªû
 > 512.0)

701 
	`CTBombPoštCË¬
(
iWPTIndex
);

702 
	`TaskCom¶‘e
();

708 
	`CTBombPoštCË¬
(
iWPTIndex
);

709 
	`TaskCom¶‘e
();

717 
	`H—dTow¬dWaypošt
();

720  
FALSE
;

721 
	}
}

726 
	gCBa£BÙ
::
	$FšdShÜ‹¡P©h
(
iSourûIndex
, 
iDe¡Index
)

728 
	`D–‘eS—rchNodes
();

730 
m_iCho£nGßlIndex
 = 
iSourûIndex
;

731 
m_æGßlV®ue
 = 0.0;

733 
PATHNODE
 *
Node
 = (PATHNODE *)
	`m®loc
((PATHNODE));

734 ià(
Node
 =ğ
NULL
)

735 
	`T”mš©eOnE¼Ü
("Memory Allocation Error!");

737 
Node
->
iIndex
 = 
iSourûIndex
;

738 
Node
->
NextNode
 = 
NULL
;

739 
m_pWayNodesS¹
 = 
Node
;

740 
m_pWaypoštNodes
 = 
m_pWayNodesS¹
;

742 
iSourûIndex
 !ğ
iDe¡Index
)

744 
iSourûIndex
 = *(
g_pFloydP©hM©rix
 + iSourûIndex * 
g_iNumWaypošts
 + 
iDe¡Index
);

745 ià(
iSourûIndex
 < 0)

747 
m_iP»vGßlIndex
 = -1;

748 
	`Cu¼’tTask
()->
iD©a
 = -1;

751 
Node
->
NextNode
 = (
PATHNODE
 *)
	`m®loc
((PATHNODE));

752 
Node
 = Node->
NextNode
;

753 ià(
Node
 =ğ
NULL
)

754 
	`T”mš©eOnE¼Ü
("Memory Allocation Error!");

755 
Node
->
iIndex
 = 
iSourûIndex
;

756 
Node
->
NextNode
 = 
NULL
;

758 
	}
}

761 
	#MAX_STACK_NODES
 (
MAX_WAYPOINTS
*4)

	)

762 şas 
	cCQueuePriÜ™y


764 
	mpublic
:

765 
CQueuePriÜ™y
( );

766 ~
CQueuePriÜ™y
( );

767 
šlše
 
	$Em±y
 ( è{  ( 
m_cSize
 == 0 ); }

768 
šlše
 
	$Size
 ( è{  ( 
m_cSize
 ); 
	}
}

769 
In£¹
( , );

770 
Remove
( );

772 
	g´iv©e
:

773 
m_cSize
;

774 
	gm_cH—pSize
;

775 
	sg_HEAP_NODE


777 
	gId
;

778 
	gPriÜ™y
;

779 } *
	gm_h—p
;

780 
H—p_SiáDown
();

781 
H—p_SiáUp
();

784 
	gCQueuePriÜ™y
 :: 
	$CQueuePriÜ™y
( )

786 
m_cSize
 = 0;

787 
m_cH—pSize
 = 
MAX_STACK_NODES
;

788 
m_h—p
 = (
g_HEAP_NODE
 *)
	`m®loc
((g_HEAP_NODEè* 
m_cH—pSize
);

789 ià(!
m_h—p
)

790 
	`T”mš©eOnE¼Ü
("Memory Allocation Error!");

791 
	}
}

793 
	gCQueuePriÜ™y
 :: ~
	$CQueuePriÜ™y
( )

795 
	`ä“
(
m_h—p
);

796 
	}
}

799 
	gCQueuePriÜ™y
 :: 
	$In£¹
Ğ
iV®ue
, 
fPriÜ™y
 )

801 iàĞ
m_cSize
 >ğ
m_cH—pSize
 )

803 
m_cH—pSize
 += 100;

804 
m_h—p
 = (
g_HEAP_NODE
 *)
	`»®loc
(m_h—p, (g_HEAP_NODEè* 
m_cH—pSize
);

805 ià(!
m_h—p
)

806 
	`T”mš©eOnE¼Ü
("Memory Allocation Error!");

808 
m_h—p
[
m_cSize
].
PriÜ™y
 = 
fPriÜ™y
;

809 
m_h—p
[
m_cSize
].
Id
 = 
iV®ue
;

810 
m_cSize
++;

811 
	`H—p_SiáUp
();

812 
	}
}

815 
	gCQueuePriÜ™y
 :: 
	$Remove
( )

817 
iR‘uº
 = 
m_h—p
[0].
Id
;

818 
m_cSize
--;

819 
m_h—p
[0] = m_h—p[
m_cSize
];

820 
	`H—p_SiáDown
(0);

821  
iR‘uº
;

822 
	}
}

824 
	#HEAP_LEFT_CHILD
(
x
è(2 * (xè+ 1)

	)

825 
	#HEAP_RIGHT_CHILD
(
x
è(2 * (xè+ 2)

	)

826 
	#HEAP_PARENT
(
x
è(((xè- 1è/ 2)

	)

828 
	gCQueuePriÜ™y
::
	$H—p_SiáDown
(
iSubRoÙ
)

830 
·»Á
 = 
iSubRoÙ
;

831 
chd
 = 
	`HEAP_LEFT_CHILD
(
·»Á
);

833 
g_HEAP_NODE
 
Ref
 = 
m_h—p
[ 
·»Á
 ];

835 
chd
 < 
m_cSize
)

837 
rightchd
 = 
	`HEAP_RIGHT_CHILD
(
·»Á
);

838 ià(
rightchd
 < 
m_cSize
)

840 iàĞ
m_h—p
[
rightchd
].
PriÜ™y
 < m_h—p[
chd
].Priority )

841 
chd
 = 
rightchd
;

843 iàĞ
Ref
.
PriÜ™y
 <ğ
m_h—p
[
chd
].Priority )

846 
m_h—p
[
·»Á
] = m_h—p[
chd
];

847 
·»Á
 = 
chd
;

848 
chd
 = 
	`HEAP_LEFT_CHILD
(
·»Á
);

850 
m_h—p
[
·»Á
] = 
Ref
;

851 
	}
}

853 
	gCQueuePriÜ™y
::
	$H—p_SiáUp
()

855 
chd
 = 
m_cSize
 - 1;

856 
chd
)

858 
·»Á
 = 
	`HEAP_PARENT
(
chd
);

859 iàĞ
m_h—p
[
·»Á
].
PriÜ™y
 <ğm_h—p[
chd
].Priority )

862 
g_HEAP_NODE
 
Tmp
;

863 
Tmp
 = 
m_h—p
[
chd
];

864 
m_h—p
[
chd
] = m_h—p[
·»Á
];

865 
m_h—p
[
·»Á
] = 
Tmp
;

867 
chd
 = 
·»Á
;

869 
	}
}

872 
	$gfunùiÚKlsDi¡T
(
iThisIndex
, 
iP¬’t
)

874 
æCo¡
 = (
pBÙEx³r›nûD©a
 + 
iThisIndex
 * 
g_iNumWaypošts
 + iThisIndex)->
uT—m0Damage
 + 
g_cKlHi¡Üy
;

876 
i
 = 0; i < 
MAX_PATH_INDEX
; i++)

878 
iNeighbour
 = 
·ths
[
iThisIndex
]->
šdex
[
i
];

879 ià(
iNeighbour
 != -1)

880 
æCo¡
 +ğ(
pBÙEx³r›nûD©a
 + 
iNeighbour
 * 
g_iNumWaypošts
 + iNeighbour)->
uT—m0Damage
;

883  
æCo¡
;

884 
	}
}

886 
	$gfunùiÚKlsDi¡CT
(
iThisIndex
, 
iP¬’t
)

888 
æCo¡
 = (
pBÙEx³r›nûD©a
 + 
iThisIndex
 * 
g_iNumWaypošts
 + iThisIndex)->
uT—m1Damage
 + 
g_cKlHi¡Üy
;

890 
i
 = 0; i < 
MAX_PATH_INDEX
; i++)

892 
iNeighbour
 = 
·ths
[
iThisIndex
]->
šdex
[
i
];

893 ià(
iNeighbour
 != -1)

894 
æCo¡
 +ğ(
pBÙEx³r›nûD©a
 + 
iNeighbour
 * 
g_iNumWaypošts
 + iNeighbour)->
uT—m1Damage
;

897  
æCo¡
;

898 
	}
}

900 
	$gfunùiÚKlsDi¡CTNoHo¡age
(
iThisIndex
, 
iP¬’t
)

902 ià(
·ths
[
iThisIndex
]->
æags
 & 
W_FL_NOHOSTAGE
)

904 ià(
·ths
[
iThisIndex
]->
æags
 & (
W_FL_CROUCH
 | 
W_FL_LADDER
))

905  
	`gfunùiÚKlsDi¡CT
(
iThisIndex
, 
iP¬’t
) * 500;

906  
	`gfunùiÚKlsDi¡CT
(
iThisIndex
, 
iP¬’t
);

907 
	}
}

910 
	$gfunùiÚKlsT
(
iThisIndex
, 
iP¬’t
)

912 
æCo¡
 = (
pBÙEx³r›nûD©a
 + (
iThisIndex
 * 
g_iNumWaypošts
è+ iThisIndex)->
uT—m0Damage
;

913 
iNeighbour
;

915 
i
 = 0; i < 
MAX_PATH_INDEX
; i++)

917 
iNeighbour
 = 
·ths
[
iThisIndex
]->
šdex
[
i
];

918 ià(
iNeighbour
 != -1)

919 
æCo¡
 +ğ(
pBÙEx³r›nûD©a
 + 
iNeighbour
 * 
g_iNumWaypošts
 + iNeighbour)->
uT—m0Damage
;

922  
æCo¡
 + 0.1;

923 
	}
}

925 
	$gfunùiÚKlsCT
(
iThisIndex
, 
iP¬’t
)

927 
æCo¡
 = (
pBÙEx³r›nûD©a
 + 
iThisIndex
 * 
g_iNumWaypošts
 + iThisIndex)->
uT—m1Damage
;

928 
iNeighbour
;

930 
i
 = 0; i < 
MAX_PATH_INDEX
; i++)

932 
iNeighbour
 = 
·ths
[
iThisIndex
]->
šdex
[
i
];

933 ià(
iNeighbour
 != -1)

934 
æCo¡
 +ğ(
pBÙEx³r›nûD©a
 + 
iNeighbour
 * 
g_iNumWaypošts
 + iNeighbour)->
uT—m1Damage
;

937  
æCo¡
 + 0.1;

938 
	}
}

940 
	$gfunùiÚKlsCTNoHo¡age
(
iThisIndex
, 
iP¬’t
)

942 ià(
·ths
[
iThisIndex
]->
æags
 & 
W_FL_NOHOSTAGE
)

944 ià(
·ths
[
iThisIndex
]->
æags
 & (
W_FL_CROUCH
 | 
W_FL_LADDER
))

945  
	`gfunùiÚKlsCT
(
iThisIndex
, 
iP¬’t
) * 500;

946  
	`gfunùiÚKlsCT
(
iThisIndex
, 
iP¬’t
);

947 
	}
}

949 
	$gfunùiÚP©hDi¡
(
iThisIndex
, 
iP¬’t
)

951 ià(
iP¬’t
 == -1)

954 
i
 = 0; i < 
MAX_PATH_INDEX
; i++)

956 ià(
·ths
[
iP¬’t
]->
šdex
[
i
] =ğ
iThisIndex
)

959 ià(
·ths
[
iThisIndex
]->
æags
 & (
W_FL_LADDER
 | 
W_FL_CROUCH
))

960  
·ths
[
iP¬’t
]->
di¡ªû
[
i
] * 1.5;

961  
·ths
[
iP¬’t
]->
di¡ªû
[
i
];

966 
	}
}

968 
	$gfunùiÚP©hDi¡NoHo¡age
(
iThisIndex
, 
iP¬’t
)

970 ià(
·ths
[
iThisIndex
]->
æags
 & 
W_FL_NOHOSTAGE
)

972 ià(
·ths
[
iThisIndex
]->
æags
 & (
W_FL_CROUCH
 | 
W_FL_LADDER
))

973  
	`gfunùiÚP©hDi¡
(
iThisIndex
, 
iP¬’t
) * 500;

974  
	`gfunùiÚP©hDi¡
(
iThisIndex
, 
iP¬’t
);

975 
	}
}

977 
	$hfunùiÚP©hDi¡
(
iIndex
, 
iS¹Index
, 
iGßlIndex
)

979 
h
 = 
	`çbs
(
·ths
[
iIndex
]->
Üigš
.
x
 -…©hs[
iGßlIndex
]->origin.x);

980 
h
 +ğ
	`çbs
(
·ths
[
iIndex
]->
Üigš
.
y
 -…©hs[
iGßlIndex
]->origin.y);

981 
h
 +ğ
	`çbs
(
·ths
[
iIndex
]->
Üigš
.
z
 -…©hs[
iGßlIndex
]->origin.z);

983  
h
;

984 
	}
}

986 
	$hfunùiÚNumb”Nodes
(
iIndex
, 
iS¹Index
, 
iGßlIndex
)

988  
	`hfunùiÚP©hDi¡
(
iIndex
, 
iS¹Index
, 
iGßlIndex
è/ 128 * 
g_cKlHi¡Üy
;

989 
	}
}

991 
	$hfunùiÚNÚe
(
iIndex
, 
iS¹Index
, 
iGßlIndex
)

993  
	`hfunùiÚP©hDi¡
(
iIndex
, 
iS¹Index
, 
iGßlIndex
) / (128 * 10);

994 
	}
}

999 
	gCBa£BÙ
::
	$FšdP©h
(
iSourûIndex
, 
iDe¡Index
, 
byP©hTy³
)

1001 ià(
iSourûIndex
 > 
g_iNumWaypošts
 - 1 || iSourceIndex < 0)

1003 
	`ALERT
(
©_cÚsŞe
, "ERROR: Fšd·th Sourû inv®id->%d!\n", 
iSourûIndex
);

1007 ià(
iDe¡Index
 > 
g_iNumWaypošts
 - 1 || iDestIndex < 0)

1009 
	`ALERT
(
©_cÚsŞe
, "ERROR: Fšd·th De¡ inv®id->%d!\n", 
iDe¡Index
);

1013 
	`D–‘eS—rchNodes
();

1015 
m_iCho£nGßlIndex
 = 
iSourûIndex
;

1016 
m_æGßlV®ue
 = 0.0;

1018 
	ea¡¬_¡©e
 {
OPEN
, 
CLOSED
, 
NEW
};

1019 
	sa¡¬_li¡_s


1021 
g
;

1022 
f
;

1023 
iP¬’tIndex
;

1024 
a¡¬_¡©e
 
iS‹
;

1025 } 
a¡¬_li¡
[
MAX_WAYPOINTS
];

1027 
CQueuePriÜ™y
 
İ’Li¡
;

1029 
i
;

1030 
i
 = 0; i < 
MAX_WAYPOINTS
; i++)

1032 
a¡¬_li¡
[
i
].
g
 = 0;

1033 
a¡¬_li¡
[
i
].
f
 = 0;

1034 
a¡¬_li¡
[
i
].
iP¬’tIndex
 = -1;

1035 
a¡¬_li¡
[
i
].
iS‹
 = 
NEW
;

1038 (*
gÿlc
)(, );

1039 (*
hÿlc
)(, , );

1041 ià(
byP©hTy³
 =ğ0 || !
g_bU£Ex³r›nû
)

1043 ià(
	`HasHo¡age
())

1045 
gÿlc
 = 
gfunùiÚP©hDi¡NoHo¡age
;

1046 
hÿlc
 = 
hfunùiÚP©hDi¡
;

1050 
gÿlc
 = 
gfunùiÚP©hDi¡
;

1051 
hÿlc
 = 
hfunùiÚP©hDi¡
;

1054 ià(
byP©hTy³
 == 2)

1056 ià(
	`UTIL_G‘T—m
(
	`ediù
()è=ğ
TEAM_TERRORIST
)

1058 
gÿlc
 = 
gfunùiÚKlsT
;

1059 
hÿlc
 = 
hfunùiÚNÚe
;

1061 ià(
	`HasHo¡age
())

1063 
gÿlc
 = 
gfunùiÚKlsCTNoHo¡age
;

1064 
hÿlc
 = 
hfunùiÚNÚe
;

1068 
gÿlc
 = 
gfunùiÚKlsCT
;

1069 
hÿlc
 = 
hfunùiÚNÚe
;

1074 ià(
	`UTIL_G‘T—m
(
	`ediù
()è=ğ
TEAM_TERRORIST
)

1076 
gÿlc
 = 
gfunùiÚKlsDi¡T
;

1077 
hÿlc
 = 
hfunùiÚNumb”Nodes
;

1079 ià(
	`HasHo¡age
())

1081 
gÿlc
 = 
gfunùiÚKlsDi¡CTNoHo¡age
;

1082 
hÿlc
 = 
hfunùiÚNumb”Nodes
;

1086 
gÿlc
 = 
gfunùiÚKlsDi¡CT
;

1087 
hÿlc
 = 
hfunùiÚNumb”Nodes
;

1092 
a¡¬_li¡
[
iSourûIndex
].
g
 = 
	`gÿlc
(iSourceIndex, -1);

1093 
a¡¬_li¡
[
iSourûIndex
].
f
 =‡¡¬_li¡[iSourûIndex].
g
 + 
	`hÿlc
(iSourûIndex, iSourûIndex, 
iDe¡Index
);

1094 
a¡¬_li¡
[
iSourûIndex
].
iS‹
 = 
OPEN
;

1096 
İ’Li¡
.
	`In£¹
(
iSourûIndex
, 
a¡¬_li¡
[iSourûIndex].
g
);

1098 !
İ’Li¡
.
	`Em±y
())

1101 
iCu¼’tIndex
 = 
İ’Li¡
.
	`Remove
();

1104 ià(
iCu¼’tIndex
 =ğ
iDe¡Index
)

1107 
m_pWaypoštNodes
 = 
NULL
;

1110 
PATHNODE
 *
p
 = (PATHNODE *)
	`m®loc
((PATHNODE));

1111 ià(
p
 =ğ
NULL
)

1112 
	`T”mš©eOnE¼Ü
("Memory Allocation Error!");

1114 
p
->
iIndex
 = 
iCu¼’tIndex
;

1115 
p
->
NextNode
 = 
m_pWaypoštNodes
;

1116 
m_pWaypoštNodes
 = 
p
;

1117 
iCu¼’tIndex
 = 
a¡¬_li¡
[iCu¼’tIndex].
iP¬’tIndex
;

1118 } 
iCu¼’tIndex
 != -1);

1120 
m_pWayNodesS¹
 = 
m_pWaypoštNodes
;

1124 ià(
a¡¬_li¡
[
iCu¼’tIndex
].
iS‹
 !ğ
OPEN
)

1128 
a¡¬_li¡
[
iCu¼’tIndex
].
iS‹
 = 
CLOSED
;

1131 
i
 = 0; i < 
MAX_PATH_INDEX
; i++)

1133 
iCurChd
 = 
·ths
[
iCu¼’tIndex
]->
šdex
[
i
];

1134 ià(
iCurChd
 == -1)

1138 
g
 = 
a¡¬_li¡
[
iCu¼’tIndex
].g + 
	`gÿlc
(
iCurChd
, iCurrentIndex);

1139 
h
 = 
	`hÿlc
(
iCurChd
, 
iSourûIndex
, 
iDe¡Index
);

1140 
f
 = 
g
 + 
h
;

1142 ià(
a¡¬_li¡
[
iCurChd
].
iS‹
 =ğ
NEW
 ||

1143 
a¡¬_li¡
[
iCurChd
].
f
 > f)

1146 
a¡¬_li¡
[
iCurChd
].
iP¬’tIndex
 = 
iCu¼’tIndex
;

1147 
a¡¬_li¡
[
iCurChd
].
iS‹
 = 
OPEN
;

1148 
a¡¬_li¡
[
iCurChd
].
g
 = g;

1149 
a¡¬_li¡
[
iCurChd
].
f
 = f;

1150 
İ’Li¡
.
	`In£¹
(
iCurChd
, 
g
);

1156 
	`FšdShÜ‹¡P©h
(
iSourûIndex
, 
iDe¡Index
);

1157 
	}
}

1159 
	gCBa£BÙ
::
	$D–‘eS—rchNodes
()

1161 
PATHNODE
 *
Node
, *
D–Node
;

1163 
Node
 = 
m_pWayNodesS¹
;

1164 
Node
 !ğ
NULL
)

1166 
D–Node
 = 
Node
->
NextNode
;

1167 
	`ä“
(
Node
);

1168 
Node
 = 
D–Node
;

1171 
m_pWayNodesS¹
 = 
NULL
;

1172 
m_pWaypoštNodes
 = 
NULL
;

1173 
	}
}

1178 
	gCBa£BÙ
::
	$G‘AimšgWaypošt
()

1180 
couÁ
 = 0, 
šdex
[3];

1181 
di¡ªû
[3];

1182 
ušt16
 
visib™y
[3];

1184 
iCu¼WP
 = 
	`WaypoštFšdN—»¡
(
³v
->
Üigš
);

1186 
i
 = 0; i < 
g_iNumWaypošts
; i++)

1188 ià(
iCu¼WP
 =ğ
i
 || !
	`WaypoštIsVisibË
(iCurrWP, i))

1191 ià(
couÁ
 < 3)

1193 
šdex
[
couÁ
] = 
i
;

1194 
di¡ªû
[
couÁ
] = 
	`L’gthSqu¬ed
(
³v
->
Üigš
 - 
·ths
[
i
]->origin);

1195 
visib™y
[
couÁ
] = 
·ths
[
i
]->
vis
.
üouch
 +…©hs[i]->vis.
¡ªd
;

1196 
couÁ
++;

1200 
di¡
 = 
	`L’gthSqu¬ed
(
³v
->
Üigš
 - 
·ths
[
i
]->origin);

1201 
ušt16
 
vis
 = 
·ths
[
i
]->vis.
üouch
 +…©hs[i]->vis.
¡ªd
;

1203 
j
 = 0; j < 3; j++)

1205 ià(
vis
 >ğ
visib™y
[
j
] && 
di¡
 > 
di¡ªû
[j])

1207 
šdex
[
j
] = 
i
;

1208 
di¡ªû
[
j
] = 
di¡
;

1209 
visib™y
[
j
] = 
vis
;

1216 
couÁ
--;

1217 ià(
couÁ
 >= 0)

1218  
šdex
[
	`RANDOM_LONG
(0, 
couÁ
)];

1220  
	`RANDOM_LONG
(0, 
g_iNumWaypošts
 - 1);

1221 
	}
}

1227 
	gCBa£BÙ
::
	$G‘AimšgWaypošt
(
VeùÜ
 
vecT¬g‘Pos
, 
iCouÁ
)

1229 ià(
m_iCu¼W±Index
 == -1)

1230 
m_iCu¼W±Index
 = 
	`WaypoštFšdN—»¡
(
³v
->
Üigš
);

1232 
iSourûIndex
 = 
m_iCu¼W±Index
;

1233 
iDe¡Index
 = 
	`WaypoštFšdN—»¡
(
vecT¬g‘Pos
);

1235 
iBe¡Index
 = 
iSourûIndex
;

1236 
PATHNODE
 *
pS¹Node
, *
pNode
;

1237 
pNode
 = (
PATHNODE
 *)
	`m®loc
((PATHNODE));

1238 ià(
pNode
 =ğ
NULL
)

1239 
	`T”mš©eOnE¼Ü
("Memory Allocation Error!");

1240 
pNode
->
iIndex
 = 
iDe¡Index
;

1241 
pNode
->
NextNode
 = 
NULL
;

1242 
pS¹Node
 = 
pNode
;

1243 
iDe¡Index
 !ğ
iSourûIndex
)

1245 
iDe¡Index
 = *(
g_pFloydP©hM©rix
 + iDe¡Index * 
g_iNumWaypošts
 + 
iSourûIndex
);

1246 ià(
iDe¡Index
 < 0)

1248 
pNode
->
NextNode
 = (
PATHNODE
 *)
	`m®loc
((PATHNODE));

1249 
pNode
 =…Node->
NextNode
;

1250 ià(
pNode
 =ğ
NULL
)

1251 
	`T”mš©eOnE¼Ü
("Memory Allocation Error!");

1252 
pNode
->
iIndex
 = 
iDe¡Index
;

1253 
pNode
->
NextNode
 = 
NULL
;

1254 ià(
	`WaypoštIsVisibË
(
m_iCu¼W±Index
, 
iDe¡Index
))

1256 
iBe¡Index
 = 
iDe¡Index
;

1261 
pS¹Node
 !ğ
NULL
)

1263 
pNode
 = 
pS¹Node
->
NextNode
;

1264 
	`ä“
(
pS¹Node
);

1265 
pS¹Node
 = 
pNode
;

1268  
iBe¡Index
;

1269 
	}
}

1275 
boŞ
 
	gCBa£BÙ
::
	$FšdWaypošt
()

1277 
i
, 
w±_šdex
[3], 
£Ëù_šdex
;

1278 
cov”ed_w±
 = -1;

1279 
di¡ªû
, 
mš_di¡ªû
[3];

1280 
VeùÜ
 
v_¤c
, 
v_de¡
;

1281 
T¿ûResuÉ
 
Œ
;

1282 
boŞ
 
bWaypoštInU£
;

1284 
i
 = 0; i < 3; i++)

1286 
w±_šdex
[
i
] = -1;

1287 
mš_di¡ªû
[
i
] = 
FLT_MAX
;

1290 
i
 = 0; i < 
g_iNumWaypošts
; i++)

1293 ià(
i
 =ğ
m_iCu¼W±Index
 || i =ğ
m_rgiP»vW±Index
[0] || i == m_rgiPrevWptIndex[1] ||

1294 
i
 =ğ
m_rgiP»vW±Index
[2] || i == m_rgiPrevWptIndex[3] || i == m_rgiPrevWptIndex[4])

1297 iàĞ
	`WaypoštR—chabË
(
³v
->
Üigš
, 
·ths
[
i
]->Üigš, 
	`IsInW©”
()) )

1300 ià(
	`HasHo¡age
())

1302 ià(
·ths
[
i
]->
æags
 & 
W_FL_NOHOSTAGE
)

1306 
CBa£BÙ
 *
pOth”BÙ
;

1307 
bWaypoštInU£
 = 
FALSE
;

1310 
c
 = 0; c < 
gpGlob®s
->
maxCl›Ás
; c++)

1312 
pOth”BÙ
 = 
g_rgpBÙs
[
c
];

1313 ià(
pOth”BÙ
)

1315 ià(
	`IsAlive
(
pOth”BÙ
->
	`ediù
()è&&…Oth”BÙ !ğ
this
)

1317 ià(
pOth”BÙ
->
m_iCu¼W±Index
 =ğ
i
)

1319 
cov”ed_w±
 = 
i
;

1320 
bWaypoštInU£
 = 
TRUE
;

1327 ià(
bWaypoštInU£
)

1330 
di¡ªû
 = 
	`L’gthSqu¬ed
(
·ths
[
i
]->
Üigš
 - 
³v
->origin);

1332 ià(
di¡ªû
 < 
mš_di¡ªû
[0])

1334 
w±_šdex
[0] = 
i
;

1335 
mš_di¡ªû
[0] = 
di¡ªû
;

1337 ià(
di¡ªû
 < 
mš_di¡ªû
[1])

1339 
w±_šdex
[1] = 
i
;

1340 
mš_di¡ªû
[1] = 
di¡ªû
;

1342 ià(
di¡ªû
 < 
mš_di¡ªû
[2])

1344 
w±_šdex
[2] = 
i
;

1345 
mš_di¡ªû
[2] = 
di¡ªû
;

1350 ià(
w±_šdex
[2] != -1)

1351 
i
 = 
	`RANDOM_LONG
(0, 2);

1352 ià(
w±_šdex
[1] != -1)

1353 
i
 = 
	`RANDOM_LONG
(0, 1);

1354 ià(
w±_šdex
[0] != -1)

1355 
i
 = 0;

1356 ià(
cov”ed_w±
 != -1)

1358 
w±_šdex
[0] = 
cov”ed_w±
;

1359 
i
 = 0;

1363 
w±_šdex
[0] = 
	`RANDOM_LONG
(0, 
g_iNumWaypošts
 - 1);

1364 
i
 = 0;

1367 
£Ëù_šdex
 = 
w±_šdex
[
i
];

1369 
m_rgiP»vW±Index
[4] = m_rgiPrevWptIndex[3];

1370 
m_rgiP»vW±Index
[3] = m_rgiPrevWptIndex[2];

1371 
m_rgiP»vW±Index
[2] = m_rgiPrevWptIndex[1];

1372 
m_rgiP»vW±Index
[1] = m_rgiPrevWptIndex[0];

1373 
m_rgiP»vW±Index
[0] = 
m_iCu¼W±Index
;

1375 
m_iCu¼W±Index
 = 
£Ëù_šdex
;

1376 
m_æW±Time£t
 = 
gpGlob®s
->
time
;

1377 
m_æCŞlideTime
 = 
gpGlob®s
->
time
;

1379  
TRUE
;

1380 
	}
}

1386 
	gCBa£BÙ
::
	$G‘V®idWaypošt
()

1390 ià(
m_iCu¼W±Index
 == -1 ||

1391 (
m_æW±Time£t
 + 5.0 < 
gpGlob®s
->
time
 && 
	`FNuÎEÁ
(
m_³ÁEÃmy
)))

1393 
	`D–‘eS—rchNodes
();

1394 
	`FšdWaypošt
();

1395 
m_vecW±Origš
 = 
·ths
[
m_iCu¼W±Index
]->
Üigš
;

1399 
	}
}

1405 
	gCBa£BÙ
::
	$Choo£BombWaypošt
()

1407 ià(!
g_pGßlWaypošts
)

1408  
	`RANDOM_LONG
(0, 
g_iNumWaypošts
 - 1);

1410 
mš_di¡ªû
 = 
FLT_MAX
;

1411 
aù_di¡ªû
;

1412 
iGßl
 = 0;

1414 
VeùÜ
 
vecPos™iÚ
;

1416 
boŞ
 
bH—rBombTicks
 = 
	`BÙH—rsBomb
(
³v
->
Üigš
, &
vecPos™iÚ
);

1418 ià(!
bH—rBombTicks
)

1419 
vecPos™iÚ
 = 
³v
->
Üigš
;

1422 
i
 = 0; i < 
g_iNumGßlPošts
; i++)

1424 
aù_di¡ªû
 = 
	`L’gthSqu¬ed
(
·ths
[
g_pGßlWaypošts
[
i
]]->
Üigš
 - 
vecPos™iÚ
);

1425 ià(
aù_di¡ªû
 < 
mš_di¡ªû
)

1427 
mš_di¡ªû
 = 
aù_di¡ªû
;

1428 
iGßl
 = 
g_pGßlWaypošts
[
i
];

1432 
iCouÁ
 = 0;

1433 
	`WasBombPoštVis™ed
(
iGßl
))

1435 
iGßl
 = 
g_pGßlWaypošts
[
	`RANDOM_LONG
(0, 
g_iNumGßlPošts
)];

1436 
iCouÁ
++;

1437 ià(
iCouÁ
 > 
g_iNumGßlPošts
)

1441  
iGßl
;

1442 
	}
}

1451 
	gCBa£BÙ
::
	$FšdDeãndWaypošt
(
VeùÜ
 
vecPos™iÚ
)

1453 
w±_šdex
[8];

1454 
mš_di¡ªû
[8];

1455 
iDi¡ªû
, 
i
;

1456 
fMš
 = 
FLT_MAX
;

1457 
fPosMš
 = 
FLT_MAX
;

1458 
fDi¡ªû
;

1459 
iSourûIndex
 = -1;

1460 
iPosIndex
 = -1;

1462 
i
 = 0; i < 8; i++)

1464 
w±_šdex
[
i
] = -1;

1465 
mš_di¡ªû
[
i
] = 128;

1469 
i
 = 0; i < 
g_iNumWaypošts
; i++)

1471 
fDi¡ªû
 = 
	`L’gthSqu¬ed
(
·ths
[
i
]->
Üigš
 - 
³v
->origin);

1472 ià(
fDi¡ªû
 < 
fMš
)

1474 
iSourûIndex
 = 
i
;

1475 
fMš
 = 
fDi¡ªû
;

1477 
fDi¡ªû
 = 
	`L’gthSqu¬ed
(
·ths
[
i
]->
Üigš
 - 
vecPos™iÚ
);

1478 ià(
fDi¡ªû
 < 
fPosMš
)

1480 
iPosIndex
 = 
i
;

1481 
fPosMš
 = 
fDi¡ªû
;

1485 ià(
iSourûIndex
 =ğ-1 || 
iPosIndex
 == -1)

1486  
	`RANDOM_LONG
(0, 
g_iNumWaypošts
 - 1);

1488 
T¿ûResuÉ
 
Œ
;

1489 
VeùÜ
 
vecSourû
;

1490 
VeùÜ
 
vecDe¡
 = 
·ths
[
iPosIndex
]->
Üigš
;

1493 
i
 = 0; i < 
g_iNumWaypošts
; i++)

1496 ià((
·ths
[
i
]->
æags
 & 
W_FL_LADDER
) ||

1497 
i
 =ğ
iSourûIndex
 || !
	`WaypoštIsVisibË
(i, 
iPosIndex
))

1501 
iDi¡ªû
 = 
	`G‘P©hDi¡ªû
(
iSourûIndex
, 
i
);

1503 ià(
iDi¡ªû
 < 1024)

1505 
vecSourû
 = 
·ths
[
i
]->
Üigš
;

1506 
	`UTIL_T¿ûLše
Ğ
vecSourû
, 
vecDe¡
, 
ignÜe_mÚ¡”s
,

1507 
ignÜe_gÏss
, 
	`ediù
(), &
Œ
);

1509 ià(
Œ
.
æF¿ùiÚ
 != 1.0)

1512 ià(
iDi¡ªû
 > 
mš_di¡ªû
[0])

1514 
w±_šdex
[0] = 
i
;

1515 
mš_di¡ªû
[0] = 
iDi¡ªû
;

1517 ià(
iDi¡ªû
 > 
mš_di¡ªû
[1])

1519 
w±_šdex
[1] = 
i
;

1520 
mš_di¡ªû
[1] = 
iDi¡ªû
;

1522 ià(
iDi¡ªû
 > 
mš_di¡ªû
[2])

1524 
w±_šdex
[2] = 
i
;

1525 
mš_di¡ªû
[2] = 
iDi¡ªû
;

1527 ià(
iDi¡ªû
 > 
mš_di¡ªû
[3])

1529 
w±_šdex
[3] = 
i
;

1530 
mš_di¡ªû
[3] = 
iDi¡ªû
;

1532 ià(
iDi¡ªû
 > 
mš_di¡ªû
[4])

1534 
w±_šdex
[4] = 
i
;

1535 
mš_di¡ªû
[4] = 
iDi¡ªû
;

1537 ià(
iDi¡ªû
 > 
mš_di¡ªû
[5])

1539 
w±_šdex
[5] = 
i
;

1540 
mš_di¡ªû
[5] = 
iDi¡ªû
;

1542 ià(
iDi¡ªû
 > 
mš_di¡ªû
[6])

1544 
w±_šdex
[6] = 
i
;

1545 
mš_di¡ªû
[6] = 
iDi¡ªû
;

1547 ià(
iDi¡ªû
 > 
mš_di¡ªû
[7])

1549 
w±_šdex
[7] = 
i
;

1550 
mš_di¡ªû
[7] = 
iDi¡ªû
;

1556 ià(
g_bU£Ex³r›nû
)

1558 
i
 = 0; i < 8; i++)

1560 ià(
w±_šdex
[
i
]!=-1)

1562 ià(
	`UTIL_G‘T—m
(
	`ediù
()è=ğ
TEAM_TERRORIST
)

1564 
iExp
 = (
pBÙEx³r›nûD©a
 + 
w±_šdex
[
i
] * 
g_iNumWaypošts
 + w±_šdex[i])->
uT—m0Damage
;

1565 
iExp
 = iExp * 100 / 240;

1566 
mš_di¡ªû
[
i
] = 
iExp
 * 100 / 8192;

1567 
mš_di¡ªû
[
i
] +ğ
iExp
;

1575 
iExp
 = (
pBÙEx³r›nûD©a
 + 
w±_šdex
[
i
] * 
g_iNumWaypošts
 + w±_šdex[i])->
uT—m1Damage
;

1576 
iExp
 = iExp * 100 / 240;

1577 
mš_di¡ªû
[
i
] = 
iExp
 * 100 / 8192;

1578 
mš_di¡ªû
[
i
] +ğ
iExp
;

1590 
i
 = 0; i < 8; i++)

1592 ià(
w±_šdex
[
i
] != -1)

1593 
mš_di¡ªû
[
i
] -ğ
·ths
[
w±_šdex
[i]]->
Radius
 * 3;

1597 
šdex1
;

1598 
šdex2
;

1599 
‹mpšdex
;

1600 
boŞ
 
bOrd”chªge
;

1605 
bOrd”chªge
 = 
FALSE
;

1606 
i
 = 0; i < 8; i++)

1608 
šdex1
 = 
w±_šdex
[
i
];

1609 
šdex2
 = 
w±_šdex
[
i
 + 1];

1610 ià(
šdex1
 !ğ-1 && 
šdex2
 != -1)

1612 ià(
mš_di¡ªû
[
i
] > min_distance[i + 1])

1614 
‹mpšdex
 = 
w±_šdex
[
i
];

1615 
w±_šdex
[
i
] = wpt_index[i + 1];

1616 
w±_šdex
[
i
 + 1] = 
‹mpšdex
;

1617 
‹mpšdex
 = 
mš_di¡ªû
[
i
];

1618 
mš_di¡ªû
[
i
] = min_distance[i + 1];

1619 
mš_di¡ªû
[
i
 + 1] = 
‹mpšdex
;

1620 
bOrd”chªge
 = 
TRUE
;

1624 } 
bOrd”chªge
);

1627 ià(
w±_šdex
[0] == -1)

1628  
	`RANDOM_LONG
(0, 
g_iNumWaypošts
 - 1);

1630 
i
 = 1; i < 8; i++)

1632 ià(
w±_šdex
[
i
] == -1)

1636  
w±_šdex
[
	`RANDOM_LONG
(0, (
i
 - 1) / 2)];

1637 
	}
}

1642 
	gCBa£BÙ
::
	$FšdCov”Waypošt
(
maxdi¡ªû
)

1644 
i
;

1645 
w±_šdex
[8];

1646 
di¡ªû
, 
’emydi¡ªû
, 
iEÃmyWPT
 = -1;

1647 
rgiEÃmyIndiûs
[
MAX_PATH_INDEX
];

1648 
iEÃmyNeighbours
 = 0;

1649 
mš_di¡ªû
[8];

1650 
f_mš
 = 9999.0;

1651 
f_’emymš
 = 9999.0;

1652 
VeùÜ
 
vecEÃmy
 = 
m_vecLa¡EÃmyOrigš
;

1654 
iSourûIndex
 = 
m_iCu¼W±Index
;

1659 
f_di¡ªû
 = (
vecEÃmy
 - 
³v
->
Üigš
).
	`L’gth
();

1662 ià(
maxdi¡ªû
 > 
f_di¡ªû
)

1663 
maxdi¡ªû
 = 
f_di¡ªû
;

1664 ià(
maxdi¡ªû
 < 300)

1665 
maxdi¡ªû
 = 300;

1667 
i
 = 0; i < 8; i++)

1669 
w±_šdex
[
i
] = -1;

1670 
mš_di¡ªû
[
i
] = 
maxdi¡ªû
;

1674 
i
 = 0; i < 
g_iNumWaypošts
; i++)

1676 
f_di¡ªû
 = (
·ths
[
i
]->
Üigš
 - 
³v
->Üigš).
	`L’gth
();

1678 ià(
f_di¡ªû
 < 
f_mš
)

1680 
iSourûIndex
 = 
i
;

1681 
f_mš
 = 
f_di¡ªû
;

1684 
f_di¡ªû
 = (
·ths
[
i
]->
Üigš
 - 
vecEÃmy
).
	`L’gth
();

1686 ià(
f_di¡ªû
 < 
f_’emymš
)

1688 
iEÃmyWPT
 = 
i
;

1689 
f_’emymš
 = 
f_di¡ªû
;

1693 ià(
iEÃmyWPT
 == -1)

1694  
	`RANDOM_LONG
(0, 
g_iNumWaypošts
 - 1);

1697 
i
 = 0; i < 
MAX_PATH_INDEX
; i++)

1699 ià(
·ths
[
iEÃmyWPT
]->
šdex
[
i
] != -1)

1701 
rgiEÃmyIndiûs
[
iEÃmyNeighbours
] = 
·ths
[
iEÃmyWPT
]->
šdex
[
i
];

1702 
iEÃmyNeighbours
++;

1706 
m_iCu¼W±Index
 = 
iSourûIndex
;

1708 
boŞ
 
bNeighbourVisibË
;

1711 
i
 = 0; i < 
g_iNumWaypošts
; i++)

1714 ià((
·ths
[
i
]->
æags
 & 
W_FL_LADDER
è|| i =ğ
iSourûIndex
 || 
	`WaypoštIsVisibË
(
iEÃmyWPT
, i))

1718 
bNeighbourVisibË
 = 
FALSE
;

1719 
j
 = 0; j < 
iEÃmyNeighbours
; j++)

1721 ià(
	`WaypoštIsVisibË
(
rgiEÃmyIndiûs
[
j
], 
i
))

1723 
bNeighbourVisibË
 = 
TRUE
;

1728 ià(
bNeighbourVisibË
)

1732 
di¡ªû
 = 
	`G‘P©hDi¡ªû
(
iSourûIndex
, 
i
);

1733 
’emydi¡ªû
 = 
	`G‘P©hDi¡ªû
(
iEÃmyWPT
, 
i
);

1735 ià(
di¡ªû
 < 
’emydi¡ªû
)

1737 ià(
di¡ªû
 < 
mš_di¡ªû
[0])

1739 
w±_šdex
[0] = 
i
;

1740 
mš_di¡ªû
[0] = 
di¡ªû
;

1742 ià(
di¡ªû
 < 
mš_di¡ªû
[1])

1744 
w±_šdex
[1] = 
i
;

1745 
mš_di¡ªû
[1] = 
di¡ªû
;

1747 ià(
di¡ªû
 < 
mš_di¡ªû
[2])

1749 
w±_šdex
[2] = 
i
;

1750 
mš_di¡ªû
[2] = 
di¡ªû
;

1752 ià(
di¡ªû
 < 
mš_di¡ªû
[3])

1754 
w±_šdex
[3] = 
i
;

1755 
mš_di¡ªû
[3] = 
di¡ªû
;

1757 ià(
di¡ªû
 < 
mš_di¡ªû
[4])

1759 
w±_šdex
[4] = 
i
;

1760 
mš_di¡ªû
[4] = 
di¡ªû
;

1762 ià(
di¡ªû
 < 
mš_di¡ªû
[5])

1764 
w±_šdex
[5] = 
i
;

1765 
mš_di¡ªû
[5] = 
di¡ªû
;

1767 ià(
di¡ªû
 < 
mš_di¡ªû
[6])

1769 
w±_šdex
[6] = 
i
;

1770 
mš_di¡ªû
[6] = 
di¡ªû
;

1772 ià(
di¡ªû
 < 
mš_di¡ªû
[7])

1774 
w±_šdex
[7] = 
i
;

1775 
mš_di¡ªû
[7] = 
di¡ªû
;

1781 ià(
g_bU£Ex³r›nû
)

1783 ià(
	`UTIL_G‘T—m
(
	`ediù
()è=ğ
TEAM_TERRORIST
)

1785 
i
 = 0; i < 8; i++)

1787 ià(
w±_šdex
[
i
] != -1)

1789 
iExp
 = (
pBÙEx³r›nûD©a
 + 
w±_šdex
[
i
] * 
g_iNumWaypošts
 + w±_šdex[i])->
uT—m0Damage
;

1790 
iExp
 = iExp * 100 / 240;

1791 
mš_di¡ªû
[
i
] = 
iExp
 * 100 / 8192;

1792 
mš_di¡ªû
[
i
] +ğ
iExp
;

1798 
i
 = 0; i < 8; i++)

1800 ià(
w±_šdex
[
i
] != -1)

1802 
iExp
 = (
pBÙEx³r›nûD©a
 + 
w±_šdex
[
i
] * 
g_iNumWaypošts
 + w±_šdex[i])->
uT—m1Damage
;

1803 
iExp
 = iExp * 100 / 240;

1804 
mš_di¡ªû
[
i
] = 
iExp
 * 100 / 8192;

1805 
mš_di¡ªû
[
i
] +ğ
iExp
;

1813 
i
 = 0; i < 8; i++)

1815 ià(
w±_šdex
[
i
] != -1)

1816 
mš_di¡ªû
[
i
] +ğ
·ths
[
w±_šdex
[i]]->
Radius
 * 3;

1820 
šdex1
;

1821 
šdex2
;

1822 
‹mpšdex
;

1823 
boŞ
 
bOrd”chªge
;

1828 
bOrd”chªge
 = 
FALSE
;

1829 
i
 = 0; i < 3; i++)

1831 
šdex1
 = 
w±_šdex
[
i
];

1832 
šdex2
 = 
w±_šdex
[
i
 + 1];

1833 ià(
šdex1
 !ğ-1 && 
šdex2
 != -1)

1835 ià(
mš_di¡ªû
[
i
] > min_distance[i + 1])

1837 
‹mpšdex
 = 
w±_šdex
[
i
];

1838 
w±_šdex
[
i
] = wpt_index[i+1];

1839 
w±_šdex
[
i
 + 1] = 
‹mpšdex
;

1840 
‹mpšdex
 = 
mš_di¡ªû
[
i
];

1841 
mš_di¡ªû
[
i
] = min_distance[i+1];

1842 
mš_di¡ªû
[
i
 + 1] = 
‹mpšdex
;

1843 
bOrd”chªge
 = 
TRUE
;

1847 } 
bOrd”chªge
);

1849 
VeùÜ
 
v_sourû
;

1850 
VeùÜ
 
v_de¡
;

1851 
T¿ûResuÉ
 
Œ
;

1854 
i
 = 0; i < 8; i++)

1856 ià(
w±_šdex
[
i
] != -1)

1858 
v_sourû
 = 
m_vecLa¡EÃmyOrigš
 + 
	`VeùÜ
(0, 0, 36);

1859 
v_de¡
 = 
·ths
[
w±_šdex
[
i
]]->
Üigš
;

1860 
	`UTIL_T¿ûLše
Ğ
v_sourû
, 
v_de¡
, 
ignÜe_mÚ¡”s
, 
ignÜe_gÏss
, 
	`ediù
(), &
Œ
);

1861 ià(
Œ
.
æF¿ùiÚ
 < 1.0)

1862  (
w±_šdex
[
i
]);

1867 ià(
w±_šdex
[0] != -1)

1868  (
w±_šdex
[0]);

1872  
	`RANDOM_LONG
(0, 
g_iNumWaypošts
 - 1);

1873 
	}
}

1879 
boŞ
 
	gCBa£BÙ
::
	$G‘Be¡NextWaypošt
()

1881 
	`as£¹
(
m_pWaypoštNodes
 !ğ
NULL
);

1882 
	`as£¹
(
m_pWaypoštNodes
->
NextNode
 !ğ
NULL
);

1884 
iNextWaypoštIndex
 = 
m_pWaypoštNodes
->
NextNode
->
iIndex
;

1885 
iCu¼’tWaypoštIndex
 = 
m_pWaypoštNodes
->
iIndex
;

1886 
iP»vWaypoštIndex
 = 
m_iCu¼W±Index
;

1888 
CBa£BÙ
 *
pOth”BÙ
;

1889 
boŞ
 
bWaypoštInU£
 = 
FALSE
;

1891 
iOth”WPIndex
;

1893 
i
;

1894 
i
 = 0; i < 
gpGlob®s
->
maxCl›Ás
; i++)

1896 
pOth”BÙ
 = 
g_rgpBÙs
[
i
];

1897 ià(
pOth”BÙ
)

1899 ià(
	`IsAlive
(
pOth”BÙ
->
	`ediù
()è&&…Oth”BÙ !ğ
this
)

1901 ià(
	`G‘ShoÙšgCÚeDevŸtiÚ
(
pOth”BÙ
->
	`ediù
(), &
³v
->
Üigš
) >= 0.7)

1902 
iOth”WPIndex
 = 
pOth”BÙ
->
m_rgiP»vW±Index
[0];

1904 
iOth”WPIndex
 = 
pOth”BÙ
->
m_iCu¼W±Index
;

1905 ià(
iCu¼’tWaypoštIndex
 =ğ
iOth”WPIndex
)

1907 
bWaypoštInU£
 = 
TRUE
;

1914 ià(
bWaypoštInU£
)

1916 
i
 = 0; i < 
MAX_PATH_INDEX
; i++)

1918 
num
 = 
·ths
[
iP»vWaypoštIndex
]->
šdex
[
i
];

1919 ià(
num
 != -1)

1921 ià(
	`IsCÚÃùedW™hWaypošt
(
num
, 
iNextWaypoštIndex
) &&

1922 
	`IsCÚÃùedW™hWaypošt
(
num
, 
iP»vWaypoštIndex
))

1925 ià(
·ths
[
num
]->
æags
 & 
W_FL_LADDER
)

1929 
bWaypoštInU£
 = 
FALSE
;

1930 
c
;

1931 
c
 = 0; c < 
gpGlob®s
->
maxCl›Ás
; c++)

1933 
pOth”BÙ
 = 
g_rgpBÙs
[
c
];

1934 ià(
pOth”BÙ
)

1936 ià(
	`IsAlive
(
pOth”BÙ
->
	`ediù
()è&&…Oth”BÙ !ğ
this
)

1938 ià(
	`G‘ShoÙšgCÚeDevŸtiÚ
(
pOth”BÙ
->
	`ediù
(), &
³v
->
Üigš
) >= 0.7)

1939 
iOth”WPIndex
 = 
pOth”BÙ
->
m_rgiP»vW±Index
[0];

1941 
iOth”WPIndex
 = 
pOth”BÙ
->
m_iCu¼W±Index
;

1942 ià(
num
 =ğ
iOth”WPIndex
)

1944 
bWaypoštInU£
 = 
TRUE
;

1952 ià(!
bWaypoštInU£
)

1954 
m_pWaypoštNodes
->
iIndex
 = 
num
;

1955  
TRUE
;

1961  
FALSE
;

1962 
	}
}

1969 
boŞ
 
	gCBa£BÙ
::
	$H—dTow¬dWaypošt
()

1971 
VeùÜ
 
v_¤c
, 
v_de¡
;

1972 
T¿ûResuÉ
 
Œ
;

1975 
	`G‘V®idWaypošt
();

1978 ià(
m_pWaypoštNodes
 =ğ
NULL
)

1979  
FALSE
;

1982 
m_pWaypoštNodes
 = m_pWaypoštNodes->
NextNode
;

1985 
m_uiCu¼T¿v–FÏgs
 = 0;

1988 ià(
m_pWaypoštNodes
 !ğ
NULL
)

1991 ià(
m_pWaypoštNodes
 !ğ
m_pWayNodesS¹
 && m_pWaypoštNodes->
NextNode
 !ğ
NULL
)

1993 
	`G‘Be¡NextWaypošt
();

1994 
sk_t
 
iTask
 = 
	`Cu¼’tTask
()->iTask;

1996 
m_æMšS³ed
 = 
³v
->
max¥“d
;

1997 ià(
iTask
 =ğ
TASK_NORMAL
 && !
g_bBombPÏÁed
)

1999 
m_iCampBu‰Ús
 = 0;

2000 
iWaypošt
 = 
m_pWaypoštNodes
->
NextNode
->
iIndex
;

2002 
fKls
;

2004 ià(
	`UTIL_G‘T—m
(
	`ediù
()è=ğ
TEAM_TERRORIST
)

2005 
fKls
 = (
pBÙEx³r›nûD©a
 + 
iWaypošt
 * 
g_iNumWaypošts
 + iWaypošt)->
uT—m0Damage
;

2007 
fKls
 = (
pBÙEx³r›nûD©a
 + 
iWaypošt
 * 
g_iNumWaypošts
 + iWaypošt)->
uT—m1Damage
;

2009 ià(
fKls
 > 1 && 
g_fTimeRoundMid
 > 
gpGlob®s
->
time
 && 
g_cKlHi¡Üy
 > 0)

2011 
fKls
 = fKl / 
g_cKlHi¡Üy
;

2013 
m_ucP”sÚ®™y
)

2015 
PERSONALITY_AGRESSIVE
:

2016 
fKls
 /= 3;

2019 
fKls
 /= 2;

2022 ià(
m_æBa£Ag»ssiÚLev–
 < 
fKls
)

2025 
bÙsk_t
 
TempTask
 = {
NULL
, NULL, 
TASK_MOVETOPOSITION
, 
TASKPRI_MOVETOPOSITION
,

2026 
	`FšdDeãndWaypošt
(
·ths
[
iWaypošt
]->
Üigš
), 0.0, 
TRUE
};

2027 
	`S¹Task
(&
TempTask
);

2030 ià(
g_bBÙsCªPau£
 && !
	`IsOnLadd”
(è&& !
	`IsInW©”
(è&& 
m_uiCu¼T¿v–FÏgs
 =ğ0 && (
³v
->
æags
 & 
FL_ONGROUND
))

2032 ià(
fKls
 =ğ
m_æBa£Ag»ssiÚLev–
)

2033 
m_iCampBu‰Ús
 |ğ
IN_DUCK
;

2034 ià(
	`RANDOM_LONG
(1,100è> 
m_iSkl
 + RANDOM_LONG(1,20))

2035 
m_æMšS³ed
 = 120.0;

2040 ià(
m_pWaypoštNodes
 !ğ
NULL
)

2042 
iDe¡Index
 = 
m_pWaypoštNodes
->
iIndex
;

2045 ià(
m_iCu¼W±Index
 != -1)

2047 
PATH
 *
p
 = 
·ths
[
m_iCu¼W±Index
];

2048 
i
 = 0;

2050 
i
 < 
MAX_PATH_INDEX
)

2052 ià(
p
->
šdex
[
i
] =ğ
iDe¡Index
)

2054 
m_uiCu¼T¿v–FÏgs
 = 
p
->
cÚÃùæag
[
i
];

2055 
m_vecDesœedV–oc™y
 = 
p
->
vecCÚÃùV–
[
i
];

2058 
i
++;

2062 ià(
·ths
[
iDe¡Index
]->
æags
 & 
W_FL_LADDER
 && !
	`IsOnLadd”
())

2064 
iLadd”Waypošt
 = 
iDe¡Index
;

2066 
CBa£BÙ
 *
pOth”BÙ
;

2069 
c
 = 0; c < 
gpGlob®s
->
maxCl›Ás
; c++)

2071 
pOth”BÙ
 = 
g_rgpBÙs
[
c
];

2072 ià(
pOth”BÙ
)

2074 ià(
	`IsAlive
(
pOth”BÙ
->
	`ediù
()è&&…Oth”BÙ !ğ
this
)

2077 ià(
pOth”BÙ
->
m_iCu¼W±Index
 =ğ
iLadd”Waypošt
)

2079 
bÙsk_t
 
TempTask
 = {
NULL
, NULL, 
TASK_PAUSE
, 
TASKPRI_PAUSE
, -1,

2080 
gpGlob®s
->
time
 + 3.0, 
FALSE
};

2081 
	`S¹Task
(&
TempTask
);

2082  
TRUE
;

2089 
m_iCu¼W±Index
 = 
iDe¡Index
;

2093 
m_vecW±Origš
 = 
·ths
[
m_iCu¼W±Index
]->
Üigš
;

2096 ià(
·ths
[
m_iCu¼W±Index
]->
Radius
 > 0)

2098 
	`UTIL_MakeVeùÜs
(
	`VeùÜ
(
³v
->
ªgËs
.
x
, 
	`AngËNÜm®ize
Õev->ªgËs.
y
 + 
	`RANDOM_FLOAT
(-90, 90)), 0));

2099 
m_vecW±Origš
 = m_vecW±Origš + 
gpGlob®s
->
v_fÜw¬d
 * 
	`RANDOM_FLOAT
(0, 
·ths
[
m_iCu¼W±Index
]->
Radius
);

2104 ià(
·ths
[
m_iCu¼W±Index
]->
æags
 & 
W_FL_LADDER
)

2106 
ediù_t
 *
pLadd”
 = 
NULL
;

2109 !
	`FNuÎEÁ
(
pLadd”
 = 
	`FIND_ENTITY_IN_SPHERE
ÕLadd”, 
m_vecW±Origš
, 100)))

2111 ià(
	`¡rcmp
("func_Ïdd”", 
	`STRING
(
pLadd”
->
v
.
şas¢ame
)) == 0)

2119 ià(!
	`FNuÎEÁ
(
pLadd”
))

2121 
	`UTIL_T¿ûMod–
(
m_vecW±Origš
, 
	`VecBMod–Origš
(
pLadd”
), 
pošt_huÎ
,…Ladd”, &
Œ
);

2123 ià(
m_vecW±Origš
.
z
 < 
³v
->
Üigš
.z)

2127 
m_iLadd”Dœ
 = 
LADDER_DOWN
;

2128 
m_vecW±Origš
 = m_vecW±Origš + 
Œ
.
vecPÏÃNÜm®
;

2134 
m_iLadd”Dœ
 = 
LADDER_UP
;

2135 
m_vecW±Origš
 = m_vecW±Origš - 
Œ
.
vecPÏÃNÜm®
;

2140 
m_æW±Time£t
 = 
gpGlob®s
->
time
;

2142  
TRUE
;

2143 
	}
}

2149 
boŞ
 
	gCBa£BÙ
::
	$CªtMoveFÜw¬d
Ğ
VeùÜ
 
vNÜm®
, 
T¿ûResuÉ
 *
Œ
 )

2153 
VeùÜ
 
v_¤c
, 
v_fÜw¬d
, 
v_ûÁ”
;

2155 
v_ûÁ”
 = 
³v
->
ªgËs
;

2156 
v_ûÁ”
.
z
 = 0;

2157 
v_ûÁ”
.
x
 = 0;

2158 
	`UTIL_MakeVeùÜs
(
v_ûÁ”
);

2161 
v_¤c
 = 
	`EyePos™iÚ
();

2162 
v_fÜw¬d
 = 
v_¤c
 + 
vNÜm®
 * 24;

2165 
	`UTIL_T¿ûLše
Ğ
v_¤c
, 
v_fÜw¬d
, 
ignÜe_mÚ¡”s
, 
	`ediù
(), 
Œ
);

2168 ià(
Œ
->
æF¿ùiÚ
 < 1.0)

2170 ià(
	`FCÏs¢ameIs
(
Œ
->
pH™
, "func_door_rotating") ||

2171 
	`FCÏs¢ameIs
(
Œ
->
pH™
, "func_door"))

2172  
FALSE
;

2174  
TRUE
;

2179 
v_¤c
 = 
	`EyePos™iÚ
(è+ 
	`VeùÜ
(0, 0, -16è- 
gpGlob®s
->
v_right
 * 16;

2180 
v_fÜw¬d
 = 
	`EyePos™iÚ
(è+ 
	`VeùÜ
(0, 0, -16è+ 
gpGlob®s
->
v_right
 * 16 + 
vNÜm®
 * 24;

2182 
	`UTIL_T¿ûLše
Ğ
v_¤c
, 
v_fÜw¬d
, 
ignÜe_mÚ¡”s
, 
	`ediù
(), 
Œ
);

2185 ià(
Œ
->
æF¿ùiÚ
 < 1.0)

2187 ià(!
	`FCÏs¢ameIs
(
Œ
->
pH™
, "func_door_rotating") &&

2188 !
	`FCÏs¢ameIs
(
Œ
->
pH™
, "func_door"))

2189  
TRUE
;

2194 
v_¤c
 = 
	`EyePos™iÚ
(è+ 
	`VeùÜ
(0, 0, -16è+ 
gpGlob®s
->
v_right
 * 16;

2195 
v_fÜw¬d
 = 
	`EyePos™iÚ
(è+ 
	`VeùÜ
(0, 0, -16è- 
gpGlob®s
->
v_right
 * 16 + 
vNÜm®
 * 24;

2197 
	`UTIL_T¿ûLše
Ğ
v_¤c
, 
v_fÜw¬d
, 
ignÜe_mÚ¡”s
, 
	`ediù
(), 
Œ
);

2200 ià(
Œ
->
æF¿ùiÚ
 < 1.0)

2202 ià(!
	`FCÏs¢ameIs
(
Œ
->
pH™
, "func_door_rotating") &&

2203 !
	`FCÏs¢ameIs
(
Œ
->
pH™
, "func_door"))

2204  
TRUE
;

2208 ià(
³v
->
æags
 & 
FL_DUCKING
)

2210 
v_¤c
 = 
³v
->
Üigš
 + 
	`VeùÜ
(0, 0, -19 + 19);

2211 
v_fÜw¬d
 = 
v_¤c
 + 
	`VeùÜ
(0, 0, 10è+ 
vNÜm®
 * 24;

2213 
	`UTIL_T¿ûLše
Ğ
v_¤c
, 
v_fÜw¬d
, 
ignÜe_mÚ¡”s
, 
	`ediù
(), 
Œ
);

2216 ià(
Œ
->
æF¿ùiÚ
 < 1.0)

2218 ià(!
	`FCÏs¢ameIs
(
Œ
->
pH™
, "func_door_rotating") &&

2219 !
	`FCÏs¢ameIs
(
Œ
->
pH™
, "func_door"))

2220  
TRUE
;

2223 
v_¤c
 = 
³v
->
Üigš
;

2224 
v_fÜw¬d
 = 
v_¤c
 + 
vNÜm®
 * 24;

2226 
	`UTIL_T¿ûLše
Ğ
v_¤c
, 
v_fÜw¬d
, 
ignÜe_mÚ¡”s
, 
	`ediù
(), 
Œ
);

2229 ià(
Œ
->
æF¿ùiÚ
 < 1.0)

2231 ià(!
	`FCÏs¢ameIs
(
Œ
->
pH™
, "func_door_rotating") &&

2232 !
	`FCÏs¢ameIs
(
Œ
->
pH™
, "func_door"))

2233  
TRUE
;

2239 
v_¤c
 = 
³v
->
Üigš
 + 
	`VeùÜ
(0, 0, -17è- 
gpGlob®s
->
v_right
 * 16;

2240 
v_fÜw¬d
 = 
³v
->
Üigš
 + 
	`VeùÜ
(0, 0, -17è+ 
gpGlob®s
->
v_right
 * 16 + 
vNÜm®
 * 24;

2243 
	`UTIL_T¿ûLše
Ğ
v_¤c
, 
v_fÜw¬d
, 
ignÜe_mÚ¡”s
, 
	`ediù
(), 
Œ
);

2246 ià(
Œ
->
æF¿ùiÚ
 < 1.0)

2248 ià(!
	`FCÏs¢ameIs
(
Œ
->
pH™
, "func_door_rotating") &&

2249 !
	`FCÏs¢ameIs
(
Œ
->
pH™
, "func_door"))

2250  
TRUE
;

2254 
v_¤c
 = 
³v
->
Üigš
 + 
	`VeùÜ
(0, 0, -17è+ 
gpGlob®s
->
v_right
 * 16;

2255 
v_fÜw¬d
 = 
³v
->
Üigš
 + 
	`VeùÜ
(0, 0, -17è- 
gpGlob®s
->
v_right
 * 16 + 
vNÜm®
 * 24;

2257 
	`UTIL_T¿ûLše
Ğ
v_¤c
, 
v_fÜw¬d
, 
ignÜe_mÚ¡”s
, 
	`ediù
(), 
Œ
);

2260 ià(
Œ
->
æF¿ùiÚ
 < 1.0)

2262 ià(!
	`FCÏs¢ameIs
(
Œ
->
pH™
, "func_door_rotating") &&

2263 !
	`FCÏs¢ameIs
(
Œ
->
pH™
, "func_door"))

2264  
TRUE
;

2268  
FALSE
;

2269 
	}
}

2275 
boŞ
 
	gCBa£BÙ
::
	$CªSŒaãLeá
Ğ
T¿ûResuÉ
 *
Œ
 )

2277 
VeùÜ
 
v_¤c
, 
v_Ëá
;

2279 
	`UTIL_MakeVeùÜs
Ğ
³v
->
v_ªgË
 );

2280 
v_¤c
 = 
³v
->
Üigš
;

2281 
v_Ëá
 = 
v_¤c
 - 
gpGlob®s
->
v_right
 * 40;

2284 
	`UTIL_T¿ûLše
Ğ
v_¤c
, 
v_Ëá
, 
ignÜe_mÚ¡”s
, 
	`ediù
(), 
Œ
);

2287 ià(
Œ
->
æF¿ùiÚ
 < 1.0)

2288  
FALSE
;

2290 
v_Ëá
 = v_Ëá + 
gpGlob®s
->
v_fÜw¬d
 * 40;

2293 
	`UTIL_T¿ûLše
Ğ
v_¤c
, 
v_Ëá
, 
ignÜe_mÚ¡”s
, 
	`ediù
(), 
Œ
);

2296 ià(
Œ
->
æF¿ùiÚ
 < 1.0)

2297  
FALSE
;

2299  
TRUE
;

2300 
	}
}

2302 
boŞ
 
	gCBa£BÙ
::
	$CªSŒaãRight
Ğ
T¿ûResuÉ
 *
Œ
 )

2304 
VeùÜ
 
v_¤c
, 
v_right
;

2306 
	`UTIL_MakeVeùÜs
Ğ
³v
->
v_ªgË
 );

2307 
v_¤c
 = 
³v
->
Üigš
;

2308 
v_right
 = 
v_¤c
 + 
gpGlob®s
->v_right * 40;

2311 
	`UTIL_T¿ûLše
Ğ
v_¤c
, 
v_right
, 
ignÜe_mÚ¡”s
, 
	`ediù
(), 
Œ
);

2314 ià(
Œ
->
æF¿ùiÚ
 < 1.0)

2315  
FALSE
;

2317 
v_right
 = v_righˆ+ 
gpGlob®s
->
v_fÜw¬d
 * 40;

2320 
	`UTIL_T¿ûLše
Ğ
v_¤c
, 
v_right
, 
ignÜe_mÚ¡”s
, 
	`ediù
(), 
Œ
);

2323 ià(
Œ
->
æF¿ùiÚ
 < 1.0)

2324  
FALSE
;

2326  
TRUE
;

2327 
	}
}

2332 
boŞ
 
	gCBa£BÙ
::
	$CªJumpUp
Ğ
VeùÜ
 
vNÜm®
 )

2334 
T¿ûResuÉ
 
Œ
;

2335 
VeùÜ
 
v_jump
, 
v_sourû
, 
v_de¡
;

2338 ià(!(
³v
->
æags
 & 
FL_ONGROUND
è&& (
	`IsOnLadd”
(è|| !
	`IsInW©”
()))

2339  
FALSE
;

2342 
v_sourû
 = 
³v
->
Üigš
 + 
	`VeùÜ
(0, 0, -36 + 45);

2343 
v_de¡
 = 
v_sourû
 + 
vNÜm®
 * 32;

2346 
	`UTIL_T¿ûHuÎ
Ğ
v_sourû
, 
v_de¡
, 
ignÜe_mÚ¡”s
, 
h—d_huÎ
, 
	`ediù
(), &
Œ
);

2348 ià(
Œ
.
æF¿ùiÚ
 < 1.0)

2354 
v_sourû
 = 
³v
->
Üigš
 + 
	`VeùÜ
(0, 0, -36 + 63);

2355 
v_de¡
 = 
v_sourû
 + 
vNÜm®
 * 32;

2358 
	`UTIL_T¿ûHuÎ
Ğ
v_sourû
, 
v_de¡
, 
ignÜe_mÚ¡”s
, 
h—d_huÎ
, 
	`ediù
(), &
Œ
);

2360 ià(
Œ
.
æF¿ùiÚ
 < 1.0)

2361  
FALSE
;

2365 
v_sourû
 = 
v_de¡
;

2366 
v_de¡
.
z
 += 37;

2368 
	`UTIL_T¿ûHuÎ
Ğ
v_sourû
, 
v_de¡
, 
ignÜe_mÚ¡”s
, 
h—d_huÎ
, 
	`ediù
(), &
Œ
);

2370  (
Œ
.
æF¿ùiÚ
 >= 1.0);

2371 
	}
}

2376 
boŞ
 
	gCBa£BÙ
::
	$CªDuckUnd”
Ğ
VeùÜ
 
vNÜm®
 )

2378 
T¿ûResuÉ
 
Œ
;

2379 
VeùÜ
 
v_ba£height
;

2382 ià(
³v
->
æags
 & 
FL_DUCKING
)

2383 
v_ba£height
 = 
³v
->
Üigš
 + 
	`VeùÜ
(0, 0, -17);

2385 
v_ba£height
 = 
³v
->
Üigš
;

2388 
	`UTIL_T¿ûHuÎ
Ğ
v_ba£height
, v_ba£heighˆ+ 
vNÜm®
 * 32,

2389 
ignÜe_mÚ¡”s
, 
h—d_huÎ
, 
	`ediù
(), &
Œ
);

2391  (
Œ
.
æF¿ùiÚ
 >= 1.0);

2392 
	}
}

2394 
boŞ
 
	gCBa£BÙ
::
	$IsBlockedLeá
()

2396 
VeùÜ
 
v_¤c
, 
v_Ëá
;

2397 
T¿ûResuÉ
 
Œ
;

2399 
iDœeùiÚ
 = 48;

2401 ià(
m_æMoveS³ed
 < 0)

2402 
iDœeùiÚ
 = -48;

2403 
	`UTIL_MakeVeùÜs
Ğ
³v
->
ªgËs
 );

2406 
v_¤c
 = 
³v
->
Üigš
;

2407 
v_Ëá
 = 
v_¤c
 + 
gpGlob®s
->
v_fÜw¬d
 * 
iDœeùiÚ
 - gpGlob®s->
v_right
 * 48;

2409 
	`UTIL_T¿ûLše
Ğ
v_¤c
, 
v_Ëá
, 
ignÜe_mÚ¡”s
, 
	`ediù
(), &
Œ
);

2412 ià(
Œ
.
æF¿ùiÚ
 < 1.0)

2414 ià(
	`FCÏs¢ameIs
(
Œ
.
pH™
, "func_door_rotating") ||

2415 
	`FCÏs¢ameIs
(
Œ
.
pH™
, "func_door"))

2416  
FALSE
;

2418  
TRUE
;

2420  
FALSE
;

2421 
	}
}

2423 
boŞ
 
	gCBa£BÙ
::
	$IsBlockedRight
()

2425 
VeùÜ
 
v_¤c
, 
v_right
;

2426 
T¿ûResuÉ
 
Œ
;

2428 
iDœeùiÚ
 = 48;

2430 ià(
m_æMoveS³ed
 < 0)

2431 
iDœeùiÚ
 = -48;

2432 
	`UTIL_MakeVeùÜs
Ğ
³v
->
ªgËs
 );

2435 
v_¤c
 = 
³v
->
Üigš
;

2436 
v_right
 = 
v_¤c
 + 
gpGlob®s
->
v_fÜw¬d
 * 
iDœeùiÚ
 + gpGlobals->v_right * 48;

2438 
	`UTIL_T¿ûLše
Ğ
v_¤c
, 
v_right
, 
ignÜe_mÚ¡”s
, 
	`ediù
(), &
Œ
);

2441 ià(
Œ
.
æF¿ùiÚ
 < 1.0)

2443 ià(
	`FCÏs¢ameIs
(
Œ
.
pH™
, "func_door_rotating") ||

2444 
	`FCÏs¢ameIs
(
Œ
.
pH™
, "func_door"))

2445  
FALSE
;

2447  
TRUE
;

2449  
FALSE
;

2450 
	}
}

2452 
boŞ
 
	gCBa£BÙ
::
	$CheckW®lOnLeá
()

2454 
VeùÜ
 
v_¤c
, 
v_Ëá
;

2455 
T¿ûResuÉ
 
Œ
;

2457 
	`UTIL_MakeVeùÜs
Ğ
³v
->
ªgËs
 );

2460 
v_¤c
 = 
³v
->
Üigš
;

2461 
v_Ëá
 = 
v_¤c
 - 
gpGlob®s
->
v_right
 * 40;

2463 
	`UTIL_T¿ûLše
Ğ
v_¤c
, 
v_Ëá
, 
ignÜe_mÚ¡”s
, 
	`ediù
(), &
Œ
);

2466 ià(
Œ
.
æF¿ùiÚ
 < 1.0)

2467  
TRUE
;

2469  
FALSE
;

2470 
	}
}

2472 
boŞ
 
	gCBa£BÙ
::
	$CheckW®lOnRight
()

2474 
VeùÜ
 
v_¤c
, 
v_right
;

2475 
T¿ûResuÉ
 
Œ
;

2477 
	`UTIL_MakeVeùÜs
Ğ
³v
->
ªgËs
 );

2480 
v_¤c
 = 
³v
->
Üigš
;

2481 
v_right
 = 
v_¤c
 + 
gpGlob®s
->v_right * 40;

2483 
	`UTIL_T¿ûLše
Ğ
v_¤c
, 
v_right
, 
ignÜe_mÚ¡”s
, 
	`ediù
(), &
Œ
);

2486 ià(
Œ
.
æF¿ùiÚ
 < 1.0)

2487  
TRUE
;

2489  
FALSE
;

2490 
	}
}

2496 
boŞ
 
	gCBa£BÙ
::
	$IsD—dlyDrİ
(
VeùÜ
 
vecT¬g‘Pos
)

2498 
VeùÜ
 
vecBÙ
 = 
³v
->
Üigš
;

2500 
T¿ûResuÉ
 
Œ
;

2502 
VeùÜ
 
vecMove
;

2503 
vecMove
.
y
 = 
	`UTIL_VecToYaw
(
vecT¬g‘Pos
 - 
vecBÙ
);

2504 
vecMove
.
x
 = 0;

2505 
vecMove
.
z
 = 0;

2506 
	`UTIL_MakeVeùÜs
Ğ
vecMove
 );

2508 
VeùÜ
 
v_dœeùiÚ
 = (
vecT¬g‘Pos
 - 
vecBÙ
).
	`NÜm®ize
();

2509 
VeùÜ
 
v_check
 = 
vecBÙ
;

2510 
VeùÜ
 
v_down
 = 
vecBÙ
;

2512 
v_down
.
z
 = v_down.z - 1000.0;

2514 
	`UTIL_T¿ûHuÎ
(
v_check
, 
v_down
, 
ignÜe_mÚ¡”s
, 
h—d_huÎ
, 
	`ediù
(), &
Œ
);

2516 ià(
Œ
.
æF¿ùiÚ
 > 0.036)

2517 
Œ
.
æF¿ùiÚ
 = 0.036;

2519 
height
;

2520 
Ï¡_height
 = 
Œ
.
æF¿ùiÚ
 * 1000.0;

2522 
di¡ªû
 = (
vecT¬g‘Pos
 - 
v_check
).
	`L’gth
();

2524 
di¡ªû
 > 16.0)

2526 
v_check
 = v_check + 
v_dœeùiÚ
 * 16.0;

2528 
v_down
 = 
v_check
;

2529 
v_down
.
z
 = v_down.z - 1000.0;

2531 
	`UTIL_T¿ûHuÎ
(
v_check
, 
v_down
, 
ignÜe_mÚ¡”s
, 
h—d_huÎ
, 
	`ediù
(), &
Œ
);

2533 ià(
Œ
.
fS¹SŞid
)

2534  
FALSE
;

2536 
height
 = 
Œ
.
æF¿ùiÚ
 * 1000.0;

2538 ià(
Ï¡_height
 < 
height
 - 100)

2539  
TRUE
;

2541 
Ï¡_height
 = 
height
;

2543 
di¡ªû
 = (
vecT¬g‘Pos
 - 
v_check
).
	`L’gth
();

2546  
FALSE
;

2547 
	}
}

2549 
	gCBa£BÙ
::
	$BÙOnLadd”
()

2551 
³v
->
bu‰Ú
 |ğ
IN_FORWARD
;

2554 
fS³ed
 = 480 * 
g_æTimeF¿meIÁ”v®
;

2556 ià(
m_iLadd”Dœ
 =ğ
LADDER_DOWN
)

2558 
m_vecMoveAngËs
.
x
 = 60;

2560 
d–
 = 
	`UTIL_AngËDiff
(
³v
->
ªgËs
.
x
, -20);

2562 ià(
	`çbs
(
d–
è< 
fS³ed
)

2563 
³v
->
ªgËs
.
x
 = -20;

2566 ià(
d–
 > 0)

2567 
³v
->
ªgËs
.
x
 +ğ
fS³ed
;

2569 
³v
->
ªgËs
.
x
 -ğ
fS³ed
;

2572 ià(
m_iLadd”Dœ
 =ğ
LADDER_UP
)

2574 
m_vecMoveAngËs
.
x
 = -60;

2576 
d–
 = 
	`UTIL_AngËDiff
(
³v
->
ªgËs
.
x
, 20);

2578 ià(
	`çbs
(
d–
è< 
fS³ed
)

2579 
³v
->
ªgËs
.
x
 = 20;

2582 ià(
d–
 > 0)

2583 
³v
->
ªgËs
.
x
 +ğ
fS³ed
;

2585 
³v
->
ªgËs
.
x
 -ğ
fS³ed
;

2589 
	`CÏmpAngËs
(
³v
->
ªgËs
);

2590 
	}
}

2595 
	gCBa£BÙ
::
	$FaûPos™iÚ
(
VeùÜ
 
vecPos
)

2597 
¥“d
;

2599 
VeùÜ
 
vecDœeùiÚ
 = 
	`UTIL_VecToAngËs
(
vecPos
 - 
	`G‘GunPos™iÚ
());

2600 
vecDœeùiÚ
 = vecDœeùiÚ + 
³v
->
punchªgË
 * 
m_iSkl
 / 100.0;

2601 
vecDœeùiÚ
.
x
 *= -1.0;

2603 
	`CÏmpAngËs
(
vecDœeùiÚ
);

2606 ià(
g_bIn¡ªtTuºs
)

2607 
³v
->
v_ªgË
 = 
vecDœeùiÚ
;

2611 
VeùÜ
 
v_devŸtiÚ
 = 
vecDœeùiÚ
 - 
³v
->
v_ªgË
;

2612 
	`CÏmpAngËs
(
v_devŸtiÚ
);

2615 
tuº_skl
 = 0.3 * 
m_iSkl
 / 100;

2618 ià(
m_iAimFÏgs
 >ğ
AIM_LASTENEMY
)

2619 
¥“d
 = 0.7 + 
tuº_skl
;

2620 ià(
m_iAimFÏgs
 < 
AIM_PREDICTPATH
 && (m_iAimFÏg & 
AIM_CAMP
))

2621 
¥“d
 = 0.1 + 
tuº_skl
 / 4;

2623 
¥“d
 = 0.2 + 
tuº_skl
 / 2;

2625 
da_d—dly_m©h
 = 
	`exp
(
	`log
(
¥“d
 / 2è* 
g_iM£cv®
 / 50);

2628 
³v
->
yaw_¥“d
 = (³v->yaw_¥“d * 
da_d—dly_m©h
 + 
¥“d
 * 
v_devŸtiÚ
.
y
 * (1 - da_d—dly_m©h)è* 
g_iM£cv®
 / 50;

2629 
³v
->
p™ch_¥“d
 = (³v->p™ch_¥“d * 
da_d—dly_m©h
 + 
¥“d
 * 
v_devŸtiÚ
.
x
 * (1 - da_d—dly_m©h)è* 
g_iM£cv®
 / 50;

2633 
³v
->
p™ch_¥“d
 +ğ³v->
yaw_¥“d
 / (1.5 * (1 + 
tuº_skl
));

2634 
³v
->
yaw_¥“d
 +ğ³v->
p™ch_¥“d
 / (1 + 
tuº_skl
);

2636 ià(
	`çbs
(
³v
->
p™ch_¥“d
è>ğçbs(
v_devŸtiÚ
.
x
) &&

2637 
³v
->
p™ch_¥“d
 * 
v_devŸtiÚ
.
x
 >= 0)

2638 
³v
->
p™ch_¥“d
 = 
v_devŸtiÚ
.
x
;

2640 ià(
	`çbs
(
³v
->
yaw_¥“d
è>ğçbs(
v_devŸtiÚ
.
y
) &&

2641 
³v
->
yaw_¥“d
 * 
v_devŸtiÚ
.
y
 >= 0)

2642 
³v
->
yaw_¥“d
 = 
v_devŸtiÚ
.
y
;

2644 
VeùÜ
 
	`v_¡ifâess
(13, 13, 0);

2645 
VeùÜ
 
	`dam³r_cÛffic›Á
(2, 2, 0);

2648 ià(
m_iAimFÏgs
 < 
AIM_LASTENEMY
)

2650 
¡ifâess_muÉl›r
 = 0.3;

2653 ià(
v_devŸtiÚ
.
	`L’gth
() < 10.0)

2654 
¡ifâess_muÉl›r
 *ğ
v_devŸtiÚ
.
	`L’gth
() * 0.1;

2657 ià(
³v
->
v–oc™y
.
	`L’gth
() < 1)

2658 
¡ifâess_muÉl›r
 *= 0.5;

2661 ià(
¡ifâess_muÉl›r
 < 0.2)

2662 
¡ifâess_muÉl›r
 = 0.2;

2664 
v_¡ifâess
 = v_¡ifâes * 
¡ifâess_muÉl›r
;

2668 
³v
->
p™ch_¥“d
 = 
gpGlob®s
->
äam‘ime
 * (
v_¡ifâess
.
x
 * 
v_devŸtiÚ
.x - 
dam³r_cÛffic›Á
.x *…ev->pitch_speed);

2669 
³v
->
yaw_¥“d
 = 
gpGlob®s
->
äam‘ime
 * (
v_¡ifâess
.
y
 * 
v_devŸtiÚ
.y - 
dam³r_cÛffic›Á
.y *…ev->yaw_speed);

2673 
³v
->
p™ch_¥“d
 +ğ³v->
yaw_¥“d
 * 0.25;

2674 
³v
->
yaw_¥“d
 +ğ³v->
p™ch_¥“d
 * 0.17;

2676 
³v
->
v_ªgË
.
y
 +ğ³v->
yaw_¥“d
;

2677 
³v
->
v_ªgË
.
x
 +ğ³v->
p™ch_¥“d
;

2681 
³v
->
ªgËs
.
x
 = -³v->
v_ªgË
.x / 3;

2682 
³v
->
ªgËs
.
y
 =…ev->
v_ªgË
.y;

2684 
	`CÏmpAngËs
(
³v
->
v_ªgË
);

2685 
	`CÏmpAngËs
(
³v
->
ªgËs
);

2686 
	}
}

2688 
	gCBa£BÙ
::
	$S‘SŒaãS³ed
(
VeùÜ
 
vecMoveDœ
, 
fSŒaãS³ed
)

2690 
	`UTIL_MakeVeùÜs
(
³v
->
ªgËs
);

2692 
VeùÜ2D
 
vec2LOS
 = (
vecMoveDœ
 - 
³v
->
Üigš
).
	`Make2D
().
	`NÜm®ize
();

2693 
æDÙ
 = 
	`DÙProduù
(
vec2LOS
, 
gpGlob®s
->
v_fÜw¬d
.
	`Make2D
());

2695 iàĞ
æDÙ
 > 0 )

2697 ià(!
	`CheckW®lOnRight
())

2698 
m_æSideMoveS³ed
 = 
fSŒaãS³ed
;

2702 ià(!
	`CheckW®lOnLeá
())

2703 
m_æSideMoveS³ed
 = -
fSŒaãS³ed
;

2705 
	}
}

	@bot_sounds.cpp

8 
	~"bÙ.h
"

15 
	$SoundA‰achToTh»©
(
ediù_t
 *
pEdiù
, cÚ¡ *
pszSam¶e
, 
fVŞume
)

17 ià(
	`FNuÎEÁ
(
pEdiù
))

20 
VeùÜ
 
vecPos™iÚ
 = 
pEdiù
->
v
.
Üigš
;

21 ià(
vecPos™iÚ
 =ğ
g_vecZ”o
)

22 
vecPos™iÚ
 = 
	`VecBMod–Origš
(
pEdiù
);

24 
iIndex
 = 
	`ENTINDEX
(
pEdiù
) - 1;

25 ià(
iIndex
 < 0 || iIndex >ğ
gpGlob®s
->
maxCl›Ás
)

26 
iIndex
 = 
	`UTIL_G‘N—»¡PÏy”Index
(
vecPos™iÚ
);

28 ià(
	`¡ºcmp
("¶ay”/bh™_æesh", 
pszSam¶e
, 17) == 0 ||

29 
	`¡ºcmp
("¶ay”/h—dshÙ", 
pszSam¶e
, 15) == 0)

32 
Th»©Tab
[
iIndex
].
fH—ršgDi¡ªû
 = 800.0 * 
fVŞume
;

33 
Th»©Tab
[
iIndex
].
fTimeSoundLa¡šg
 = 
gpGlob®s
->
time
 + 0.5;

34 
Th»©Tab
[
iIndex
].
vecSoundPos™iÚ
 = 
vecPos™iÚ
;

36 ià(
	`¡ºcmp
("™ems/guÅickup", 
pszSam¶e
, 15) == 0)

39 
Th»©Tab
[
iIndex
].
fH—ršgDi¡ªû
 = 800.0 * 
fVŞume
;

40 
Th»©Tab
[
iIndex
].
fTimeSoundLa¡šg
 = 
gpGlob®s
->
time
 + 0.5;

41 
Th»©Tab
[
iIndex
].
vecSoundPos™iÚ
 = 
vecPos™iÚ
;

43 ià(
	`¡ºcmp
("w—pÚs/zoom", 
pszSam¶e
, 12) == 0)

46 
Th»©Tab
[
iIndex
].
fH—ršgDi¡ªû
 = 500.0 * 
fVŞume
;

47 
Th»©Tab
[
iIndex
].
fTimeSoundLa¡šg
 = 
gpGlob®s
->
time
 + 0.1;

48 
Th»©Tab
[
iIndex
].
vecSoundPos™iÚ
 = 
vecPos™iÚ
;

52 ià(
	`¡r¡r
(
pszSam¶e
, "_şout"è!ğ
NULL
)

55 
Th»©Tab
[
iIndex
].
fH—ršgDi¡ªû
 = 500.0 * 
fVŞume
;

56 
Th»©Tab
[
iIndex
].
fTimeSoundLa¡šg
 = 
gpGlob®s
->
time
 + 0.5;

57 
Th»©Tab
[
iIndex
].
vecSoundPos™iÚ
 = 
vecPos™iÚ
;

60 ià(
	`¡ºcmp
("™ems/9mmş", 
pszSam¶e
, 13) == 0)

63 
Th»©Tab
[
iIndex
].
fH—ršgDi¡ªû
 = 500.0 * 
fVŞume
;

64 
Th»©Tab
[
iIndex
].
fTimeSoundLa¡šg
 = 
gpGlob®s
->
time
 + 0.1;

65 
Th»©Tab
[
iIndex
].
vecSoundPos™iÚ
 = 
vecPos™iÚ
;

67 ià(
	`¡ºcmp
("ho¡age/hos", 
pszSam¶e
, 11) == 0)

70 
Th»©Tab
[
iIndex
].
fH—ršgDi¡ªû
 = 1024.0 * 
fVŞume
;

71 
Th»©Tab
[
iIndex
].
fTimeSoundLa¡šg
 = 
gpGlob®s
->
time
 + 5.0;

72 
Th»©Tab
[
iIndex
].
vecSoundPos™iÚ
 = 
vecPos™iÚ
;

74 ià(
	`¡ºcmp
("debris/bu¡m‘®", 
pszSam¶e
, 16) == 0 ||

75 
	`¡ºcmp
("debris/bu¡gÏss", 
pszSam¶e
, 16) == 0)

78 
Th»©Tab
[
iIndex
].
fH—ršgDi¡ªû
 = 1024.0 * 
fVŞume
;

79 
Th»©Tab
[
iIndex
].
fTimeSoundLa¡šg
 = 
gpGlob®s
->
time
 + 2.0;

80 
Th»©Tab
[
iIndex
].
vecSoundPos™iÚ
 = 
vecPos™iÚ
;

82 ià(
	`¡ºcmp
("doÜs/doÜmove", 
pszSam¶e
, 14) == 0)

85 
Th»©Tab
[
iIndex
].
fH—ršgDi¡ªû
 = 1024.0 * 
fVŞume
;

86 
Th»©Tab
[
iIndex
].
fTimeSoundLa¡šg
 = 
gpGlob®s
->
time
 + 3.0;

87 
Th»©Tab
[
iIndex
].
vecSoundPos™iÚ
 = 
vecPos™iÚ
;

89 
	}
}

96 
	$SoundSimuÏ‹Upd©e
(
iPÏy”Index
)

98 
	`as£¹
(
iPÏy”Index
 >= 0);

99 
	`as£¹
(
iPÏy”Index
 < 
gpGlob®s
->
maxCl›Ás
);

100 ià(
iPÏy”Index
 < 0 || iPÏy”Index >ğ
gpGlob®s
->
maxCl›Ás
)

103 
ediù_t
 *
pPÏy”
 = 
Th»©Tab
[
iPÏy”Index
].
pEdiù
;

104 
fV–oc™y
 = 
pPÏy”
->
v
.
v–oc™y
.
	`L’gth2D
();

105 
fH—rDi¡ªû
 = 0.0;

106 
fTimeSound
 = 0.0;

108 ià(
pPÏy”
->
v
.
Şdbu‰Ús
 & 
IN_ATTACK
)

110 
fH—rDi¡ªû
 = 4096.0;

111 
fTimeSound
 = 
gpGlob®s
->
time
 + 0.5;

113 ià(
pPÏy”
->
v
.
Şdbu‰Ús
 & 
IN_USE
)

115 
fH—rDi¡ªû
 = 1024.0;

116 
fTimeSound
 = 
gpGlob®s
->
time
 + 0.5;

118 ià(
pPÏy”
->
v
.
mov‘y³
 =ğ
MOVETYPE_FLY
)

120 ià(
	`abs
(
pPÏy”
->
v
.
v–oc™y
.
z
) > 50)

122 
fH—rDi¡ªû
 = 1024.0;

123 
fTimeSound
 = 
gpGlob®s
->
time
 + 0.3;

129 
fH—rDi¡ªû
 = 1024.0 * (
fV–oc™y
 / 260);

130 
fTimeSound
 = 
gpGlob®s
->
time
 + 0.3;

133 ià(
fH—rDi¡ªû
 > 0.0)

136 ià(
Th»©Tab
[
iPÏy”Index
].
fTimeSoundLa¡šg
 > 
gpGlob®s
->
time
)

139 if(
Th»©Tab
[
iPÏy”Index
].
fH—ršgDi¡ªû
 <ğ
fH—rDi¡ªû
)

142 
Th»©Tab
[
iPÏy”Index
].
fH—ršgDi¡ªû
 = 
fH—rDi¡ªû
;

143 
Th»©Tab
[
iPÏy”Index
].
fTimeSoundLa¡šg
 = 
fTimeSound
;

144 
Th»©Tab
[
iPÏy”Index
].
vecSoundPos™iÚ
 = 
pPÏy”
->
v
.
Üigš
;

150 
Th»©Tab
[
iPÏy”Index
].
fH—ršgDi¡ªû
 = 
fH—rDi¡ªû
;

151 
Th»©Tab
[
iPÏy”Index
].
fTimeSoundLa¡šg
 = 
fTimeSound
;

152 
Th»©Tab
[
iPÏy”Index
].
vecSoundPos™iÚ
 = 
pPÏy”
->
v
.
Üigš
;

155 
	}
}

	@bot_weapons.h

5 #iâdeà
BOT_WEAPONS_H


6 
	#BOT_WEAPONS_H


	)

8 
	#WEAPON_P228
 1

	)

9 
	#WEAPON_SHIELDGUN
 2

	)

10 
	#WEAPON_SCOUT
 3

	)

11 
	#WEAPON_HEGRENADE
 4

	)

12 
	#WEAPON_XM1014
 5

	)

13 
	#WEAPON_C4
 6

	)

14 
	#WEAPON_MAC10
 7

	)

15 
	#WEAPON_AUG
 8

	)

16 
	#WEAPON_SMOKEGRENADE
 9

	)

17 
	#WEAPON_ELITE
 10

	)

18 
	#WEAPON_FIVESEVEN
 11

	)

19 
	#WEAPON_UMP45
 12

	)

20 
	#WEAPON_SG550
 13

	)

21 
	#WEAPON_GALIL
 14

	)

22 
	#WEAPON_FAMAS
 15

	)

23 
	#WEAPON_USP
 16

	)

24 
	#WEAPON_GLOCK18
 17

	)

25 
	#WEAPON_AWP
 18

	)

26 
	#WEAPON_MP5NAVY
 19

	)

27 
	#WEAPON_M249
 20

	)

28 
	#WEAPON_M3
 21

	)

29 
	#WEAPON_M4A1
 22

	)

30 
	#WEAPON_TMP
 23

	)

31 
	#WEAPON_G3SG1
 24

	)

32 
	#WEAPON_FLASHBANG
 25

	)

33 
	#WEAPON_DEAGLE
 26

	)

34 
	#WEAPON_SG552
 27

	)

35 
	#WEAPON_AK47
 28

	)

36 
	#WEAPON_KNIFE
 29

	)

37 
	#WEAPON_P90
 30

	)

38 
	#WEAPON_ARMOR
 31

	)

39 
	#WEAPON_ARMORHELM
 32

	)

40 
	#WEAPON_DEFUSER
 33

	)

42 
	#MAX_WEAPONS
 32

	)

44 
	#WEAPON_PRIMARY
 ((1<<
WEAPON_XM1014
è| (1<<
WEAPON_M3
è| (1<<
WEAPON_MAC10
è| (1<<
WEAPON_UMP45
è| (1<<
WEAPON_MP5NAVY
è| (1<<
WEAPON_TMP
è| (1<<
WEAPON_P90
è| (1<<
WEAPON_AUG
è| (1<<
WEAPON_M4A1
è| (1<<
WEAPON_SG552
è| (1<<
WEAPON_AK47
è| (1<<
WEAPON_SCOUT
è| (1<<
WEAPON_SG550
è| (1<<
WEAPON_AWP
è| (1<<
WEAPON_G3SG1
è| (1<<
WEAPON_M249
è| (1<<
WEAPON_FAMAS
è| (1<<
WEAPON_GALIL
))

	)

46 
	#WEAPON_SECONDARY
 ((1<<
WEAPON_P228
è| (1<<
WEAPON_ELITE
è| (1<<
WEAPON_USP
è| (1<<
WEAPON_GLOCK18
è| (1<<
WEAPON_DEAGLE
è| (1<<
WEAPON_FIVESEVEN
))

	)

48 
	#MIN_BURST_DISTANCE
 512.0

	)

50 
	sbÙ_w—pÚ_s


52 
	mszCÏs¢ame
[64];

53 
	miAmmo1
;

54 
	miAmmo1Max
;

55 
	miSlÙ
;

56 
	miPos™iÚ
;

57 
	miId
;

58 
	miFÏgs
;

59 } 
	tbÙ_w—pÚ_t
;

	@compress.cpp

7 
	~<¡dio.h
>

8 
	~<¡dlib.h
>

9 
	~<¡ršg.h
>

10 
	~<ùy³.h
>

11 
	~<m®loc.h
>

13 #ifdeà
_MSC_VER


14 #´agm¨
w¬nšg
 (
di§bË
: 4244)

17 
	#N
 4096

	)

18 
	#F
 18

	)

19 
	#THRESHOLD
 2

	)

21 
	#NIL
 
N


	)

24 
	g‹xtsize
 = 0,

25 
	gcodesize
 = 0,

26 
	g´štcouÁ
 = 0;

28 
	g‹xt_buf
[
N
 + 
F
 - 1];

30 
	gm©ch_pos™iÚ
, 
	gm©ch_Ëngth
,

32 
	glsÚ
[
N
 + 1], 
	grsÚ
[N + 257], 
	gdad
[N + 1];

35 
	$In™T»e
()

37 
i
;

47 
i
 = 
N
 + 1; i <ğN + 256; i++è
rsÚ
[i] = 
NIL
;

48 
i
 = 0; i < 
N
; i++è
dad
[i] = 
NIL
;

49 
	}
}

51 
	$In£¹Node
(
r
)

59 
i
, 
p
, 
cmp
;

60 *
key
;

62 
cmp
 = 1; 
key
 = &
‹xt_buf
[
r
]; 
p
 = 
N
 + 1 + key[0];

63 
rsÚ
[
r
] = 
lsÚ
[r] = 
NIL
; 
m©ch_Ëngth
 = 0;

65 ià(
cmp
 >= 0) {

66 ià(
rsÚ
[
p
] !ğ
NIL
)… =„son[p];

67 { 
rsÚ
[
p
] = 
r
; 
dad
[r] =…; ; }

69 ià(
lsÚ
[
p
] !ğ
NIL
)… =†son[p];

70 { 
lsÚ
[
p
] = 
r
; 
dad
[r] =…; ; }

72 
i
 = 1; i < 
F
; i++)

73 ià((
cmp
 = 
key
[
i
] - 
‹xt_buf
[
p
 + i]) != 0) ;

74 ià(
i
 > 
m©ch_Ëngth
) {

75 
m©ch_pos™iÚ
 = 
p
;

76 ià((
m©ch_Ëngth
 = 
i
è>ğ
F
) ;

79 
dad
[
r
] = dad[
p
]; 
lsÚ
[r] =†sÚ[p]; 
rsÚ
[r] =„son[p];

80 
dad
[
lsÚ
[
p
]] = 
r
; dad[
rsÚ
[p]] =„;

81 ià(
rsÚ
[
dad
[
p
]] =ğpèrsÚ[dad[p]] = 
r
;

82 
lsÚ
[
dad
[
p
]] = 
r
;

83 
dad
[
p
] = 
NIL
;

84 
	}
}

86 
	$D–‘eNode
(
p
)

88 
q
;

90 ià(
dad
[
p
] =ğ
NIL
) ;

91 ià(
rsÚ
[
p
] =ğ
NIL
è
q
 = 
lsÚ
[p];

92 ià(
lsÚ
[
p
] =ğ
NIL
è
q
 = 
rsÚ
[p];

94 
q
 = 
lsÚ
[
p
];

95 ià(
rsÚ
[
q
] !ğ
NIL
) {

96 dØ{ 
q
 = 
rsÚ
[q]; } rsÚ[q] !ğ
NIL
);

97 
rsÚ
[
dad
[
q
]] = 
lsÚ
[q]; dad[lson[q]] = dad[q];

98 
lsÚ
[
q
] =†sÚ[
p
]; 
dad
[lson[p]] = q;

100 
rsÚ
[
q
] =„sÚ[
p
]; 
dad
[rson[p]] = q;

102 
dad
[
q
] = dad[
p
];

103 ià(
rsÚ
[
dad
[
p
]] =ğpèrsÚ[dad[p]] = 
q
; 
lsÚ
[dad[p]] = q;

104 
dad
[
p
] = 
NIL
;

105 
	}
}

107 
	$Encode
(*
f’ame
, * 
h—d”
, 
h—d”size
, *
bufãr
, 
bufsize
)

109 
i
, 
c
, 
Ën
, 
r
, 
s
, 
Ï¡_m©ch_Ëngth
, 
code_buf_±r
;

110 
code_buf
[17], 
mask
;

111 
buåŒ
 = 0;

112 
FILE
 *
pOut
;

114 
pOut
 = 
	`fİ’
(
f’ame
, "wb");

115 if(
pOut
 =ğ
NULL
)

119 
	`fwr™e
(
h—d”
,
h—d”size
,1,
pOut
);

121 
	`In™T»e
();

122 
code_buf
[0] = 0;

126 
code_buf_±r
 = 
mask
 = 1;

127 
s
 = 0; 
r
 = 
N
 - 
F
;

128 
i
 = 
s
; i < 
r
; i++è
‹xt_buf
[i] = ' ';

130 
Ën
 = 0;†’ < 
F
 && 
buåŒ
 < 
bufsize
;†en++)

132 
c
 = 
bufãr
[
buåŒ
++];

133 
‹xt_buf
[
r
 + 
Ën
] = 
c
;

136 ià((
‹xtsize
 = 
Ën
) == 0)  -1;

137 
i
 = 1; i <ğ
F
; i++è
	`In£¹Node
(
r
 - i);

141 
	`In£¹Node
(
r
);

144 ià(
m©ch_Ëngth
 > 
Ën
) match_length =†en;

146 ià(
m©ch_Ëngth
 <ğ
THRESHOLD
) {

147 
m©ch_Ëngth
 = 1;

148 
code_buf
[0] |ğ
mask
;

149 
code_buf
[
code_buf_±r
++] = 
‹xt_buf
[
r
];

151 
code_buf
[
code_buf_±r
++] = (è
m©ch_pos™iÚ
;

152 
code_buf
[
code_buf_±r
++] = ()

153 (((
m©ch_pos™iÚ
 >> 4) & 0xf0)

154 | (
m©ch_Ëngth
 - (
THRESHOLD
 + 1)));

157 ià((
mask
 <<= 1) == 0) {

158 
i
 = 0; i < 
code_buf_±r
; i++)

159 
	`putc
(
code_buf
[
i
], 
pOut
);

160 
codesize
 +ğ
code_buf_±r
;

161 
code_buf
[0] = 0; 
code_buf_±r
 = 
mask
 = 1;

163 
Ï¡_m©ch_Ëngth
 = 
m©ch_Ëngth
;

164 
i
 = 0; i < 
Ï¡_m©ch_Ëngth
 &&

165 
buåŒ
 < 
bufsize
; 
i
++)

167 
c
 = 
bufãr
[
buåŒ
++];

168 
	`D–‘eNode
(
s
);

169 
‹xt_buf
[
s
] = 
c
;

170 ià(
s
 < 
F
 - 1è
‹xt_buf
[ + 
N
] = 
c
;

173 
s
 = ( + 1è& (
N
 - 1); 
r
 = (r + 1) & (N - 1);

176 
	`In£¹Node
(
r
);

179 ià((
‹xtsize
 +ğ
i
è> 
´štcouÁ
) {

180 
	`´štf
("%12ld\r", 
‹xtsize
); 
´štcouÁ
 += 1024;

185 
i
++ < 
Ï¡_m©ch_Ëngth
) {

186 
	`D–‘eNode
(
s
);

187 
s
 = ( + 1è& (
N
 - 1); 
r
 = (r + 1) & (N - 1);

188 ià(--
Ën
è
	`In£¹Node
(
r
);

190 } 
Ën
 > 0);

191 ià(
code_buf_±r
 > 1) {

192 
i
 = 0; i < 
code_buf_±r
; i++è
	`putc
(
code_buf
[i], 
pOut
);

193 
codesize
 +ğ
code_buf_±r
;

196 
	`´štf
("IÀ: %ld by‹s\n", 
‹xtsize
);

197 
	`´štf
("Out: %ld by‹s\n", 
codesize
);

198 
	`´štf
("Out/In: %.3f\n", ()
codesize
 / 
‹xtsize
);

200 
	`fşo£
(
pOut
);

202  
codesize
;

203 
	}
}

206 
	$Decode
(*
f’ame
, 
h—d”size
, *
bufãr
, 
bufsize
)

208 
i
, 
j
, 
k
, 
r
, 
c
;

209 
æags
;

210 
buåŒ
=0;

211 
FILE
 *
pIn
;

213 
pIn
 = 
	`fİ’
(
f’ame
, "rb");

214 if(
pIn
 =ğ
NULL
)

218 
	`f£ek
(
pIn
,
h—d”size
,
SEEK_SET
);

220 
i
 = 0; i < 
N
 - 
F
; i++è
‹xt_buf
[i] = ' ';

221 
r
 = 
N
 - 
F
; 
æags
 = 0;

223 ià(((
æags
 >>= 1) & 256) == 0) {

224 ià((
c
 = 
	`g‘c
(
pIn
)è=ğ
EOF
) ;

225 
æags
 = 
c
 | 0xff00;

227 ià(
æags
 & 1) {

228 ià((
c
 = 
	`g‘c
(
pIn
)è=ğ
EOF
) ;

229 
bufãr
[
buåŒ
++] = 
c
;

230 if(
buåŒ
 > 
bufsize
)

232 
‹xt_buf
[
r
++] = 
c
;

233 
r
 &ğ(
N
 - 1);

235 ià((
i
 = 
	`g‘c
(
pIn
)è=ğ
EOF
) ;

236 ià((
j
 = 
	`g‘c
(
pIn
)è=ğ
EOF
) ;

237 
i
 |ğ((
j
 & 0xf0è<< 4); j = (j & 0x0fè+ 
THRESHOLD
;

238 
k
 = 0; k <ğ
j
; k++) {

239 
c
 = 
‹xt_buf
[(
i
 + 
k
è& (
N
 - 1)];

240 
bufãr
[
buåŒ
++] = 
c
;

241 if(
buåŒ
 > 
bufsize
)

243 
‹xt_buf
[
r
++] = 
c
;

244 
r
 &ğ(
N
 - 1);

249 
	`fşo£
(
pIn
);

250  
buåŒ
;

251 
	}
}

	@cstrike.cpp

7 
	~"bÙ.h
"

12 
	$RoundIn™
()

14 ià(!
g_bRoundEnded
 && 
g_bIsV”siÚ16
)

17 
g_bRoundEnded
 = 
FALSE
;

19 
i
;

21 
i
 = 0; i < 
gpGlob®s
->
maxCl›Ás
; i++)

23 ià(
g_rgpBÙs
[
i
])

24 
g_rgpBÙs
[
i
]->
	`NewRound
();

25 
iRadioS–eù
[
i
] = 0;

28 
g_bBombPÏÁed
 = 
FALSE
;

29 
g_bBombSaySŒšg
 = 
FALSE
;

30 
g_fTimeBombPÏÁed
 = 0.0;

31 
g_vecBomb
 = 
g_vecZ”o
;

34 
i
 = 0; i < 
MAXNUMBOMBSPOTS
; i++)

35 
g_rgiBombSpÙsVis™ed
[
i
] = -1;

37 
g_iLa¡BombPošt
 = -1;

38 
g_fTimeNextBombUpd©e
 = 0.0;

40 
g_bL—d”Cho£nT
 = 
FALSE
;

41 
g_bL—d”Cho£nCT
 = 
FALSE
;

43 
g_rgfLa¡RadioTime
[0] = 0.0;

44 
g_rgfLa¡RadioTime
[1] = 0.0;

45 
g_bBÙsCªPau£
 = 
FALSE
;

48 
i
 = 0; i < 
gpGlob®s
->
maxCl›Ás
; i++)

50 
Th»©Tab
[
i
].
vecSoundPos™iÚ
 = 
g_vecZ”o
;

51 
Th»©Tab
[
i
].
fH—ršgDi¡ªû
 = 0.0;

52 
Th»©Tab
[
i
].
fTimeSoundLa¡šg
 = 0.0;

55 
	`Upd©eGlob®Ex³r›nûD©a
();

58 
g_fTimeRoundS¹
 = 
gpGlob®s
->
time
;

59 
g_fTimeRoundEnd
 = 
	`CVAR_GET_FLOAT
("mp_roundtime");

60 
g_fTimeRoundEnd
 *= 60;

61 
g_fTimeRoundEnd
 +ğ
	`CVAR_GET_FLOAT
("mp_freezetime");

62 
g_fTimeRoundMid
 = 
g_fTimeRoundEnd
 / 2;

63 
g_fTimeRoundEnd
 +ğ
gpGlob®s
->
time
;

64 
g_fTimeRoundMid
 +ğ
gpGlob®s
->
time
;

65 
	}
}

68 
VeùÜ
 
	$G‘BombPos™iÚ
()

70 
VeùÜ
 
vecBomb
 = 
	`VeùÜ
(9999, 9999, 9999);

71 
ediù_t
 *
³Á
 = 
NULL
;

73 !
	`FNuÎEÁ
(
³Á
 = 
	`FIND_ENTITY_BY_STRING
(…ent, "classname", "grenade" )))

75 ià(
	`FSŒEq
(
	`STRING
(
³Á
->
v
.
mod–
) + 9, "c4.mdl"))

77 
vecBomb
 = 
³Á
->
v
.
Üigš
;

82 
	`as£¹
(
vecBomb
 !ğ
	`VeùÜ
(9999, 9999, 9999));

84  
vecBomb
;

85 
	}
}

89 
boŞ
 
	$BÙH—rsBomb
(
VeùÜ
 
vecBÙPos
,VeùÜ *
pBombPos
)

91 ià(
g_vecBomb
 =ğ
g_vecZ”o
)

92 
g_vecBomb
 = 
	`G‘BombPos™iÚ
();

94 cÚ¡ 
fDi¡ªû2
 = 
BOMBMAXHEARDISTANCE
 * BOMBMAXHEARDISTANCE;

96 ià(
	`L’gthSqu¬ed
(
vecBÙPos
 - 
g_vecBomb
è< 
fDi¡ªû2
)

98 *
pBombPos
 = 
g_vecBomb
;

99  
TRUE
;

102  
FALSE
;

103 
	}
}

105 
	$CTBombPoštCË¬
(
iIndex
)

107 
i
 = 0; i < 
MAXNUMBOMBSPOTS
; i++)

109 ià(
g_rgiBombSpÙsVis™ed
[
i
] == -1)

111 
g_rgiBombSpÙsVis™ed
[
i
] = 
iIndex
;

114 ià(
g_rgiBombSpÙsVis™ed
[
i
] =ğ
iIndex
)

117 
	}
}

120 
boŞ
 
	$WasBombPoštVis™ed
(
iIndex
)

122 
i
 = 0; i < 
MAXNUMBOMBSPOTS
; i++)

124 ià(
g_rgiBombSpÙsVis™ed
[
i
] == -1)

125  
FALSE
;

126 ià(
g_rgiBombSpÙsVis™ed
[
i
] =ğ
iIndex
)

127  
TRUE
;

129  
FALSE
;

130 
	}
}

133 
boŞ
 
	$W—pÚShoÙsThru
(
iId
)

135 
i
 = 0;

137 
cs_w—pÚ_£Ëù
[
i
].
iId
)

139 ià(
cs_w—pÚ_£Ëù
[
i
].
iId
 == iId)

141 ià(
cs_w—pÚ_£Ëù
[
i
].
bShoÙsThru
)

142  
TRUE
;

144  
FALSE
;

146 
i
++;

148  
FALSE
;

149 
	}
}

151 
boŞ
 
	$W—pÚIsSn”
(
iId
)

153 ià(
iId
 =ğ
WEAPON_AWP
 || iId =ğ
WEAPON_G3SG1
 ||

154 
iId
 =ğ
WEAPON_SCOUT
 || iId =ğ
WEAPON_SG550
)

155  
TRUE
;

156  
FALSE
;

157 
	}
}

159 
	$UTIL_G‘T—m
(
ediù_t
 *
pEÁ™y
)

164 
s
;

165 
c
[2];

166 } 
t
;

168 *
p
 = 
g_’gfuncs
.
	`pâInfoKeyV®ue
(g_’gfuncs.
	`pâG‘InfoKeyBufãr
(
pEÁ™y
), "model");

169 
t
.
c
[0] = 
p
[0];

170 
t
.
c
[1] = 
p
[1];

172 ià(
t
.
s
 == (('e' << 8) + 't') ||

173 
t
.
s
 == (('e' << 8) + 'l') ||

174 
t
.
s
 == (('r' << 8) + 'a') ||

175 
t
.
s
 == (('u' << 8) + 'g') ||

176 
t
.
s
 == (('i' << 8) + 'm'))

177  
TEAM_TERRORIST
;

179  
TEAM_CT
;

181  
Th»©Tab
[
	`ENTINDEX
(
pEÁ™y
è- 1].
iT—m
;

183 
	}
}

187 
	$Upd©eGlob®Ex³r›nûD©a
()

190 ià(
g_iNumWaypošts
 < 1 || !
g_bU£Ex³r›nû
 || 
g_bWaypoštsChªged
)

193 
mš_damage
;

194 
aù_damage
;

195 
iBe¡Index
, 
i
, 
j
;

196 
boŞ
 
bReÿlcKls
 = 
FALSE
;

199 
i
 = 0; i < 
g_iNumWaypošts
; i++)

201 
mš_damage
 = 0;

202 
iBe¡Index
 = -1;

204 
j
 = 0; j < 
g_iNumWaypošts
; j++)

206 ià(
i
 =ğ
j
)

209 
aù_damage
 = (
pBÙEx³r›nûD©a
 + 
i
 * 
g_iNumWaypošts
 + 
j
)->
uT—m0Damage
;

211 ià(
aù_damage
 > 
mš_damage
)

213 
mš_damage
 = 
aù_damage
;

214 
iBe¡Index
 = 
j
;

218 ià(
mš_damage
 > 
MAX_DAMAGE_VAL
)

219 
bReÿlcKls
 = 
TRUE
;

221 (
pBÙEx³r›nûD©a
 + 
i
 * 
g_iNumWaypošts
 + i)->
iT—m0_dªg”_šdex
 = ()
iBe¡Index
;

225 
i
 = 0; i < 
g_iNumWaypošts
; i++)

227 
mš_damage
 = 0;

228 
iBe¡Index
 = -1;

229 
j
 = 0; j < 
g_iNumWaypošts
; j++)

231 ià(
i
 =ğ
j
)

234 
aù_damage
 = (
pBÙEx³r›nûD©a
 + 
i
 * 
g_iNumWaypošts
 + 
j
)->
uT—m1Damage
;

236 ià(
aù_damage
 > 
mš_damage
)

238 
mš_damage
 = 
aù_damage
;

239 
iBe¡Index
 = 
j
;

243 ià(
mš_damage
 >ğ
MAX_DAMAGE_VAL
)

244 
bReÿlcKls
 = 
TRUE
;

246 (
pBÙEx³r›nûD©a
 + 
i
 * 
g_iNumWaypošts
 + i)->
iT—m1_dªg”_šdex
 = ()
iBe¡Index
;

250 ià(
bReÿlcKls
)

252 
iCl
;

254 
i
 = 0; i < 
g_iNumWaypošts
; i++)

256 
j
 = 0; j < 
g_iNumWaypošts
; j++)

258 ià(
i
 =ğ
j
)

261 
iCl
 = (
pBÙEx³r›nûD©a
 + 
i
 * 
g_iNumWaypošts
 + 
j
)->
uT—m0Damage
;

262 
iCl
 -ğ
MAX_DAMAGE_VAL
 / 2;

263 ià(
iCl
 < 0)

264 
iCl
 = 0;

265 (
pBÙEx³r›nûD©a
 + 
i
 * 
g_iNumWaypošts
 + 
j
)->
uT—m0Damage
 = ()
iCl
;

267 
iCl
 = (
pBÙEx³r›nûD©a
 + 
i
 * 
g_iNumWaypošts
 + 
j
)->
uT—m1Damage
;

268 
iCl
 -ğ
MAX_DAMAGE_VAL
 / 2;

269 ià(
iCl
 < 0)

270 
iCl
 = 0;

271 (
pBÙEx³r›nûD©a
 + 
i
 * 
g_iNumWaypošts
 + 
j
)->
uT—m1Damage
 = ()
iCl
;

276 
g_cKlHi¡Üy
++;

277 ià(
g_cKlHi¡Üy
 =ğ
MAX_KILL_HIST
)

279 
byShiá
 = 
gpGlob®s
->
maxCl›Ás
 / 2;

280 
i
 = 0; i < 
g_iNumWaypošts
; i++)

282 (
pBÙEx³r›nûD©a
 + 
i
 * 
g_iNumWaypošts
 + i)->
uT—m0Damage
 /ğ
byShiá
;

283 (
pBÙEx³r›nûD©a
 + 
i
 * 
g_iNumWaypošts
 + i)->
uT—m1Damage
 /ğ
byShiá
;

285 
g_cKlHi¡Üy
 = 1;

287 
	}
}

292 
	$BÙCŞËùGßlEx³r›nû
(
CBa£BÙ
 *
pBÙ
, 
iDamage
, 
iT—m
)

294 ià(
g_iNumWaypošts
 < 1 || !
g_bU£Ex³r›nû
 || 
g_bWaypoštsChªged
 || 
pBÙ
->
m_iCho£nGßlIndex
 < 0 ||…BÙ->
m_iP»vGßlIndex
 < 0)

300 ià(
pBÙ
->
³v
->
h—Éh
 - 
iDamage
 <= 0)

302 
iWPTV®ue
;

303 ià(
iT—m
 =ğ
TEAM_TERRORIST
)

305 
iWPTV®ue
 = (
pBÙEx³r›nûD©a
 + 
pBÙ
->
m_iCho£nGßlIndex
 * 
g_iNumWaypošts
 +…BÙ->
m_iP»vGßlIndex
)->
wT—m0V®ue
;

306 
iWPTV®ue
 -ğ
pBÙ
->
³v
->
h—Éh
 / 20;

307 ià(
iWPTV®ue
 < -
MAX_GOAL_VAL
)

308 
iWPTV®ue
 = -
MAX_GOAL_VAL
;

309 ià(
iWPTV®ue
 > 
MAX_GOAL_VAL
)

310 
iWPTV®ue
 = 
MAX_GOAL_VAL
;

311 (
pBÙEx³r›nûD©a
 + 
pBÙ
->
m_iCho£nGßlIndex
 * 
g_iNumWaypošts
 +…BÙ->
m_iP»vGßlIndex
)->
wT—m0V®ue
 = (sigÃd )
iWPTV®ue
;

315 
iWPTV®ue
 = (
pBÙEx³r›nûD©a
 + 
pBÙ
->
m_iCho£nGßlIndex
 * 
g_iNumWaypošts
 +…BÙ->
m_iP»vGßlIndex
)->
wT—m1V®ue
;

316 
iWPTV®ue
 -ğ
pBÙ
->
³v
->
h—Éh
 / 20;

317 ià(
iWPTV®ue
 < -
MAX_GOAL_VAL
)

318 
iWPTV®ue
 = -
MAX_GOAL_VAL
;

319 ià(
iWPTV®ue
 > 
MAX_GOAL_VAL
)

320 
iWPTV®ue
 = 
MAX_GOAL_VAL
;

321 (
pBÙEx³r›nûD©a
 + 
pBÙ
->
m_iCho£nGßlIndex
 * 
g_iNumWaypošts
 +…BÙ->
m_iP»vGßlIndex
)->
wT—m1V®ue
 = (sigÃd )
iWPTV®ue
;

324 
	}
}

329 
	$BÙCŞËùEx³r›nûD©a
(
ediù_t
 *
pViùimEdiù
,ƒdiù_ˆ*
pA‰ack”Ediù
, 
iDamage
)

331 ià(
	`FNuÎEÁ
(
pViùimEdiù
è|| FNuÎEÁ(
pA‰ack”Ediù
è|| !
g_bU£Ex³r›nû
)

334 
iViùimT—m
 = 
	`UTIL_G‘T—m
(
pViùimEdiù
);

335 
iA‰ack”T—m
 = 
	`UTIL_G‘T—m
(
pA‰ack”Ediù
);

337 ià(
iViùimT—m
 =ğ
iA‰ack”T—m
)

340 
CBa£BÙ
 *
pBÙ
 = CBa£BÙ::
	`In¡ªû
(
pViùimEdiù
);

343 ià(
pBÙ
)

344 
pBÙ
->
m_æGßlV®ue
 -ğ
iDamage
;

346 
pBÙ
 = 
CBa£BÙ
::
	`In¡ªû
(
pA‰ack”Ediù
);

348 ià(
pBÙ
)

349 
pBÙ
->
m_æGßlV®ue
 +ğ
iDamage
;

352 
ViùimIndex
 = 
	`WaypoštFšdN—»¡
(
pViùimEdiù
->
v
.
Üigš
);

353 
A‰ack”Index
 = 
	`WaypoštFšdN—»¡
(
pA‰ack”Ediù
->
v
.
Üigš
);

355 ià(
ViùimIndex
 =ğ
A‰ack”Index
 || VictimIndex == -1 || AttackerIndex == -1)

358 ià(
pViùimEdiù
->
v
.
h—Éh
 - 
iDamage
 < 0)

360 ià(
iViùimT—m
 =ğ
TEAM_TERRORIST
)

361 (
pBÙEx³r›nûD©a
 + 
ViùimIndex
 * 
g_iNumWaypošts
 + ViùimIndex)->
uT—m0Damage
++;

363 (
pBÙEx³r›nûD©a
 + 
ViùimIndex
 * 
g_iNumWaypošts
 + ViùimIndex)->
uT—m1Damage
++;

365 ià((
pBÙEx³r›nûD©a
 + 
ViùimIndex
 * 
g_iNumWaypošts
 + ViùimIndex)->
uT—m0Damage
 > 240)

366 (
pBÙEx³r›nûD©a
 + 
ViùimIndex
 * 
g_iNumWaypošts
 + ViùimIndex)->
uT—m0Damage
 = 240;

368 ià((
pBÙEx³r›nûD©a
 + 
ViùimIndex
 * 
g_iNumWaypošts
 + ViùimIndex)->
uT—m1Damage
 > 240)

369 (
pBÙEx³r›nûD©a
 + 
ViùimIndex
 * 
g_iNumWaypošts
 + ViùimIndex)->
uT—m1Damage
 = 240;

372 
iV®ue
;

375 ià(
iViùimT—m
 =ğ
TEAM_TERRORIST
)

377 
iV®ue
 = (
pBÙEx³r›nûD©a
 + 
ViùimIndex
 * 
g_iNumWaypošts
 + 
A‰ack”Index
)->
uT—m0Damage
;

378 
iV®ue
 +ğ()
iDamage
 / 10.0;

379 ià(
iV®ue
 > 
MAX_DAMAGE_VAL
)

380 
iV®ue
 = 
MAX_DAMAGE_VAL
;

381 (
pBÙEx³r›nûD©a
 + 
ViùimIndex
 * 
g_iNumWaypošts
 + 
A‰ack”Index
)->
uT—m0Damage
 = ()
iV®ue
;

385 
iV®ue
 = (
pBÙEx³r›nûD©a
 + 
ViùimIndex
 * 
g_iNumWaypošts
 + 
A‰ack”Index
)->
uT—m1Damage
;

386 
iV®ue
 +ğ()
iDamage
 / 10.0;

387 ià(
iV®ue
 > 
MAX_DAMAGE_VAL
)

388 
iV®ue
 = 
MAX_DAMAGE_VAL
;

389 (
pBÙEx³r›nûD©a
 + 
ViùimIndex
 * 
g_iNumWaypošts
 + 
A‰ack”Index
)->
uT—m1Damage
 = ()
iV®ue
;

391 
	}
}

	@dllapi.cpp

8 
	~"bÙ.h
"

10 
DLL_GLOBAL
 cÚ¡ 
VeùÜ
 
	gg_vecZ”o
 = Vector(0, 0, 0);

12 
GETENTITYAPI
 
Ùh”_G‘EÁ™yAPI
;

13 
GETNEWDLLFUNCTIONS
 
Ùh”_G‘NewDLLFunùiÚs
;

14 
DLL_FUNCTIONS
 
	gÙh”_gFunùiÚTabË
;

15 
SERVER_GETBLENDINGINTERFACE
 
	gÙh”_S”v”_G‘BËndšgIÁ”çû
 = 
NULL
;

17 
STRINGNODE
 *
	gpBÙNames
;

18 
STRINGNODE
 *
	gpU£dBÙNames
[31];

19 
STRINGNODE
 *
	gpKlCh©
;

20 
STRINGNODE
 *
	gpBombCh©
;

21 
STRINGNODE
 *
	gpD—dCh©
;

22 
STRINGNODE
 *
	gpU£dD—dSŒšgs
[8];

23 
»¶ynode_t
 *
	gpCh©R•l›s
 = 
NULL
;

24 
STRINGNODE
 *
	gpCh©NoKeywÜd
;

25 
ü—‹bÙ_t
 
	gBÙC»©eTab
[32];

26 
th»©_t
 
	gTh»©Tab
[32];

27 
ediù_t
 *
	gpHo¡Ediù
 = 
NULL
;

28 
boŞ
 
	gbEd™Noş
 = 
FALSE
;

29 
	gg_sMod–IndexLa£r
;

30 
	gg_sMod–IndexA¼ow
;

31 
	gg_æBÙCheckTime
 = 0.0;

32 
	gg_iC»©eS¹Index
 = -1, 
	gg_iRemoveS¹Index
 = -1;

33 
	giStÜeAddbÙV¬s
[4];

34 
u£rm’u_t
 
	giU£rInM’u
 = 
MENU_NONE
;

35 
cv¬_t
 
g_cv¬WPTDœÇme
;

36 
boŞ
 
isFakeCl›ÁCommªd
;

38 
cv¬_t
 
	gg_cv¬BÙQuÙa
 = {"yapb_quota", "0"};

39 
cv¬_t
 
	gg_cv¬BÙAutoVaÿ‹
 = {"yapb_autovacate", "0"};

40 
cv¬_t
 
	gg_cv¬MšBÙSkl
 = {"yapb_minskill", "60"};

41 
cv¬_t
 
	gg_cv¬MaxBÙSkl
 = {"yapb_maxskill", "100"};

42 
cv¬_t
 
	gg_cv¬MaxNumFŞlow
 = {"yapb_followuser", "3"};

43 
cv¬_t
 
	gg_cv¬TimeSoundUpd©e
 = {"yapb_timersound", "0.5"};

44 
cv¬_t
 
	gg_cv¬TimePickupUpd©e
 = {"yapb_timerpickup", "0.5"};

45 
cv¬_t
 
	gg_cv¬TimeG»ÇdeUpd©e
 = {"yapb_timergrenade", "0.5"};

46 
cv¬_t
 
	gg_cv¬DebugGßlIndex
 = {"yapb_debuggoal", "-1"};

47 
cv¬_t
 
	gg_cv¬U£Ex³r›nû
 = {"yapb_useexp", "1"};

48 
cv¬_t
 
	gg_cv¬AutoSaveEx³r›nû
 = {"yapb_autosaveexp", "1"};

49 
cv¬_t
 
	gg_cv¬BÙCh©
 = {"yapb_botchat", "1"};

50 
cv¬_t
 
	gg_cv¬BÙU£Radio
 = {"yapb_botuseradio", "1"};

51 
cv¬_t
 
	gg_cv¬JasÚMode
 = {"yapb_jasonmode", "0"};

52 
cv¬_t
 
	gg_cv¬D‘aNames
 = {"yapb_detailnames", "1"};

53 
cv¬_t
 
	gg_cv¬In¡ªtTuºs
 = {"yapb_inhumanturns", "0"};

54 
cv¬_t
 
	gg_cv¬ShoÙThruW®ls
 = {"yapb_shootthruwalls", "1"};

55 
cv¬_t
 
	gg_cv¬AÎowVÙes
 = {"yapb_votekick", "1"};

56 
cv¬_t
 
	gg_cv¬BÙS´ay
 = {"yapb_botspray", "1"};

57 
cv¬_t
 
	gg_cv¬BÙBuy
 = {"yapb_botbuy", "1"};

61 
m’u‹xt_t
 
	gm’uPODMaš
 = {

75 
m’u‹xt_t
 
	gm’uS–eùW—pÚMode
 = {

88 
m’u‹xt_t
 
	gm’uS–eùBÙP”sÚ®™y
 = {

97 
m’u‹xt_t
 
	gm’uS–eùBÙskl
 = {

109 
m’u‹xt_t
 
	gm’uS–eùT—m
 = {

118 
m’u‹xt_t
 
	gm’uS–eùTMod–
 = {

129 
m’u‹xt_t
 
	gm’uS–eùCTMod–
 = {

140 
m’u‹xt_t
 
	gm’uWaypoštM’u
 = {

155 
m’u‹xt_t
 
	gm’uWaypoštM’u2
 = {

170 
m’u‹xt_t
 
	gm’uWaypoštRadius
 = {

185 
m’u‹xt_t
 
	gm’uWaypoštAdd
 = {

200 
m’u‹xt_t
 
	gm’uWaypoštFÏg
 = {

216 
	~<time.h
>

219 
	$G‘BudNumb”
()

221 cÚ¡ *
d©e
 = 
__DATE__
;

223 *
mÚ
[12] =

225 
mÚd
[12] =

228 
m
 = 0, 
d
 = 0, 
y
 = 0;

230 
m
 = 0; m < 11; m++)

232 ià(
	`¡ºcmp
(&
d©e
[0], 
mÚ
[
m
], 3) == 0)

234 
d
 +ğ
mÚd
[
m
];

237 
d
 +ğ
	`©oi
Ğ&
d©e
[4] ) - 1;

238 
y
 = 
	`©oi
Ğ&
d©e
[7] ) - 2000;

240 
usBudNumb”
 = 
d
 + ()((
y
 - 1) * 365.25);

243 ià((
y
 % 4è=ğ0 && 
m
 > 1)

244 
usBudNumb”
 += 1;

246  
usBudNumb”
 - 1114;

247 
	}
}

250 
	$PODBÙ_S”v”Commªd
()

252 cÚ¡ *
pcmd
 = 
	`CMD_ARGV
(1);

253 cÚ¡ *
¬g1
 = 
	`CMD_ARGV
(2);

254 cÚ¡ *
¬g2
 = 
	`CMD_ARGV
(3);

255 cÚ¡ *
¬g3
 = 
	`CMD_ARGV
(4);

256 cÚ¡ *
¬g4
 = 
	`CMD_ARGV
(5);

257 cÚ¡ *
¬g5
 = 
	`CMD_ARGV
(6);

259 cÚ¡ *
szUnknownCommªd
 = "YaPB: Unknown command.\n"

262 ià(
	`FSŒEq
(
pcmd
, "addbot") || FStrEq(pcmd, "add"))

263 
	`U£rAddBÙ
(
¬g1
, 
¬g2
, 
¬g3
, 
¬g4
, 
¬g5
);

265 ià(
	`FSŒEq
(
pcmd
, "fillserver") || FStrEq(pcmd, "fill"))

267 ià(
	`IsNuÎSŒšg
(
¬g2
))

268 
	`U£rFlS”v”
(
	`©oi
(
¬g1
), -1);

270 
	`U£rFlS”v”
(
	`©oi
(
¬g1
),‡toi(
¬g2
));

273 ià(
	`FSŒEq
(
pcmd
, "removebots") || FStrEq(pcmd, "remove"))

274 
	`U£rRemoveAÎBÙs
();

276 ià(
	`FSŒEq
(
pcmd
, "killbots") || FStrEq(pcmd, "kill"))

277 
	`U£rKlAÎBÙs
();

279 ià(
	`FSŒEq
(
pcmd
, "removerandombot") || FStrEq(pcmd, "kick"))

281 
	`U£rKickRªdomBÙ
();

283 
šdex
, 
couÁ
 = 0;

284 
šdex
 = 0; index < 
gpGlob®s
->
maxCl›Ás
; index++)

286 ià(
g_rgpBÙs
[
šdex
])

287 
couÁ
++;

290 
couÁ
--;

292 
	`CVAR_SET_FLOAT
("y­b_quÙa", 
couÁ
);

293 
g_iBÙQuÙa
 = 
couÁ
;

296 ià(
	`FSŒEq
(
pcmd
, "newround"))

297 
	`U£rNewroundAÎ
();

299 ià(
	`FSŒEq
(
pcmd
, "wpnmode"))

301 
iS–eùiÚ
 = 
	`©oi
(
¬g1
);

302 ià(
iS–eùiÚ
 >= 1 && iSelection <= 7)

303 
	`U£rS–eùW—pÚMode
(
iS–eùiÚ
);

305 
	`SERVER_PRINT
(
	`Œ
("Valid weapon mode is from 1o 7\n"));

308 ià(
	`FSŒEq
(
pcmd
, "botsvotemap"))

310 ià(!
	`IsNuÎSŒšg
(
¬g1
))

312 
iM­
 = 
	`©oi
(
¬g1
);

313 
i
 = 0; i < 
gpGlob®s
->
maxCl›Ás
; i++)

315 ià(
g_rgpBÙs
[
i
])

316 
g_rgpBÙs
[
i
]->
m_iVÙeM­
 = 
iM­
;

318 
	`ALERT
(
©_cÚsŞe
, "AÎ d—d bÙ wÈvÙfÜ m­ #%d\n", 
iM­
);

322 ià(
	`FSŒEq
(
pcmd
, "about"))

324 
	`SERVER_PRINT
(
	`UTIL_V¬Args
("=========== VERSION INFORMATION ===========\n"

325 "Y‘‡nÙh” POD-BÙ (BUILD %u, " 
__DATE__
 ")\n"

328 "===========================================\n", 
	`G‘BudNumb”
()));

330 ià(
g_iNumWaypošts
 > 0)

331 
	`SERVER_PRINT
(
	`UTIL_V¬Args
(
	`Œ
("Waypošˆmadby: %s\n"), 
g_szWaypoš‹r
));

333 
	`SERVER_PRINT
(
	`Œ
("WARNING: No waypoint file is found. You can't‡dd bots\n"));

336 
time_t
 
now
 = 
	`time
(
NULL
);

337 
tm
 *
tm_now
 = 
	`loÿÉime
(&
now
);

339 ià(
tm_now
->
tm_mÚ
 =ğ0 &&m_now->
tm_mday
 == 14)

342 cÚ¡ *
szC–eb¿‹
 = "\nToday is January 14th !!!\n"

347 ià(
pHo¡Ediù
)

349 
	`MESSAGE_BEGIN
(
MSG_ONE_UNRELIABLE
, 
SVC_TEMPENTITY
, 
NULL
, 
pHo¡Ediù
);

350 
	`WRITE_BYTE
(
TE_TEXTMESSAGE
);

351 
	`WRITE_BYTE
(1);

352 
	`WRITE_SHORT
(-8192);

353 
	`WRITE_SHORT
(-8192);

354 
	`WRITE_BYTE
(2);

355 
	`WRITE_BYTE
(255);

356 
	`WRITE_BYTE
(255);

357 
	`WRITE_BYTE
(255);

358 
	`WRITE_BYTE
(1);

359 
	`WRITE_BYTE
(
	`RANDOM_LONG
(0, 255));

360 
	`WRITE_BYTE
(
	`RANDOM_LONG
(0, 255));

361 
	`WRITE_BYTE
(
	`RANDOM_LONG
(0, 255));

362 
	`WRITE_BYTE
(1);

363 
	`WRITE_SHORT
(25);

364 
	`WRITE_SHORT
(50);

365 
	`WRITE_SHORT
(2048);

366 
	`WRITE_SHORT
(2048);

367 
	`WRITE_STRING
(
szC–eb¿‹
);

368 
	`MESSAGE_END
();

371 
	`SERVER_PRINT
(
szC–eb¿‹
);

375 ià(
	`FSŒEq
(
pcmd
, "?") || FStrEq(pcmd, "help"))

377 
	`SERVER_PRINT
("==== Available Server Commands ====\n"

389 ià(!
	`IS_DEDICATED_SERVER
(è&& !
	`FNuÎEÁ
(
pHo¡Ediù
))

391 ià(
	`FSŒEq
(
pcmd
, "waypoint") || FStrEq(pcmd, "wp"))

393 ià(
	`FSŒEq
(
¬g1
, "init"))

395 
	`U£rRemoveAÎBÙs
();

396 
	`WaypoštIn™
();

397 
g_bWaypoštOn
 = 
TRUE
;

398 
	`UTIL_Ho¡Pršt
(
pHo¡Ediù
, 
´št_cÚsŞe
, 
	`Œ
("Waypoint cleared\n"));

400 ià(
	`FSŒEq
(
¬g1
, "on"))

402 
g_bWaypoštOn
 = 
TRUE
;

403 
	`UTIL_Ho¡Pršt
(
pHo¡Ediù
, 
´št_cÚsŞe
, 
	`Œ
("Waypoint Editing is ON\n"));

405 ià(
	`FSŒEq
(
¬g2
, "noclip"))

407 
bEd™Noş
 &= 1;

408 
bEd™Noş
 ^= 1;

409 ià(!
bEd™Noş
)

411 
	`UTIL_Ho¡Pršt
(
pHo¡Ediù
, 
´št_cÚsŞe
, 
	`Œ
("Noclip Cheat is OFF\n"));

412 
pHo¡Ediù
->
v
.
mov‘y³
 = 
MOVETYPE_WALK
;

415 
	`UTIL_Ho¡Pršt
(
pHo¡Ediù
, 
´št_cÚsŞe
, 
	`Œ
("Noclip Cheat is ON\n"));

418 ià(
	`FSŒEq
(
¬g1
, "off"))

420 
g_bWaypoštOn
 = 
FALSE
;

421 
bEd™Noş
 = 
FALSE
;

422 
pHo¡Ediù
->
v
.
mov‘y³
 = 
MOVETYPE_WALK
;

423 
	`UTIL_Ho¡Pršt
(
pHo¡Ediù
, 
´št_cÚsŞe
, 
	`Œ
("Waypoint Editingurned OFF\n"));

425 ià(
	`FSŒEq
(
¬g1
, "find"))

427 
g_iFšdWPIndex
 = 
	`©oi
(
¬g2
);

429 ià(
g_iFšdWPIndex
 < 
g_iNumWaypošts
)

430 
	`UTIL_Ho¡Pršt
(
pHo¡Ediù
, 
´št_cÚsŞe
, 
	`Œ
("Showing Directiono Waypoint\n"));

432 
g_iFšdWPIndex
 = -1;

434 ià(
	`FSŒEq
(
¬g1
, "add"))

436 
g_bWaypoštOn
 = 
TRUE
;

437 
iU£rInM’u
 = 
MENU_WAYPOINT_ADD
;

438 
	`UTIL_ShowM’u
(
pHo¡Ediù
, 
m’uWaypoštAdd
.
V®idSlÙs
, -1, 
FALSE
, 
	`Œ
(m’uWaypoštAdd.
szM’uText
));

440 ià(
	`FSŒEq
(
¬g1
, "delete"))

442 
g_bWaypoštOn
 = 
TRUE
;

443 
	`WaypoštD–‘e
();

445 ià(
	`FSŒEq
(
¬g1
, "save"))

447 cÚ¡ *
szWaypoštSaveMes§ge
 = "Waypoints saved\n";

449 ià(
	`FSŒEq
(
¬g2
, "nocheck"))

451 
	`WaypoštSave
();

452 
	`UTIL_Ho¡Pršt
(
pHo¡Ediù
, 
´št_cÚsŞe
, 
	`Œ
(
szWaypoštSaveMes§ge
));

454 ià(
	`FSŒEq
(
¬g2
, "oldformat"))

456 ià(
	`FSŒEq
(
¬g3
, "nocheck"))

458 
	`WaypoštSaveOldFÜm©
();

459 
	`UTIL_Ho¡Pršt
(
pHo¡Ediù
, 
´št_cÚsŞe
, 
	`Œ
(
szWaypoštSaveMes§ge
));

461 ià(
	`WaypoštNodesV®id
())

463 
	`WaypoštSaveOldFÜm©
();

464 
	`UTIL_Ho¡Pršt
(
pHo¡Ediù
, 
´št_cÚsŞe
, 
	`Œ
(
szWaypoštSaveMes§ge
));

467 ià(
	`WaypoštNodesV®id
())

469 
	`WaypoštSave
();

470 
	`UTIL_Ho¡Pršt
(
pHo¡Ediù
, 
´št_cÚsŞe
, 
	`Œ
(
szWaypoštSaveMes§ge
));

473 ià(
	`FSŒEq
(
¬g1
, "load"))

475 ià(
	`WaypoštLßd
())

476 
	`UTIL_Ho¡Pršt
(
pHo¡Ediù
, 
´št_cÚsŞe
, 
	`Œ
("Waypoints†oaded\n"));

478 ià(
	`FSŒEq
(
¬g1
, "check"))

480 ià(
	`WaypoštNodesV®id
())

481 
	`UTIL_Ho¡Pršt
(
pHo¡Ediù
, 
´št_cÚsŞe
, 
	`Œ
("All Nodes work fine!\n"));

483 ià(
	`FSŒEq
(
¬g1
, "flags"))

485 
iU£rInM’u
 = 
MENU_WAYPOINT_FLAGS
;

486 
	`UTIL_ShowM’u
(
pHo¡Ediù
, 
m’uWaypoštFÏg
.
V®idSlÙs
, -1, 
FALSE
, 
	`Œ
(m’uWaypoštFÏg.
szM’uText
));

488 ià(
	`FSŒEq
(
¬g1
, "setradius"))

490 
	`WaypoštS‘Radius
(
	`©oi
(
¬g2
));

492 ià(
	`FSŒEq
(
¬g1
, "cache"))

494 
g_iCacheWaypoštIndex
 = 
	`WaypoštFšdN—»¡
(
pHo¡Ediù
->
v
.
Üigš
);

495 
	`UTIL_Ho¡Pršt
(
pHo¡Ediù
, 
´št_cÚsŞe
, 
	`Œ
("WaypošˆNr. %d‚ow cached\n"), 
g_iCacheWaypoštIndex
);

497 ià(
	`FSŒEq
(
¬g1
, "teleport"))

499 
iT–Index
 = 
	`©oi
(
¬g2
);

500 ià(
iT–Index
 < 
g_iNumWaypošts
)

502 
g_’gfuncs
.
	`pâS‘Origš
(
pHo¡Ediù
, 
·ths
[
iT–Index
]->
Üigš
);

503 
g_bWaypoštOn
 = 
TRUE
;

504 
bEd™Noş
 = 
TRUE
;

507 ià(
	`FSŒEq
(
¬g1
, "menu"))

509 
iU£rInM’u
 = 
MENU_WAYPOINT_MENU
;

510 
	`UTIL_ShowM’u
(
pHo¡Ediù
, 
m’uWaypoštM’u
.
V®idSlÙs
, -1, 
FALSE
, 
	`Œ
(m’uWaypoštM’u.
szM’uText
));

514 ià(
g_bWaypoštOn
)

515 
	`UTIL_Ho¡Pršt
(
pHo¡Ediù
, 
´št_cÚsŞe
, 
	`Œ
("Waypoints‡re ON\n"));

517 
	`UTIL_Ho¡Pršt
(
pHo¡Ediù
, 
´št_cÚsŞe
, 
	`Œ
("Waypoints‡re OFF\n"));

520 ià(
	`FSŒEq
(
pcmd
, "pathwaypoint") || FStrEq(pcmd, "pwp"))

522 ià(
	`FSŒEq
(
¬g1
, "add"))

524 ià(
¬g2
[0] != '\0')

525 
	`WaypoštC»©eP©h
(
	`©oi
(
¬g2
));

527 
	`WaypoštC»©eP©h
(
g_iCacheWaypoštIndex
);

529 ià(
	`FSŒEq
(
¬g1
, "connect"))

531 
w
 = 
	`WaypoštFšdN—»¡
(
pHo¡Ediù
->
v
.
Üigš
, 50.0);

532 ià(
¬g2
[0] !ğ'\0' && 
w
 != -1)

534 
	`WaypoštC»©eP©h
(
w
, 
	`©oi
(
¬g2
));

535 
	`WaypoštC»©eP©h
(
	`©oi
(
¬g2
), 
w
);

538 ià(
	`FSŒEq
(
¬g1
, "delete"))

540 ià(
¬g2
[0] != '\0')

541 
	`WaypoštRemoveP©h
(
	`©oi
(
¬g2
));

543 
	`WaypoštRemoveP©h
(
g_iCacheWaypoštIndex
);

545 ià(
	`FSŒEq
(
¬g1
, "disconnect"))

547 
w
 = 
	`WaypoštFšdN—»¡
(
pHo¡Ediù
->
v
.
Üigš
, 50.0);

548 ià(
¬g2
[0] !ğ'\0' && 
w
 != -1)

550 
	`WaypoštRemoveP©h
(
w
, 
	`©oi
(
¬g2
));

551 
	`WaypoštRemoveP©h
(
	`©oi
(
¬g2
), 
w
);

554 ià(
	`FSŒEq
(
¬g1
, "create1"))

556 
g_iC»©eS¹Index
 = 
	`WaypoštFšdN—»¡
(
pHo¡Ediù
->
v
.
Üigš
, 50.0);

557 ià(
g_iC»©eS¹Index
 == -1)

558 
	`EMIT_SOUND_DYN2
(
pHo¡Ediù
, 
CHAN_WEAPON
, "commÚ/w²_move£Ëù.wav", 1.0, 
ATTN_NORM
, 0, 100);

560 
	`EMIT_SOUND_DYN2
(
pHo¡Ediù
, 
CHAN_WEAPON
, "commÚ/w²_hudoff.wav", 1.0, 
ATTN_NORM
, 0, 100);

562 ià(
	`FSŒEq
(
¬g1
, "remove1"))

564 
g_iRemoveS¹Index
 = 
	`WaypoštFšdN—»¡
(
pHo¡Ediù
->
v
.
Üigš
, 50.0);

565 ià(
g_iRemoveS¹Index
 == -1)

566 
	`EMIT_SOUND_DYN2
(
pHo¡Ediù
, 
CHAN_WEAPON
, "commÚ/w²_move£Ëù.wav", 1.0, 
ATTN_NORM
, 0, 100);

568 
	`EMIT_SOUND_DYN2
(
pHo¡Ediù
, 
CHAN_WEAPON
, "commÚ/w²_hudoff.wav", 1.0, 
ATTN_NORM
, 0, 100);

570 ià(
	`FSŒEq
(
¬g1
, "create2"))

572 
waypošt2
 = 
	`WaypoštFšdN—»¡
(
pHo¡Ediù
->
v
.
Üigš
, 50.0);

573 ià(
g_iC»©eS¹Index
 !ğ-1 && 
waypošt2
 != -1)

574 
	`WaypoštC»©eP©h
(
g_iC»©eS¹Index
, 
waypošt2
);

576 
	`EMIT_SOUND_DYN2
(
pHo¡Ediù
, 
CHAN_WEAPON
, "commÚ/w²_d’y£Ëù.wav", 1.0, 
ATTN_NORM
, 0, 100);

578 ià(
	`FSŒEq
(
¬g1
, "remove2"))

580 
waypošt2
 = 
	`WaypoštFšdN—»¡
(
pHo¡Ediù
->
v
.
Üigš
, 50.0);

581 ià(
g_iRemoveS¹Index
 !ğ-1 && 
waypošt2
 != -1)

582 
	`WaypoštRemoveP©h
(
g_iRemoveS¹Index
, 
waypošt2
);

584 
	`EMIT_SOUND_DYN2
(
pHo¡Ediù
, 
CHAN_WEAPON
, "commÚ/w²_d’y£Ëù.wav", 1.0, 
ATTN_NORM
, 0, 100);

587 ià(
	`FSŒEq
(
pcmd
, "autowaypoint") || FStrEq(pcmd, "awp"))

589 ià(
	`FSŒEq
(
¬g1
, "on"))

591 
g_bAutoWaypošt
 = 
TRUE
;

592 
g_bWaypoštOn
 = 
TRUE
;

594 ià(
	`FSŒEq
(
¬g1
, "off"))

595 
g_bAutoWaypošt
 = 
FALSE
;

597 ià(
g_bAutoWaypošt
)

598 
	`UTIL_Ho¡Pršt
(
pHo¡Ediù
, 
´št_cÚsŞe
, 
	`Œ
("Auto-Waypoint is ON\n"));

600 
	`UTIL_Ho¡Pršt
(
pHo¡Ediù
, 
´št_cÚsŞe
, 
	`Œ
("Auto-Waypoint is OFF\n"));

602 ià(
	`FSŒEq
(
pcmd
, "experience") || FStrEq(pcmd, "exp"))

604 ià(
	`FSŒEq
(
¬g1
, "save"))

606 
	`SaveEx³r›nûTab
();

607 
	`UTIL_Ho¡Pršt
(
pHo¡Ediù
, 
´št_cÚsŞe
, 
	`Œ
("Experience saved\n"));

609 ià(
	`FSŒEq
(
¬g1
, "on"))

611 
g_bDªg”DœeùiÚ
 = 
TRUE
;

612 
g_bWaypoštOn
 = 
TRUE
;

613 
	`UTIL_Ho¡Pršt
(
pHo¡Ediù
, 
´št_cÚsŞe
, 
	`Œ
("Experience is ON\n"));

615 ià(
	`FSŒEq
(
¬g1
, "off"))

617 
g_bDªg”DœeùiÚ
 = 
FALSE
;

618 
	`UTIL_Ho¡Pršt
(
pHo¡Ediù
, 
´št_cÚsŞe
, 
	`Œ
("Experience is OFF\n"));

621 ià(
	`FSŒEq
(
pcmd
, "podbotmenu") || FStrEq(pcmd, "menu"))

623 
iU£rInM’u
 = 
MENU_PODMAIN
;

624 
	`UTIL_ShowM’u
(
pHo¡Ediù
, 
m’uPODMaš
.
V®idSlÙs
, -1, 
FALSE
, 
	`Œ
(m’uPODMaš.
szM’uText
));

627 
	`SERVER_PRINT
(
szUnknownCommªd
);

631 
	`SERVER_PRINT
(
szUnknownCommªd
);

632 
	}
}

634 
	$GameDLLIn™
( )

636 
fe_šdex
;

637 
FILE
 *
åText
;

638 
szBufãr
[256];

639 
szFeName
[256];

640 
iCouÁ
;

641 
iAÎocL’
 = 0;

642 
i
;

645 
	`CVAR_REGISTER
(&
g_cv¬BÙQuÙa
);

646 
	`CVAR_REGISTER
(&
g_cv¬BÙAutoVaÿ‹
);

647 
	`CVAR_REGISTER
(&
g_cv¬WPTDœÇme
);

648 
	`CVAR_REGISTER
(&
g_cv¬MaxNumFŞlow
);

649 
	`CVAR_REGISTER
(&
g_cv¬TimeSoundUpd©e
);

650 
	`CVAR_REGISTER
(&
g_cv¬TimePickupUpd©e
);

651 
	`CVAR_REGISTER
(&
g_cv¬TimeG»ÇdeUpd©e
);

652 
	`CVAR_REGISTER
(&
g_cv¬DebugGßlIndex
);

653 
	`CVAR_REGISTER
(&
g_cv¬MšBÙSkl
);

654 
	`CVAR_REGISTER
(&
g_cv¬MaxBÙSkl
);

655 
	`CVAR_REGISTER
(&
g_cv¬U£Ex³r›nû
);

656 
	`CVAR_REGISTER
(&
g_cv¬AutoSaveEx³r›nû
);

657 
	`CVAR_REGISTER
(&
g_cv¬BÙCh©
);

658 
	`CVAR_REGISTER
(&
g_cv¬BÙU£Radio
);

659 
	`CVAR_REGISTER
(&
g_cv¬JasÚMode
);

660 
	`CVAR_REGISTER
(&
g_cv¬D‘aNames
);

661 
	`CVAR_REGISTER
(&
g_cv¬In¡ªtTuºs
);

662 
	`CVAR_REGISTER
(&
g_cv¬ShoÙThruW®ls
);

663 
	`CVAR_REGISTER
(&
g_cv¬AÎowVÙes
);

664 
	`CVAR_REGISTER
(&
g_cv¬BÙS´ay
);

665 
	`CVAR_REGISTER
(&
g_cv¬BÙBuy
);

668 
	`REG_SVR_COMMAND
("y­b", 
PODBÙ_S”v”Commªd
);

671 
	`mem£t
(
pU£dBÙNames
, 0, (pUsedBotNames));

674 
iCouÁ
 = 0;

676 *
szE¼Ü
 = "Memory Allocation Error!";

678 
	`G‘GameDœeùÜy
(
szFeName
);

679 
	`¡rÿt
(
szFeName
, "/addons/yapb/botnames.txt");

681 
åText
 = 
	`fİ’
(
szFeName
, "r");

683 
fe_šdex
 = 0;

684 
szBufãr
[
fe_šdex
] = 0;

686 
pBÙNames
 = 
NULL
;

687 
STRINGNODE
 *
pTempNode
;

688 
STRINGNODE
 **
pNode
 = &
pBÙNames
;

690 
åText
 !ğ
NULL
 && !
	`ãof
(fpText))

692 
	`FlBufãrFromFe
(
åText
, (*)&
szBufãr
, 
fe_šdex
);

694 
fe_šdex
 = 0;

695 ià(
szBufãr
[0] == '#' || szBuffer[0] == 0 ||

696 
szBufãr
[0] == '\r' || szBuffer[0]== '\n' || szBuffer[0] == '/')

699 
szBufãr
[21] = 0;

701 
iAÎocL’
 = 
	`¡¾’
(
szBufãr
) + 1;

702 ià(
iAÎocL’
 < 3)

705 
pTempNode
 = (
STRINGNODE
 *)
	`m®loc
((STRINGNODE));

707 ià(
pTempNode
 =ğ
NULL
)

708 
	`T”mš©eOnE¼Ü
Ğ
szE¼Ü
 );

710 *
pNode
 = 
pTempNode
;

711 
pTempNode
->
pszSŒšg
 = (*)
	`m®loc
(()*
iAÎocL’
);

712 
pTempNode
->
Next
 = 
NULL
;

713 
	`¡rıy
(
pTempNode
->
pszSŒšg
, 
szBufãr
);

714 
pNode
 = &
pTempNode
->
Next
;

715 
iCouÁ
++;

718 ià(
åText
 !ğ
NULL
)

719 
	`fşo£
(
åText
);

721 
iNumBÙÇmes
 = 
iCouÁ
 - 1;

726 
	`G‘GameDœeùÜy
(
szFeName
);

727 
	`¡rÿt
(
szFeName
, "/addons/yapb/botchat.txt");

729 
åText
 = 
	`fİ’
(
szFeName
, "r");

731 
fe_šdex
 = 0;

732 
szBufãr
[
fe_šdex
] = 0;

733 
iCh©Ty³
 = -1;

734 
»¶ynode_t
 *
pTempR•ly
 = 
NULL
;

735 
»¶ynode_t
 **
pR•ly
 = 
NULL
;

737 
åText
 !ğ
NULL
 && !
	`ãof
(fpText))

739 
	`FlBufãrFromFe
(
åText
,(*)&
szBufãr
,
fe_šdex
);

741 
fe_šdex
 = 0;

742 ià(
szBufãr
[0] == '#' || szBuffer[0] == 0 ||

743 
szBufãr
[0] == '\r' || szBuffer[0]== '\n' || szBuffer[0] == '/')

747 ià(
	`FSŒEq
(
szBufãr
, "[KILLED]"))

749 
iCh©Ty³
 = 0;

750 
iNumKlCh©s
 = 0;

751 
pKlCh©
 = 
NULL
;

752 
pNode
 = &
pKlCh©
;

756 ià(
	`FSŒEq
(
szBufãr
, "[BOMBPLANT]"))

758 
iCh©Ty³
 = 1;

759 
iNumBombCh©s
 = 0;

760 
pBombCh©
 = 
NULL
;

761 
pNode
 = &
pBombCh©
;

765 ià(
	`FSŒEq
(
szBufãr
, "[DEADCHAT]"))

767 
iCh©Ty³
 = 2;

768 
iNumD—dCh©s
 = 0;

769 
pD—dCh©
 = 
NULL
;

770 
pNode
 = &
pD—dCh©
;

774 ià(
	`FSŒEq
(
szBufãr
, "[REPLIES]"))

776 
iCh©Ty³
 = 3;

777 
pR•ly
 = &
pCh©R•l›s
;

781 ià(
	`FSŒEq
(
szBufãr
, "[UNKNOWN]"))

783 
iCh©Ty³
 = 4;

784 
iNumNoKeySŒšgs
 = 0;

785 
pCh©NoKeywÜd
 = 
NULL
;

786 
pNode
 = &
pCh©NoKeywÜd
;

790 ià(
iCh©Ty³
 != 3)

792 
szBufãr
[79] = 0;

793 
iAÎocL’
 = 
	`¡¾’
(
szBufãr
) + 1;

794 ià(
iAÎocL’
 < 3)

798 ià(
iCh©Ty³
 == 0)

800 
pTempNode
 = (
STRINGNODE
 *)
	`m®loc
((STRINGNODE));

802 ià(
pTempNode
 =ğ
NULL
)

803 
	`T”mš©eOnE¼Ü
Ğ
szE¼Ü
 );

805 *
pNode
 = 
pTempNode
;

806 
pTempNode
->
pszSŒšg
 = (*)
	`m®loc
((è* 
iAÎocL’
);

807 
pTempNode
->
Next
 = 
NULL
;

808 
	`¡rıy
(
pTempNode
->
pszSŒšg
, 
szBufãr
);

809 
pNode
 = &
pTempNode
->
Next
;

810 
iNumKlCh©s
++;

812 ià(
iCh©Ty³
 == 1)

814 
pTempNode
 = (
STRINGNODE
 *)
	`m®loc
((STRINGNODE));

816 ià(
pTempNode
 =ğ
NULL
)

817 
	`T”mš©eOnE¼Ü
Ğ
szE¼Ü
 );

819 *
pNode
 = 
pTempNode
;

820 
pTempNode
->
pszSŒšg
 = (*)
	`m®loc
((è* 
iAÎocL’
);

821 
pTempNode
->
Next
 = 
NULL
;

822 
	`¡rıy
(
pTempNode
->
pszSŒšg
, 
szBufãr
);

823 
pNode
 = &
pTempNode
->
Next
;

824 
iNumBombCh©s
++;

826 ià(
iCh©Ty³
 == 2)

828 
pTempNode
 = (
STRINGNODE
 *)
	`m®loc
((STRINGNODE));

830 ià(
pTempNode
 =ğ
NULL
)

831 
	`T”mš©eOnE¼Ü
Ğ
szE¼Ü
 );

833 *
pNode
 = 
pTempNode
;

834 
pTempNode
->
pszSŒšg
 = (*)
	`m®loc
((è* 
iAÎocL’
);

835 
pTempNode
->
Next
 = 
NULL
;

836 
	`¡rıy
(
pTempNode
->
pszSŒšg
,
szBufãr
);

837 
pNode
 = &
pTempNode
->
Next
;

838 
iNumD—dCh©s
++;

840 ià(
iCh©Ty³
 == 3)

842 *
pP©‹º
 = 
	`¡r¡r
(
szBufãr
,"@KEY");

843 ià(
pP©‹º
 !ğ
NULL
 && 
pR•ly
 != NULL)

845 
pTempR•ly
 = (
»¶ynode_t
 *)
	`m®loc
((replynode_t));

846 *
pR•ly
 = 
pTempR•ly
;

847 
pTempR•ly
->
pNextR•lyNode
 = 
NULL
;

848 
pTempR•ly
->
pR•l›s
 = 
NULL
;

849 
pTempR•ly
->
cNumR•l›s
 = 0;

850 
pTempR•ly
->
cLa¡R•ly
 = 0;

851 
pNode
 = &
pTempR•ly
->
pR•l›s
;

852 
	`mem£t
(
pTempR•ly
->
pszKeywÜds
, 0, (pTempReply->pszKeywords));

853 
c
 = 0;

854 
i
 = 0; i < 256; i++)

856 ià(
szBufãr
[
i
] == '\"')

858 
i
++;

860 
szBufãr
[
i
] != '\"')

861 
pTempR•ly
->
pszKeywÜds
[
c
++] = 
szBufãr
[
i
++];

863 
pTempR•ly
->
pszKeywÜds
[
c
++] = '@';

865 ià(
szBufãr
[
i
] == 0x0)

868 
pR•ly
 = &
pTempR•ly
->
pNextR•lyNode
;

870 ià(
pTempR•ly
)

872 
szBufãr
[255] = 0;

873 
iAÎocL’
 = 
	`¡¾’
(
szBufãr
) + 1;

874 
pTempNode
 = (
STRINGNODE
 *)
	`m®loc
((STRINGNODE));

876 ià(
pTempNode
 =ğ
NULL
)

877 
	`T”mš©eOnE¼Ü
Ğ
szE¼Ü
 );

879 *
pNode
 = 
pTempNode
;

880 
pTempNode
->
pszSŒšg
 = (*)
	`m®loc
((è* 
iAÎocL’
);

881 
pTempNode
->
Next
 = 
NULL
;

882 
	`¡rıy
(
pTempNode
->
pszSŒšg
, 
szBufãr
);

883 
pTempR•ly
->
cNumR•l›s
++;

884 
pNode
 = &
pTempNode
->
Next
;

887 ià(
iCh©Ty³
 == 4)

889 
pTempNode
 = (
STRINGNODE
 *)
	`m®loc
((STRINGNODE));

891 ià(
pTempNode
 =ğ
NULL
)

892 
	`T”mš©eOnE¼Ü
Ğ
szE¼Ü
 );

894 *
pNode
 = 
pTempNode
;

895 
pTempNode
->
pszSŒšg
 = (*)
	`m®loc
((è* 
iAÎocL’
);

896 
pTempNode
->
Next
 = 
NULL
;

897 
	`¡rıy
(
pTempNode
->
pszSŒšg
, 
szBufãr
);

898 
pNode
 = &
pTempNode
->
Next
;

899 
iNumNoKeySŒšgs
++;

903 ià(
åText
 !ğ
NULL
)

904 
	`fşo£
(
åText
);

906 
iNumKlCh©s
--;

907 
iNumBombCh©s
--;

908 
iNumD—dCh©s
--;

909 
iNumNoKeySŒšgs
--;

914 
	`G‘GameDœeùÜy
(
szFeName
);

915 
	`¡rÿt
(
szFeName
, "/addons/yapb/botskill.cfg");

917 
åText
 = 
	`fİ’
(
szFeName
, "r");

919 
ch
;

920 
cmd_lše
[80];

921 
£rv”_cmd
[80];

922 *
cmd
, *
¬g1
;

924 
BÙTabCouÁ
 = 0;

926 
åText
 !ğ
NULL
 && !
	`ãof
(fpText))

928 
ch
 = 
	`fg‘c
(
åText
);

931 
ch
 == ' ')

932 
ch
 = 
	`fg‘c
(
åText
);

934 
ch
 !ğ
EOF
 && ch != '\r' && ch != '\n')

936 ià(
ch
 == '\t')

937 
ch
 = ' ';

939 
cmd_lše
[
fe_šdex
] = 
ch
;

941 
ch
 = 
	`fg‘c
(
åText
);

944 
cmd_lše
[
fe_šdex
] =ğ' ' && 
ch
 == ' ')

945 
ch
 = 
	`fg‘c
(
åText
);

947 
fe_šdex
++;

950 
ch
 == '\r')

951 
ch
 = 
	`fg‘c
(
åText
);

953 
cmd_lše
[
fe_šdex
] = 0;

956 
	`¡rıy
(
£rv”_cmd
, 
cmd_lše
);

957 
	`¡rÿt
(
£rv”_cmd
, "\n");

959 
fe_šdex
 = 0;

960 
cmd
 = 
cmd_lše
;

961 
¬g1
 = 
NULL
;

964 (
cmd_lše
[
fe_šdex
] != ' ') && (cmd_line[file_index] != 0))

965 
fe_šdex
++;

967 ià(
cmd_lše
[
fe_šdex
] == ' ')

969 
cmd_lše
[
fe_šdex
++] = 0;

970 
¬g1
 = &
cmd_lše
[
fe_šdex
];

973 
fe_šdex
 = 0;

975 ià(
cmd_lše
[0] == '#' || cmd_line[0] == 0)

977 ià(
	`FSŒEq
(
cmd
, "MIN_DELAY"))

978 
BÙSklD–ays
[
BÙTabCouÁ
].
fMšSu½ri£D–ay
 = ()
	`©of
(
¬g1
);

979 ià(
	`FSŒEq
(
cmd
, "MAX_DELAY"))

980 
BÙSklD–ays
[
BÙTabCouÁ
].
fMaxSu½ri£D–ay
 = ()
	`©of
(
¬g1
);

981 ià(
	`FSŒEq
(
cmd
, "AIM_OFFS_X"))

982 
BÙAimTab
[
BÙTabCouÁ
].
fAim_X
 = 
	`©oi
(
¬g1
);

983 ià(
	`FSŒEq
(
cmd
, "AIM_OFFS_Y"))

984 
BÙAimTab
[
BÙTabCouÁ
].
fAim_Y
 = 
	`©oi
(
¬g1
);

985 ià(
	`FSŒEq
(
cmd
, "AIM_OFFS_Z"))

986 
BÙAimTab
[
BÙTabCouÁ
].
fAim_Z
 = 
	`©oi
(
¬g1
);

987 ià(
	`FSŒEq
(
cmd
, "HEADSHOT_ALLOW"))

988 
BÙAimTab
[
BÙTabCouÁ
].
iH—dShÙ_F»qu’cy
 = 
	`©oi
(
¬g1
);

989 ià(
	`FSŒEq
(
cmd
, "HEAR_SHOOTTHRU"))

990 
BÙAimTab
[
BÙTabCouÁ
].
iH—rdShoÙThruProb
 = 
	`©oi
(
¬g1
);

991 ià(
	`FSŒEq
(
cmd
, "SEEN_SHOOTTHRU"))

993 
BÙAimTab
[
BÙTabCouÁ
].
iS“nShoÙThruProb
 = 
	`©oi
(
¬g1
);

994 
BÙTabCouÁ
++;

995 
BÙTabCouÁ
 %= 6;

1000 ià(
åText
 !ğ
NULL
 && 
	`ãof
(fpText))

1001 
	`fşo£
(
åText
);

1006 
	`G‘GameDœeùÜy
(
szFeName
);

1007 
	`¡rÿt
(
szFeName
, "/addons/yapb/botlogos.cfg");

1009 
åText
 = 
	`fİ’
(
szFeName
, "r");

1011 ià(
åText
 !ğ
NULL
)

1013 
fe_šdex
 = 0;

1014 
szBufãr
[
fe_šdex
] = 0;

1015 
g_iNumLogos
=0;

1016 !
	`ãof
(
åText
))

1018 
	`FlBufãrFromFe
(
åText
, (*)&
szBufãr
, 
fe_šdex
);

1019 
fe_šdex
 = 0;

1021 ià(
szBufãr
[0] == '#' || szBuffer[0] == 0 || szBuffer[0] == '\r' || szBuffer[0]== '\n')

1024 
	`¡rıy
(
szS´ayNames
[
g_iNumLogos
], 
szBufãr
);

1025 
g_iNumLogos
++;

1027 
g_iNumLogos
--;

1028 
	`fşo£
(
åText
);

1033 
	`G‘GameDœeùÜy
(
szFeName
);

1034 
	`¡rÿt
(
szFeName
, "/addons/yapb/botweapons.cfg");

1036 
åText
 = 
	`fİ’
(
szFeName
, "r");

1038 ià(
åText
 !ğ
NULL
)

1040 
fe_šdex
 = 0;

1041 
szBufãr
[
fe_šdex
] = 0;

1042 *
±rW—pÚP»fs
 = 
NULL
;

1043 
iP¬£W—pÚs
 = 0;

1044 
iW—pÚP»fsTy³
 = 
MAP_DE
;

1045 *
pszS¹
;

1046 *
pszEnd
;

1048 
åText
 !ğ
NULL
 && !
	`ãof
(fpText))

1050 
	`FlBufãrFromFe
(
åText
, (*)&
szBufãr
, 
fe_šdex
);

1052 
fe_šdex
 = 0;

1053 ià(
szBufãr
[0] == '#' || szBuffer[0] == 0 ||

1054 
szBufãr
[0] == '\r' || szBuffer[0]== '\n' || szBuffer[0] == '/')

1058 ià(
iP¬£W—pÚs
 < 2)

1060 ià(
	`FSŒEq
(
szBufãr
, "[STANDARD]"))

1061 
iW—pÚP»fsTy³
 = 
MAP_DE
;

1062 ià(
	`FSŒEq
(
szBufãr
, "[AS]"))

1063 
iW—pÚP»fsTy³
 = 
MAP_AS
;

1066 
pszS¹
 = 
szBufãr
;

1067 ià(
iW—pÚP»fsTy³
 =ğ
MAP_DE
)

1069 
i
 = 0; i < 
NUM_WEAPONS
; i++)

1071 
pszEnd
 = 
	`¡rchr
(
pszS¹
,',');

1072 
cs_w—pÚ_£Ëù
[
i
].
iT—mSnd¬d
 = 
	`©oi
(
pszS¹
);

1073 
pszS¹
 = 
pszEnd
 + 1;

1078 
i
 = 0; i < 
NUM_WEAPONS
; i++)

1080 
pszEnd
 = 
	`¡rchr
(
pszS¹
,',');

1081 
cs_w—pÚ_£Ëù
[
i
].
iT—mAS
 = 
	`©oi
(
pszS¹
);

1082 
pszS¹
 = 
pszEnd
 + 1;

1085 
iP¬£W—pÚs
++;

1090 ià(
	`FSŒEq
(
szBufãr
, "[NORMAL]"))

1091 
±rW—pÚP»fs
 = 
NÜm®W—pÚP»fs
;

1092 ià(
	`FSŒEq
(
szBufãr
, "[AGRESSIVE]"))

1093 
±rW—pÚP»fs
 = 
Ag»ssiveW—pÚP»fs
;

1094 ià(
	`FSŒEq
(
szBufãr
, "[DEFENSIVE]"))

1095 
±rW—pÚP»fs
 = 
DeãnsiveW—pÚP»fs
;

1098 
pszS¹
 = 
szBufãr
;

1099 
i
 = 0; i < 
NUM_WEAPONS
; i++)

1101 
pszEnd
 = 
	`¡rchr
(
pszS¹
, ',');

1102 *
±rW—pÚP»fs
++ = 
	`©oi
(
pszS¹
);

1103 
pszS¹
 = 
pszEnd
 + 1;

1108 
	`fşo£
(
åText
);

1112 *
‹mpbuf
;

1116 
‹mpbuf
 = 
	`LOAD_FILE_FOR_ME
("ev’ts/çmas.sc", &
i
);

1118 ià(
‹mpbuf
)

1120 
g_bIsV”siÚ16
 = 
TRUE
;

1121 
	`FREE_FILE
(
‹mpbuf
);

1125 
	`mem£t
(
g_rgpBÙs
, 0, (g_rgpBots));

1126 
	`mem£t
(
BÙC»©eTab
, 0, (BotCreateTab));

1129 
	`SERVER_COMMAND
("exec‡ddons/yapb/podbot.cfg\n");

1132 
	`In™Lªg
();

1134 ià(
g_bIsMMPlugš
)

1135 
	`RETURN_META
(
MRES_IGNORED
);

1136 (*
Ùh”_gFunùiÚTabË
.
pâGameIn™
)();

1137 
	}
}

1139 
	$Di¥©chTouch
Ğ
ediù_t
 *
³ÁTouched
,ƒdiù_ˆ*
³ÁOth”
 )

1141 
CBa£BÙ
 *
pBÙ
 = CBa£BÙ::
	`In¡ªû
(
³ÁOth”
);

1142 ià(
pBÙ
)

1144 ià(
	`FCÏs¢ameIs
(
³ÁTouched
, "info_bomb_target") ||

1145 
	`FCÏs¢ameIs
(
³ÁTouched
, "func_bomb_target"))

1146 
pBÙ
->
m_æInBombZÚeTime
 = 
gpGlob®s
->
time
;

1148 ià(
g_bIsMMPlugš
)

1149 
	`RETURN_META
(
MRES_IGNORED
);

1150 (*
Ùh”_gFunùiÚTabË
.
pâTouch
)(
³ÁTouched
, 
³ÁOth”
);

1151 
	}
}

1156 
	$Di¥©chS·wn
Ğ
ediù_t
 *
³Á
 )

1158 *
pCÏs¢ame
 = (*)
	`STRING
(
³Á
->
v
.
şas¢ame
);

1160 ià(
	`¡rcmp
(
pCÏs¢ame
, "worldspawn") == 0)

1163 
	`WaypoštIn™
();

1164 
	`WaypoštLßd
();

1166 
	`PRECACHE_SOUND
("weapons/xbow_hit1.wav");

1167 
	`PRECACHE_SOUND
("weapons/mine_activate.wav");

1168 
	`PRECACHE_SOUND
("common/wpn_hudoff.wav");

1169 
	`PRECACHE_SOUND
("common/wpn_hudon.wav");

1170 
	`PRECACHE_SOUND
("common/wpn_moveselect.wav");

1171 
	`PRECACHE_SOUND
("common/wpn_denyselect.wav");

1173 
g_sMod–IndexLa£r
 = 
	`PRECACHE_MODEL
("sprites/laserbeam.spr");

1174 
g_sMod–IndexA¼ow
 = 
	`PRECACHE_MODEL
( "sprites/arrow1.spr");

1176 
g_bRoundEnded
 = 
TRUE
;

1177 
	`RoundIn™
();

1179 
g_iM­Ty³
 = 0;

1182 ià(
	`¡rcmp
(
	`STRING
(
³Á
->
v
.
şas¢ame
), "func_vip_safetyzone") == 0

1183 || 
	`¡rcmp
(
	`STRING
(
³Á
->
v
.
şas¢ame
), "info_vip_safetyzone") == 0)

1184 
g_iM­Ty³
 |ğ
MAP_AS
;

1186 ià(
	`¡rcmp
(
	`STRING
(
³Á
->
v
.
şas¢ame
), "hostage_entity") == 0)

1187 
g_iM­Ty³
 |ğ
MAP_CS
;

1189 ià(
	`¡rcmp
(
	`STRING
(
³Á
->
v
.
şas¢ame
), "func_bomb_target") == 0

1190 || 
	`¡rcmp
(
	`STRING
(
³Á
->
v
.
şas¢ame
), "info_bomb_target") == 0)

1191 
g_iM­Ty³
 |ğ
MAP_DE
;

1193 ià(
g_bIsMMPlugš
)

1194 
	`RETURN_META_VALUE
(
MRES_IGNORED
, 0);

1196  (*
Ùh”_gFunùiÚTabË
.
pâS·wn
)(
³Á
);

1197 
	}
}

1200 
BOOL
 
	$Cl›ÁCÚÃù
(
ediù_t
 *
pEÁ™y
, cÚ¡ *
pszName
, cÚ¡ *
pszAdd»ss
, 
szRejeùR—sÚ
[128])

1203 ià(
	`¡rcmp
(
pszAdd»ss
, "loopback") == 0)

1204 
pHo¡Ediù
 = 
pEÁ™y
;

1206 ià(
g_bIsMMPlugš
)

1207 
	`RETURN_META_VALUE
(
MRES_IGNORED
, 0);

1209  (*
Ùh”_gFunùiÚTabË
.
pâCl›ÁCÚÃù
)(
pEÁ™y
, 
pszName
, 
pszAdd»ss
, 
szRejeùR—sÚ
);

1210 
	}
}

1212 
	$Cl›ÁDiscÚÃù
Ğ
ediù_t
 *
pEÁ™y
 )

1215 
i
 = 
	`ENTINDEX
(
pEÁ™y
) - 1;

1216 
	`as£¹
(
i
 >= 0);

1217 
	`as£¹
(
i
 < 32);

1219 ià(
g_rgpBÙs
[
i
])

1221 ià(
g_rgpBÙs
[
i
]->
³v
 =ğ&
pEÁ™y
->
v
)

1223 
d–‘e
 
g_rgpBÙs
[
i
];

1224 
g_rgpBÙs
[
i
] = 
NULL
;

1228 ià(
g_bIsMMPlugš
)

1229 
	`RETURN_META
 (
MRES_IGNORED
);

1230 (*
Ùh”_gFunùiÚTabË
.
pâCl›ÁDiscÚÃù
)(
pEÁ™y
);

1231 
	}
}

1233 
	$Cl›ÁCommªd
Ğ
ediù_t
 *
pEÁ™y
 )

1235 cÚ¡ *
pcmd
 = 
	`CMD_ARGV
(0);

1236 cÚ¡ *
¬g1
 = 
	`CMD_ARGV
(1);

1238 
iFlS”v”T—m
 = 5;

1240 ià(
isFakeCl›ÁCommªd
 == 0)

1242 ià(
	`FSŒEq
(
pcmd
, "say") || FStrEq(pcmd, "say_team"))

1244 
boŞ
 
bAlive
 = 
	`IsAlive
(
pEÁ™y
);

1245 
iT—m
 = -1;

1246 ià(
	`FSŒEq
(
pcmd
, "say_team"))

1247 
iT—m
 = 
	`UTIL_G‘T—m
(
pEÁ™y
);

1249 
i
 = 0; i < 
gpGlob®s
->
maxCl›Ás
; i++)

1251 ià(!
Th»©Tab
[
i
].
IsU£d
 ||

1252 (
iT—m
 !ğ-1 && iT—m !ğ
Th»©Tab
[
i
].iTeam) ||

1253 
bAlive
 !ğ
	`IsAlive
(
Th»©Tab
[
i
].
pEdiù
))

1255 
CBa£BÙ
 *
pBÙ
 = 
g_rgpBÙs
[
i
];

1256 ià(
pBÙ
)

1258 
pBÙ
->
m_Say‹xtBufãr
.
iEÁ™yIndex
 = 
	`ENTINDEX
(
pEÁ™y
);

1259 
	`¡rıy
(
pBÙ
->
m_Say‹xtBufãr
.
szSayText
, 
	`CMD_ARGS
());

1260 
pBÙ
->
m_Say‹xtBufãr
.
fTimeNextCh©
 = 
gpGlob®s
->
time
 +…BÙ->m_Say‹xtBufãr.
fCh©D–ay
;

1264 ià(
pEÁ™y
 =ğ
pHo¡Ediù
 && !
	`IS_DEDICATED_SERVER
())

1266 ià(
iU£rInM’u
 !ğ
MENU_NONE
)

1268 ià(
	`FSŒEq
(
pcmd
, "menuselect"))

1270 ià(!
	`IsNuÎSŒšg
(
¬g1
))

1272 
iS–eùiÚ
 = 
	`©oi
(
¬g1
);

1273 ià(
iU£rInM’u
 =ğ
MENU_WAYPOINT_ADD
)

1275 
iS–eùiÚ
)

1284 
	`WaypoštAdd
(
iS–eùiÚ
 - 1);

1285 
iU£rInM’u
 = 
MENU_NONE
;

1288 
	`WaypoštAdd
(100);

1289 
iU£rInM’u
 = 
MENU_NONE
;

1292 
g_bL—ºJumpWaypošt
 = 
TRUE
;

1293 
iU£rInM’u
 = 
MENU_NONE
;

1296 
iU£rInM’u
 = 
MENU_NONE
;

1300 ià(
iU£rInM’u
 =ğ
MENU_WAYPOINT_FLAGS
)

1302 
iS–eùiÚ
)

1305 
	`WaypoštChªgeFÏgs
(
W_FL_NOHOSTAGE
, 1);

1309 
	`WaypoštChªgeFÏgs
(
W_FL_TERRORIST
, 1);

1313 
	`WaypoštChªgeFÏgs
(
W_FL_COUNTER
, 1);

1317 
	`WaypoštChªgeFÏgs
(
W_FL_LIFT
, 1);

1321 
	`WaypoštChªgeFÏgs
(
W_FL_NOHOSTAGE
, 0);

1325 
	`WaypoštChªgeFÏgs
(
W_FL_TERRORIST
, 0);

1329 
	`WaypoštChªgeFÏgs
(
W_FL_COUNTER
, 0);

1333 
	`WaypoštChªgeFÏgs
(
W_FL_LIFT
, 0);

1336 
iU£rInM’u
 = 
MENU_NONE
;

1338 ià(
iU£rInM’u
 =ğ
MENU_WAYPOINT_MENU
)

1340 
waypošt2
;

1341 
iS–eùiÚ
)

1344 
g_bWaypoštOn
 &= 1;

1345 
g_bWaypoštOn
 ^= 1;

1346 
iU£rInM’u
 = 
MENU_NONE
;

1350 
g_bWaypoštOn
 = 
TRUE
;

1351 
g_iC»©eS¹Index
 = 
	`WaypoštFšdN—»¡
(
pEÁ™y
->
v
.
Üigš
, 50.0);

1352 ià(
g_iC»©eS¹Index
 == -1)

1353 
	`EMIT_SOUND_DYN2
(
pEÁ™y
, 
CHAN_WEAPON
, "commÚ/w²_move£Ëù.wav", 1.0, 
ATTN_NORM
, 0, 100);

1355 
	`EMIT_SOUND_DYN2
(
pEÁ™y
, 
CHAN_WEAPON
, "commÚ/w²_hudoff.wav", 1.0, 
ATTN_NORM
, 0, 100); ;

1358 
g_bWaypoštOn
 = 
TRUE
;

1359 
waypošt2
 = 
	`WaypoštFšdN—»¡
(
pEÁ™y
->
v
.
Üigš
, 50.0);

1360 ià(
g_iC»©eS¹Index
 !ğ-1 && 
waypošt2
 != -1)

1361 
	`WaypoštC»©eP©h
(
g_iC»©eS¹Index
, 
waypošt2
);

1363 
	`EMIT_SOUND_DYN2
(
pEÁ™y
, 
CHAN_WEAPON
, "commÚ/w²_d’y£Ëù.wav", 1.0, 
ATTN_NORM
, 0, 100); ;

1366 
g_bWaypoštOn
 = 
TRUE
;

1367 
g_iRemoveS¹Index
 = 
	`WaypoštFšdN—»¡
(
pEÁ™y
->
v
.
Üigš
, 50.0);

1368 ià(
g_iRemoveS¹Index
 == -1)

1369 
	`EMIT_SOUND_DYN2
(
pEÁ™y
, 
CHAN_WEAPON
, "commÚ/w²_move£Ëù.wav", 1.0, 
ATTN_NORM
, 0, 100);

1371 
	`EMIT_SOUND_DYN2
(
pEÁ™y
, 
CHAN_WEAPON
, "commÚ/w²_hudoff.wav", 1.0, 
ATTN_NORM
, 0, 100); ;

1374 
g_bWaypoštOn
 = 
TRUE
;

1375 
waypošt2
 = 
	`WaypoštFšdN—»¡
(
pEÁ™y
->
v
.
Üigš
, 50.0);

1376 ià(
g_iRemoveS¹Index
 !ğ-1 && 
waypošt2
 != -1)

1377 
	`WaypoštRemoveP©h
(
g_iRemoveS¹Index
, 
waypošt2
);

1379 
	`EMIT_SOUND_DYN2
(
pEÁ™y
, 
CHAN_WEAPON
, "commÚ/w²_d’y£Ëù.wav", 1.0, 
ATTN_NORM
, 0, 100);

1383 
g_bWaypoštOn
 = 
TRUE
;

1384 
	`UTIL_ShowM’u
(
pEÁ™y
, 
m’uWaypoštAdd
.
V®idSlÙs
, -1, 
FALSE
, 
	`Œ
(m’uWaypoštAdd.
szM’uText
));

1385 
iU£rInM’u
 = 
MENU_WAYPOINT_ADD
;

1389 
g_bWaypoštOn
 = 
TRUE
;

1390 
	`WaypoštD–‘e
();

1391 
iU£rInM’u
 = 
MENU_NONE
;

1395 
g_bWaypoštOn
 = 
TRUE
;

1396 
	`UTIL_ShowM’u
(
pEÁ™y
, 
m’uWaypoštRadius
.
V®idSlÙs
, -1, 
FALSE
, 
	`Œ
(m’uWaypoštRadius.
szM’uText
));

1397 
iU£rInM’u
 = 
MENU_WAYPOINT_SETRADIUS
;

1401 
	`UTIL_ShowM’u
(
pEÁ™y
, 
m’uWaypoštM’u2
.
V®idSlÙs
, -1, 
FALSE
, 
	`Œ
(m’uWaypoštM’u2.
szM’uText
));

1402 
iU£rInM’u
 = 
MENU_WAYPOINT_MENU2
;

1406 
iU£rInM’u
 = 
MENU_NONE
;

1410 ià(
iU£rInM’u
 =ğ
MENU_WAYPOINT_MENU2
)

1412 
iU£rInM’u
 = 
MENU_NONE
;

1413 
iS–eùiÚ
)

1417 
iTPošts
 = 0;

1418 
iCTPošts
 = 0;

1419 
iGßlPošts
 = 0;

1420 
iRescuePošts
 = 0;

1421 
iCampPošts
 = 0;

1422 
iNoHo¡agePošts
 = 0;

1423 
i
 = 0; i < 
g_iNumWaypošts
; i++)

1425 ià(
·ths
[
i
]->
æags
 & 
W_FL_TERRORIST
)

1426 
iTPošts
++;

1427 ià(
·ths
[
i
]->
æags
 & 
W_FL_COUNTER
)

1428 
iCTPošts
++;

1429 ià(
·ths
[
i
]->
æags
 & 
W_FL_GOAL
)

1430 
iGßlPošts
++;

1431 ià(
·ths
[
i
]->
æags
 & 
W_FL_RESCUE
)

1432 
iRescuePošts
++;

1433 ià(
·ths
[
i
]->
æags
 & 
W_FL_CAMP
)

1434 
iCampPošts
++;

1435 ià(
·ths
[
i
]->
æags
 & 
W_FL_NOHOSTAGE
)

1436 
iNoHo¡agePošts
++;

1438 
	`UTIL_Ho¡Pršt
(
pHo¡Ediù
, 
´št_ûÁ”
,

1443 
g_iNumWaypošts
, 
iTPošts
, 
iCTPošts
, 
iGßlPošts
,

1444 
iRescuePošts
, 
iCampPošts
, 
iNoHo¡agePošts
);

1449 
g_bWaypoštOn
 = 
TRUE
;

1450 
g_bAutoWaypošt
 &= 1;

1451 
g_bAutoWaypošt
 ^= 1;

1452 
	`UTIL_Ho¡Pršt
(
pHo¡Ediù
, 
´št_ûÁ”
, 
g_bAutoWaypošt
 ? "Auto-Waypoint is ON\n" : "Auto-Waypoint is OFF\n");

1456 
g_bWaypoštOn
 = 
TRUE
;

1457 
	`UTIL_ShowM’u
(
pEÁ™y
, 
m’uWaypoštFÏg
.
V®idSlÙs
, -1, 
FALSE
, 
	`Œ
(m’uWaypoštFÏg.
szM’uText
));

1458 
iU£rInM’u
 = 
MENU_WAYPOINT_FLAGS
;

1462 ià(
	`WaypoštNodesV®id
())

1463 
	`WaypoštSave
();

1465 
	`UTIL_Ho¡Pršt
(
pHo¡Ediù
, 
´št_ûÁ”
, "Waypoint‚ot saved\n\nThere‡reƒrrors, see console");

1469 
	`WaypoštSave
();

1473 
	`WaypoštLßd
();

1477 ià(
	`WaypoštNodesV®id
())

1478 
	`UTIL_Ho¡Pršt
(
pEÁ™y
, 
´št_ûÁ”
, "All Nodes work fine!");

1480 
	`UTIL_Ho¡Pršt
(
pEÁ™y
, 
´št_ûÁ”
, "There‡reƒrrors, see console");

1484 
bEd™Noş
 &= 1;

1485 
bEd™Noş
 ^= 1;

1486 ià(!
bEd™Noş
)

1487 
pEÁ™y
->
v
.
mov‘y³
 = 
MOVETYPE_WALK
;

1491 
iU£rInM’u
 = 
MENU_WAYPOINT_MENU
;

1492 
	`UTIL_ShowM’u
(
pHo¡Ediù
, 
m’uWaypoštM’u
.
V®idSlÙs
, -1, 
FALSE
, 
	`Œ
(m’uWaypoštM’u.
szM’uText
));

1496 ià(
iU£rInM’u
 =ğ
MENU_WAYPOINT_SETRADIUS
)

1498 
g_bWaypoštOn
 = 
TRUE
;

1500 cÚ¡ 
iRadiusV®ue
[] = {0, 8, 16, 32, 48, 64, 80, 96, 128};

1501 ià(
iS–eùiÚ
 >= 1 && iSelection <= 9)

1502 
	`WaypoštS‘Radius
(
iRadiusV®ue
[
iS–eùiÚ
 - 1]);

1504 
iU£rInM’u
 = 
MENU_NONE
;

1506 ià(
iU£rInM’u
 =ğ
MENU_PODMAIN
)

1508 
šdex
, 
couÁ
 = 0;

1510 
iS–eùiÚ
)

1513 
	`U£rAddBÙ
();

1514 
iU£rInM’u
 = 
MENU_NONE
;

1518 
	`UTIL_ShowM’u
(
pEÁ™y
, 
m’uS–eùBÙskl
.
V®idSlÙs
, -1, 
FALSE
, 
	`Œ
(m’uS–eùBÙskl.
szM’uText
));

1519 
iU£rInM’u
 = 
MENU_SKILLSELECT
;

1523 
	`U£rKlAÎBÙs
();

1524 
iU£rInM’u
 = 
MENU_NONE
;

1528 
	`U£rNewroundAÎ
();

1529 
iU£rInM’u
 = 
MENU_NONE
;

1533 
	`UTIL_ShowM’u
(
pEÁ™y
, 
m’uS–eùT—m
.
V®idSlÙs
, -1, 
FALSE
, 
	`Œ
(m’uS–eùT—m.
szM’uText
));

1534 
iU£rInM’u
 = 
MENU_SERVERTEAMSELECT
;

1538 
	`U£rKickRªdomBÙ
();

1540 
šdex
 = 0; index < 
gpGlob®s
->
maxCl›Ás
; index++)

1542 ià(
g_rgpBÙs
[
šdex
])

1543 
couÁ
++;

1546 
couÁ
--;

1548 
	`CVAR_SET_FLOAT
("y­b_quÙa", 
couÁ
);

1549 
g_iBÙQuÙa
 = 
couÁ
;

1551 
iU£rInM’u
 = 
MENU_NONE
;

1555 
	`U£rRemoveAÎBÙs
();

1556 
iU£rInM’u
 = 
MENU_NONE
;

1560 
	`UTIL_ShowM’u
(
pEÁ™y
, 
m’uS–eùW—pÚMode
.
V®idSlÙs
, -1, 
FALSE
, 
	`Œ
(m’uS–eùW—pÚMode.
szM’uText
));

1561 
iU£rInM’u
 = 
MENU_WEAPONMODESELECT
;

1565 
iU£rInM’u
 = 
MENU_NONE
;

1569 ià(
iU£rInM’u
 =ğ
MENU_SKILLSELECT
)

1571 
iU£rInM’u
 = 
MENU_PERSONALITYSELECT
;

1573 
iS–eùiÚ
)

1576 
iStÜeAddbÙV¬s
[0] = 
	`RANDOM_LONG
(0, 20);

1580 
iStÜeAddbÙV¬s
[0] = 
	`RANDOM_LONG
(20, 40);

1584 
iStÜeAddbÙV¬s
[0] = 
	`RANDOM_LONG
(40, 60);

1588 
iStÜeAddbÙV¬s
[0] = 
	`RANDOM_LONG
(60, 80);

1592 
iStÜeAddbÙV¬s
[0] = 
	`RANDOM_LONG
(80, 99);

1596 
iStÜeAddbÙV¬s
[0] = 100;

1600 
iU£rInM’u
 = 
MENU_NONE
;

1604 ià(
iU£rInM’u
 =ğ
MENU_PERSONALITYSELECT
)

1605 
	`UTIL_ShowM’u
(
pEÁ™y
, 
m’uS–eùBÙP”sÚ®™y
.
V®idSlÙs
, -1, 
FALSE
, 
	`Œ
(m’uS–eùBÙP”sÚ®™y.
szM’uText
));

1607 ià(
iU£rInM’u
 =ğ
MENU_TEAMSELECT
)

1609 
iS–eùiÚ
)

1614 
iStÜeAddbÙV¬s
[1] = 
iS–eùiÚ
;

1615 ià(
iS–eùiÚ
 == 5)

1617 
iStÜeAddbÙV¬s
[2] = 5;

1618 
¬g1
[4];

1619 
¬g2
[4];

1620 
¬g3
[4];

1621 
¬g5
[4];

1622 
	`¥rštf
(
¬g1
, "%d", 
iStÜeAddbÙV¬s
[0]);

1623 
	`¥rštf
(
¬g2
, "%d", 
iStÜeAddbÙV¬s
[1]);

1624 
	`¥rštf
(
¬g3
, "%d", 
iStÜeAddbÙV¬s
[2]);

1625 
	`¥rštf
(
¬g5
, "%d", 
iStÜeAddbÙV¬s
[3]);

1626 
	`U£rAddBÙ
(
¬g1
, 
¬g5
, 
¬g2
, 
NULL
, 
¬g3
);

1627 
iU£rInM’u
 = 
MENU_NONE
;

1631 ià(
iS–eùiÚ
 == 1)

1632 
	`UTIL_ShowM’u
(
pEÁ™y
, 
m’uS–eùTMod–
.
V®idSlÙs
, -1, 
FALSE
, 
	`Œ
(m’uS–eùTMod–.
szM’uText
));

1634 
	`UTIL_ShowM’u
(
pEÁ™y
, 
m’uS–eùCTMod–
.
V®idSlÙs
, -1, 
FALSE
, 
	`Œ
(m’uS–eùCTMod–.
szM’uText
));

1635 
iU£rInM’u
 = 
MENU_MODEL_SELECT
;

1640 
iU£rInM’u
 = 
MENU_NONE
;

1644 ià(
iU£rInM’u
 =ğ
MENU_PERSONALITYSELECT
)

1646 
iS–eùiÚ
)

1652 
iStÜeAddbÙV¬s
[3] = 
iS–eùiÚ
 - 2;

1653 
	`UTIL_ShowM’u
(
pHo¡Ediù
, 
m’uS–eùT—m
.
V®idSlÙs
, -1, 
FALSE
, 
	`Œ
(m’uS–eùT—m.
szM’uText
));

1654 
iU£rInM’u
 = 
MENU_TEAMSELECT
;

1658 
iU£rInM’u
 = 
MENU_NONE
;

1662 ià(
iU£rInM’u
 =ğ
MENU_SERVERTEAMSELECT
)

1664 
iS–eùiÚ
)

1669 
	`CVAR_SET_STRING
("mp_limitteams", "0");

1670 
	`CVAR_SET_STRING
("mp_autoteambalance", "0");

1673 
iFlS”v”T—m
 = 
iS–eùiÚ
;

1674 
iU£rInM’u
 = 
MENU_SERVERPERSONALITYSELECT
;

1675 
	`UTIL_ShowM’u
(
pHo¡Ediù
, 
m’uS–eùBÙP”sÚ®™y
.
V®idSlÙs
, -1, 
FALSE
, 
	`Œ
(m’uS–eùBÙP”sÚ®™y.
szM’uText
));

1679 
iU£rInM’u
 = 
MENU_NONE
;

1683 ià(
iU£rInM’u
 =ğ
MENU_SERVERPERSONALITYSELECT
)

1685 
šdex
;

1686 
iS–eùiÚ
)

1692 
šdex
 = 0; index < 
gpGlob®s
->
maxCl›Ás
; index++)

1694 ià(!
BÙC»©eTab
[
šdex
].
bN“dsC»©iÚ
)

1696 
BÙC»©eTab
[
šdex
].
bN“dsC»©iÚ
 = 
TRUE
;

1697 
BÙC»©eTab
[
šdex
].
pC®lšgEÁ
 = 
pEÁ™y
;

1698 
BÙC»©eTab
[
šdex
].
Çme
[0] = '\0';

1699 
	`¥rštf
(
BÙC»©eTab
[
šdex
].
‹am
, "%d", 
iFlS”v”T—m
);

1700 
BÙC»©eTab
[
šdex
].
skl
[0] = '\0';

1701 
	`¥rštf
(
BÙC»©eTab
[
šdex
].
³rsÚ®™y
, "%d", 
iS–eùiÚ
 - 2);

1704 ià(
g_æBÙC»©iÚTime
 == 0.0)

1705 
g_æBÙC»©iÚTime
 = 
gpGlob®s
->
time
;

1708 
iU£rInM’u
 = 
MENU_NONE
;

1712 ià(
iU£rInM’u
 =ğ
MENU_MODEL_SELECT
)

1714 
iS–eùiÚ
)

1721 
iStÜeAddbÙV¬s
[2] = 
iS–eùiÚ
;

1722 
¬g1
[4];

1723 
¬g2
[4];

1724 
¬g3
[4];

1725 
¬g5
[4];

1726 
	`¥rštf
(
¬g1
, "%d", 
iStÜeAddbÙV¬s
[0]);

1727 
	`¥rštf
(
¬g2
, "%d", 
iStÜeAddbÙV¬s
[1]);

1728 
	`¥rštf
(
¬g3
, "%d", 
iStÜeAddbÙV¬s
[2]);

1729 
	`¥rštf
(
¬g5
, "%d", 
iStÜeAddbÙV¬s
[3]);

1730 
	`U£rAddBÙ
(
¬g1
, 
¬g5
, 
¬g2
, 
NULL
, 
¬g3
);

1731 
iU£rInM’u
 = 
MENU_NONE
;

1734 
iU£rInM’u
 = 
MENU_NONE
;

1738 ià(
iU£rInM’u
 =ğ
MENU_WEAPONMODESELECT
)

1740 
iS–eùiÚ
)

1749 
	`U£rS–eùW—pÚMode
(
iS–eùiÚ
);

1750 
iU£rInM’u
 = 
MENU_NONE
;

1753 
iU£rInM’u
 = 
MENU_NONE
;

1758 ià(
g_bIsMMPlugš
)

1759 
	`RETURN_META
 (
MRES_SUPERCEDE
);

1766 ià(
	`IsAlive
(
pEÁ™y
))

1769 
iCl›ÁIndex
 = 
	`ENTINDEX
(
pEÁ™y
) - 1;

1771 ià(
	`FSŒEq
(
pcmd
, "radio1"))

1772 
iRadioS–eù
[
iCl›ÁIndex
] = 1;

1773 ià(
	`FSŒEq
(
pcmd
, "radio2"))

1774 
iRadioS–eù
[
iCl›ÁIndex
] = 3;

1775 ià(
	`FSŒEq
(
pcmd
, "radio3"))

1776 
iRadioS–eù
[
iCl›ÁIndex
] = 2;

1778 ià(
iRadioS–eù
[
iCl›ÁIndex
] > 0)

1780 ià(
	`FSŒEq
(
pcmd
, "menuselect"))

1782 
iRadioCommªd
 = 
	`©oi
(
¬g1
);

1783 ià(
iRadioCommªd
 != 0)

1785 ià(
iRadioS–eù
[
iCl›ÁIndex
] == 3)

1786 
iRadioCommªd
 += 10;

1787 ià(
iRadioS–eù
[
iCl›ÁIndex
] == 2)

1788 
iRadioCommªd
 += 20;

1790 
iT—m
 = 
Th»©Tab
[
iCl›ÁIndex
].iTeam;

1791 ià(
iRadioCommªd
 !ğ
RADIO_AFFIRMATIVE
 && iRadioCommªd !ğ
RADIO_NEGATIVE
 &&

1792 
iRadioCommªd
 !ğ
RADIO_REPORTINGIN
)

1794 
i
 = 0; i < 
gpGlob®s
->
maxCl›Ás
; i++)

1796 ià(
g_rgpBÙs
[
i
])

1798 ià(
	`UTIL_G‘T—m
(
g_rgpBÙs
[
i
]->
	`ediù
()è=ğ
iT—m


1799 && 
	`VARS
(
pEÁ™y
è!ğ
g_rgpBÙs
[
i
]->
³v
)

1801 ià(
g_rgpBÙs
[
i
]->
m_iRadioOrd”
 == 0)

1803 
g_rgpBÙs
[
i
]->
m_iRadioOrd”
 = 
iRadioCommªd
;

1804 
g_rgpBÙs
[
i
]->
m_³ÁRadioEÁ™y
 = 
pEÁ™y
;

1810 
g_rgfLa¡RadioTime
[
iT—m
] = 
gpGlob®s
->
time
;

1812 
iRadioS–eù
[
iCl›ÁIndex
] = 0;

1817 ià(
g_bIsMMPlugš
)

1818 
	`RETURN_META
(
MRES_IGNORED
);

1819 (*
Ùh”_gFunùiÚTabË
.
pâCl›ÁCommªd
)(
pEÁ™y
);

1820 
	}
}

1822 
	$S”v”Aùiv©e
Ğ
ediù_t
 *
pEdiùLi¡
, 
ediùCouÁ
, 
ş›ÁMax
 )

1824 
g_bM­In™Ÿlized
 = 
TRUE
;

1826 
	`SERVER_COMMAND
("exec‡ddons/yapb/podbot.cfg\n");

1829 
	`mem£t
(
pU£dBÙNames
, 0, (pUsedBotNames));

1832 
g_æBÙCheckTime
 = 
gpGlob®s
->
time
 + 2.0;

1834 ià(
g_bIsMMPlugš
)

1835 
	`RETURN_META
(
MRES_IGNORED
);

1836 (*
Ùh”_gFunùiÚTabË
.
pâS”v”Aùiv©e
)(
pEdiùLi¡
, 
ediùCouÁ
, 
ş›ÁMax
);

1838 
	`WaypoštC®cVisib™y
();

1839 
	}
}

1841 
	$S”v”D—ùiv©e
( )

1843 
g_bM­In™Ÿlized
 = 
FALSE
;

1846 ià(
g_bU£Ex³r›nû
 && 
g_bAutoSaveEx³r›nû
)

1847 
	`SaveEx³r›nûTab
();

1849 ià(
g_bIsMMPlugš
)

1850 
	`RETURN_META
(
MRES_IGNORED
);

1851 (*
Ùh”_gFunùiÚTabË
.
pâS”v”D—ùiv©e
)();

1852 
	}
}

1857 
	$S¹F¿me
( )

1859 
i
, 
šdex
, 
¶ay”_šdex
;

1860 
m£cd–
 = 0, 
m£úum
 = 0;

1862 
g_iBÙQuÙa
 = ()
	`CVAR_GET_FLOAT
(
g_cv¬BÙQuÙa
.
Çme
);

1863 
g_iMšBÙSkl
 = ()
	`CVAR_GET_FLOAT
(
g_cv¬MšBÙSkl
.
Çme
);

1864 
g_iMaxBÙSkl
 = ()
	`CVAR_GET_FLOAT
(
g_cv¬MaxBÙSkl
.
Çme
);

1865 
g_iMaxNumFŞlow
 = ()
	`CVAR_GET_FLOAT
(
g_cv¬MaxNumFŞlow
.
Çme
);

1866 
g_fTimeSoundUpd©e
 = 
	`CVAR_GET_FLOAT
(
g_cv¬TimeSoundUpd©e
.
Çme
);

1867 
g_fTimePickupUpd©e
 = 
	`CVAR_GET_FLOAT
(
g_cv¬TimePickupUpd©e
.
Çme
);

1868 
g_fTimeG»ÇdeUpd©e
 = 
	`CVAR_GET_FLOAT
(
g_cv¬TimeG»ÇdeUpd©e
.
Çme
);

1869 
g_iDebugGßlIndex
 = ()
	`CVAR_GET_FLOAT
(
g_cv¬DebugGßlIndex
.
Çme
);

1871 
g_bU£Ex³r›nû
 = 
	`CVAR_GET_FLOAT
(
g_cv¬U£Ex³r›nû
.
Çme
) > 0;

1872 
g_bAutoSaveEx³r›nû
 = 
	`CVAR_GET_FLOAT
(
g_cv¬AutoSaveEx³r›nû
.
Çme
) > 0;

1873 
g_bBÙCh©
 = 
	`CVAR_GET_FLOAT
(
g_cv¬BÙCh©
.
Çme
) > 0;

1874 
g_bBÙU£Radio
 = 
	`CVAR_GET_FLOAT
(
g_cv¬BÙU£Radio
.
Çme
) > 0;

1876 
g_bJasÚMode
 = 
	`CVAR_GET_FLOAT
(
g_cv¬JasÚMode
.
Çme
) > 0;

1877 
g_bD‘aNames
 = 
	`CVAR_GET_FLOAT
(
g_cv¬D‘aNames
.
Çme
) > 0;

1878 
g_bIn¡ªtTuºs
 = 
	`CVAR_GET_FLOAT
(
g_cv¬In¡ªtTuºs
.
Çme
) > 0;

1879 
g_bShoÙThruW®ls
 = 
	`CVAR_GET_FLOAT
(
g_cv¬ShoÙThruW®ls
.
Çme
) > 0;

1880 
g_bAÎowVÙes
 = 
	`CVAR_GET_FLOAT
(
g_cv¬AÎowVÙes
.
Çme
) > 0;

1881 
g_bBÙS´ay
 = 
	`CVAR_GET_FLOAT
(
g_cv¬BÙS´ay
.
Çme
) > 0;

1882 
g_bBÙBuy
 = 
	`CVAR_GET_FLOAT
(
g_cv¬BÙBuy
.
Çme
) > 0;

1883 
g_bBÙAutoVaÿ‹
 = 
	`CVAR_GET_FLOAT
(
g_cv¬BÙAutoVaÿ‹
.
Çme
) > 0;

1886 
¶ay”_šdex
 = 1;…Ïy”_šdex <ğ
gpGlob®s
->
maxCl›Ás
;…layer_index++)

1888 
ediù_t
 *
pPÏy”
 = 
	`INDEXENT
(
¶ay”_šdex
);

1889 
iStÜeIndex
 = 
¶ay”_šdex
 - 1;

1890 ià(!
	`FNuÎEÁ
(
pPÏy”
è&& !pPÏy”->
ä“
 && (pPÏy”->
v
.
æags
 & (
FL_CLIENT
 | 
FL_FAKECLIENT
)))

1892 
Th»©Tab
[
iStÜeIndex
].
pEdiù
 = 
pPÏy”
;

1893 
Th»©Tab
[
iStÜeIndex
].
IsU£d
 = 
TRUE
;

1894 
Th»©Tab
[
iStÜeIndex
].
IsAlive
 = 
	`IsAlive
(
pPÏy”
);

1895 ià(
Th»©Tab
[
iStÜeIndex
].
IsAlive
)

1897 
Th»©Tab
[
iStÜeIndex
].
vOrigš
 = 
pPÏy”
->
v
.
Üigš
;

1898 
	`SoundSimuÏ‹Upd©e
(
iStÜeIndex
);

1903 
Th»©Tab
[
iStÜeIndex
].
IsU£d
 = 
FALSE
;

1904 
Th»©Tab
[
iStÜeIndex
].
pEdiù
 = 
NULL
;

1908 
g_æTimeF¿meIÁ”v®
 = 
gpGlob®s
->
time
 - 
g_æTimeP»vThšk
;

1909 
g_æTimeP»vThšk
 = 
gpGlob®s
->
time
;

1911 ià(
m£cd–
 + 
m£úum
 / 1000 < 
gpGlob®s
->
time
 - 0.5 ||

1912 
m£cd–
 > 
gpGlob®s
->
time
)

1914 
m£cd–
 = 
gpGlob®s
->
time
 - 0.05;

1915 
m£úum
 = 0;

1918 
g_iM£cv®
 = (
gpGlob®s
->
time
 - 
m£cd–
è* 1000 - 
m£úum
;

1919 
m£úum
 = (
gpGlob®s
->
time
 - 
m£cd–
) * 1000;

1922 ià(
m£úum
 > 1000)

1924 
m£cd–
 +ğ
m£úum
 / 1000;

1925 
m£úum
 = 0;

1928 ià(
g_iM£cv®
 < 1)

1929 
g_iM£cv®
 = 1;

1930 ià(
g_iM£cv®
 > 255)

1931 
g_iM£cv®
 = 255;

1934 
bÙ_šdex
 = 0; bÙ_šdex < 
gpGlob®s
->
maxCl›Ás
; bot_index++)

1936 ià(
g_rgpBÙs
[
bÙ_šdex
])

1939 #iâdeà
_DEBUG


1940 
Œy


1943 
g_rgpBÙs
[
bÙ_šdex
]->
	`Thšk
();

1944 #iâdeà
_DEBUG


1946 
	`ÿtch
 (...)

1949 
	`U£rRemoveAÎBÙs
();

1950 
	`SERVER_PRINT
("*** POD-Bot internalƒrror. For safety„easons, "

1958 ià(!
	`IS_DEDICATED_SERVER
(è&& !
	`FNuÎEÁ
(
pHo¡Ediù
) &&

1959 !
pHo¡Ediù
->
ä“
)

1961 ià(
bEd™Noş
)

1962 
pHo¡Ediù
->
v
.
mov‘y³
 = 
MOVETYPE_NOCLIP
;

1964 ià(
g_bWaypoštOn
)

1965 
	`WaypoštThšk
();

1969 ià(
g_æBÙC»©iÚTime
 !ğ0.0 && g_æBÙC»©iÚTim+ 1.0 <ğ
gpGlob®s
->
time
)

1971 
šdex
 = 0;

1972 !
BÙC»©eTab
[
šdex
].
bN“dsC»©iÚ
 && index < 
gpGlob®s
->
maxCl›Ás
)

1973 
šdex
++;

1975 ià(
šdex
 < 
gpGlob®s
->
maxCl›Ás
)

1977 
	`BÙC»©e
(
BÙC»©eTab
[
šdex
].
pC®lšgEÁ
,

1978 
BÙC»©eTab
[
šdex
].
skl
,

1979 
BÙC»©eTab
[
šdex
].
‹am
,

1980 
BÙC»©eTab
[
šdex
].
mod–
,

1981 
BÙC»©eTab
[
šdex
].
Çme
,

1982 
BÙC»©eTab
[
šdex
].
³rsÚ®™y
);

1984 
BÙC»©eTab
[
šdex
].
bN“dsC»©iÚ
 = 
FALSE
;

1986 ià(
g_æBÙC»©iÚTime
 != 0.0)

1987 
g_æBÙC»©iÚTime
 = 
gpGlob®s
->
time
;

1989 
couÁ
 = 0;

1991 
i
 = 0; i < 
gpGlob®s
->
maxCl›Ás
; i++)

1993 ià(
g_rgpBÙs
[
i
])

1994 
couÁ
++;

1997 ià(
couÁ
 > 
g_iBÙQuÙa
 && g_iBotQuota >= 0)

1999 
g_iBÙQuÙa
 = 
couÁ
;

2000 
	`CVAR_SET_FLOAT
(
g_cv¬BÙQuÙa
.
Çme
, ()
couÁ
);

2003 
g_æBÙCheckTime
 = 
gpGlob®s
->
time
 + 2.0;

2006 
g_æBÙC»©iÚTime
 = 0.0;

2010 ià(
g_æBÙCheckTime
 < 
gpGlob®s
->
time
)

2012 
g_æBÙCheckTime
 = 
gpGlob®s
->
time
 + 2.0;

2014 ià(
g_iBÙQuÙa
 >= 0)

2016 
couÁ
 = 0, 
bÙcouÁ
 = 0;

2017 
i
 = 0; i < 
gpGlob®s
->
maxCl›Ás
; i++)

2019 ià(
Th»©Tab
[
i
].
IsU£d
)

2021 
couÁ
++;

2022 ià(
g_rgpBÙs
[
i
])

2023 
bÙcouÁ
++;

2027 ià(
bÙcouÁ
 > 
g_iBÙQuÙa
)

2028 
	`U£rKickRªdomBÙ
();

2030 ià(
g_bBÙAutoVaÿ‹
)

2032 ià(
bÙcouÁ
 < 
g_iBÙQuÙa
 && 
couÁ
 < 
gpGlob®s
->
maxCl›Ás
 - 1)

2033 
	`BÙC»©e
(
NULL
, NULL, NULL, NULL, NULL, NULL);

2035 ià(
couÁ
 >ğ
gpGlob®s
->
maxCl›Ás
)

2036 
	`U£rKickRªdomBÙ
();

2040 ià(
bÙcouÁ
 < 
g_iBÙQuÙa
 && 
couÁ
 < 
gpGlob®s
->
maxCl›Ás
)

2041 
	`BÙC»©e
(
NULL
, NULL, NULL, NULL, NULL, NULL);

2046 ià(
g_bIsMMPlugš
)

2047 
	`RETURN_META
(
MRES_IGNORED
);

2049 (*
Ùh”_gFunùiÚTabË
.
pâS¹F¿me
)();

2050 
	}
}

2052 
	$S”v”Aùiv©e_Po¡
Ğ
ediù_t
 *
pEdiùLi¡
, 
ediùCouÁ
, 
ş›ÁMax
 )

2054 
	`WaypoštC®cVisib™y
();

2055 
	`RETURN_META
(
MRES_IGNORED
);

2056 
	}
}

2058 
gamedÎ_funcs_t
 
	ggGameDLLFunc
;

2060 #iâdeà
__BORLANDC__


2061 
	gC_DLLEXPORT


2063 
	$G‘EÁ™yAPI
Ğ
DLL_FUNCTIONS
 *
pFunùiÚTabË
, 
š‹rçûV”siÚ
 )

2065 
	`mem£t
Ğ
pFunùiÚTabË
, 0, Ğ
DLL_FUNCTIONS
 ) );

2067 ià(!
g_bIsMMPlugš
)

2070 ià(!(*
Ùh”_G‘EÁ™yAPI
)(&
Ùh”_gFunùiÚTabË
, 
INTERFACE_VERSION
))

2071  
FALSE
;

2073 
gGameDLLFunc
.
dÎ­i_bË
 = &
Ùh”_gFunùiÚTabË
;

2074 
gpGamedÎFuncs
 = &
gGameDLLFunc
;

2076 
	`memıy
Ğ
pFunùiÚTabË
, &
Ùh”_gFunùiÚTabË
, Ğ
DLL_FUNCTIONS
 ) );

2079 
pFunùiÚTabË
->
pâGameIn™
 = 
GameDLLIn™
;

2080 
pFunùiÚTabË
->
pâS·wn
 = 
Di¥©chS·wn
;

2081 
pFunùiÚTabË
->
pâTouch
 = 
Di¥©chTouch
;

2082 
pFunùiÚTabË
->
pâCl›ÁCÚÃù
 = 
Cl›ÁCÚÃù
;

2083 
pFunùiÚTabË
->
pâCl›ÁDiscÚÃù
 = 
Cl›ÁDiscÚÃù
;

2084 
pFunùiÚTabË
->
pâCl›ÁCommªd
 = 
Cl›ÁCommªd
;

2085 
pFunùiÚTabË
->
pâS”v”Aùiv©e
 = 
S”v”Aùiv©e
;

2086 
pFunùiÚTabË
->
pâS”v”D—ùiv©e
 = 
S”v”D—ùiv©e
;

2087 
pFunùiÚTabË
->
pâS¹F¿me
 = 
S¹F¿me
;

2089  
TRUE
;

2090 
	}
}

2092 #iâdeà
__BORLANDC__


2093 
	gC_DLLEXPORT


2095 
	$G‘EÁ™yAPI_Po¡
Ğ
DLL_FUNCTIONS
 *
pFunùiÚTabË
, 
š‹rçûV”siÚ
 )

2097 
	`mem£t
Ğ
pFunùiÚTabË
, 0, Ğ
DLL_FUNCTIONS
 ) );

2099 
pFunùiÚTabË
->
pâS”v”Aùiv©e
 = 
S”v”Aùiv©e_Po¡
;

2101  (
TRUE
);

2102 
	}
}

2104 #iâdeà
__BORLANDC__


2105 
	gC_DLLEXPORT


2107 
	$G‘NewDLLFunùiÚs
Ğ
NEW_DLL_FUNCTIONS
 *
pFunùiÚTabË
, *
š‹rçûV”siÚ
 )

2109 ià(
Ùh”_G‘NewDLLFunùiÚs
 =ğ
NULL
)

2110  
FALSE
;

2113 ià(!(*
Ùh”_G‘NewDLLFunùiÚs
)(
pFunùiÚTabË
, 
š‹rçûV”siÚ
))

2114  
FALSE
;

2116 
gGameDLLFunc
.
Ãw­i_bË
 = 
pFunùiÚTabË
;

2117  
TRUE
;

2118 
	}
}

2120 #iâdeà
__BORLANDC__


2121 
	gC_DLLEXPORT


2123 
S”v”_G‘BËndšgIÁ”çû
(
v”siÚ
,

2124 
sv_bËndšg_š‹rçû_s
 **
µš‹rçû
,

2125 
’gše_¡udio_­i_s
 *
p¡udio
,

2126 (*
rÙ©iÚm©rix
)[3][4],

2127 (*
bÚ‘¿nsfÜm
)[
MAXSTUDIOBONES
][3][4])

2129 ià(!
	gÙh”_S”v”_G‘BËndšgIÁ”çû
)

2130 
	gÙh”_S”v”_G‘BËndšgIÁ”çû
 = (
SERVER_GETBLENDINGINTERFACE
)
G‘ProcAdd»ss
(
h_Lib¿ry
, "Server_GetBlendingInterface");

2132 ià(!
	gÙh”_S”v”_G‘BËndšgIÁ”çû
)

2135  (*
	gÙh”_S”v”_G‘BËndšgIÁ”çû
)(
	gv”siÚ
, 
	gµš‹rçû
, 
	gp¡udio
, 
	grÙ©iÚm©rix
, 
	gbÚ‘¿nsfÜm
);

	@engine_api.cpp

7 
	~"bÙ.h
"

9 (*
bÙMsgFunùiÚ
)(*, èğ
NULL
;

11 
boŞ
 
isFakeCl›ÁCommªd
;

12 
çke_¬g_couÁ
;

14 
g_¬gv
[256];

16 
bÙMsgIndex
;

17 
g_iMsgS‹
;

20 
mes§ge_VGUIM’u
 = 0;

21 
mes§ge_ShowM’u
 = 0;

22 
mes§ge_W—pÚLi¡
 = 0;

23 
mes§ge_CurW—pÚ
 = 0;

24 
mes§ge_AmmoX
 = 0;

25 
mes§ge_AmmoPickup
 = 0;

26 
mes§ge_H—Éh
 = 0;

27 
mes§ge_B©‹ry
 = 0;

28 
mes§ge_Damage
 = 0;

29 
mes§ge_MÚey
 = 0;

30 
mes§ge_StusIcÚ
 = 0;

31 
mes§ge_D—thMsg
 = 0;

32 
mes§ge_Sü“nFade
 = 0;

33 
mes§ge_HLTV
 = 0;

34 
mes§ge_TextMsg
 = 0;

35 
mes§ge_T—mInfo
 = 0;

37 
	$pâChªgeLev–
(* 
s1
, * 
s2
)

40 ià(
g_bAutoSaveEx³r›nû
)

41 
	`SaveEx³r›nûTab
();

43 ià(
g_bIsMMPlugš
)

44 
	`RETURN_META
(
MRES_IGNORED
);

46 
	`CHANGE_LEVEL
(
s1
, 
s2
);

47 
	}
}

49 
ediù_t
* 
	$pâFšdEÁ™yBySŒšg
(
ediù_t
 *
pEdiùS¹S—rchAá”
, cÚ¡ *
pszF›ld
, cÚ¡ *
pszV®ue
)

51 ià(
	`FSŒEq
(
pszV®ue
, "info_map_parameters"))

52 
	`RoundIn™
();

54 ià(
g_bIsMMPlugš
)

55 
	`RETURN_META_VALUE
(
MRES_IGNORED
, 0);

57  
	`FIND_ENTITY_BY_STRING
(
pEdiùS¹S—rchAá”
, 
pszF›ld
, 
pszV®ue
);

58 
	}
}

61 
	$pâEm™Sound
(
ediù_t
 *
’t™y
, 
chªÃl
, cÚ¡ *
§m¶e
, 
vŞume
, 
©‹nu©iÚ
, 
fFÏgs
, 
p™ch
)

63 
	`SoundA‰achToTh»©
(
’t™y
, 
§m¶e
, 
vŞume
);

65 ià(
g_bIsMMPlugš
)

66 
	`RETURN_META
(
MRES_IGNORED
);

68 
	`EMIT_SOUND_DYN2
(
’t™y
, 
chªÃl
, 
§m¶e
, 
vŞume
, 
©‹nu©iÚ
, 
fFÏgs
, 
p™ch
);

69 
	}
}

71 
	$pâCl›ÁCommªd
(
ediù_t
 *
pEdiù
, *
szFmt
, ...)

73 ià(!
	`IsPÏy”
(
pEdiù
))

75 ià(
g_bIsMMPlugš
)

76 
	`RETURN_META
(
MRES_SUPERCEDE
);

80 
¡ršg
[256];

81 
va_li¡
 
¬g±r
;

82 
	`va_¡¬t
(
¬g±r
, 
szFmt
);

83 
	`_v¢´štf
(
¡ršg
, (¡ršg), 
szFmt
, 
¬g±r
);

84 
	`va_’d
(
¬g±r
);

86 ià((
pEdiù
->
v
.
æags
 & 
FL_FAKECLIENT
è|| 
CBa£BÙ
::
	`In¡ªû
(pEdict))

88 
	`FakeCl›ÁCommªd
(
pEdiù
, 
¡ršg
);

89 ià(
g_bIsMMPlugš
)

90 
	`RETURN_META
(
MRES_SUPERCEDE
);

94 ià(
g_bIsMMPlugš
)

95 
	`RETURN_META
(
MRES_IGNORED
);

96 
	`CLIENT_COMMAND
(
pEdiù
, 
¡ršg
);

98 
	}
}

101 
	$pâMes§geBegš
(
msg_de¡
, 
msg_ty³
, cÚ¡ *
pOrigš
, 
ediù_t
 *
ed
)

103 
g_iMsgS‹
 = 0;

105 ià(
g_bIsMMPlugš
 && 
mes§ge_MÚey
 == 0)

109 
mes§ge_ShowM’u
 = 
	`GET_USER_MSG_ID
(
PLID
, "ShowM’u", 
NULL
);

110 
mes§ge_VGUIM’u
 = 
	`GET_USER_MSG_ID
(
PLID
, "VGUIM’u", 
NULL
);

111 
mes§ge_W—pÚLi¡
 = 
	`GET_USER_MSG_ID
(
PLID
, "W—pÚLi¡", 
NULL
);

112 
mes§ge_CurW—pÚ
 = 
	`GET_USER_MSG_ID
(
PLID
, "CurW—pÚ", 
NULL
);

113 
mes§ge_AmmoX
 = 
	`GET_USER_MSG_ID
(
PLID
, "AmmoX", 
NULL
);

114 
mes§ge_AmmoPickup
 = 
	`GET_USER_MSG_ID
(
PLID
, "AmmoPickup", 
NULL
);

115 
mes§ge_Damage
 = 
	`GET_USER_MSG_ID
(
PLID
, "Damage", 
NULL
);

116 
mes§ge_MÚey
 = 
	`GET_USER_MSG_ID
(
PLID
, "MÚey", 
NULL
);

117 
mes§ge_StusIcÚ
 = 
	`GET_USER_MSG_ID
(
PLID
, "StusIcÚ", 
NULL
);

118 
mes§ge_D—thMsg
 = 
	`GET_USER_MSG_ID
(
PLID
, "D—thMsg", 
NULL
);

119 
mes§ge_Sü“nFade
 = 
	`GET_USER_MSG_ID
(
PLID
, "Sü“nFade", 
NULL
);

120 
mes§ge_HLTV
 = 
	`GET_USER_MSG_ID
(
PLID
, "HLTV", 
NULL
);

121 
mes§ge_TextMsg
 = 
	`GET_USER_MSG_ID
(
PLID
, "TextMsg", 
NULL
);

122 
mes§ge_T—mInfo
 = 
	`GET_USER_MSG_ID
(
PLID
, "T—mInfo", 
NULL
);

127 ià(
mes§ge_MÚey
 == 0)

128 
	`T”mš©eOnE¼Ü
("POD-Bot can only be used in Counter-Strike!\n");

130 ià(
gpGlob®s
->
d—thm©ch
)

132 
šdex
;

134 ià(
msg_de¡
 =ğ
MSG_SPEC
 && 
msg_ty³
 =ğ
mes§ge_HLTV
)

135 
bÙMsgFunùiÚ
 = 
BÙCl›Á_CS_HLTV
;

137 ià(
msg_ty³
 =ğ
mes§ge_W—pÚLi¡
)

138 
bÙMsgFunùiÚ
 = 
BÙCl›Á_CS_W—pÚLi¡
;

140 ià(
ed
)

142 
šdex
 = 
	`UTIL_G‘BÙIndex
(
ed
);

145 ià(
šdex
 != -1)

147 
bÙMsgFunùiÚ
 = 
NULL
;

148 
bÙMsgIndex
 = 
šdex
;

151 ià(
msg_ty³
 =ğ
mes§ge_VGUIM’u
)

152 
bÙMsgFunùiÚ
 = 
BÙCl›Á_CS_VGUI
;

153 ià(
msg_ty³
 =ğ
mes§ge_ShowM’u
)

154 
bÙMsgFunùiÚ
 = 
BÙCl›Á_CS_ShowM’u
;

155 ià(
msg_ty³
 =ğ
mes§ge_CurW—pÚ
)

156 
bÙMsgFunùiÚ
 = 
BÙCl›Á_CS_Cu¼’tW—pÚ
;

157 ià(
msg_ty³
 =ğ
mes§ge_AmmoX
)

158 
bÙMsgFunùiÚ
 = 
BÙCl›Á_CS_AmmoX
;

159 ià(
msg_ty³
 =ğ
mes§ge_AmmoPickup
)

160 
bÙMsgFunùiÚ
 = 
BÙCl›Á_CS_AmmoPickup
;

161 ià(
msg_ty³
 =ğ
mes§ge_Damage
)

162 
bÙMsgFunùiÚ
 = 
BÙCl›Á_CS_Damage
;

163 ià(
msg_ty³
 =ğ
mes§ge_MÚey
)

164 
bÙMsgFunùiÚ
 = 
BÙCl›Á_CS_MÚey
;

165 ià(
msg_ty³
 =ğ
mes§ge_StusIcÚ
)

166 
bÙMsgFunùiÚ
 = 
BÙCl›Á_CS_StusIcÚ
;

167 ià(
msg_ty³
 =ğ
mes§ge_Sü“nFade
)

168 
bÙMsgFunùiÚ
 = 
BÙCl›Á_CS_Sü“nFade
;

169 ià(
msg_ty³
 =ğ
mes§ge_TextMsg
)

170 
bÙMsgFunùiÚ
 = 
BÙCl›Á_CS_TextMsg
;

173 ià(
msg_de¡
 =ğ
MSG_ALL
)

175 
bÙMsgFunùiÚ
 = 
NULL
;

176 
bÙMsgIndex
 = -1;

178 ià(
msg_ty³
 =ğ
mes§ge_D—thMsg
)

179 
bÙMsgFunùiÚ
 = 
BÙCl›Á_CS_D—thMsg
;

180 ià(
msg_ty³
 =ğ
mes§ge_TextMsg
)

181 
bÙMsgFunùiÚ
 = 
BÙCl›Á_CS_TextMsgAÎ
;

182 ià(
msg_ty³
 =ğ
mes§ge_T—mInfo
)

183 
bÙMsgFunùiÚ
 = 
BÙCl›Á_CS_T—mInfo
;

184 ià(
msg_ty³
 =ğ
SVC_INTERMISSION
)

186 
i
 = 0; i < 
gpGlob®s
->
maxCl›Ás
; i++)

188 
CBa£BÙ
 *
pBÙ
 = 
g_rgpBÙs
[
i
];

189 ià(
pBÙ
)

190 
pBÙ
->
m_bNÙKËd
 = 
FALSE
;

196 ià(
g_bIsMMPlugš
)

197 
	`RETURN_META
(
MRES_IGNORED
);

199 
	`MESSAGE_BEGIN
(
msg_de¡
, 
msg_ty³
, 
pOrigš
, 
ed
);

200 
	}
}

202 
	$pâMes§geEnd
()

204 
g_iMsgS‹
 = 0;

205 
bÙMsgFunùiÚ
 = 
NULL
;

207 ià(
g_bIsMMPlugš
)

208 
	`RETURN_META
(
MRES_IGNORED
);

210 
	`MESSAGE_END
();

211 
	}
}

213 
	$pâWr™eBy‹
(
iV®ue
)

216 ià(
bÙMsgFunùiÚ
)

217 (*
bÙMsgFunùiÚ
)((*)&
iV®ue
, 
bÙMsgIndex
);

219 ià(
g_bIsMMPlugš
)

220 
	`RETURN_META
(
MRES_IGNORED
);

222 
	`WRITE_BYTE
(
iV®ue
);

223 
	}
}

225 
	$pâWr™eCh¬
(
iV®ue
)

228 ià(
bÙMsgFunùiÚ
)

229 (*
bÙMsgFunùiÚ
)((*)&
iV®ue
, 
bÙMsgIndex
);

231 ià(
g_bIsMMPlugš
)

232 
	`RETURN_META
(
MRES_IGNORED
);

234 
	`WRITE_CHAR
(
iV®ue
);

235 
	}
}

237 
	$pâWr™eShÜt
(
iV®ue
)

240 ià(
bÙMsgFunùiÚ
)

241 (*
bÙMsgFunùiÚ
)((*)&
iV®ue
, 
bÙMsgIndex
);

243 ià(
g_bIsMMPlugš
)

244 
	`RETURN_META
(
MRES_IGNORED
);

246 
	`WRITE_SHORT
(
iV®ue
);

247 
	}
}

249 
	$pâWr™eLÚg
(
iV®ue
)

252 ià(
bÙMsgFunùiÚ
)

253 (*
bÙMsgFunùiÚ
)((*)&
iV®ue
, 
bÙMsgIndex
);

255 ià(
g_bIsMMPlugš
)

256 
	`RETURN_META
(
MRES_IGNORED
);

258 
	`WRITE_LONG
(
iV®ue
);

259 
	}
}

261 
	$pâWr™eAngË
(
æV®ue
)

264 ià(
bÙMsgFunùiÚ
)

265 (*
bÙMsgFunùiÚ
)((*)&
æV®ue
, 
bÙMsgIndex
);

267 ià(
g_bIsMMPlugš
)

268 
	`RETURN_META
(
MRES_IGNORED
);

270 
	`WRITE_ANGLE
(
æV®ue
);

271 
	}
}

273 
	$pâWr™eCoÜd
(
æV®ue
)

276 ià(
bÙMsgFunùiÚ
)

277 (*
bÙMsgFunùiÚ
)((*)&
æV®ue
, 
bÙMsgIndex
);

279 ià(
g_bIsMMPlugš
)

280 
	`RETURN_META
(
MRES_IGNORED
);

282 
	`WRITE_COORD
(
æV®ue
);

283 
	}
}

285 
	$pâWr™eSŒšg
(cÚ¡ *
sz
)

287 ià(
gpGlob®s
->
d—thm©ch
)

290 ià(
	`FSŒEq
(
sz
, "%!MRAD_BOMBPL"))

292 ià(!
g_bBombPÏÁed
)

294 
g_bBombPÏÁed
 = 
g_bBombSaySŒšg
 = 
TRUE
;

295 
g_fTimeBombPÏÁed
 = 
gpGlob®s
->
time
;

299 
i
 = 0; i < 
gpGlob®s
->
maxCl›Ás
; i++)

301 
CBa£BÙ
 *
pBÙ
 = 
g_rgpBÙs
[
i
];

302 ià(
pBÙ
)

304 
ediù_t
 *
pEdiù
 = 
pBÙ
->
	`ediù
();

305 ià(
	`IsPÏy”
(
pEdiù
è&& 
	`IsAlive
(pEdict) &&

306 
	`UTIL_G‘T—m
(
pEdiù
è=ğ
TEAM_CT
)

309 
pBÙ
->
	`D–‘eS—rchNodes
();

311 
pBÙ
->
	`Re£tTasks
();

314 
pBÙ
->
m_æAg»ssiÚLev–
 += 0.1;

315 ià(
pBÙ
->
m_æAg»ssiÚLev–
 > 1.0)

316 
pBÙ
->
m_æAg»ssiÚLev–
 = 1.0;

325 ià(
bÙMsgFunùiÚ
)

326 (*
bÙMsgFunùiÚ
)((*)
sz
, 
bÙMsgIndex
);

328 ià(
g_bIsMMPlugš
)

329 
	`RETURN_META
(
MRES_IGNORED
);

331 
	`WRITE_STRING
(
sz
);

332 
	}
}

334 
	$pâWr™eEÁ™y
(
iV®ue
)

337 ià(
bÙMsgFunùiÚ
)

338 (*
bÙMsgFunùiÚ
)((*)&
iV®ue
, 
bÙMsgIndex
);

340 ià(
g_bIsMMPlugš
)

341 
	`RETURN_META
(
MRES_IGNORED
);

343 
	`WRITE_ENTITY
(
iV®ue
);

344 
	}
}

347 
	$pâCmd_Argc
()

350 ià(
isFakeCl›ÁCommªd
)

352 ià(
g_bIsMMPlugš
)

353 
	`RETURN_META_VALUE
(
MRES_SUPERCEDE
, 
çke_¬g_couÁ
);

354  
çke_¬g_couÁ
;

357 ià(
g_bIsMMPlugš
)

358 
	`RETURN_META_VALUE
(
MRES_IGNORED
, 
NULL
);

360  
	`CMD_ARGC
();

361 
	}
}

363 cÚ¡ *
	$pâCmd_Args
()

366 ià(
isFakeCl›ÁCommªd
)

369 ià(
	`¡ºcmp
 ("§y ", 
g_¬gv
, 4) == 0)

371 ià(
g_bIsMMPlugš
)

372 
	`RETURN_META_VALUE
(
MRES_SUPERCEDE
, 
g_¬gv
 + 4);

373  
g_¬gv
 + 4;

375 ià(
	`¡ºcmp
 ("§y_‹am ", 
g_¬gv
, 9) == 0)

377 ià(
g_bIsMMPlugš
)

378 
	`RETURN_META_VALUE
(
MRES_SUPERCEDE
, 
g_¬gv
 + 9);

379  
g_¬gv
 + 9;

382 ià(
g_bIsMMPlugš
)

383 
	`RETURN_META_VALUE
(
MRES_SUPERCEDE
, 
g_¬gv
);

384  
g_¬gv
;

387 ià(
g_bIsMMPlugš
)

388 
	`RETURN_META_VALUE
(
MRES_IGNORED
, 
NULL
);

390  
	`CMD_ARGS
();

391 
	}
}

393 cÚ¡ *
	$pâCmd_Argv
(
¬gc
)

396 ià(
isFakeCl›ÁCommªd
)

398 ià(
g_bIsMMPlugš
)

399 
	`RETURN_META_VALUE
(
MRES_SUPERCEDE
, 
	`G‘Arg
(
g_¬gv
, 
¬gc
));

400  
	`G‘Arg
(
g_¬gv
, 
¬gc
);

402 ià(
g_bIsMMPlugš
)

403 
	`RETURN_META_VALUE
(
MRES_IGNORED
, 
NULL
);

405  
	`CMD_ARGV
(
¬gc
);

406 
	}
}

409 
	$pâCl›ÁPrštf
Ğ
ediù_t
* 
pEdiù
, 
PRINT_TYPE
 
±y³
, cÚ¡ *
szMsg
 )

411 ià(!
	`IsPÏy”
(
pEdiù
è|| (pEdiù->
v
.
æags
 & 
FL_FAKECLIENT
) ||

412 
CBa£BÙ
::
	`In¡ªû
(
pEdiù
))

414 ià(
g_bIsMMPlugš
)

415 
	`RETURN_META
(
MRES_SUPERCEDE
);

419 ià(
g_bIsMMPlugš
)

420 
	`RETURN_META
(
MRES_IGNORED
);

422 
	`CLIENT_PRINTF
(
pEdiù
, 
±y³
, 
szMsg
);

423 
	}
}

425 
	$pâS‘Cl›ÁMax¥“d
(cÚ¡ 
ediù_t
 *
pEdiù
, 
fNewMax¥“d
)

427 ((
ediù_t
 *)
pEdiù
)->
v
.
max¥“d
 = 
fNewMax¥“d
;

429 ià(
g_bIsMMPlugš
)

430 
	`RETURN_META
(
MRES_IGNORED
);

432 (*
g_’gfuncs
.
pâS‘Cl›ÁMax¥“d
)(
pEdiù
, 
fNewMax¥“d
);

433 
	}
}

435 
	$pâRegU£rMsg
(cÚ¡ *
pszName
, 
iSize
)

437 ià(
g_bIsMMPlugš
)

438 
	`RETURN_META_VALUE
(
MRES_IGNORED
, 0);

440 
msg
 = 
	`REG_USER_MSG
(
pszName
, 
iSize
);

442 ià(
	`¡rcmp
(
pszName
, "ShowMenu") == 0)

443 
mes§ge_ShowM’u
 = 
msg
;

444 ià(
	`¡rcmp
(
pszName
, "VGUIMenu") == 0)

445 
mes§ge_VGUIM’u
 = 
msg
;

446 ià(
	`¡rcmp
(
pszName
, "WeaponList") == 0)

447 
mes§ge_W—pÚLi¡
 = 
msg
;

448 ià(
	`¡rcmp
(
pszName
, "CurWeapon") == 0)

449 
mes§ge_CurW—pÚ
 = 
msg
;

450 ià(
	`¡rcmp
(
pszName
, "AmmoX") == 0)

451 
mes§ge_AmmoX
 = 
msg
;

452 ià(
	`¡rcmp
(
pszName
, "AmmoPickup") == 0)

453 
mes§ge_AmmoPickup
 = 
msg
;

454 ià(
	`¡rcmp
(
pszName
, "Damage") == 0)

455 
mes§ge_Damage
 = 
msg
;

456 ià(
	`¡rcmp
(
pszName
, "Money") == 0)

457 
mes§ge_MÚey
 = 
msg
;

458 ià(
	`¡rcmp
(
pszName
, "StatusIcon") == 0)

459 
mes§ge_StusIcÚ
 = 
msg
;

460 ià(
	`¡rcmp
(
pszName
, "DeathMsg") == 0)

461 
mes§ge_D—thMsg
 = 
msg
;

462 ià(
	`¡rcmp
(
pszName
, "ScreenFade") == 0)

463 
mes§ge_Sü“nFade
 = 
msg
;

464 ià(
	`¡rcmp
(
pszName
, "HLTV") == 0)

465 
mes§ge_HLTV
 = 
msg
;

466 ià(
	`¡rcmp
(
pszName
, "TextMsg") == 0)

467 
mes§ge_TextMsg
 = 
msg
;

468 ià(
	`¡rcmp
(
pszName
, "TeamInfo") == 0)

469 
mes§ge_T—mInfo
 = 
msg
;

471  
msg
;

472 
	}
}

474 
C_DLLEXPORT
 
	$G‘EngšeFunùiÚs
(
’gšefuncs_t
 *
³ngfuncsFromEngše
,

475 *
š‹rçûV”siÚ
)

477 ià(
g_bIsMMPlugš
)

478 
	`mem£t
(
³ngfuncsFromEngše
, 0, (
’gšefuncs_t
));

480 
³ngfuncsFromEngše
->
pâChªgeLev–
 =…fnChangeLevel;

481 
³ngfuncsFromEngše
->
pâFšdEÁ™yBySŒšg
 =…fnFindEntityByString;

482 
³ngfuncsFromEngše
->
pâEm™Sound
 =…fnEmitSound;

483 
³ngfuncsFromEngše
->
pâCl›ÁCommªd
 =…fnClientCommand;

484 
³ngfuncsFromEngše
->
pâMes§geBegš
 =…fnMessageBegin;

485 
³ngfuncsFromEngše
->
pâMes§geEnd
 =…fnMessageEnd;

486 
³ngfuncsFromEngše
->
pâWr™eBy‹
 =…fnWriteByte;

487 
³ngfuncsFromEngše
->
pâWr™eCh¬
 =…fnWriteChar;

488 
³ngfuncsFromEngše
->
pâWr™eShÜt
 =…fnWriteShort;

489 
³ngfuncsFromEngše
->
pâWr™eLÚg
 =…fnWriteLong;

490 
³ngfuncsFromEngše
->
pâWr™eAngË
 =…fnWriteAngle;

491 
³ngfuncsFromEngše
->
pâWr™eCoÜd
 =…fnWriteCoord;

492 
³ngfuncsFromEngše
->
pâWr™eSŒšg
 =…fnWriteString;

493 
³ngfuncsFromEngše
->
pâWr™eEÁ™y
 =…fnWriteEntity;

494 
³ngfuncsFromEngše
->
pâRegU£rMsg
 =…fnRegUserMsg;

495 
³ngfuncsFromEngše
->
pâCl›ÁPrštf
 =…fnClientPrintf;

496 
³ngfuncsFromEngše
->
pâCmd_Args
 =…fnCmd_Args;

497 
³ngfuncsFromEngše
->
pâCmd_Argv
 =…fnCmd_Argv;

498 
³ngfuncsFromEngše
->
pâCmd_Argc
 =…fnCmd_Argc;

499 
³ngfuncsFromEngše
->
pâS‘Cl›ÁMax¥“d
 =…fnSetClientMaxspeed;

501  
TRUE
;

502 
	}
}

	@h_export.cpp

8 
	~"bÙ.h
"

11 
’gšefuncs_t
 
	gg_’gfuncs
;

12 
glob®v¬s_t
 *
	ggpGlob®s
;

14 #ifdeà
_WIN32


15 
HINSTANCE
 
	gh_Lib¿ry
 = 
NULL
;

17 *
	gh_Lib¿ry
 = 
NULL
;

20 
GETENTITYAPI
 
	gÙh”_G‘EÁ™yAPI
 = 
NULL
;

21 
GETNEWDLLFUNCTIONS
 
	gÙh”_G‘NewDLLFunùiÚs
 = 
NULL
;

22 
GIVEFNPTRSTODLL
 
	gÙh”_GiveFÅŒsToDÎ
 = 
NULL
;

24 #ifdeà
_WIN32


26 
BOOL
 
WINAPI
 
	$DÎMaš
(
HINSTANCE
 
hš¡DLL
, 
DWORD
 
fdwR—sÚ
, 
LPVOID
 
ÍvRe£rved
)

28 ià(
fdwR—sÚ
 =ğ
DLL_PROCESS_DETACH
)

30 
	`F»eAÎTheStuff
();

31 
	`F»eLªg
();

33 ià(
h_Lib¿ry
)

34 
	`F»eLib¿ry
(
h_Lib¿ry
);

37 ià(!
g_bIsMMPlugš
)

38 
	`F»eNameFuncGlob®s
();

40  
TRUE
;

41 
	}
}

45 
	$_fši
()

47 
	`F»eAÎTheStuff
();

48 
	`F»eLªg
();

49 
	}
}

55 #ià
_MSC_VER
 > 1000

56 #´agm¨
comm’t
(
lšk”
, "/EXPORT:GiveFnptrsToDll=_GiveFnptrsToDll@8,@1")

57 #´agm¨
comm’t
(
lšk”
, "/SECTION:.data,RW")

63 
WINAPI
 
	$GiveFÅŒsToDÎ
Ğ
’gšefuncs_t
* 
³ngfuncsFromEngše
, 
glob®v¬s_t
 *
pGlob®s
 )

66 
	`memıy
(&
g_’gfuncs
, 
³ngfuncsFromEngše
, (
’gšefuncs_t
));

67 
gpGlob®s
 = 
pGlob®s
;

69 ià(
g_bIsMMPlugš
)

72 
szGameDLLName
[256];

73 
	`G‘GameDœeùÜy
(
szGameDLLName
);

76 #ifdeà
_WIN32


77 
	`¡rÿt
(
szGameDLLName
, "\\dlls");

78 
	`mkdœ
(
szGameDLLName
);

79 
	`¡rÿt
(
szGameDLLName
, "\\mp.dll");

81 
h_Lib¿ry
 = 
	`LßdLib¿ry
(
szGameDLLName
);

83 ià(!
h_Lib¿ry
)

86 
size
;

87 *
febuf
 = 
	`LOAD_FILE_FOR_ME
("dÎs/mp.dÎ", &
size
);

89 ià(
febuf
)

91 
FILE
 *
å
 = 
	`fİ’
(
szGameDLLName
, "wb");

92 ià(
å
)

95 
	`fwr™e
(
febuf
, 
size
, 1, 
å
);

96 
	`fşo£
(
å
);

98 
	`FREE_FILE
(
febuf
);

101 
h_Lib¿ry
 = 
	`LßdLib¿ry
(
szGameDLLName
);

104 
	`¡rÿt
(
szGameDLLName
, "/dlls/cs_i386.so");

105 
h_Lib¿ry
 = 
	`dlİ’
(
szGameDLLName
, 
RTLD_NOW
);

108 ià(!
h_Lib¿ry
)

109 
	`T”mš©eOnE¼Ü
("Failo†oad game DLL!");

111 
Ùh”_G‘EÁ™yAPI
 = (
GETENTITYAPI
)
	`G‘ProcAdd»ss
(
h_Lib¿ry
, "GetEntityAPI");

112 
Ùh”_G‘NewDLLFunùiÚs
 = (
GETNEWDLLFUNCTIONS
)
	`G‘ProcAdd»ss
(
h_Lib¿ry
, "GetNewDLLFunctions");

113 
Ùh”_GiveFÅŒsToDÎ
 = (
GIVEFNPTRSTODLL
)
	`G‘ProcAdd»ss
(
h_Lib¿ry
, "GiveFnptrsToDll");

115 
	`G‘EngšeFunùiÚs
(
³ngfuncsFromEngše
, 
NULL
);

117 #ifdeà
_WIN32


118 
	`LßdSymbŞs
(
szGameDLLName
);

119 
³ngfuncsFromEngše
->
pâFunùiÚFromName
 = 
FunùiÚFromName
;

120 
³ngfuncsFromEngše
->
pâNameFÜFunùiÚ
 = 
NameFÜFunùiÚ
;

124 (*
Ùh”_GiveFÅŒsToDÎ
)(
³ngfuncsFromEngše
, 
pGlob®s
);

125 
	}
}

	@intl.cpp

5 
	~"bÙ.h
"

9 *
	mÜig
;

10 *
	mŒª
;

11 } 
	tÏng’Œy_t
;

13 
Ïng’Œy_t
 
	gÏng
[256];

14 
	gg_iNumLªg
 = 0;

16 
	$Œim
(*
¡r
)

18 
pos
 = 0;

19 *
de¡
 = 
¡r
;

22 
¡r
[
pos
] <= ' ' && str[pos] > 0)

23 
pos
++;

25 
¡r
[
pos
]) {

26 *(
de¡
++èğ
¡r
[
pos
];

27 
pos
++;

30 *(
de¡
--) = '\0';

33 
de¡
 >ğ
¡r
 && *dest <= ' ' && *dest > 0)

34 *(
de¡
--) = '\0';

35 
	}
}

37 
	$In™Lªg
()

39 ià(
	`IS_DEDICATED_SERVER
())

42 
¡r
[256], 
buf
[1024];

43 
	`G‘GameDœeùÜy
(
¡r
);

44 
	`¡rÿt
(
¡r
, "/addons/yapb/lang.txt");

46 
FILE
 *
å
 = 
	`fİ’
(
¡r
, "r");

47 ià(
å
 =ğ
NULL
)

50 ’um { 
LANG_ORIG
, 
LANG_TRAN
, 
LANG_IDLE
 };

51 
¡©e
 = 
LANG_IDLE
;

53 
	`mem£t
(
Ïng
, 0, (lang));

54 
g_iNumLªg
 = -1;

56 
buf
[0] = '\0';

58 
	`fg‘s
(
¡r
, 256, 
å
è!ğ
NULL
)

60 ià(
	`¡ºcmp
(
¡r
, "[ORIGINAL]", 10) == 0)

62 
¡©e
 = 
LANG_ORIG
;

64 ià(
g_iNumLªg
 >= 0)

66 
	`Œim
(
buf
);

67 
Ïng
[
g_iNumLªg
].
Œª
 = 
	`¡rdup
(
buf
);

68 
buf
[0] = '\0';

71 ià(
g_iNumLªg
 >= 255)

74 
g_iNumLªg
++;

76 ià(
	`¡ºcmp
(
¡r
, "[TRANSLATED]", 12) == 0)

78 
	`Œim
(
buf
);

79 
Ïng
[
g_iNumLªg
].
Üig
 = 
	`¡rdup
(
buf
);

80 
buf
[0] = '\0';

81 
¡©e
 = 
LANG_TRAN
;

85 
¡©e
)

87 
LANG_ORIG
:

88 
	`as£¹
(
g_iNumLªg
 >= 0);

89 ià(
g_iNumLªg
 >= 0)

90 
	`¡ºÿt
(
buf
, 
¡r
, 1024 - 
	`¡¾’
(buf));

93 
LANG_TRAN
:

94 
	`as£¹
(
g_iNumLªg
 >= 0);

95 ià(
g_iNumLªg
 >= 0)

96 
	`¡ºÿt
(
buf
, 
¡r
, 1024 - 
	`¡¾’
(buf));

102 
g_iNumLªg
++;

103 ià(
g_iNumLªg
 > 0)

105 
	`Œim
(
buf
);

106 
Ïng
[
g_iNumLªg
 - 1].
Œª
 = 
	`¡rdup
(
buf
);

109 
	`fşo£
(
å
);

110 
	}
}

112 
	$F»eLªg
()

114 
i
 = 0; i < 
g_iNumLªg
; i++) {

115 
	`ä“
(
Ïng
[
i
].
Üig
);

116 
	`ä“
(
Ïng
[
i
].
Œª
);

118 
g_iNumLªg
 = 0;

119 
	}
}

121 cÚ¡ *
	$Œ
(cÚ¡ *
s
)

123 
¡r
[1024];

125 cÚ¡ *
p
 = 
s
 + 
	`¡¾’
(s) - 1;

126 
p
 > 
s
 && *p == '\n')

127 
p
--;

128 ià(
p
 !ğ
s
)

129 
p
++;

131 
	`¡ºıy
(
¡r
, 
s
, 1024);

132 
	`Œim
(
¡r
);

134 
i
 = 0; i < 
g_iNumLªg
; i++)

136 ià(
	`¡rcmp
(
¡r
, 
Ïng
[
i
].
Üig
) == 0)

138 
	`¡ºıy
(
¡r
, 
Ïng
[
i
].
Œª
, 1024);

139 ià(
p
 !ğ
s
)

140 
	`¡ºÿt
(
¡r
, 
p
, 1024 - 
	`¡¾’
(str));

141  
¡r
;

145  
s
;

146 
	}
}

	@linkgame.cpp

7 
	~"bÙ.h
"

9 #iâdeà
__lšux__


10 #ifdeà
__BORLANDC__


11 
	#h_Lib¿ry
 
_h_Lib¿ry


	)

13 (
	tFAR
 *
	tLINK_ENTITY_GAME
)(
	t’tv¬s_t
 *);

14 
HINSTANCE
 
h_Lib¿ry
;

16 (*
	tLINK_ENTITY_GAME
)(
	t’tv¬s_t
 *);

17 *
h_Lib¿ry
;

20 
	#LINK_ENTITY_TO_GAME
(
m­CÏssName
) \

21 "C" 
EXPORT
 
	`m­CÏssName
(
’tv¬s_t
 *
³v
) \

23 
LINK_ENTITY_GAME
 
Ùh”CÏssName
 = 
NULL
; \

24 ià(
Ùh”CÏssName
 =ğ
NULL
) \

25 
Ùh”CÏssName
 = (
LINK_ENTITY_GAME
)
	`G‘ProcAdd»ss
(
h_Lib¿ry
, #mapClassName); \

26 ià(
Ùh”CÏssName
 =ğ
NULL
) \

27 ; (*
Ùh”CÏssName
)(
³v
); \

28 
	}

	)
}

31 
LINK_ENTITY_TO_GAME
(
D–ayedU£
);

32 
LINK_ENTITY_TO_GAME
(
amb›Á_g’”ic
);

33 
LINK_ENTITY_TO_GAME
(
ammo_338magnum
);

34 
LINK_ENTITY_TO_GAME
(
ammo_357sig
);

35 
LINK_ENTITY_TO_GAME
(
ammo_45aı
);

36 
LINK_ENTITY_TO_GAME
(
ammo_50«
);

37 
LINK_ENTITY_TO_GAME
(
ammo_556Çto
);

38 
LINK_ENTITY_TO_GAME
(
ammo_556Çtobox
);

39 
LINK_ENTITY_TO_GAME
(
ammo_57mm
);

40 
LINK_ENTITY_TO_GAME
(
ammo_762Çto
);

41 
LINK_ENTITY_TO_GAME
(
ammo_9mm
);

42 
LINK_ENTITY_TO_GAME
(
ammo_buckshÙ
);

43 
LINK_ENTITY_TO_GAME
(
¬moury_’t™y
);

44 
LINK_ENTITY_TO_GAME
(
b—m
);

45 
LINK_ENTITY_TO_GAME
(
bodyque
);

46 
LINK_ENTITY_TO_GAME
(
bu‰Ú_rg‘
);

47 
LINK_ENTITY_TO_GAME
(
cyş”
);

48 
LINK_ENTITY_TO_GAME
(
cyş”_´droid
);

49 
LINK_ENTITY_TO_GAME
(
cyş”_¥r™e
);

50 
LINK_ENTITY_TO_GAME
(
cyş”_w—pÚ
);

51 
LINK_ENTITY_TO_GAME
(
cyş”_w»ckage
);

52 
LINK_ENTITY_TO_GAME
(
’v_b—m
);

53 
LINK_ENTITY_TO_GAME
(
’v_bev”age
);

54 
LINK_ENTITY_TO_GAME
(
’v_blood
);

55 
LINK_ENTITY_TO_GAME
(
’v_bombglow
);

56 
LINK_ENTITY_TO_GAME
(
’v_bubbËs
);

57 
LINK_ENTITY_TO_GAME
(
’v_debris
);

58 
LINK_ENTITY_TO_GAME
(
’v_ex¶osiÚ
);

59 
LINK_ENTITY_TO_GAME
(
’v_çde
);

60 
LINK_ENTITY_TO_GAME
(
’v_fuÂ–
);

61 
LINK_ENTITY_TO_GAME
(
’v_glob®
);

62 
LINK_ENTITY_TO_GAME
(
’v_glow
);

63 
LINK_ENTITY_TO_GAME
(
’v_Ï£r
);

64 
LINK_ENTITY_TO_GAME
(
’v_lighŠšg
);

65 
LINK_ENTITY_TO_GAME
(
’v_mes§ge
);

66 
LINK_ENTITY_TO_GAME
(
’v_¿š
);

67 
LINK_ENTITY_TO_GAME
(
’v_»nd”
);

68 
LINK_ENTITY_TO_GAME
(
’v_shake
);

69 
LINK_ENTITY_TO_GAME
(
’v_shoÙ”
);

70 
LINK_ENTITY_TO_GAME
(
’v_¢ow
);

71 
LINK_ENTITY_TO_GAME
(
’v_sound
);

72 
LINK_ENTITY_TO_GAME
(
’v_¥¬k
);

73 
LINK_ENTITY_TO_GAME
(
’v_¥r™e
);

74 
LINK_ENTITY_TO_GAME
(
fœ—ndd›
);

75 
LINK_ENTITY_TO_GAME
(
func_bomb_rg‘
);

76 
LINK_ENTITY_TO_GAME
(
func_b»akabË
);

77 
LINK_ENTITY_TO_GAME
(
func_bu‰Ú
);

78 
LINK_ENTITY_TO_GAME
(
func_buyzÚe
);

79 
LINK_ENTITY_TO_GAME
(
func_cÚveyÜ
);

80 
LINK_ENTITY_TO_GAME
(
func_doÜ
);

81 
LINK_ENTITY_TO_GAME
(
func_doÜ_rÙ©šg
);

82 
LINK_ENTITY_TO_GAME
(
func_esÿ³zÚe
);

83 
LINK_ENTITY_TO_GAME
(
func_äiùiÚ
);

84 
LINK_ENTITY_TO_GAME
(
func_g»nÿtch
);

85 
LINK_ENTITY_TO_GAME
(
func_guÁ¬g‘
);

86 
LINK_ENTITY_TO_GAME
(
func_h—Éhch¬g”
);

87 
LINK_ENTITY_TO_GAME
(
func_ho¡age_»scue
);

88 
LINK_ENTITY_TO_GAME
(
func_lusiÚ¬y
);

89 
LINK_ENTITY_TO_GAME
(
func_Ïdd”
);

90 
LINK_ENTITY_TO_GAME
(
func_mÚ¡”ş
);

91 
LINK_ENTITY_TO_GAME
(
func_mÜr_f›ld
);

92 
LINK_ENTITY_TO_GAME
(
func_³ndulum
);

93 
LINK_ENTITY_TO_GAME
(
func_¶©
);

94 
LINK_ENTITY_TO_GAME
(
func_¶©rÙ
);

95 
LINK_ENTITY_TO_GAME
(
func_pushabË
);

96 
LINK_ENTITY_TO_GAME
(
func_¿š
);

97 
LINK_ENTITY_TO_GAME
(
func_»ch¬ge
);

98 
LINK_ENTITY_TO_GAME
(
func_rÙ_bu‰Ú
);

99 
LINK_ENTITY_TO_GAME
(
func_rÙ©šg
);

100 
LINK_ENTITY_TO_GAME
(
func_¢ow
);

101 
LINK_ENTITY_TO_GAME
(
func_nk
);

102 
LINK_ENTITY_TO_GAME
(
func_nkcÚŒŞs
);

103 
LINK_ENTITY_TO_GAME
(
func_nkÏ£r
);

104 
LINK_ENTITY_TO_GAME
(
func_nkmÜr
);

105 
LINK_ENTITY_TO_GAME
(
func_nkrock‘
);

106 
LINK_ENTITY_TO_GAME
(
func_Œackautochªge
);

107 
LINK_ENTITY_TO_GAME
(
func_Œackchªge
);

108 
LINK_ENTITY_TO_GAME
(
func_ŒackŒaš
);

109 
LINK_ENTITY_TO_GAME
(
func_Œaš
);

110 
LINK_ENTITY_TO_GAME
(
func_ŒašcÚŒŞs
);

111 
LINK_ENTITY_TO_GAME
(
func_vehişe
);

112 
LINK_ENTITY_TO_GAME
(
func_vehişecÚŒŞs
);

113 
LINK_ENTITY_TO_GAME
(
func_v_§ãtyzÚe
);

114 
LINK_ENTITY_TO_GAME
(
func_w®l
);

115 
LINK_ENTITY_TO_GAME
(
func_w®l_toggË
);

116 
LINK_ENTITY_TO_GAME
(
func_w©”
);

117 
LINK_ENTITY_TO_GAME
(
func_w—pÚcheck
);

118 
LINK_ENTITY_TO_GAME
(
game_couÁ”
);

119 
LINK_ENTITY_TO_GAME
(
game_couÁ”_£t
);

120 
LINK_ENTITY_TO_GAME
(
game_’d
);

121 
LINK_ENTITY_TO_GAME
(
game_¶ay”_equ
);

122 
LINK_ENTITY_TO_GAME
(
game_¶ay”_hu¹
);

123 
LINK_ENTITY_TO_GAME
(
game_¶ay”_‹am
);

124 
LINK_ENTITY_TO_GAME
(
game_scÜe
);

125 
LINK_ENTITY_TO_GAME
(
game_‹am_ma¡”
);

126 
LINK_ENTITY_TO_GAME
(
game_‹am_£t
);

127 
LINK_ENTITY_TO_GAME
(
game_‹xt
);

128 
LINK_ENTITY_TO_GAME
(
game_zÚe_¶ay”
);

129 
LINK_ENTITY_TO_GAME
(
gibshoÙ”
);

130 
LINK_ENTITY_TO_GAME
(
g»Çde
);

131 
LINK_ENTITY_TO_GAME
(
ho¡age_’t™y
);

132 
LINK_ENTITY_TO_GAME
(
šfo_bomb_rg‘
);

133 
LINK_ENTITY_TO_GAME
(
šfo_ho¡age_»scue
);

134 
LINK_ENTITY_TO_GAME
(
šfo_š‹rmissiÚ
);

135 
LINK_ENTITY_TO_GAME
(
šfo_Ïndm¬k
);

136 
LINK_ENTITY_TO_GAME
(
šfo_m­_·¿m‘”s
);

137 
LINK_ENTITY_TO_GAME
(
šfo_nuÎ
);

138 
LINK_ENTITY_TO_GAME
(
šfo_¶ay”_d—thm©ch
);

139 
LINK_ENTITY_TO_GAME
(
šfo_¶ay”_¡¬t
);

140 
LINK_ENTITY_TO_GAME
(
šfo_rg‘
);

141 
LINK_ENTITY_TO_GAME
(
šfo_‹ËpÜt_de¡š©iÚ
);

142 
LINK_ENTITY_TO_GAME
(
šfo_v_¡¬t
);

143 
LINK_ENTITY_TO_GAME
(
šfodeÿl
);

144 
LINK_ENTITY_TO_GAME
(
™em_aœnk
);

145 
LINK_ENTITY_TO_GAME
(
™em_ªtidÙe
);

146 
LINK_ENTITY_TO_GAME
(
™em_as§uÉsu™
);

147 
LINK_ENTITY_TO_GAME
(
™em_b©‹ry
);

148 
LINK_ENTITY_TO_GAME
(
™em_h—Éhk™
);

149 
LINK_ENTITY_TO_GAME
(
™em_kevÏr
);

150 
LINK_ENTITY_TO_GAME
(
™em_lÚgjump
);

151 
LINK_ENTITY_TO_GAME
(
™em_£cur™y
);

152 
LINK_ENTITY_TO_GAME
(
™em_sodaÿn
);

153 
LINK_ENTITY_TO_GAME
(
™em_su™
);

154 
LINK_ENTITY_TO_GAME
(
™em_thigh·ck
);

155 
LINK_ENTITY_TO_GAME
(
light
);

156 
LINK_ENTITY_TO_GAME
(
light_’vœÚm’t
);

157 
LINK_ENTITY_TO_GAME
(
light_¥Ù
);

158 
LINK_ENTITY_TO_GAME
(
mom’ry_doÜ
);

159 
LINK_ENTITY_TO_GAME
(
mom’ry_rÙ_bu‰Ú
);

160 
LINK_ENTITY_TO_GAME
(
mÚ¡”_hevsu™_d—d
);

161 
LINK_ENTITY_TO_GAME
(
mÚ¡”_mÜr
);

162 
LINK_ENTITY_TO_GAME
(
mÚ¡”_sc›Ái¡
);

163 
LINK_ENTITY_TO_GAME
(
muÉi_mªag”
);

164 
LINK_ENTITY_TO_GAME
(
muÉisourû
);

165 
LINK_ENTITY_TO_GAME
(
·th_cÜÃr
);

166 
LINK_ENTITY_TO_GAME
(
·th_Œack
);

167 
LINK_ENTITY_TO_GAME
(
¶ay”
);

168 
LINK_ENTITY_TO_GAME
(
¶ay”_lßd§ved
);

169 
LINK_ENTITY_TO_GAME
(
¶ay”_w—pÚ¡r
);

170 
LINK_ENTITY_TO_GAME
(
sound’t
);

171 
LINK_ENTITY_TO_GAME
(
¥¬k_show”
);

172 
LINK_ENTITY_TO_GAME
(
¥—k”
);

173 
LINK_ENTITY_TO_GAME
(
rg‘_cdaudio
);

174 
LINK_ENTITY_TO_GAME
(
‹¡_efãù
);

175 
LINK_ENTITY_TO_GAME
(
Œigg”
);

176 
LINK_ENTITY_TO_GAME
(
Œigg”_auto
);

177 
LINK_ENTITY_TO_GAME
(
Œigg”_auto§ve
);

178 
LINK_ENTITY_TO_GAME
(
Œigg”_ÿm”a
);

179 
LINK_ENTITY_TO_GAME
(
Œigg”_cdaudio
);

180 
LINK_ENTITY_TO_GAME
(
Œigg”_chªg–ev–
);

181 
LINK_ENTITY_TO_GAME
(
Œigg”_chªg‘¬g‘
);

182 
LINK_ENTITY_TO_GAME
(
Œigg”_couÁ”
);

183 
LINK_ENTITY_TO_GAME
(
Œigg”_’d£ùiÚ
);

184 
LINK_ENTITY_TO_GAME
(
Œigg”_g¿v™y
);

185 
LINK_ENTITY_TO_GAME
(
Œigg”_hu¹
);

186 
LINK_ENTITY_TO_GAME
(
Œigg”_mÚ¡”jump
);

187 
LINK_ENTITY_TO_GAME
(
Œigg”_muÉË
);

188 
LINK_ENTITY_TO_GAME
(
Œigg”_Úû
);

189 
LINK_ENTITY_TO_GAME
(
Œigg”_push
);

190 
LINK_ENTITY_TO_GAME
(
Œigg”_»Ïy
);

191 
LINK_ENTITY_TO_GAME
(
Œigg”_‹ËpÜt
);

192 
LINK_ENTITY_TO_GAME
(
Œigg”_Œªs™iÚ
);

193 
LINK_ENTITY_TO_GAME
(
w—pÚ_ak47
);

194 
LINK_ENTITY_TO_GAME
(
w—pÚ_aug
);

195 
LINK_ENTITY_TO_GAME
(
w—pÚ_awp
);

196 
LINK_ENTITY_TO_GAME
(
w—pÚ_c4
);

197 
LINK_ENTITY_TO_GAME
(
w—pÚ_d—gË
);

198 
LINK_ENTITY_TO_GAME
(
w—pÚ_–™e
);

199 
LINK_ENTITY_TO_GAME
(
w—pÚ_çmas
);

200 
LINK_ENTITY_TO_GAME
(
w—pÚ_five£v’
);

201 
LINK_ENTITY_TO_GAME
(
w—pÚ_æashbªg
);

202 
LINK_ENTITY_TO_GAME
(
w—pÚ_g3sg1
);

203 
LINK_ENTITY_TO_GAME
(
w—pÚ_g®
);

204 
LINK_ENTITY_TO_GAME
(
w—pÚ_glock18
);

205 
LINK_ENTITY_TO_GAME
(
w—pÚ_heg»Çde
);

206 
LINK_ENTITY_TO_GAME
(
w—pÚ_kniã
);

207 
LINK_ENTITY_TO_GAME
(
w—pÚ_m249
);

208 
LINK_ENTITY_TO_GAME
(
w—pÚ_m3
);

209 
LINK_ENTITY_TO_GAME
(
w—pÚ_m4a1
);

210 
LINK_ENTITY_TO_GAME
(
w—pÚ_mac10
);

211 
LINK_ENTITY_TO_GAME
(
w—pÚ_mp5Çvy
);

212 
LINK_ENTITY_TO_GAME
(
w—pÚ_p228
);

213 
LINK_ENTITY_TO_GAME
(
w—pÚ_p90
);

214 
LINK_ENTITY_TO_GAME
(
w—pÚ_scout
);

215 
LINK_ENTITY_TO_GAME
(
w—pÚ_sg550
);

216 
LINK_ENTITY_TO_GAME
(
w—pÚ_sg552
);

217 
LINK_ENTITY_TO_GAME
(
w—pÚ_sh›ld
);

218 
LINK_ENTITY_TO_GAME
(
w—pÚ_sh›ldgun
);

219 
LINK_ENTITY_TO_GAME
(
w—pÚ_smokeg»Çde
);

220 
LINK_ENTITY_TO_GAME
(
w—pÚ_tmp
);

221 
LINK_ENTITY_TO_GAME
(
w—pÚ_ump45
);

222 
LINK_ENTITY_TO_GAME
(
w—pÚ_u¥
);

223 
LINK_ENTITY_TO_GAME
(
w—pÚ_xm1014
);

224 
LINK_ENTITY_TO_GAME
(
w—pÚbox
);

225 
LINK_ENTITY_TO_GAME
(
wÜld_™ems
);

226 
LINK_ENTITY_TO_GAME
(
wÜld¥awn
);

	@mathlib.h

5 #iâdeà
MATHLIBRARY_H


6 
	#MATHLIBRARY_H


	)

9 
	#ON_EPSILON
 0.01

	)

10 
	#EQUAL_EPSILON
 0.001

	)

12 
	#FEqu®
(
v1
, 
v2
èĞ
	`çbs
(v1 - v2è< 
EQUAL_EPSILON
 )

	)

14 #´agm¨
w¬nšg
 (
di§bË
: 4239)

16 
šlše
 
	$L’gthSqu¬ed
(cÚ¡ 
VeùÜ
 &
vec
)

19  
vec
.
x
 * vec.x + vec.
y
 * vec.y + vec.
z
 * vec.z;

20 
	}
}

22 
šlše
 
	$UTIL_AngËMod
(
a
)

29  (360.0 / 65536è* (()(
a
 * (65536.0 / 360.0)) & 65535);

30 
	}
}

32 
šlše
 
	$AngËNÜm®ize
(
ªgË
)

39  (360.0 / 65536è* (()((
ªgË
 + 180) * (65536.0 / 360.0)) & 65535) - 180;

40 
	}
}

42 
šlše
 
	$CÏmpAngËs
(
VeùÜ
 &
vecAngËs
)

44 
vecAngËs
.
x
 = 
	`AngËNÜm®ize
(vecAngles.x);

45 
vecAngËs
.
y
 = 
	`AngËNÜm®ize
(vecAngles.y);

46 
vecAngËs
.
z
 = 0;

47 
	}
}

49 
šlše
 
	$SšCos
Ğ
¿d
, *
æSš
, *
æCos
 )

51 #ifdeà
__GNUC__


52 
__co¤
, 
__sšr
;

53 
__asm
 
	`__vŞ©e__
 ("fsšcos" : "ñ" (
__co¤
), "=u" (
__sšr
è: "0" (
¿d
));

54 *
æSš
 = 
__sšr
;

55 *
æCos
 = 
__co¤
;

57 #iâdeà
_MSC_VER


58 *
æSš
 = 
	`sš
(
¿d
);

59 *
æCos
 = 
	`cos
(
¿d
);

61 
__asm


63 
æd
 
DWORD
 
PTR
[
¿d
]

64 
fsšcos


65 
mov
 
edx
, 
DWORD
 
PTR
[
æCos
]

66 
mov
 
—x
, 
DWORD
 
PTR
[
æSš
]

67 
f¡p
 
DWORD
 
PTR
[
edx
]

68 
f¡p
 
DWORD
 
PTR
[
—x
]

72 
	}
}

74 
šlše
 
	$UTIL_AngËDiff
Ğ
de¡AngË
, 
¤cAngË
 )

76  
	`AngËNÜm®ize
(
de¡AngË
 - 
¤cAngË
);

77 
	}
}

79 
šlše
 
	$UTIL_VecToYaw
ĞcÚ¡ 
VeùÜ
 &
vec
 )

84 ià(
vec
.
x
 =ğ0.0 && vec.
y
 == 0.0)

87  
	`©ª2
(
vec
.
y
, vec.
x
è* (180 / 
M_PI
);

88 
	}
}

90 
šlše
 
VeùÜ
 
	$UTIL_VecToAngËs
ĞcÚ¡ 
VeùÜ
 &
vec
 )

95 
yaw
, 
p™ch
;

97 ià(
vec
.
x
 =ğ0.0 && vec.
y
 == 0.0)

99 
yaw
 = 0.0;

100 
p™ch
 = (
vec
.
z
 > 0.0) ? 90 : 270;

104 
yaw
 = 
	`©ª2
(
vec
.
y
, vec.
x
è* (180 / 
M_PI
);

105 
p™ch
 = 
	`©ª2
(
vec
.
z
, vec.
	`L’gth2D
()è* (180 / 
M_PI
);

108  
	`VeùÜ
(
p™ch
, 
yaw
, 0);

109 
	}
}

111 
šlše
 
	$UTIL_MakeVeùÜs
ĞcÚ¡ 
VeùÜ
 &
vecAngËs
 )

113 
¥
 = 0, 
ı
 = 0, 
sy
 = 0, 
cy
 = 0, 
¤
 = 0, 
ü
 = 0;

114 
ªgË
 = 
vecAngËs
.
x
 * (
M_PI
 / 180);

115 
	`SšCos
(
ªgË
, &
¥
, &
ı
);

116 
ªgË
 = 
vecAngËs
.
y
 * (
M_PI
 / 180);

117 
	`SšCos
(
ªgË
, &
sy
, &
cy
);

118 
ªgË
 = 
vecAngËs
.
z
 * (
M_PI
 / 180);

119 
	`SšCos
(
ªgË
, &
¤
, &
ü
);

121 
gpGlob®s
->
v_fÜw¬d
.
x
 = 
ı
 * 
cy
;

122 
gpGlob®s
->
v_fÜw¬d
.
y
 = 
ı
 * 
sy
;

123 
gpGlob®s
->
v_fÜw¬d
.
z
 = -
¥
;

124 
gpGlob®s
->
v_right
.
x
 = -
¤
 * 
¥
 * 
cy
 + 
ü
 * 
sy
;

125 
gpGlob®s
->
v_right
.
y
 = -
¤
 * 
¥
 * 
sy
 - 
ü
 * 
cy
;

126 
gpGlob®s
->
v_right
.
z
 = -
¤
 * 
ı
;

127 
gpGlob®s
->
v_up
.
x
 = 
ü
 * 
¥
 * 
cy
 + 
¤
 * 
sy
;

128 
gpGlob®s
->
v_up
.
y
 = 
ü
 * 
¥
 * 
sy
 - 
¤
 * 
cy
;

129 
gpGlob®s
->
v_up
.
z
 = 
ü
 * 
ı
;

130 
	}
}

	@meta_api.cpp

7 
	~"bÙ.h
"

9 
boŞ
 
	gg_bIsMMPlugš
 = 
FALSE
;

11 
G‘EÁ™yAPI_Po¡
(
DLL_FUNCTIONS
 *
pFunùiÚTabË
, *
š‹rçûV”siÚ
);

12 
G‘BudNumb”
();

14 
META_FUNCTIONS
 
	ggM‘aFunùiÚTabË
 = {

15 
G‘EÁ™yAPI
,

16 
G‘EÁ™yAPI_Po¡
,

17 
NULL
,

18 
NULL
,

19 
NULL
,

20 
NULL
,

21 
G‘EngšeFunùiÚs
,

22 
NULL
,

25 
¶ugš_šfo_t
 
	gPlugš_šfo
 = {

26 
META_INTERFACE_VERSION
,

28 
__DATE__
,

29 
__DATE__
,

33 
PT_STARTUP
,

34 
PT_NEVER
,

38 
m‘a_glob®s_t
 *
	ggpM‘aGlob®s
;

39 
gamedÎ_funcs_t
 *
	ggpGamedÎFuncs
;

40 
mut_funcs_t
 *
	ggpM‘aUtFuncs
;

42 
C_DLLEXPORT
 
	$M‘a_Qu”y
(*
ifv”s
, 
¶ugš_šfo_t
 **
pPlugInfo
, 
mut_funcs_t
 *
pM‘aUtFuncs
)

49 
gpM‘aUtFuncs
 = 
pM‘aUtFuncs
;

51 *
pPlugInfo
 = &
Plugš_šfo
;

54 ià(
	`¡rcmp
(
ifv”s
, 
Plugš_šfo
.ifvers) != 0)

56 
mmajÜ
 = 0, 
mmšÜ
 = 0, 
pmajÜ
 = 0, 
pmšÜ
 = 0;

58 
	`LOG_CONSOLE
(
PLID
, "%s: m‘a-š‹rçû v”siÚ mism©ch (m‘amod: %s, %s: %s)", 
Plugš_šfo
.
Çme
, 
ifv”s
, Plugin_info.name, Plugin_info.ifvers);

59 
	`LOG_MESSAGE
(
PLID
, "%s: m‘a-š‹rçû v”siÚ mism©ch (m‘amod: %s, %s: %s)", 
Plugš_šfo
.
Çme
, 
ifv”s
, Plugin_info.name, Plugin_info.ifvers);

62 
	`ssÿnf
 (
ifv”s
, "%d:%d", &
mmajÜ
, &
mmšÜ
);

63 
	`ssÿnf
 (
META_INTERFACE_VERSION
, "%d:%d", &
pmajÜ
, &
pmšÜ
);

65 ià(
pmajÜ
 > 
mmajÜ
 || (pmajÜ =ğmmajÜ && 
pmšÜ
 > 
mmšÜ
))

67 
	`LOG_CONSOLE
(
PLID
, "metamod version isoo old forhis…lugin; update metamod");

68 
	`LOG_ERROR
(
PLID
, "metamod version isoo old forhis…lugin; update metamod");

72 ià(
pmajÜ
 < 
mmajÜ
)

74 
	`LOG_CONSOLE
(
PLID
, "metamod version is incompatible withhis…lugin;…lease find‡‚ewer version ofhis…lugin");

75 
	`LOG_ERROR
(
PLID
, "metamod version is incompatible withhis…lugin;…lease find‡‚ewer version ofhis…lugin");

79  
TRUE
;

80 
	}
}

83 
C_DLLEXPORT
 
	$M‘a_A‰ach
(
PLUG_LOADTIME
 
now
, 
META_FUNCTIONS
 *
pFunùiÚTabË
, 
m‘a_glob®s_t
 *
pMGlob®s
, 
gamedÎ_funcs_t
 *
pGamedÎFuncs
)

90 ià(
now
 > 
Plugš_šfo
.
lßdabË
)

92 
	`LOG_CONSOLE
(
PLID
, "%s:…lugš NOT‡‰achšg (ÿn'ˆlßd…lugš„ighˆnow)", 
Plugš_šfo
.
Çme
);

93 
	`LOG_ERROR
(
PLID
, "%s:…lugš NOT‡‰achšg (ÿn'ˆlßd…lugš„ighˆnow)", 
Plugš_šfo
.
Çme
);

94  
FALSE
;

98 
gpM‘aGlob®s
 = 
pMGlob®s
;

99 
	`memıy
 (
pFunùiÚTabË
, &
gM‘aFunùiÚTabË
,  (
META_FUNCTIONS
));

100 
gpGamedÎFuncs
 = 
pGamedÎFuncs
;

102  
TRUE
;

103 
	}
}

105 
C_DLLEXPORT
 
	$M‘a_D‘ach
(
PLUG_LOADTIME
 
now
, 
PL_UNLOAD_REASON
 
»asÚ
)

111 ià(
now
 > 
Plugš_šfo
.
uÆßdabË
 && 
»asÚ
 !ğ
PNL_CMD_FORCED
)

113 
	`LOG_CONSOLE
(
PLID
, "%s:…lugš NOT d‘achšg (ÿn'ˆuÆßd…lugš„ighˆnow)", 
Plugš_šfo
.
Çme
);

114 
	`LOG_ERROR
(
PLID
, "%s:…lugš NOT d‘achšg (ÿn'ˆuÆßd…lugš„ighˆnow)", 
Plugš_šfo
.
Çme
);

115  
FALSE
;

118 
	`U£rRemoveAÎBÙs
();

120  
TRUE
;

121 
	}
}

123 
C_DLLEXPORT
 
	$M‘a_In™
()

125 
g_bIsMMPlugš
 = 
TRUE
;

126 
	}
}

	@namefunc.cpp

44 #ifdeà
_WIN32


46 
	~"bÙ.h
"

51 
WORD
 
	me_magic
;

52 
WORD
 
	me_cbÍ
;

53 
WORD
 
	me_ı
;

54 
WORD
 
	me_ülc
;

55 
WORD
 
	me_ı¬hdr
;

56 
WORD
 
	me_mš®loc
;

57 
WORD
 
	me_max®loc
;

58 
WORD
 
	me_ss
;

59 
WORD
 
	me_¥
;

60 
WORD
 
	me_csum
;

61 
WORD
 
	me_
;

62 
WORD
 
	me_cs
;

63 
WORD
 
	me_lç¾c
;

64 
WORD
 
	me_ovno
;

65 
WORD
 
	me_»s
[4];

66 
WORD
 
	me_Ûmid
;

67 
WORD
 
	me_Ûmšfo
;

68 
WORD
 
	me_»s2
[10];

69 
LONG
 
	me_lçÃw
;

70 } 
	tDOS_HEADER
, *
	tP_DOS_HEADER
;

74 
WORD
 
	mMachše
;

75 
WORD
 
	mNumb”OfSeùiÚs
;

76 
DWORD
 
	mTimeD©eSmp
;

77 
DWORD
 
	mPoš‹rToSymbŞTabË
;

78 
DWORD
 
	mNumb”OfSymbŞs
;

79 
WORD
 
	mSizeOfO±iÚ®H—d”
;

80 
WORD
 
	mCh¬aù”i¡ics
;

81 } 
	tPE_HEADER
, *
	tP_PE_HEADER
;

85 
BYTE
 
	mName
[8];

88 
DWORD
 
	mPhysiÿlAdd»ss
;

89 
DWORD
 
	mVœtu®Size
;

90 } 
	mMisc
;

91 
DWORD
 
	mVœtu®Add»ss
;

92 
DWORD
 
	mSizeOfRawD©a
;

93 
DWORD
 
	mPoš‹rToRawD©a
;

94 
DWORD
 
	mPoš‹rToR–oÿtiÚs
;

95 
DWORD
 
	mPoš‹rToLš’umb”s
;

96 
WORD
 
	mNumb”OfR–oÿtiÚs
;

97 
WORD
 
	mNumb”OfLš’umb”s
;

98 
DWORD
 
	mCh¬aù”i¡ics
;

99 } 
	tSECTION_HEADER
, *
	tP_SECTION_HEADER
;

103 
DWORD
 
	mVœtu®Add»ss
;

104 
DWORD
 
	mSize
;

105 } 
	tDATA_DIRECTORY
, *
	tP_DATA_DIRECTORY
;

109 
WORD
 
	mMagic
;

110 
BYTE
 
	mMajÜLšk”V”siÚ
;

111 
BYTE
 
	mMšÜLšk”V”siÚ
;

112 
DWORD
 
	mSizeOfCode
;

113 
DWORD
 
	mSizeOfIn™ŸlizedD©a
;

114 
DWORD
 
	mSizeOfUnš™ŸlizedD©a
;

115 
DWORD
 
	mAdd»ssOfEÁryPošt
;

116 
DWORD
 
	mBa£OfCode
;

117 
DWORD
 
	mBa£OfD©a
;

118 
DWORD
 
	mImageBa£
;

119 
DWORD
 
	mSeùiÚAlignm’t
;

120 
DWORD
 
	mFeAlignm’t
;

121 
WORD
 
	mMajÜO³¿tšgSy¡emV”siÚ
;

122 
WORD
 
	mMšÜO³¿tšgSy¡emV”siÚ
;

123 
WORD
 
	mMajÜImageV”siÚ
;

124 
WORD
 
	mMšÜImageV”siÚ
;

125 
WORD
 
	mMajÜSubsy¡emV”siÚ
;

126 
WORD
 
	mMšÜSubsy¡emV”siÚ
;

127 
DWORD
 
	mWš32V”siÚV®ue
;

128 
DWORD
 
	mSizeOfImage
;

129 
DWORD
 
	mSizeOfH—d”s
;

130 
DWORD
 
	mCheckSum
;

131 
WORD
 
	mSubsy¡em
;

132 
WORD
 
	mDÎCh¬aù”i¡ics
;

133 
DWORD
 
	mSizeOfSckRe£rve
;

134 
DWORD
 
	mSizeOfSckComm™
;

135 
DWORD
 
	mSizeOfH—pRe£rve
;

136 
DWORD
 
	mSizeOfH—pComm™
;

137 
DWORD
 
	mLßd”FÏgs
;

138 
DWORD
 
	mNumb”OfRvaAndSizes
;

139 
DATA_DIRECTORY
 
	mD©aDœeùÜy
[16];

140 } 
	tOPTIONAL_HEADER
, *
	tP_OPTIONAL_HEADER
;

144 
DWORD
 
	mCh¬aù”i¡ics
;

145 
DWORD
 
	mTimeD©eSmp
;

146 
WORD
 
	mMajÜV”siÚ
;

147 
WORD
 
	mMšÜV”siÚ
;

148 
DWORD
 
	mName
;

149 
DWORD
 
	mBa£
;

150 
DWORD
 
	mNumb”OfFunùiÚs
;

151 
DWORD
 
	mNumb”OfNames
;

152 
DWORD
 
	mAdd»ssOfFunùiÚs
;

153 
DWORD
 
	mAdd»ssOfNames
;

154 
DWORD
 
	mAdd»ssOfNameOrdš®s
;

155 } 
	tEXPORT_DIRECTORY
, *
	tP_EXPORT_DIRECTORY
;

157 
WORD
 *
	gp_Ordš®s
 = 
NULL
;

158 
DWORD
 *
	gp_FunùiÚs
 = 
NULL
;

159 
DWORD
 *
	gp_Names
 = 
NULL
;

160 **
	gp_FunùiÚNames
 = 
NULL
;

161 
	gnum_Üdš®s
 = 0;

162 
	gba£_off£t
;

164 
	$F»eNameFuncGlob®s
()

167 ià(
p_Ordš®s
)

168 
	`ä“
(
p_Ordš®s
);

169 
p_Ordš®s
 = 
NULL
;

171 ià(
p_FunùiÚs
)

172 
	`ä“
(
p_FunùiÚs
);

173 
p_FunùiÚs
 = 
NULL
;

175 ià(
p_Names
)

176 
	`ä“
(
p_Names
);

177 
p_Names
 = 
NULL
;

179 ià(
p_FunùiÚNames
)

181 
šdex
 = 0; index < 
num_Üdš®s
; index++)

183 ià(
p_FunùiÚNames
[
šdex
])

184 
	`ä“
(
p_FunùiÚNames
[
šdex
]);

185 
p_FunùiÚNames
[
šdex
] = 
NULL
;

187 
	`ä“
(
p_FunùiÚNames
);

189 
p_FunùiÚNames
 = 
NULL
;

190 
	}
}

192 
	$LßdSymbŞs
(cÚ¡ *
f’ame
)

204 
FILE
 *
å
;

205 
DOS_HEADER
 
dos_h—d”
;

206 
LONG
 
Á_sigÇtu»
;

207 
PE_HEADER
 
³_h—d”
;

208 
SECTION_HEADER
 
£ùiÚ_h—d”
;

209 
OPTIONAL_HEADER
 
İtiÚ®_h—d”
;

210 
LONG
 
ed©a_off£t
;

211 
LONG
 
ed©a_d–
;

212 
EXPORT_DIRECTORY
 
expÜt_dœeùÜy
;

213 
LONG
 
Çme_off£t
;

214 
LONG
 
Üdš®_off£t
;

215 
LONG
 
funùiÚ_off£t
;

216 
funùiÚ_Çme
[256], 
ch
;

217 
i
, 
j
;

218 *
game_GiveFÅŒsToDÎ
;

221 
å
 = 
	`fİ’
(
f’ame
, "rb");

223 
	`ä—d
(&
dos_h—d”
,  (dos_h—d”), 1, 
å
);

224 
	`f£ek
(
å
, 
dos_h—d”
.
e_lçÃw
, 
SEEK_SET
);

225 
	`ä—d
(&
Á_sigÇtu»
,  (Á_sigÇtu»), 1, 
å
);

226 
	`ä—d
(&
³_h—d”
,  (³_h—d”), 1, 
å
);

227 
	`ä—d
(&
İtiÚ®_h—d”
,  (İtiÚ®_h—d”), 1, 
å
);

229 
ed©a_off£t
 = 
İtiÚ®_h—d”
.
D©aDœeùÜy
[0].
Vœtu®Add»ss
;

230 
ed©a_d–
 = 0;

233 
i
 = 0; i < 
³_h—d”
.
Numb”OfSeùiÚs
; i++)

234 ià(
	`¡rcmp
((*è
£ùiÚ_h—d”
.
Name
, ".edata") == 0)

236 
ed©a_off£t
 = 
£ùiÚ_h—d”
.
Poš‹rToRawD©a
;

237 
ed©a_d–
 = 
£ùiÚ_h—d”
.
Vœtu®Add»ss
 - seùiÚ_h—d”.
Poš‹rToRawD©a
;

240 
	`f£ek
(
å
, 
ed©a_off£t
, 
SEEK_SET
);

241 
	`ä—d
(&
expÜt_dœeùÜy
,  (expÜt_dœeùÜy), 1, 
å
);

243 
num_Üdš®s
 = 
expÜt_dœeùÜy
.
Numb”OfNames
;

245 
Üdš®_off£t
 = 
expÜt_dœeùÜy
.
Add»ssOfNameOrdš®s
 - 
ed©a_d–
;

246 
	`f£ek
(
å
, 
Üdš®_off£t
, 
SEEK_SET
);

247 
p_Ordš®s
 = (
WORD
 *)
	`m®loc
(
num_Üdš®s
 *  (WORD));

248 
	`ä—d
(
p_Ordš®s
, 
num_Üdš®s
 *  (
WORD
), 1, 
å
);

250 
funùiÚ_off£t
 = 
expÜt_dœeùÜy
.
Add»ssOfFunùiÚs
 - 
ed©a_d–
;

251 
	`f£ek
(
å
, 
funùiÚ_off£t
, 
SEEK_SET
);

252 
p_FunùiÚs
 = (
DWORD
 *)
	`m®loc
(
num_Üdš®s
 *  (DWORD));

253 
	`ä—d
(
p_FunùiÚs
, 
num_Üdš®s
 *  (
DWORD
), 1, 
å
);

255 
Çme_off£t
 = 
expÜt_dœeùÜy
.
Add»ssOfNames
 - 
ed©a_d–
;

256 
	`f£ek
(
å
, 
Çme_off£t
, 
SEEK_SET
);

257 
p_Names
 = (
DWORD
 *)
	`m®loc
(
num_Üdš®s
 *  (DWORD));

258 
	`ä—d
(
p_Names
, 
num_Üdš®s
 *  (
DWORD
), 1, 
å
);

260 
p_FunùiÚNames
 = (**)
	`m®loc
((*è* 
num_Üdš®s
);

263 
i
 = 0; i < 
num_Üdš®s
; i++)

264 
p_FunùiÚNames
[
i
] = 
NULL
;

267 
i
 = 0; i < 
num_Üdš®s
; i++)

269 ià(
	`f£ek
(
å
, 
p_Names
[
i
] - 
ed©a_d–
, 
SEEK_SET
) != -1)

271 
j
 = 0;

274 (
ch
 = 
	`fg‘c
 (
å
)è!ğ
EOF
)

276 
funùiÚ_Çme
[
j
] = 
ch
;

277 ià(
ch
 == 0)

279 
j
++;

283 
p_FunùiÚNames
[
i
] = (*)
	`m®loc
(
	`¡¾’
(
funùiÚ_Çme
) + 1);

285 ià(
funùiÚ_Çme
[0] == '?')

287 
j
 = 1;

290 !((
funùiÚ_Çme
[
j
] == '@') && (function_name[j + 1] == '@')))

292 
p_FunùiÚNames
[
i
][
j
 - 1] = 
funùiÚ_Çme
[j];

293 ià(
funùiÚ_Çme
[
j
 + 1] == 0)

295 
j
++;

298 
p_FunùiÚNames
[
i
][
j
] = 0;

302 
	`¡rıy
 (
p_FunùiÚNames
[
i
], 
funùiÚ_Çme
);

306 
	`fşo£
 (
å
);

309 
i
 = 0; i < 
num_Üdš®s
; i++)

311 ià(
	`¡rcmp
("GiveFÅŒsToDÎ", 
p_FunùiÚNames
[
i
]) == 0)

313 
game_GiveFÅŒsToDÎ
 = (*)
	`G‘ProcAdd»ss
(
h_Lib¿ry
, "GiveFnptrsToDll");

314 
ba£_off£t
 = ()(
game_GiveFÅŒsToDÎ
è- 
p_FunùiÚs
[
p_Ordš®s
[
i
]];

318 
	}
}

320 
ušt32
 
	$FunùiÚFromName
(cÚ¡ *
pName
)

331 
šdex
 = 0; index < 
num_Üdš®s
; index++)

332 ià(
	`¡rcmp
(
pName
, 
p_FunùiÚNames
[
šdex
]) == 0)

333  (
p_FunùiÚs
[
p_Ordš®s
[
šdex
]] + 
ba£_off£t
);

336  
g_’gfuncs
.
	`pâFunùiÚFromName
(
pName
);

337 
	}
}

340 cÚ¡ *
	$NameFÜFunùiÚ
(
ušt32
 
funùiÚ
)

351 
add»ss_to_look_fÜ
 = 
funùiÚ
 - 
ba£_off£t
;

354 
šdex
 = 0; index < 
num_Üdš®s
; index++)

355 ià(
add»ss_to_look_fÜ
 =ğ
p_FunùiÚs
[
p_Ordš®s
[
šdex
]])

356  (
p_FunùiÚNames
[
šdex
]);

359  
g_’gfuncs
.
	`pâNameFÜFunùiÚ
(
funùiÚ
);

360 
	}
}

	@util.cpp

7 
	~"bÙ.h
"

9 
	ggmsgTextMsg
 = 0;

10 
	ggmsgShowM’u
 = 0;

11 
	ggmsgShake
 = 0;

12 
	ggmsgStusText
 = 0;

14 
boŞ
 
	gisFakeCl›ÁCommªd
 = 
FALSE
;

15 
	gçke_¬g_couÁ
;

16 
	gg_¬gv
[256];

17 
	g¬g
[256];

19 
g_sMod–IndexLa£r
;

20 
g_sMod–IndexA¼ow
;

24 
	$UTIL_T¿ûLše
ĞcÚ¡ 
VeùÜ
 &
vecS¹
, cÚ¡ VeùÜ &
vecEnd
, 
IGNORE_MONSTERS
 
igmÚ
, 
IGNORE_GLASS
 
ignÜeGÏss
, 
ediù_t
 *
³ÁIgnÜe
, 
T¿ûResuÉ
 *
±r
 ) {

25 
	`TRACE_LINE
Ğ
vecS¹
, 
vecEnd
, (
igmÚ
 =ğ
ignÜe_mÚ¡”s
 ? 
TRUE
 : 
FALSE
è| (
ignÜeGÏss
 ? 0x100 : 0), 
³ÁIgnÜe
, 
±r
 ); 
	}
}

27 
	$UTIL_T¿ûLše
ĞcÚ¡ 
VeùÜ
 &
vecS¹
, cÚ¡ VeùÜ &
vecEnd
, 
IGNORE_MONSTERS
 
igmÚ
, 
ediù_t
 *
³ÁIgnÜe
, 
T¿ûResuÉ
 *
±r
 ) {

28 
	`TRACE_LINE
Ğ
vecS¹
, 
vecEnd
, (
igmÚ
 =ğ
ignÜe_mÚ¡”s
 ? 
TRUE
 : 
FALSE
), 
³ÁIgnÜe
, 
±r
 ); 
	}
}

30 
	$UTIL_T¿ûHuÎ
ĞcÚ¡ 
VeùÜ
 &
vecS¹
, cÚ¡ VeùÜ &
vecEnd
, 
IGNORE_MONSTERS
 
igmÚ
, 
huÎNumb”
, 
ediù_t
 *
³ÁIgnÜe
, 
T¿ûResuÉ
 *
±r
 ) {

31 
	`TRACE_HULL
Ğ
vecS¹
, 
vecEnd
, (
igmÚ
 =ğ
ignÜe_mÚ¡”s
 ? 
TRUE
 : 
FALSE
), 
huÎNumb”
, 
³ÁIgnÜe
, 
±r
 ); 
	}
}

33 
	$UTIL_T¿ûMod–
ĞcÚ¡ 
VeùÜ
 &
vecS¹
, cÚ¡ VeùÜ &
vecEnd
, 
huÎNumb”
, 
ediù_t
 *
³ÁMod–
, 
T¿ûResuÉ
 *
±r
 ) {

34 
g_’gfuncs
.
	`pâT¿ûMod–
Ğ
vecS¹
, 
vecEnd
, 
huÎNumb”
, 
³ÁMod–
, 
±r
 );

35 
	}
}

37 
	$FixedUnsigÃd16
Ğ
v®ue
, 
sÿË
 )

39 
ouut
;

41 
ouut
 = 
v®ue
 * 
sÿË
;

42 iàĞ
ouut
 < 0 )

43 
ouut
 = 0;

44 iàĞ
ouut
 > 0xFFFF )

45 
ouut
 = 0xFFFF;

47  ()
ouut
;

48 
	}
}

50 
	$FixedSigÃd16
Ğ
v®ue
, 
sÿË
 )

52 
ouut
;

54 
ouut
 = 
v®ue
 * 
sÿË
;

56 iàĞ
ouut
 > 32767 )

57 
ouut
 = 32767;

59 iàĞ
ouut
 < -32768 )

60 
ouut
 = -32768;

62  ()
ouut
;

63 
	}
}

65 * 
	$UTIL_V¬Args
ĞcÚ¡ *
fÜm©
, ... )

67 
va_li¡
 
¬g±r
;

68 
¡ršg
[1024];

70 
	`va_¡¬t
(
¬g±r
, 
fÜm©
);

71 
	`_v¢´štf
(
¡ršg
, (¡ršg), 
fÜm©
, 
¬g±r
);

72 
	`va_’d
(
¬g±r
);

74  
¡ršg
;

75 
	}
}

77 
	$Cl›ÁPršt
Ğ
’tv¬s_t
 *
ş›Á
, 
msg_de¡
, cÚ¡ *
msg_Çme
, cÚ¡ *
·¿m1
, cÚ¡ *
·¿m2
, cÚ¡ *
·¿m3
, cÚ¡ *
·¿m4
 )

79 ià(
	`FNuÎEÁ
(
ş›Á
))

82 ià(
gmsgTextMsg
 == 0)

83 
gmsgTextMsg
 = 
	`REG_USER_MSG
( "TextMsg", -1 );

85 
	`MESSAGE_BEGIN
Ğ
MSG_ONE
, 
gmsgTextMsg
, 
NULL
, 
ş›Á
 );

86 
	`WRITE_BYTE
Ğ
msg_de¡
 );

87 
	`WRITE_STRING
Ğ
msg_Çme
 );

88 iàĞ
·¿m1
 )

89 
	`WRITE_STRING
Ğ
·¿m1
 );

90 iàĞ
·¿m2
 )

91 
	`WRITE_STRING
Ğ
·¿m2
 );

92 iàĞ
·¿m3
 )

93 
	`WRITE_STRING
Ğ
·¿m3
 );

94 iàĞ
·¿m4
 )

95 
	`WRITE_STRING
Ğ
·¿m4
 );

96 
	`MESSAGE_END
();

97 
	}
}

99 
	$UTIL_Cl›ÁPrštAÎ
Ğ
msg_de¡
, cÚ¡ *
msg_Çme
, cÚ¡ *
·¿m1
, cÚ¡ *
·¿m2
, cÚ¡ *
·¿m3
, cÚ¡ *
·¿m4
 )

101 ià(
gmsgTextMsg
 == 0)

102 
gmsgTextMsg
 = 
	`REG_USER_MSG
( "TextMsg", -1 );

104 
	`MESSAGE_BEGIN
Ğ
MSG_ALL
, 
gmsgTextMsg
 );

105 
	`WRITE_BYTE
Ğ
msg_de¡
 );

106 
	`WRITE_STRING
Ğ
msg_Çme
 );

107 iàĞ
·¿m1
 )

108 
	`WRITE_STRING
Ğ
·¿m1
 );

109 iàĞ
·¿m2
 )

110 
	`WRITE_STRING
Ğ
·¿m2
 );

111 iàĞ
·¿m3
 )

112 
	`WRITE_STRING
Ğ
·¿m3
 );

113 iàĞ
·¿m4
 )

114 
	`WRITE_STRING
Ğ
·¿m4
 );

115 
	`MESSAGE_END
();

116 
	}
}

118 #ifdeà
_DEBUG


119 
ediù_t
 *
	$DBG_EÁOfV¬s
ĞcÚ¡ 
’tv¬s_t
 *
³v
 )

121 ià(
³v
->
pCÚššgEÁ™y
 !ğ
NULL
)

122  
³v
->
pCÚššgEÁ™y
;

123 
	`ALERT
(
©_cÚsŞe
, "entvars_t…ContainingEntity is NULL, calling intoƒngine");

124 
ediù_t
* 
³Á
 = 
g_’gfuncs
.
	`pâFšdEÁ™yByV¬s
((
’tv¬s_t
*)
³v
);

125 ià(
³Á
 =ğ
NULL
)

126 
	`ALERT
(
©_cÚsŞe
, "Evenheƒngine couldn't FindEntityByVars!");

127 ((
’tv¬s_t
 *)
³v
)->
pCÚššgEÁ™y
 = 
³Á
;

128  
³Á
;

129 
	}
}

131 
	$DBG_As£¹FunùiÚ
(
BOOL
 
fEx´
, cÚ¡ *
szEx´
, cÚ¡ *
szFe
,

132 
szLše
, cÚ¡ *
szMes§ge
)

134 ià(
fEx´
)

136 
szOut
[512];

137 ià(
szMes§ge
 !ğ
NULL
)

138 
	`¥rštf
(
szOut
, "ASSERT FAILED:\À% \n(%s@%d)\n%s", 
szEx´
, 
szFe
, 
szLše
, 
szMes§ge
);

140 
	`¥rštf
(
szOut
, "ASSERT FAILED:\À% \n(%s@%d)", 
szEx´
, 
szFe
, 
szLše
);

141 
	`ALERT
(
©_cÚsŞe
, 
szOut
);

142 
	}
}

146 
	$UTIL_G‘BÙIndex
(
ediù_t
 *
³Á
)

148 ià(
	`FNuÎEÁ
(
³Á
))

151 
šdex
 = 
	`ENTINDEX
(
³Á
) - 1;

152 ià(
šdex
 < 0 || index >= 32)

155 ià(
g_rgpBÙs
[
šdex
])

156  
šdex
;

159 
	}
}

161 
boŞ
 
	$IsAlive
(
ediù_t
 *
pEdiù
)

163 ià(
	`FNuÎEÁ
(
pEdiù
))

164  
FALSE
;

166  (
pEdiù
->
v
.
d—dæag
 =ğ
DEAD_NO
 &&

167 
pEdiù
->
v
.
h—Éh
 > 0

169 
	}
}

171 
	$G‘ShoÙšgCÚeDevŸtiÚ
(
ediù_t
 *
pEdiù
, 
VeùÜ
 *
pvecPos™iÚ
)

173 
VeùÜ
 
vecDœ
 = (*
pvecPos™iÚ
 - (
pEdiù
->
v
.
Üigš
 +…Ediù->v.
v›w_ofs
)).
	`NÜm®ize
();

174 
	`UTIL_MakeVeùÜs
(
pEdiù
->
v
.
v_ªgË
);

176  (
	`DÙProduù
(
gpGlob®s
->
v_fÜw¬d
, 
vecDœ
));

177 
	}
}

179 
boŞ
 
	$FInV›wCÚe
(
VeùÜ
 *
pOrigš
, 
ediù_t
 *
pEdiù
)

181  
	`G‘ShoÙšgCÚeDevŸtiÚ
(
pEdiù
, 
pOrigš
) >=

182 
	`cos
((
pEdiù
->
v
.
fov
 / 2è* 
M_PI
 / 180);

183 
	}
}

185 
boŞ
 
	$IsShoÙabËB»akabË
(
ediù_t
 *
³Á
)

187 ià(
	`FCÏs¢ameIs
(
³Á
, "func_breakable") ||

188 (
	`FCÏs¢ameIs
(
³Á
, "func_pushabË"è&& (³Á->
v
.
¥awnæags
 & 
SF_PUSH_BREAKABLE
)))

190  (
³Á
->
v
.
kedamage
 !ğ
DAMAGE_NO
 &&

191 
³Á
->
v
.
impul£
 <= 0 &&

192 !(
³Á
->
v
.
æags
 & 
FL_WORLDBRUSH
) &&

193 !(
³Á
->
v
.
¥awnæags
 & 
SF_BREAK_TRIGGER_ONLY
) &&

194 
³Á
->
v
.
h—Éh
 < 500);

197  
FALSE
;

198 
	}
}

200 
boŞ
 
	$FVisibË
(cÚ¡ 
VeùÜ
 &
vecOrigš
, 
ediù_t
 *
pEdiù
 )

202 
T¿ûResuÉ
 
Œ
;

203 
VeùÜ
 
vecLook”Origš
;

205 
vecLook”Origš
 = 
pEdiù
->
v
.
Üigš
 +…Ediù->v.
v›w_ofs
;

207 
boŞ
 
bInW©”
 = (
	`POINT_CONTENTS
(
vecOrigš
è=ğ
CONTENTS_WATER
);

208 
boŞ
 
bLook”InW©”
 = (
	`POINT_CONTENTS
(
vecLook”Origš
è=ğ
CONTENTS_WATER
);

210 ià(
bInW©”
 !ğ
bLook”InW©”
)

211  
FALSE
;

213 
	`UTIL_T¿ûLše
(
vecLook”Origš
, 
vecOrigš
, 
ignÜe_mÚ¡”s
, 
ignÜe_gÏss
, 
pEdiù
, &
Œ
);

215 ià(
Œ
.
æF¿ùiÚ
 != 1.0)

216  
FALSE
;

218  
TRUE
;

219 
	}
}

221 
	$UTIL_G‘N—»¡PÏy”Index
(
VeùÜ
 
vecOrigš
)

223 
fDi¡ªû2
;

224 
fMšDi¡ªû2
 = 
FLT_MAX
;

225 
šdex
 = 0;

227 
i
 = 0; i < 
gpGlob®s
->
maxCl›Ás
; i++)

229 ià(
Th»©Tab
[
i
].
IsAlive
 =ğ
FALSE
 || Th»©Tab[i].
IsU£d
 == FALSE)

232 
fDi¡ªû2
 = 
	`L’gthSqu¬ed
(
Th»©Tab
[
i
].
pEdiù
->
v
.
Üigš
 - 
vecOrigš
);

234 ià(
fDi¡ªû2
 < 
fMšDi¡ªû2
)

236 
šdex
 = 
i
;

237 
fMšDi¡ªû2
 = 
fDi¡ªû2
;

241  
šdex
;

242 
	}
}

244 
VeùÜ
 
	$VecBMod–Origš
(
ediù_t
 *
pEdiù
)

246  
pEdiù
->
v
.
absmš
 + (pEdiù->v.
size
 * 0.5);

247 
	}
}

249 
	$UTIL_ShowM’u
Ğ
ediù_t
 *
pEdiù
, 
¦Ùs
, 
di¥Ïytime
, 
boŞ
 
ÃedmÜe
, cÚ¡ *
pText
 )

251 ià(
gmsgShowM’u
 == 0)

252 
gmsgShowM’u
 = 
	`REG_USER_MSG
( "ShowMenu", -1 );

254 
	`¡¾’
(
pText
) >= 64)

256 
	`MESSAGE_BEGIN
(
MSG_ONE
, 
gmsgShowM’u
, 
NULL
, 
pEdiù
);

257 
	`WRITE_SHORT
(
¦Ùs
);

258 
	`WRITE_CHAR
(
di¥Ïytime
);

259 
	`WRITE_BYTE
(1);

260 
i
 = 0; i <= 63; i++)

261 
	`WRITE_CHAR
(
pText
[
i
]);

262 
	`MESSAGE_END
();

264 
pText
 += 64;

267 
	`MESSAGE_BEGIN
(
MSG_ONE
, 
gmsgShowM’u
, 
NULL
, 
pEdiù
);

268 
	`WRITE_SHORT
(
¦Ùs
);

269 
	`WRITE_CHAR
(
di¥Ïytime
);

270 
	`WRITE_BYTE
(
ÃedmÜe
);

271 
	`WRITE_STRING
(
pText
);

272 
	`MESSAGE_END
();

273 
	}
}

275 
	$UTIL_DeÿlT¿û
Ğ
T¿ûResuÉ
 *
pT¿û
, * 
pszDeÿlName
 )

277 
’t™yIndex
;

278 
šdex
;

279 
mes§ge
;

281 
šdex
 = 
	`DECAL_INDEX
(
pszDeÿlName
);

282 ià(
šdex
 < 0)

283 
šdex
 = 0;

285 ià(
pT¿û
->
æF¿ùiÚ
 == 1.0)

289 iàĞ!
	`FNuÎEÁ
(
pT¿û
->
pH™
) )

291 
ediù_t
 *
pH™
 = 
pT¿û
->pHit;

293 ià(
pH™
->
v
.
sŞid
 =ğ
SOLID_BSP
 ||…H™->v.
mov‘y³
 =ğ
MOVETYPE_PUSHSTEP
)

294 
’t™yIndex
 = 
	`ENTINDEX
(
pH™
);

299 
’t™yIndex
 = 0;

301 
mes§ge
 = 
TE_DECAL
;

302 iàĞ
’t™yIndex
 != 0 )

304 iàĞ
šdex
 > 255 )

306 
mes§ge
 = 
TE_DECALHIGH
;

307 
šdex
 -= 256;

312 
mes§ge
 = 
TE_WORLDDECAL
;

313 iàĞ
šdex
 > 255 )

315 
mes§ge
 = 
TE_WORLDDECALHIGH
;

316 
šdex
 -= 256;

320 
	`MESSAGE_BEGIN
Ğ
MSG_BROADCAST
, 
SVC_TEMPENTITY
 );

321 
	`WRITE_BYTE
Ğ
mes§ge
 );

322 
	`WRITE_COORD
Ğ
pT¿û
->
vecEndPos
.
x
 );

323 
	`WRITE_COORD
Ğ
pT¿û
->
vecEndPos
.
y
 );

324 
	`WRITE_COORD
Ğ
pT¿û
->
vecEndPos
.
z
 );

325 
	`WRITE_BYTE
Ğ
šdex
 );

326 iàĞ
’t™yIndex
 )

327 
	`WRITE_SHORT
Ğ
’t™yIndex
 );

328 
	`MESSAGE_END
();

329 
	}
}

332 
	$UTIL_Ho¡Pršt
(
ediù_t
 *
pEÁ™y
, 
PRINT_TYPE
 
msg_de¡
, cÚ¡ *
fmt
, ...)

334 
va_li¡
 
va_®i¡
;

335 
msg
[256];

337 
	`va_¡¬t
(
va_®i¡
, 
fmt
);

338 
	`_v¢´štf
(
msg
, (msg), 
fmt
, 
va_®i¡
);

339 
	`va_’d
(
va_®i¡
);

341 ià(!
	`IsPÏy”
(
pEÁ™y
))

342 
	`SERVER_PRINT
(
msg
);

344 
g_’gfuncs
.
	`pâCl›ÁPrštf
(
pEÁ™y
, 
msg_de¡
, 
msg
);

345 
	}
}

348 
	$F»eAÎTheStuff
()

350 
i
 = 0; i < 32; i++)

352 ià(
g_rgpBÙs
[
i
])

353 
d–‘e
 
g_rgpBÙs
[
i
];

356 
	`WaypoštIn™
();

358 ià(
g_pT”rÜWaypošts
)

359 
	`ä“
(
g_pT”rÜWaypošts
);

360 
g_pT”rÜWaypošts
 = 
NULL
;

362 ià(
g_pCTWaypošts
)

363 
	`ä“
(
g_pCTWaypošts
);

364 
g_pCTWaypošts
 = 
NULL
;

366 ià(
g_pGßlWaypošts
)

367 
	`ä“
(
g_pGßlWaypošts
);

368 
g_pGßlWaypošts
 = 
NULL
;

370 ià(
g_pCampWaypošts
)

371 
	`ä“
(
g_pCampWaypošts
);

372 
g_pCampWaypošts
 = 
NULL
;

374 ià(
g_pRescueWaypošts
)

375 
	`ä“
(
g_pRescueWaypošts
);

376 
g_pRescueWaypošts
 = 
NULL
;

378 ià(
pBÙEx³r›nûD©a
)

380 
	`ä“
(
pBÙEx³r›nûD©a
);

381 
pBÙEx³r›nûD©a
 = 
NULL
;

384 ià(
g_pFloydDi¡ªûM©rix
)

386 
	`ä“
(
g_pFloydDi¡ªûM©rix
);

387 
g_pFloydDi¡ªûM©rix
 = 
NULL
;

390 ià(
g_pFloydP©hM©rix
)

392 
	`ä“
(
g_pFloydP©hM©rix
);

393 
g_pFloydP©hM©rix
 = 
NULL
;

397 
STRINGNODE
* 
pTempNode
 = 
pBÙNames
;

398 
STRINGNODE
* 
pNextNode
;

400 
pTempNode
 !ğ
NULL
)

402 
pNextNode
 = 
pTempNode
->
Next
;

403 ià(
pTempNode
 !ğ
NULL
)

405 ià(
pTempNode
->
pszSŒšg
 !ğ
NULL
)

406 
	`ä“
(
pTempNode
->
pszSŒšg
);

407 
	`ä“
(
pTempNode
);

409 
pTempNode
 = 
pNextNode
;

411 
pBÙNames
 = 
NULL
;

413 
pTempNode
 = 
pBombCh©
;

414 
pTempNode
 !ğ
NULL
)

416 
pNextNode
 = 
pTempNode
->
Next
;

417 ià(
pTempNode
 !ğ
NULL
)

419 ià(
pTempNode
->
pszSŒšg
 !ğ
NULL
)

420 
	`ä“
(
pTempNode
->
pszSŒšg
);

421 
	`ä“
(
pTempNode
);

423 
pTempNode
 = 
pNextNode
;

425 
pBombCh©
 = 
NULL
;

427 
pTempNode
 = 
pD—dCh©
;

428 
pTempNode
 !ğ
NULL
)

430 
pNextNode
 = 
pTempNode
->
Next
;

431 ià(
pTempNode
 !ğ
NULL
)

433 ià(
pTempNode
->
pszSŒšg
 !ğ
NULL
)

434 
	`ä“
(
pTempNode
->
pszSŒšg
);

435 
	`ä“
(
pTempNode
);

437 
pTempNode
 = 
pNextNode
;

439 
pD—dCh©
 = 
NULL
;

441 
pTempNode
 = 
pKlCh©
;

442 
pTempNode
 !ğ
NULL
)

444 
pNextNode
 = 
pTempNode
->
Next
;

445 ià(
pTempNode
 !ğ
NULL
)

447 ià(
pTempNode
->
pszSŒšg
 !ğ
NULL
)

448 
	`ä“
(
pTempNode
->
pszSŒšg
);

449 
	`ä“
(
pTempNode
);

451 
pTempNode
 = 
pNextNode
;

453 
pKlCh©
 = 
NULL
;

455 
»¶ynode_t
 *
pTempR•ly
 = 
pCh©R•l›s
;

456 
»¶ynode_t
 *
pNextR•ly
;

457 
pTempR•ly
 !ğ
NULL
)

459 
pTempNode
 = 
pTempR•ly
->
pR•l›s
;

460 
pTempNode
 !ğ
NULL
)

462 
pNextNode
 = 
pTempNode
->
Next
;

463 ià(
pTempNode
 !ğ
NULL
)

465 ià(
pTempNode
->
pszSŒšg
 !ğ
NULL
)

466 
	`ä“
(
pTempNode
->
pszSŒšg
);

467 
	`ä“
(
pTempNode
);

469 
pTempNode
 = 
pNextNode
;

471 
pNextR•ly
 = 
pTempR•ly
->
pNextR•lyNode
;

472 
	`ä“
(
pTempR•ly
);

473 
pTempR•ly
 = 
pNextR•ly
;

475 
pCh©R•l›s
 = 
NULL
;

477 
pTempNode
 = 
pCh©NoKeywÜd
;

478 
pTempNode
 !ğ
NULL
)

480 
pNextNode
 = 
pTempNode
->
Next
;

481 ià(
pTempNode
 !ğ
NULL
)

483 ià(
pTempNode
->
pszSŒšg
 !ğ
NULL
)

484 
	`ä“
(
pTempNode
->
pszSŒšg
);

485 
	`ä“
(
pTempNode
);

487 
pTempNode
 = 
pNextNode
;

489 
pCh©NoKeywÜd
 = 
NULL
;

490 
	}
}

492 
STRINGNODE
 *
	$G‘NodeSŒšg
(
STRINGNODE
* 
pNode
,
NodeNum
)

494 
STRINGNODE
 *
pTempNode
 = 
pNode
;

495 
i
 = 0;

496 
i
 < 
NodeNum
)

498 
pTempNode
 =…TempNode->
Next
;

499 
	`as£¹
(
pTempNode
);

500 ià(
pTempNode
 =ğ
NULL
)

502 
i
++;

504  
pTempNode
;

505 
	}
}

507 
	$G‘Highe¡F¿gsBÙ
(
iT—m
)

509 
CBa£BÙ
 *
pF¿gBÙ
;

510 
iBe¡Index
 = 0;

511 
fBe¡F¿gs
 = -1;

514 
bÙ_šdex
 = 0; bÙ_šdex < 
gpGlob®s
->
maxCl›Ás
; bot_index++)

516 
pF¿gBÙ
 = 
g_rgpBÙs
[
bÙ_šdex
];

517 ià(
pF¿gBÙ
)

519 ià(
	`IsAlive
(
pF¿gBÙ
->
	`ediù
()è&& 
	`UTIL_G‘T—m
ÕF¿gBÙ->ediù()è=ğ
iT—m
)

521 if(
pF¿gBÙ
->
³v
->
äags
 > 
fBe¡F¿gs
)

523 
iBe¡Index
 = 
bÙ_šdex
;

524 
fBe¡F¿gs
 = 
pF¿gBÙ
->
³v
->
äags
;

529  
iBe¡Index
;

530 
	}
}

532 
	$T”mš©eOnE¼Ü
(cÚ¡ *
¡ršg
)

534 
	`F»eAÎTheStuff
();

535 
	`ALERT
(
©_”rÜ
, "%s\n", 
¡ršg
);

536 #ifdeà
_WIN32


537 
	`Mes§geBox
(0, 
¡ršg
, "FATAL ERROR", 
MB_ICONERROR
);

539 
	`ex™
(1);

540 
	}
}

543 
	$FakeCl›ÁCommªd
(
ediù_t
 *
pFakeCl›Á
, cÚ¡ *
fmt
, ...)

551 
va_li¡
 
¬g±r
;

552 
commªd
[256];

553 
Ëngth
, 
f›ld¡¬t
, 
f›ld¡İ
, 
i
, 
šdex
, 
¡ršgšdex
 = 0;

555 ià(
	`FNuÎEÁ
(
pFakeCl›Á
))

559 
	`va_¡¬t
(
¬g±r
, 
fmt
);

560 
	`_v¢´štf
(
commªd
, (commªd), 
fmt
, 
¬g±r
);

561 
	`va_’d
(
¬g±r
);

563 ià(
	`IsNuÎSŒšg
(
commªd
))

566 
isFakeCl›ÁCommªd
 = 
TRUE
;

567 
Ëngth
 = 
	`¡¾’
(
commªd
);

570 
¡ršgšdex
 < 
Ëngth
)

572 
f›ld¡¬t
 = 
¡ršgšdex
;

573 
¡ršgšdex
 < 
Ëngth
 && 
commªd
[stringindex] != ';')

574 
¡ršgšdex
++;

575 ià(
commªd
[
¡ršgšdex
 - 1] == '\n')

576 
f›ld¡İ
 = 
¡ršgšdex
 - 2;

578 
f›ld¡İ
 = 
¡ršgšdex
 - 1;

579 
i
 = 
f›ld¡¬t
; i <ğ
f›ld¡İ
; i++)

580 
g_¬gv
[
i
 - 
f›ld¡¬t
] = 
commªd
[i];

581 
g_¬gv
[
i
 - 
f›ld¡¬t
] = 0;

582 
¡ršgšdex
++;

584 
šdex
 = 0;

585 
çke_¬g_couÁ
 = 0;

588 
šdex
 < 
i
 - 
f›ld¡¬t
)

590 
šdex
 < 
i
 - 
f›ld¡¬t
 && 
g_¬gv
[index] == ' ')

591 
šdex
++;

594 ià(
g_¬gv
[
šdex
] == '"')

596 
šdex
++;

597 
šdex
 < 
i
 - 
f›ld¡¬t
 && 
g_¬gv
[index] != '"')

598 
šdex
++;

599 
šdex
++;

602 
šdex
 < 
i
 - 
f›ld¡¬t
 && 
g_¬gv
[index] != ' ')

603 
šdex
++;

605 
çke_¬g_couÁ
++;

609 
	`MDLL_Cl›ÁCommªd
(
pFakeCl›Á
);

612 
g_¬gv
[0] = 0;

613 
isFakeCl›ÁCommªd
 = 
FALSE
;

614 
çke_¬g_couÁ
 = 0;

615 
	}
}

617 cÚ¡ *
	$G‘Arg
(cÚ¡ *
commªd
, 
¬g_numb”
)

626 
Ëngth
, 
i
, 
šdex
 = 0, 
¬g_couÁ
 = 0, 
f›ld¡¬t
, 
f›ld¡İ
;

628 
¬g
[0] = 0;

629 
Ëngth
 = 
	`¡¾’
 (
commªd
);

632 
šdex
 < 
Ëngth
 && 
¬g_couÁ
 <ğ
¬g_numb”
)

634 
šdex
 < 
Ëngth
 && 
commªd
[index] == ' ')

635 
šdex
++;

638 ià(
commªd
[
šdex
] == '"')

640 
šdex
++;

641 
f›ld¡¬t
 = 
šdex
;

642 
šdex
 < 
Ëngth
 && 
commªd
[index] != '"')

643 
šdex
++;

644 
f›ld¡İ
 = 
šdex
 - 1;

645 
šdex
++;

649 
f›ld¡¬t
 = 
šdex
;

650 
šdex
 < 
Ëngth
 && 
commªd
[index] != ' ')

651 
šdex
++;

652 
f›ld¡İ
 = 
šdex
 - 1;

656 ià(
¬g_couÁ
 =ğ
¬g_numb”
)

658 
i
 = 
f›ld¡¬t
; i <ğ
f›ld¡İ
; i++)

659 
¬g
[
i
 - 
f›ld¡¬t
] = 
commªd
[i];

660 
¬g
[
i
 - 
f›ld¡¬t
] = 0;

663 
¬g_couÁ
++;

666  
¬g
;

667 
	}
}

669 
	$G‘GameDœeùÜy
(*
mod_Çme
)

671 
	`GET_GAME_DIR
(
mod_Çme
);

672 
Ëngth
 = 
	`¡¾’
(
mod_Çme
);

675 
f›ld¡İ
 = 
Ëngth
 - 1;

676 (
mod_Çme
[
f›ld¡İ
] == '\\' || mod_name[fieldstop] == '/') && fieldstop > 0)

677 
f›ld¡İ
--;

679 
f›ld¡¬t
 = 
f›ld¡İ
;

680 
mod_Çme
[
f›ld¡¬t
] != '\\' && mod_name[fieldstart] != '/' && fieldstart > 0)

681 
f›ld¡¬t
--;

683 ià(
mod_Çme
[
f›ld¡¬t
] == '\\' || mod_name[fieldstart] == '/')

684 
f›ld¡¬t
++;

687 
Ëngth
 = 
f›ld¡¬t
;†’gth <ğ
f›ld¡İ
;†ength++)

688 
mod_Çme
[
Ëngth
 - 
f›ld¡¬t
] = mod_name[length];

689 
mod_Çme
[
Ëngth
 - 
f›ld¡¬t
] = 0;

690 
	}
}

696 
	$FlBufãrFromFe
(
FILE
* 
åFe
, *
pszBufãr
, 
fe_šdex
)

698 
ch
;

700 
ch
 = 
	`fg‘c
(
åFe
);

703 
ch
 == ' ')

704 
ch
 = 
	`fg‘c
(
åFe
);

706 
ch
 !ğ
EOF
 && ch != '\r' && ch != '\n')

708 ià(
ch
 == '\t')

709 
ch
 = ' ';

711 
pszBufãr
[
fe_šdex
] = 
ch
;

713 
ch
 = 
	`fg‘c
(
åFe
);

716 
pszBufãr
[
fe_šdex
] =ğ' ' && 
ch
 == ' ')

717 
ch
 = 
	`fg‘c
(
åFe
);

719 
fe_šdex
++;

722 
ch
 == '\r')

723 
ch
 = 
	`fg‘c
(
åFe
);

725 
pszBufãr
[
fe_šdex
] = 0;

726 
	}
}

729 
	$C»©eP©h
(*
·th
)

731 *
ofs
;

733 
ofs
 = 
·th
 + 1 ; *ofs ; ofs++)

735 ià(*
ofs
 == '/')

738 *
ofs
 = 0;

739 #ifdeà
_WIN32


740 
	`mkdœ
(
·th
);

742 
	`mkdœ
(
·th
, 0777);

744 *
ofs
 = '/';

747 #ifdeà
_WIN32


748 
	`mkdœ
(
·th
);

750 
	`mkdœ
(
·th
, 0777);

752 
	}
}

756 
boŞ
 
	$FBoxVisibË
(
ediù_t
 *
pEdiù
,ƒdiù_ˆ*
pT¬g‘Ediù
, 
VeùÜ
 *
pvH™
, *
ucBodyP¬t
)

758 *
ucBodyP¬t
 = 0;

759 
’tv¬s_t
 *
³vLook”
 = 
	`VARS
(
pEdiù
);

760 
’tv¬s_t
 *
³vT¬g‘
 = 
	`VARS
(
pT¬g‘Ediù
);

763 ià((
³vLook”
->
w©”Ëv–
 !ğ3 && 
³vT¬g‘
->waterlevel == 3)

764 || (
³vLook”
->
w©”Ëv–
 =ğ3 && 
³vT¬g‘
->waterlevel == 0))

765  
FALSE
;

767 
T¿ûResuÉ
 
Œ
;

768 
VeùÜ
 
vecLook”Origš
 = 
³vLook”
->
Üigš
 +…evLook”->
v›w_ofs
;

769 
VeùÜ
 
vecT¬g‘
 = 
³vT¬g‘
->
Üigš
;

772 
	`UTIL_T¿ûLše
(
vecLook”Origš
, 
vecT¬g‘
, 
ignÜe_mÚ¡”s
, 
ignÜe_gÏss
, 
pEdiù
, &
Œ
);

774 ià(
Œ
.
æF¿ùiÚ
 == 1.0)

776 *
pvH™
 = 
Œ
.
vecEndPos
;

777 *
ucBodyP¬t
 |ğ
WAIST_VISIBLE
;

780 
vecT¬g‘
 = vecT¬g‘ + 
³vT¬g‘
->
v›w_ofs
;

781 
	`UTIL_T¿ûLše
(
vecLook”Origš
, 
vecT¬g‘
, 
ignÜe_mÚ¡”s
, 
ignÜe_gÏss
, 
pEdiù
, &
Œ
);

783 ià(
Œ
.
æF¿ùiÚ
 == 1.0)

785 *
pvH™
 = 
Œ
.
vecEndPos
;

786 *
ucBodyP¬t
 |ğ
HEAD_VISIBLE
;

789 ià(*
ucBodyP¬t
 != 0)

790  
TRUE
;

792 
i
 = 0; i < 5; i++)

794 
VeùÜ
 
vecT¬g‘
 = 
³vT¬g‘
->
Üigš
;

795 
vecT¬g‘
.
x
 +ğ
	`RANDOM_FLOAT
(
³vT¬g‘
->
mšs
.x,…evT¬g‘->
maxs
.x);

796 
vecT¬g‘
.
y
 +ğ
	`RANDOM_FLOAT
(
³vT¬g‘
->
mšs
.y,…evT¬g‘->
maxs
.y);

797 
vecT¬g‘
.
z
 +ğ
	`RANDOM_FLOAT
(
³vT¬g‘
->
mšs
.z,…evT¬g‘->
maxs
.z);

799 
	`UTIL_T¿ûLše
(
vecLook”Origš
, 
vecT¬g‘
, 
ignÜe_mÚ¡”s
, 
ignÜe_gÏss
, 
pEdiù
, &
Œ
);

801 ià(
Œ
.
æF¿ùiÚ
 == 1.0)

804 *
pvH™
 = 
Œ
.
vecEndPos
;

805 *
ucBodyP¬t
 |ğ
CUSTOM_VISIBLE
;

806  
TRUE
;

810  
FALSE
;

811 
	}
}

817 
VeùÜ
 
	$VecCheckToss
Ğ
’tv¬s_t
 *
³v
, cÚ¡ 
VeùÜ
 &
vecSpÙ1
, VeùÜ 
vecSpÙ2
, 
æG¿v™yAdj
 )

819 
T¿ûResuÉ
 
Œ
;

820 
VeùÜ
 
vecMidPošt
;

821 
VeùÜ
 
vecA³x
;

822 
VeùÜ
 
vecSÿË
;

823 
VeùÜ
 
vecG»ÇdeV–
;

824 
VeùÜ
 
vecTemp
;

825 
æG¿v™y
 = 
	`CVAR_GET_FLOAT
Ğ"sv_g¿v™y" ) * 
æG¿v™yAdj
;

827 ià(
vecSpÙ2
.
z
 - 
vecSpÙ1
.z > 500)

828  
g_vecZ”o
;

836 
vecMidPošt
 = 
vecSpÙ1
 + (
vecSpÙ2
 - vecSpot1) * 0.5;

837 
	`UTIL_T¿ûHuÎ
(
vecMidPošt
, vecMidPošˆ+ 
	`VeùÜ
(0, 0, 500), 
ignÜe_mÚ¡”s
, 
h—d_huÎ
, 
	`ENT
(
³v
), &
Œ
);

838 
vecMidPošt
 = 
Œ
.
vecEndPos
;

840 
vecMidPošt
.
z
 -= 15;

842 ià(
vecMidPošt
.
z
 < 
vecSpÙ1
.z || vecMidPošt.z < 
vecSpÙ2
.z)

843  
g_vecZ”o
;

846 
di¡ªû1
 = 
vecMidPošt
.
z
 - 
vecSpÙ1
.z;

847 
di¡ªû2
 = 
vecMidPošt
.
z
 - 
vecSpÙ2
.z;

850 
time1
 = 
	`sq¹
Ğ
di¡ªû1
 / (0.5 * 
æG¿v™y
) );

851 
time2
 = 
	`sq¹
Ğ
di¡ªû2
 / (0.5 * 
æG¿v™y
) );

853 ià(
time1
 < 0.1)

854  
g_vecZ”o
;

856 ià(
time1
 + 
time2
 > 
GRENADE_TIMER
)

857  
g_vecZ”o
;

860 
vecG»ÇdeV–
 = (
vecSpÙ2
 - 
vecSpÙ1
è/ (
time1
 + 
time2
);

862 
vecG»ÇdeV–
.
z
 = 
æG¿v™y
 * 
time1
;

865 
vecA³x
 = 
vecSpÙ1
 + 
vecG»ÇdeV–
 * 
time1
;

866 
vecA³x
.
z
 = 
vecMidPošt
.z;

868 
	`UTIL_T¿ûHuÎ
(
vecSpÙ1
, 
vecA³x
, 
dÚt_ignÜe_mÚ¡”s
, 
h—d_huÎ
, 
	`ENT
(
³v
), &
Œ
);

869 ià(
Œ
.
æF¿ùiÚ
 != 1.0)

870  
g_vecZ”o
;

873 
	`UTIL_T¿ûHuÎ
(
vecSpÙ2
, 
vecA³x
, 
ignÜe_mÚ¡”s
, 
h—d_huÎ
, 
	`ENT
(
³v
), &
Œ
);

874 ià(
Œ
.
æF¿ùiÚ
 != 1.0)

876 
VeùÜ
 
vecDœ
 = (
vecA³x
 - 
vecSpÙ2
).
	`NÜm®ize
();

877 
n
 = -
	`DÙProduù
(
Œ
.
vecPÏÃNÜm®
, 
vecDœ
);

878 ià(
n
 > 0.7 || 
Œ
.
æF¿ùiÚ
 < 0.8)

879  
g_vecZ”o
;

882  
vecG»ÇdeV–
;

883 
	}
}

889 
VeùÜ
 
	$VecCheckThrow
Ğ
’tv¬s_t
 *
³v
, cÚ¡ 
VeùÜ
 &
vecSpÙ1
, VeùÜ 
vecSpÙ2
, 
æS³ed
, 
æG¿v™yAdj
 )

891 
æG¿v™y
 = 
	`CVAR_GET_FLOAT
Ğ"sv_g¿v™y" ) * 
æG¿v™yAdj
;

892 
VeùÜ
 
vecG»ÇdeV–
 = (
vecSpÙ2
 - 
vecSpÙ1
);

893 
T¿ûResuÉ
 
Œ
;

896 
time
 = 
vecG»ÇdeV–
.
	`L’gth
(è/ 
æS³ed
;

898 ià(
time
 > 
GRENADE_TIMER
 ||ime < 0.1)

899  
g_vecZ”o
;

901 
vecG»ÇdeV–
 = vecG»ÇdeV– / 
time
;

904 
vecG»ÇdeV–
.
z
 +ğ
æG¿v™y
 * 
time
 * 0.5;

906 
VeùÜ
 
vecA³x
 = 
vecSpÙ1
 + (
vecSpÙ2
 - vecSpot1) * 0.5;

907 
vecA³x
.
z
 +ğ0.5 * 
æG¿v™y
 * (
time
 * 0.5) * (time * 0.5);

909 
	`UTIL_T¿ûHuÎ
(
vecSpÙ1
, 
vecA³x
, 
dÚt_ignÜe_mÚ¡”s
, 
h—d_huÎ
, 
	`ENT
(
³v
), &
Œ
);

910 ià(
Œ
.
æF¿ùiÚ
 !ğ1.0 ||r.
fAÎSŞid
)

911  
g_vecZ”o
;

913 
	`UTIL_T¿ûHuÎ
(
vecSpÙ2
, 
vecA³x
, 
ignÜe_mÚ¡”s
, 
h—d_huÎ
, 
	`ENT
(
³v
), &
Œ
);

914 ià(
Œ
.
æF¿ùiÚ
 !ğ1.0 ||r.
fAÎSŞid
)

916 
VeùÜ
 
vecDœ
 = (
vecA³x
 - 
vecSpÙ2
).
	`NÜm®ize
();

917 
n
 = -
	`DÙProduù
(
Œ
.
vecPÏÃNÜm®
, 
vecDœ
);

918 ià(
n
 > 0.7 || 
Œ
.
æF¿ùiÚ
 < 0.8)

919  
g_vecZ”o
;

922  
vecG»ÇdeV–
;

923 
	}
}

925 
	$UTIL_D¿wB—m
(
ediù_t
 *
pEÁ™y
, 
VeùÜ
 
¡¬t
, VeùÜ 
’d
, 
width
,

926 
noi£
, 
»d
, 
g»’
, 
blue
, 
brighŠess
, 
¥“d
, 
liã
)

928 ià(!
	`IsPÏy”
(
pEÁ™y
))

931 
	`MESSAGE_BEGIN
(
MSG_ONE_UNRELIABLE
, 
SVC_TEMPENTITY
, 
NULL
, 
pEÁ™y
);

932 
	`WRITE_BYTE
(
TE_BEAMPOINTS
);

933 
	`WRITE_COORD
(
¡¬t
.
x
);

934 
	`WRITE_COORD
(
¡¬t
.
y
);

935 
	`WRITE_COORD
(
¡¬t
.
z
);

936 
	`WRITE_COORD
(
’d
.
x
);

937 
	`WRITE_COORD
(
’d
.
y
);

938 
	`WRITE_COORD
(
’d
.
z
);

939 
	`WRITE_SHORT
(
g_sMod–IndexLa£r
);

940 
	`WRITE_BYTE
(0);

941 
	`WRITE_BYTE
(10);

942 
	`WRITE_BYTE
(
liã
);

943 
	`WRITE_BYTE
(
width
);

944 
	`WRITE_BYTE
(
noi£
);

946 
	`WRITE_BYTE
(
»d
);

947 
	`WRITE_BYTE
(
g»’
);

948 
	`WRITE_BYTE
(
blue
);

950 
	`WRITE_BYTE
(
brighŠess
);

951 
	`WRITE_BYTE
(
¥“d
);

952 
	`MESSAGE_END
();

953 
	}
}

955 
	$UTIL_D¿wA¼ow
(
ediù_t
 *
pEÁ™y
, 
VeùÜ
 
¡¬t
, VeùÜ 
’d
, 
width
,

956 
noi£
, 
»d
, 
g»’
, 
blue
, 
brighŠess
, 
¥“d
, 
liã
)

958 ià(!
	`IsPÏy”
(
pEÁ™y
))

961 
	`MESSAGE_BEGIN
(
MSG_ONE_UNRELIABLE
, 
SVC_TEMPENTITY
, 
NULL
, 
pEÁ™y
);

962 
	`WRITE_BYTE
(
TE_BEAMPOINTS
);

963 
	`WRITE_COORD
(
’d
.
x
);

964 
	`WRITE_COORD
(
’d
.
y
);

965 
	`WRITE_COORD
(
’d
.
z
);

966 
	`WRITE_COORD
(
¡¬t
.
x
);

967 
	`WRITE_COORD
(
¡¬t
.
y
);

968 
	`WRITE_COORD
(
¡¬t
.
z
);

969 
	`WRITE_SHORT
(
g_sMod–IndexA¼ow
);

970 
	`WRITE_BYTE
(0);

971 
	`WRITE_BYTE
(10);

972 
	`WRITE_BYTE
(
liã
);

973 
	`WRITE_BYTE
(
width
);

974 
	`WRITE_BYTE
(
noi£
);

976 
	`WRITE_BYTE
(
»d
);

977 
	`WRITE_BYTE
(
g»’
);

978 
	`WRITE_BYTE
(
blue
);

980 
	`WRITE_BYTE
(
brighŠess
);

981 
	`WRITE_BYTE
(
¥“d
);

982 
	`MESSAGE_END
();

983 
	}
}

985 
boŞ
 
	$IsR—chabË
(cÚ¡ 
VeùÜ
 &
v_¤c
, cÚ¡ VeùÜ &
v_de¡
)

987 
T¿ûResuÉ
 
Œ
;

988 
height
, 
Ï¡_height
;

990 
di¡ªû
 = (
v_de¡
 - 
v_¤c
).
	`L’gth
();

993 ià(
di¡ªû
 < 256)

995 
boŞ
 
bIsVisibË
 = 
FALSE
;

996 
boŞ
 
bIsN—rDoÜ
 = 
FALSE
;

999 
	`UTIL_T¿ûHuÎ
(
v_¤c
, 
v_de¡
, 
ignÜe_mÚ¡”s
, 
h—d_huÎ
, 
NULL
, &
Œ
);

1000 ià(
Œ
.
æF¿ùiÚ
 >= 1.0)

1001 
bIsVisibË
 = 
TRUE
;

1004 
	`UTIL_T¿ûLše
(
v_¤c
, 
v_de¡
, 
ignÜe_mÚ¡”s
, 
NULL
, &
Œ
);

1005 ià(!
	`FNuÎEÁ
(
Œ
.
pH™
))

1007 ià(
	`FCÏs¢ameIs
(
Œ
.
pH™
, "func_door") ||

1008 
	`FCÏs¢ameIs
(
Œ
.
pH™
, "func_door_rotating"))

1009 
bIsN—rDoÜ
 = 
TRUE
;

1013 ià(
bIsVisibË
 || 
bIsN—rDoÜ
)

1015 ià(
bIsN—rDoÜ
)

1018 
VeùÜ
 
vDoÜEnd
 = 
Œ
.
vecEndPos
;

1019 
	`UTIL_T¿ûLše
(
vDoÜEnd
, 
v_de¡
, 
ignÜe_mÚ¡”s
, 
ignÜe_gÏss
, 
Œ
.
pH™
, &tr);

1020 ià(
Œ
.
æF¿ùiÚ
 < 1.0)

1021  
FALSE
;

1027 ià(
v_de¡
.
z
 > 
v_¤c
.z + 45.0)

1029 
VeùÜ
 
v_Ãw_¤c
 = 
v_de¡
;

1030 
VeùÜ
 
v_Ãw_de¡
 = 
v_de¡
;

1032 
v_Ãw_de¡
.
z
 = v_new_dest.z - 50;

1034 
	`UTIL_T¿ûLše
(
v_Ãw_¤c
, 
v_Ãw_de¡
, 
ignÜe_mÚ¡”s
, 
ignÜe_gÏss
, 
NULL
, &
Œ
);

1037 ià(
Œ
.
æF¿ùiÚ
 >= 1.0)

1038  
FALSE
;

1044 
VeùÜ
 
v_dœeùiÚ
 = (
v_de¡
 - 
v_¤c
).
	`NÜm®ize
();

1045 
VeùÜ
 
v_check
 = 
v_¤c
;

1046 
VeùÜ
 
v_down
 = 
v_¤c
;

1048 
v_down
.
z
 = v_down.z - 1000.0;

1050 
	`UTIL_T¿ûLše
(
v_check
, 
v_down
, 
ignÜe_mÚ¡”s
, 
ignÜe_gÏss
, 
NULL
, &
Œ
);

1052 
Ï¡_height
 = 
Œ
.
æF¿ùiÚ
 * 1000.0;

1054 
di¡ªû
 = (
v_de¡
 - 
v_check
).
	`L’gth
();

1056 
di¡ªû
 > 10.0)

1059 
v_check
 = v_check + 
v_dœeùiÚ
 * 10.0;

1061 
v_down
 = 
v_check
;

1062 
v_down
.
z
 = v_down.z - 1000.0;

1064 
	`UTIL_T¿ûLše
(
v_check
, 
v_down
, 
ignÜe_mÚ¡”s
, 
ignÜe_gÏss
, 
NULL
, &
Œ
);

1066 
height
 = 
Œ
.
æF¿ùiÚ
 * 1000.0;

1068 ià(
height
 < 
Ï¡_height
 - 18.0)

1069  
FALSE
;

1071 
Ï¡_height
 = 
height
;

1073 
di¡ªû
 = (
v_de¡
 - 
v_check
).
	`L’gth
();

1075  
TRUE
;

1078  
FALSE
;

1079 
	}
}

	@waypoint.cpp

5 
	~<veùÜ
>

6 
	~"bÙ.h
"

8 
cv¬_t
 
	gg_cv¬WPTDœÇme
 = {"yapb_wptfolder", "wptdefault" };

10 
PATH
 *
	g·ths
[
MAX_WAYPOINTS
];

12 
ex³r›nû_t
* 
	gpBÙEx³r›nûD©a
 = 
NULL
;

14 
boŞ
 
	gg_bWaypoštP©hs
 = 
FALSE
;

15 
boŞ
 
	gg_bEndJumpPošt
 = 
FALSE
;

16 
	gg_fTimeJumpS¹ed
 = 0.0;

17 
VeùÜ
 
	gvecL—ºV–oc™y
 = 
g_vecZ”o
;

18 
VeùÜ
 
	gvecL—ºPos
 = 
g_vecZ”o
;

20 
	gg_iLa¡JumpWaypošt
 = -1;

22 
VeùÜ
 
	gg_vecLa¡Waypošt
;

24 
	gg_fP©hTime
 = 0.0;

25 
	gg_æDªg”Time
 = 0.0;

27 
	gg_rgfWPDi¥ÏyTime
[
MAX_WAYPOINTS
];

29 
	gg_rgbyVisLUT
[
MAX_WAYPOINTS
][MAX_WAYPOINTS / 4];

31 
boŞ
 
bEd™Noş
;

36 
	$WaypoštIn™
()

39 ià(
g_bWaypoštP©hs
)

42 
i
 = 0; i < 
g_iNumWaypošts
; i++)

44 
	`ä“
(
·ths
[
i
]);

45 
·ths
[
i
] = 
NULL
;

49 
g_iNumWaypošts
 = 0;

50 
g_vecLa¡Waypošt
 = 
g_vecZ”o
;

51 
	}
}

53 
	$WaypoštAddP©h
(
add_šdex
, 
·th_šdex
, 
fDi¡ªû
)

55 ià(
add_šdex
 < 0 ||‡dd_šdex >ğ
g_iNumWaypošts
 ||

56 
·th_šdex
 < 0 ||…©h_šdex >ğ
g_iNumWaypošts
 || 
add_šdex
 ==…ath_index)

59 
PATH
 *
p
 = 
·ths
[
add_šdex
];

60 
i
;

63 
i
 = 0; i < 
MAX_PATH_INDEX
; i++)

65 ià(
p
->
šdex
[
i
] =ğ
·th_šdex
)

70 
i
 = 0; i < 
MAX_PATH_INDEX
; i++)

72 ià(
p
->
šdex
[
i
] == -1)

74 
p
->
šdex
[
i
] = 
·th_šdex
;

75 
p
->
di¡ªû
[
i
] = 
	`abs
(
fDi¡ªû
);

76 
	`SERVER_PRINT
(
	`UTIL_V¬Args
("P©h‡dded from %dØ%d\n", 
add_šdex
, 
·th_šdex
));

82 
iMaxDi¡ªû
 = -9999;

83 
iSlÙ
 = -1;

85 
i
 = 0; i < 
MAX_PATH_INDEX
; i++)

87 ià(
p
->
di¡ªû
[
i
] > 
iMaxDi¡ªû
)

89 
iMaxDi¡ªû
 = 
p
->
di¡ªû
[
i
];

90 
iSlÙ
 = 
i
;

94 ià(
iSlÙ
 != -1)

96 
	`SERVER_PRINT
(
	`UTIL_V¬Args
("P©h‡dded from %dØ%d\n", 
add_šdex
, 
·th_šdex
));

97 
p
->
šdex
[
iSlÙ
] = 
·th_šdex
;

98 
p
->
di¡ªû
[
iSlÙ
] = 
	`abs
(
fDi¡ªû
);

100 
	}
}

107 
	$WaypoštFšdN—»¡
(
VeùÜ
 
vec
, 
mš_di¡ªû
)

109 
šdex
 = -1;

111 
i
 = 0; i < 
g_iNumWaypošts
; i++)

113 
di¡ªû
 = (
·ths
[
i
]->
Üigš
 - 
vec
).
	`L’gth
();

115 ià(
di¡ªû
 < 
mš_di¡ªû
)

117 
šdex
 = 
i
;

118 
mš_di¡ªû
 = 
di¡ªû
;

122  
šdex
;

123 
	}
}

128 
	$WaypoštFšdInRadius
(
VeùÜ
 
vecPos
, 
fRadius
, *
pTab
, *
iCouÁ
)

130 
iMaxCouÁ
 = *
iCouÁ
;

131 *
iCouÁ
 = 0;

133 
i
 = 0; i < 
g_iNumWaypošts
; i++)

135 ià((
·ths
[
i
]->
Üigš
 - 
vecPos
).
	`L’gth
(è< 
fRadius
)

137 *
pTab
++ = 
i
;

138 *
iCouÁ
 += 1;

139 ià(*
iCouÁ
 >ğ
iMaxCouÁ
)

144 *
iCouÁ
 -= 1;

145 
	}
}

147 
	$WaypoštAdd
(
iFÏgs
)

149 ià(
	`FNuÎEÁ
(
pHo¡Ediù
))

152 
šdex
 = -1, 
i
;

153 
di¡ªû
;

154 
VeùÜ
 
v_fÜw¬d
 = 
g_vecZ”o
;

155 
PATH
 *
p
 = 
NULL
;

156 
boŞ
 
bPÏûNew
 = 
TRUE
;

157 
VeùÜ
 
vecNewWaypošt
 = 
pHo¡Ediù
->
v
.
Üigš
;

159 
	`U£rRemoveAÎBÙs
();

161 
g_bWaypoštsChªged
 = 
TRUE
;

163 
iFÏgs
)

166 
šdex
 = 
	`WaypoštFšdN—»¡
(
pHo¡Ediù
->
v
.
Üigš
, 50.0);

167 ià(
šdex
 != -1)

169 
p
 = 
·ths
[
šdex
];

170 ià(!(
p
->
æags
 & 
W_FL_CAMP
))

172 
	`Cl›ÁPršt
(&
pHo¡Ediù
->
v
, 
HUD_PRINTCENTER
, "This is‚o Camping Waypoint!\n");

175 
	`UTIL_MakeVeùÜs
Ğ
pHo¡Ediù
->
v
.
v_ªgË
 );

176 
v_fÜw¬d
 = 
pHo¡Ediù
->
v
.
Üigš
 +…Ho¡Ediù->v.
v›w_ofs
 + 
gpGlob®s
->v_forward * 640;

177 
p
->
fÿm³ndx
 = 
v_fÜw¬d
.
x
;

178 
p
->
fÿm³ndy
 = 
v_fÜw¬d
.
y
;

180 
	`EMIT_SOUND_DYN2
(
pHo¡Ediù
, 
CHAN_WEAPON
, "commÚ/w²_hudÚ.wav", 1.0, 
ATTN_NORM
, 0, 100);

185 
šdex
 = 
	`WaypoštFšdN—»¡
(
pHo¡Ediù
->
v
.
Üigš
, 50.0);

186 ià(
šdex
 != -1)

188 
di¡ªû
 = (
·ths
[
šdex
]->
Üigš
 - 
pHo¡Ediù
->
v
.Üigš).
	`L’gth
();

189 ià(
di¡ªû
 < 50)

191 
bPÏûNew
 = 
FALSE
;

192 
p
 = 
·ths
[
šdex
];

193 ià(
iFÏgs
 == 9)

194 
p
->
Üigš
 = (p->Üigš + 
vecL—ºPos
) / 2;

198 
vecNewWaypošt
 = 
vecL—ºPos
;

202 
šdex
 = 
	`WaypoštFšdN—»¡
(
pHo¡Ediù
->
v
.
Üigš
, 50.0);

203 ià(
šdex
 != -1)

205 
di¡ªû
 = (
·ths
[
šdex
]->
Üigš
 - 
pHo¡Ediù
->
v
.Üigš).
	`L’gth
();

206 ià(
di¡ªû
 < 50)

208 
bPÏûNew
 = 
FALSE
;

209 
p
 = 
·ths
[
šdex
];

210 
æags
 = 0;

211 
i
 = 0; i < 
MAX_PATH_INDEX
; i++)

212 
æags
 +ğ
p
->
cÚÃùæag
[
i
];

214 ià(
æags
 == 0)

215 
p
->
Üigš
 = (p->Üigš + 
pHo¡Ediù
->
v
.origin) / 2;

221 ià(
bPÏûNew
)

223 ià(
g_iNumWaypošts
 >ğ
MAX_WAYPOINTS
)

227 
šdex
 = 
g_iNumWaypošts
;

229 
·ths
[
šdex
] = (
PATH
 *)
	`m®loc
((PATH));

230 ià(
·ths
[
šdex
] =ğ
NULL
)

231 
	`T”mš©eOnE¼Ü
("Memory Allocation Error!");

233 
p
 = 
·ths
[
šdex
];

236 
g_iNumWaypošts
++;

237 
p
->
iP©hNumb”
 = 
šdex
;

238 
p
->
æags
 = 0;

241 
p
->
Üigš
 = 
vecNewWaypošt
;

242 
p
->
fÿmp¡¬tx
 = 0;

243 
p
->
fÿmp¡¬ty
 = 0;

244 
p
->
fÿm³ndx
 = 0;

245 
p
->
fÿm³ndy
 = 0;

247 
i
 = 0; i < 
MAX_PATH_INDEX
; i++)

249 
p
->
šdex
[
i
] = -1;

250 
p
->
di¡ªû
[
i
] = 0;

251 
p
->
cÚÃùæag
[
i
] = 0;

252 
p
->
vecCÚÃùV–
[
i
] = 
g_vecZ”o
;

256 
g_vecLa¡Waypošt
 = 
pHo¡Ediù
->
v
.
Üigš
;

260 
g_rgfWPDi¥ÏyTime
[
šdex
] = 0;

262 ià(
iFÏgs
 == 9)

263 
g_iLa¡JumpWaypošt
 = 
šdex
;

264 ià(
iFÏgs
 == 10)

266 
di¡ªû
 = (
·ths
[
g_iLa¡JumpWaypošt
]->
Üigš
 - 
pHo¡Ediù
->
v
.Üigš).
	`L’gth
();

267 
	`WaypoštAddP©h
(
g_iLa¡JumpWaypošt
, 
šdex
, 
di¡ªû
);

268 
i
 = 0;

269 
i
 < 
MAX_PATH_INDEX
)

271 ià(
·ths
[
g_iLa¡JumpWaypošt
]->
šdex
[
i
] == index)

273 
·ths
[
g_iLa¡JumpWaypošt
]->
cÚÃùæag
[
i
] |ğ
C_FL_JUMP
;

274 
·ths
[
g_iLa¡JumpWaypošt
]->
vecCÚÃùV–
[
i
] = 
vecL—ºV–oc™y
;

277 
i
++;

279 
	`C®cuÏ‹WaypoštWayzÚe
(
šdex
);

283 ià(
pHo¡Ediù
->
v
.
æags
 & 
FL_DUCKING
)

284 
p
->
æags
 |ğ
W_FL_CROUCH
;

286 ià(
pHo¡Ediù
->
v
.
mov‘y³
 =ğ
MOVETYPE_FLY
)

288 
p
->
æags
 |ğ
W_FL_LADDER
;

289 
	`UTIL_MakeVeùÜs
Ğ
pHo¡Ediù
->
v
.
v_ªgË
 );

290 
v_fÜw¬d
 = 
pHo¡Ediù
->
v
.
Üigš
 +…Ho¡Ediù->v.
v›w_ofs
 + 
gpGlob®s
->v_forward * 640;

291 
p
->
fÿmp¡¬ty
 = 
v_fÜw¬d
.
y
;

294 
iFÏgs
)

297 
p
->
æags
 |ğ
W_FL_CROSSING
;

298 
p
->
æags
 |ğ
W_FL_TERRORIST
;

302 
p
->
æags
 |ğ
W_FL_CROSSING
;

303 
p
->
æags
 |ğ
W_FL_COUNTER
;

307 
p
->
æags
 |ğ
W_FL_NOHOSTAGE
;

311 
p
->
æags
 |ğ
W_FL_RESCUE
;

315 
p
->
æags
 |ğ
W_FL_CROSSING
;

316 
p
->
æags
 |ğ
W_FL_CAMP
;

317 
	`UTIL_MakeVeùÜs
Ğ
pHo¡Ediù
->
v
.
v_ªgË
 );

318 
v_fÜw¬d
 = 
pHo¡Ediù
->
v
.
Üigš
 +…Ho¡Ediù->v.
v›w_ofs
 + 
gpGlob®s
->v_forward * 640;

319 
p
->
fÿmp¡¬tx
 = 
v_fÜw¬d
.
x
;

320 
p
->
fÿmp¡¬ty
 = 
v_fÜw¬d
.
y
;

324 
p
->
æags
 |ğ
W_FL_GOAL
;

328 
	`EMIT_SOUND_DYN2
(
pHo¡Ediù
, 
CHAN_WEAPON
, "w—pÚs/xbow_h™1.wav", 1.0, 
ATTN_NORM
, 0, 100);

330 
	`C®cuÏ‹WaypoštWayzÚe
(
šdex
);

332 ià(
p
->
æags
 & 
W_FL_LADDER
)

334 
mš_di¡ªû
 = 9999.0;

335 
iDe¡Index
 = -1;

338 
i
 = 0; i < 
g_iNumWaypošts
; i++)

340 ià(
i
 =ğ
šdex
)

343 ià(
·ths
[
i
]->
æags
 & 
W_FL_LADDER
)

345 
T¿ûResuÉ
 
Œ
;

346 
	`UTIL_T¿ûLše
(
vecNewWaypošt
, 
·ths
[
i
]->
Üigš
, 
ignÜe_mÚ¡”s
,

347 
ignÜe_gÏss
, 
pHo¡Ediù
, &
Œ
);

348 ià(
Œ
.
æF¿ùiÚ
 == 1.0)

351 ià((
vecNewWaypošt
 - 
·ths
[
i
]->
Üigš
).
	`L’gth2D
() < 32)

354 
di¡ªû
 = (
·ths
[
i
]->
Üigš
 - 
vecNewWaypošt
).
	`L’gth
();

355 
	`WaypoštAddP©h
(
šdex
, 
i
, 
di¡ªû
);

356 
	`WaypoštAddP©h
(
i
, 
šdex
, 
di¡ªû
);

363 ià(
	`WaypoštR—chabË
(
vecNewWaypošt
, 
·ths
[
i
]->
Üigš
) )

365 
di¡ªû
 = (
·ths
[
i
]->
Üigš
 - 
vecNewWaypošt
).
	`L’gth
();

366 ià(
di¡ªû
 < 
mš_di¡ªû
 &&

367 
	`çbs
(
·ths
[
i
]->
Üigš
.
z
 - 
vecNewWaypošt
.z) < 50.0)

369 
iDe¡Index
 = 
i
;

370 
mš_di¡ªû
 = 
di¡ªû
;

376 ià(
iDe¡Index
 > -1 && iDe¡Index < 
g_iNumWaypošts
)

379 ià(
	`WaypoštR—chabË
(
vecNewWaypošt
, 
·ths
[
iDe¡Index
]->
Üigš
))

381 
di¡ªû
 = (
·ths
[
iDe¡Index
]->
Üigš
 - 
vecNewWaypošt
).
	`L’gth
();

382 
	`WaypoštAddP©h
(
šdex
, 
iDe¡Index
, 
di¡ªû
);

386 ià(
	`WaypoštR—chabË
(
·ths
[
iDe¡Index
]->
Üigš
, 
vecNewWaypošt
))

388 
di¡ªû
 = (
·ths
[
iDe¡Index
]->
Üigš
 - 
vecNewWaypošt
).
	`L’gth
();

389 
	`WaypoštAddP©h
(
iDe¡Index
, 
šdex
, 
di¡ªû
);

396 
i
 = 0; i < 
g_iNumWaypošts
; i++)

398 ià(
i
 =ğ
šdex
 || index == -1)

402 iàĞ
	`IsR—chabË
(
vecNewWaypošt
, 
·ths
[
i
]->
Üigš
) )

404 
VeùÜ
 
v_dœeùiÚ
 = 
·ths
[
i
]->
Üigš
 - 
vecNewWaypošt
;

405 
v_dœeùiÚ
 = 
	`UTIL_VecToAngËs
(v_direction);

406 
	`UTIL_MakeVeùÜs
(
v_dœeùiÚ
);

407 
VeùÜ
 
vecCheck
 = 
vecNewWaypošt
 - 
gpGlob®s
->
v_right
 * 
p
->
Radius
;

408 ià(
	`IsR—chabË
(
vecCheck
, 
·ths
[
i
]->
Üigš
))

410 
vecCheck
 = 
vecNewWaypošt
 + 
gpGlob®s
->
v_right
 * 
p
->
Radius
;

411 ià(
	`IsR—chabË
(
vecCheck
, 
·ths
[
i
]->
Üigš
))

413 
di¡ªû
 = (
·ths
[
i
]->
Üigš
 - 
vecNewWaypošt
).
	`L’gth
();

414 
	`WaypoštAddP©h
(
šdex
, 
i
, 
di¡ªû
);

420 iàĞ
	`IsR—chabË
(
·ths
[
i
]->
Üigš
, 
vecNewWaypošt
) )

422 
VeùÜ
 
v_dœeùiÚ
 = 
vecNewWaypošt
 - 
·ths
[
i
]->
Üigš
;

423 
v_dœeùiÚ
 = 
	`UTIL_VecToAngËs
(v_direction);

424 
	`UTIL_MakeVeùÜs
(
v_dœeùiÚ
);

425 
VeùÜ
 
vecCheck
 = 
·ths
[
i
]->
Üigš
 - 
gpGlob®s
->
v_right
 *…©hs[i]->
Radius
;

426 ià(
	`IsR—chabË
(
vecCheck
, 
vecNewWaypošt
))

428 
vecCheck
 = 
·ths
[
i
]->
Üigš
 + 
gpGlob®s
->
v_right
 *…©hs[i]->
Radius
;

429 ià(
	`IsR—chabË
(
vecCheck
, 
vecNewWaypošt
))

431 
di¡ªû
 = (
·ths
[
i
]->
Üigš
 - 
vecNewWaypošt
).
	`L’gth
();

432 
	`WaypoštAddP©h
(
i
, 
šdex
, 
di¡ªû
);

438 
	}
}

440 
	$WaypoštD–‘e
()

442 
g_bWaypoštsChªged
 = 
TRUE
;

444 ià(
g_iNumWaypošts
 < 1)

447 
	`U£rRemoveAÎBÙs
();

449 
šdex
 = 
	`WaypoštFšdN—»¡
(
pHo¡Ediù
->
v
.
Üigš
, 50.0);

451 ià(
šdex
 == -1)

454 
PATH
 *
p_´evious
 = 
NULL
;

455 
PATH
 *
p
;

457 
	`as£¹
(
·ths
[
šdex
] !ğ
NULL
);

459 ià(
šdex
 > 0)

460 
p_´evious
 = 
·ths
[
šdex
 - 1];

462 
i
, 
ix
;

464 
i
 = 0; i < 
g_iNumWaypošts
; i++)

466 
p
 = 
·ths
[
i
];

467 
ix
 = 0; ix < 
MAX_PATH_INDEX
; ix++)

469 ià(
p
->
šdex
[
ix
] == index)

471 
p
->
šdex
[
ix
] = -1;

472 
p
->
cÚÃùæag
[
ix
] = 0;

473 
p
->
di¡ªû
[
ix
] = 0;

474 
p
->
vecCÚÃùV–
[
ix
] = 
g_vecZ”o
;

479 
i
 = 0; i < 
g_iNumWaypošts
; i++)

481 
p
 = 
·ths
[
i
];

483 ià(
p
->
iP©hNumb”
 > 
šdex
)

484 
p
->
iP©hNumb”
--;

486 
ix
 = 0; ix < 
MAX_PATH_INDEX
; ix++)

488 ià(
p
->
šdex
[
ix
] > index)

489 
p
->
šdex
[
ix
]--;

494 
	`ä“
(
·ths
[
šdex
]);

495 
·ths
[
šdex
] = 
NULL
;

498 
i
 = 
šdex
; i < 
g_iNumWaypošts
 - 1; i++)

499 
·ths
[
i
] =…aths[i + 1];

501 
g_iNumWaypošts
--;

503 
g_rgfWPDi¥ÏyTime
[
šdex
] = 0;

505 
	`EMIT_SOUND_DYN2
(
pHo¡Ediù
, 
CHAN_WEAPON
, "w—pÚs/mše_aùiv©e.wav", 1.0, 
ATTN_NORM
, 0, 100);

506 
	}
}

511 
	$WaypoštChªgeFÏgs
(
iFÏg
, 
iMode
)

513 
šdex
 = 
	`WaypoštFšdN—»¡
(
pHo¡Ediù
->
v
.
Üigš
, 50.0);

515 ià(
šdex
 != -1)

518 ià(
iMode
 == 0)

519 
·ths
[
šdex
]->
æags
 &ğ~
iFÏg
;

521 
·ths
[
šdex
]->
æags
 |ğ
iFÏg
;

524 
	`EMIT_SOUND_DYN2
(
pHo¡Ediù
, 
CHAN_WEAPON
, "commÚ/w²_hudÚ.wav", 1.0, 
ATTN_NORM
, 0, 100);

527 
	}
}

533 
	$WaypoštS‘Radius
(
iRadius
)

535 
šdex
 = 
	`WaypoštFšdN—»¡
(
pHo¡Ediù
->
v
.
Üigš
, 50.0);

537 ià(
šdex
 != -1)

539 
·ths
[
šdex
]->
Radius
 = ()
iRadius
;

541 
	`EMIT_SOUND_DYN2
(
pHo¡Ediù
, 
CHAN_WEAPON
, "commÚ/w²_hudÚ.wav", 1.0, 
ATTN_NORM
, 0, 100);

543 
	}
}

550 
	$WaypoštC»©eP©h
(
iNodeNum
)

552 
waypošt1
 = 
	`WaypoštFšdN—»¡
(
pHo¡Ediù
->
v
.
Üigš
, 50.0);

554 ià(
waypošt1
 == -1)

557 ià(
iNodeNum
 < 0 || iNodeNum >ğ
g_iNumWaypošts
)

559 
	`Cl›ÁPršt
(
	`VARS
(
pHo¡Ediù
), 
HUD_PRINTCONSOLE
, "Waypoint Number out of Range!\n");

563 ià(
iNodeNum
 =ğ
waypošt1
)

565 
	`Cl›ÁPršt
(
	`VARS
(
pHo¡Ediù
), 
HUD_PRINTCONSOLE
, "Cannot connect waypointo itself!\n");

569 
di¡ªû
 = (
·ths
[
iNodeNum
]->
Üigš
 -…©hs[
waypošt1
]->Üigš).
	`L’gth
();

571 
	`WaypoštAddP©h
(
waypošt1
, 
iNodeNum
, 
di¡ªû
);

574 
	`EMIT_SOUND_DYN2
(
pHo¡Ediù
, 
CHAN_WEAPON
, "commÚ/w²_hudÚ.wav", 1.0, 
ATTN_NORM
, 0, 100);

575 
	}
}

581 
	$WaypoštC»©eP©h
(
iNodeNum1
, 
iNodeNum2
)

583 ià(
iNodeNum1
 < 0 || iNodeNum1 >ğ
g_iNumWaypošts
 ||

584 
iNodeNum2
 < 0 || iNodeNum2 >ğ
g_iNumWaypošts
)

586 
	`Cl›ÁPršt
(
	`VARS
(
pHo¡Ediù
), 
HUD_PRINTCONSOLE
, "Waypoint Number out of Range!\n");

590 ià(
iNodeNum1
 =ğ
iNodeNum2
)

592 
	`Cl›ÁPršt
(
	`VARS
(
pHo¡Ediù
), 
HUD_PRINTCONSOLE
, "Cannot connect waypointo itself!\n");

596 
di¡ªû
 = (
·ths
[
iNodeNum2
]->
Üigš
 -…©hs[
iNodeNum1
]->Üigš).
	`L’gth
();

598 
	`WaypoštAddP©h
(
iNodeNum1
, 
iNodeNum2
, 
di¡ªû
);

601 
	`EMIT_SOUND_DYN2
(
pHo¡Ediù
, 
CHAN_WEAPON
, "commÚ/w²_hudÚ.wav", 1.0, 
ATTN_NORM
, 0, 100);

602 
	}
}

608 
	$WaypoštRemoveP©h
(
iNodeNum
)

610 
waypošt1
 = 
	`WaypoštFšdN—»¡
(
pHo¡Ediù
->
v
.
Üigš
, 50.0);

612 ià(
waypošt1
 == -1)

615 ià(
iNodeNum
 < 0 || iNodeNum > 
g_iNumWaypošts
)

617 
	`Cl›ÁPršt
(
	`VARS
(
pHo¡Ediù
), 
HUD_PRINTCONSOLE
, "Waypoint Number out of Range!\n");

621 
i
 = 0;

622 
i
 < 
MAX_PATH_INDEX
)

624 ià(
·ths
[
waypošt1
]->
šdex
[
i
] =ğ
iNodeNum
)

626 
·ths
[
waypošt1
]->
šdex
[
i
] = -1;

627 
·ths
[
waypošt1
]->
cÚÃùæag
[
i
] = 0;

628 
·ths
[
waypošt1
]->
vecCÚÃùV–
[
i
] = 
g_vecZ”o
;

629 
·ths
[
waypošt1
]->
di¡ªû
[
i
] = 0;

631 
i
++;

635 
	`EMIT_SOUND_DYN2
(
pHo¡Ediù
, 
CHAN_WEAPON
, "commÚ/w²_hudÚ.wav", 1.0, 
ATTN_NORM
, 0, 100);

636 
	}
}

642 
	$WaypoštRemoveP©h
(
iNodeNum1
, 
iNodeNum2
)

644 ià(
iNodeNum1
 < 0 || iNodeNum1 > 
g_iNumWaypošts
)

646 
	`Cl›ÁPršt
(
	`VARS
(
pHo¡Ediù
), 
HUD_PRINTCONSOLE
, "Waypoint Number out of Range!\n");

650 ià(
iNodeNum2
 < 0 || iNodeNum2 > 
g_iNumWaypošts
)

652 
	`Cl›ÁPršt
(
	`VARS
(
pHo¡Ediù
), 
HUD_PRINTCONSOLE
, "Waypoint Number out of Range!\n");

656 
i
 = 0;

657 
i
 < 
MAX_PATH_INDEX
)

659 ià(
·ths
[
iNodeNum1
]->
šdex
[
i
] =ğ
iNodeNum2
)

661 
·ths
[
iNodeNum1
]->
šdex
[
i
] = -1;

662 
·ths
[
iNodeNum1
]->
cÚÃùæag
[
i
] = 0;

663 
·ths
[
iNodeNum1
]->
vecCÚÃùV–
[
i
] = 
g_vecZ”o
;

664 
·ths
[
iNodeNum1
]->
di¡ªû
[
i
] = 0;

666 
i
++;

670 
	`EMIT_SOUND_DYN2
(
pHo¡Ediù
, 
CHAN_WEAPON
, "common/wpn_hudon.wav", 1.0,

671 
ATTN_NORM
, 0, 100);

672 
	}
}

678 
boŞ
 
	$IsCÚÃùedW™hWaypošt
(
a
, 
b
)

680 
ix
 = 0;

681 
ix
 < 
MAX_PATH_INDEX
)

683 ià(
·ths
[
a
]->
šdex
[
ix
] =ğ
b
)

684  
TRUE
;

685 
ix
++;

687  
FALSE
;

688 
	}
}

694 
	$C®cuÏ‹WaypoštWayzÚe
(
šdex
)

696 
PATH
 *
p
 = 
·ths
[
šdex
];

697 
VeùÜ
 
¡¬t
;

698 
VeùÜ
 
v_dœeùiÚ
;

699 
T¿ûResuÉ
 
Œ
;

701 ià((
p
->
æags
 & (
W_FL_LADDER
|
W_FL_GOAL
|
W_FL_CAMP
|
W_FL_RESCUE
|
W_FL_CROUCH
)è|| 
g_bL—ºJumpWaypošt
)

703 
p
->
Radius
 = 0;

707 
x
 = 0;

708 
x
 < 
MAX_PATH_INDEX
)

710 ià(
p
->
šdex
[
x
] != -1)

712 ià(
·ths
[
p
->
šdex
[
x
]]->
æags
 & 
W_FL_LADDER
)

714 
p
->
Radius
 = 0;

718 
x
++;

721 
boŞ
 
bWayBlocked
 = 
FALSE
;

722 
iSÿnDi¡ªû
 = 16; iScanDistance < 128; iScanDistance += 16)

724 
¡¬t
 = 
p
->
Üigš
;

725 
	`UTIL_MakeVeùÜs
(
g_vecZ”o
);

726 
v_dœeùiÚ
 = 
gpGlob®s
->
v_fÜw¬d
 * 
iSÿnDi¡ªû
;

727 
v_dœeùiÚ
 = 
	`UTIL_VecToAngËs
(v_direction);

728 
p
->
Radius
 = 
iSÿnDi¡ªû
;

730 
fRadCœşe
 = 0.0; fRadCircle < 180.0; fRadCircle += 5)

732 
	`UTIL_MakeVeùÜs
(
v_dœeùiÚ
);

733 
VeùÜ
 
vRadiusS¹
 = 
¡¬t
 - 
gpGlob®s
->
v_fÜw¬d
 * 
iSÿnDi¡ªû
;

734 
VeùÜ
 
vRadiusEnd
 = 
¡¬t
 + 
gpGlob®s
->
v_fÜw¬d
 * 
iSÿnDi¡ªû
;

736 
	`UTIL_T¿ûHuÎ
(
vRadiusS¹
, 
vRadiusEnd
, 
ignÜe_mÚ¡”s
, 
h—d_huÎ
, 
NULL
, &
Œ
);

738 ià(
Œ
.
æF¿ùiÚ
 < 1.0)

740 
	`UTIL_T¿ûLše
Ğ
vRadiusS¹
, 
vRadiusEnd
, 
ignÜe_mÚ¡”s
, 
NULL
, &
Œ
 );

741 ià(
	`FCÏs¢ameIs
(
Œ
.
pH™
, "func_door") ||

742 
	`FCÏs¢ameIs
(
Œ
.
pH™
, "func_door_rotating"))

744 
p
->
Radius
 = 0;

745 
bWayBlocked
 = 
TRUE
;

749 
bWayBlocked
 = 
TRUE
;

750 
p
->
Radius
 -= 16;

754 
VeùÜ
 
vDrİS¹
 = 
¡¬t
 + 
gpGlob®s
->
v_fÜw¬d
 * 
iSÿnDi¡ªû
;

755 
VeùÜ
 
vDrİEnd
 = 
vDrİS¹
 - 
	`VeùÜ
(0, 0, 
iSÿnDi¡ªû
 + 60);

756 
	`UTIL_T¿ûHuÎ
Ğ
vDrİS¹
, 
vDrİEnd
, 
ignÜe_mÚ¡”s
, 
h—d_huÎ
, 
NULL
, &
Œ
);

757 ià(
Œ
.
æF¿ùiÚ
 >= 1.0)

759 
bWayBlocked
 = 
TRUE
;

760 
p
->
Radius
 -= 16;

764 
vDrİS¹
 = 
¡¬t
 - 
gpGlob®s
->
v_fÜw¬d
 * 
iSÿnDi¡ªû
;

765 
vDrİEnd
 = 
vDrİS¹
 - 
	`VeùÜ
(0, 0, 
iSÿnDi¡ªû
 + 60);

766 
	`UTIL_T¿ûHuÎ
Ğ
vDrİS¹
, 
vDrİEnd
, 
ignÜe_mÚ¡”s
, 
h—d_huÎ
, 
NULL
, &
Œ
);

767 ià(
Œ
.
æF¿ùiÚ
 >= 1.0)

769 
bWayBlocked
 = 
TRUE
;

770 
p
->
Radius
 -= 16;

774 
vRadiusEnd
.
z
 += 34;

775 
	`UTIL_T¿ûHuÎ
Ğ
vRadiusS¹
, 
vRadiusEnd
, 
ignÜe_mÚ¡”s
, 
h—d_huÎ
, 
NULL
, &
Œ
 );

777 ià(
Œ
.
æF¿ùiÚ
 < 1.0)

779 
bWayBlocked
 = 
TRUE
;

780 
p
->
Radius
 -= 16;

784 
v_dœeùiÚ
.
y
 = 
	`AngËNÜm®ize
(v_dœeùiÚ.y + 
fRadCœşe
);

786 ià(
bWayBlocked
)

790 
p
->
Radius
 -= 16;

791 ià(
p
->
Radius
 < 0)

792 
p
->
Radius
 = 0;

793 
	}
}

795 
	$SaveEx³r›nûTab
()

797 
f’ame
[256];

798 
EXPERIENCE_HDR
 
h—d”
;

799 
ex³r›nû§ve_t
 *
pEx³r›nûSave
;

801 ià(
g_iNumWaypošts
 <ğ0 || !
g_bU£Ex³r›nû
 || 
g_bWaypoštsChªged
)

804 
	`¡rıy
(
h—d”
.
f‘y³
, "PODEXP!");

806 
h—d”
.
ex³r›nûd©a_fe_v”siÚ
 = 
EXPERIENCE_VERSION
;

808 
h—d”
.
numb”_of_waypošts
 = 
g_iNumWaypošts
;

810 
	`G‘GameDœeùÜy
(
f’ame
);

811 
	`¡rÿt
(
f’ame
, "/addons/yapb/");

812 
	`¡rÿt
(
f’ame
, 
	`CVAR_GET_STRING
("yapb_wptfolder"));

813 
	`C»©eP©h
(
f’ame
);

814 
	`¡rÿt
(
f’ame
, "/");

815 
	`¡rÿt
(
f’ame
, 
	`STRING
(
gpGlob®s
->
m­Çme
));

816 
	`¡rÿt
(
f’ame
, ".pxp");

818 
pEx³r›nûSave
 = (
ex³r›nû§ve_t
 *)
	`ÿÎoc
(
g_iNumWaypošts
 * g_iNumWaypoints, (experiencesave_t));

819 ià(
pEx³r›nûSave
 =ğ
NULL
)

820 
	`T”mš©eOnE¼Ü
( "Couldn't‡llocate Memory for saving Experience Data!" );

822 
i
 = 0; i < 
g_iNumWaypošts
; i++)

824 
j
 = 0; j < 
g_iNumWaypošts
; j++)

826 (
pEx³r›nûSave
 + 
i
 * 
g_iNumWaypošts
 + 
j
)->
uT—m0Damage
 = (
pBÙEx³r›nûD©a
 + i * g_iNumWaypoints + j)->uTeam0Damage >> 3;

827 (
pEx³r›nûSave
 + 
i
 * 
g_iNumWaypošts
 + 
j
)->
uT—m1Damage
 = (
pBÙEx³r›nûD©a
 + i * g_iNumWaypoints + j)->uTeam1Damage >> 3;

828 (
pEx³r›nûSave
 + 
i
 * 
g_iNumWaypošts
 + 
j
)->
cT—m0V®ue
 = (
pBÙEx³r›nûD©a
 + i * g_iNumWaypošt + j)->
wT—m0V®ue
 / 8;

829 (
pEx³r›nûSave
 + 
i
 * 
g_iNumWaypošts
 + 
j
)->
cT—m1V®ue
 = (
pBÙEx³r›nûD©a
 + i * g_iNumWaypošt + j)->
wT—m1V®ue
 / 8;

833 
iResuÉ
 = 
	`Encode
(
f’ame
, (*)&
h—d”
, (
EXPERIENCE_HDR
), (*)
pEx³r›nûSave
, 
g_iNumWaypošts
 * g_iNumWaypošt * (
ex³r›nû§ve_t
));

835 
	`ä“
(
pEx³r›nûSave
);

837 ià(
iResuÉ
 == -1)

839 
	`ALERT
Ğ
©_”rÜ
, "Couldn't save Experience Data!\n" );

842 
	}
}

845 
	$In™Ex³r›nûTab
()

847 
EXPERIENCE_HDR
 
h—d”
;

848 
f’ame
[256];

849 
i
, 
j
;

851 ià(
pBÙEx³r›nûD©a
)

853 
	`ä“
(
pBÙEx³r›nûD©a
);

854 
pBÙEx³r›nûD©a
 = 
NULL
;

857 
pBÙEx³r›nûD©a
 = (
ex³r›nû_t
 *)
	`ÿÎoc
(
g_iNumWaypošts
 * g_iNumWaypoints, (experience_t));

858 ià(
pBÙEx³r›nûD©a
 =ğ
NULL
)

859 
	`T”mš©eOnE¼Ü
( "Couldn't‡llocate Memory for Experience Data!\n" );

863 
i
 = 0; i < 
g_iNumWaypošts
; i++)

865 
j
 = 0; j < 
g_iNumWaypošts
; j++)

867 (
pBÙEx³r›nûD©a
 + 
i
 * 
g_iNumWaypošts
 + 
j
)->
iT—m0_dªg”_šdex
 = -1;

868 (
pBÙEx³r›nûD©a
 + 
i
 * 
g_iNumWaypošts
 + 
j
)->
iT—m1_dªg”_šdex
 = -1;

869 (
pBÙEx³r›nûD©a
 + 
i
 * 
g_iNumWaypošts
 + 
j
)->
uT—m0Damage
 = 0;

870 (
pBÙEx³r›nûD©a
 + 
i
 * 
g_iNumWaypošts
 + 
j
)->
uT—m1Damage
 = 0;

871 (
pBÙEx³r›nûD©a
 + 
i
 * 
g_iNumWaypošts
 + 
j
)->
wT—m0V®ue
 = 0;

872 (
pBÙEx³r›nûD©a
 + 
i
 * 
g_iNumWaypošts
 + 
j
)->
wT—m1V®ue
 = 0;

876 
	`G‘GameDœeùÜy
(
f’ame
);

877 
	`¡rÿt
(
f’ame
, "/addons/yapb/");

878 
	`¡rÿt
(
f’ame
, 
	`CVAR_GET_STRING
("yapb_wptfolder"));

879 
	`C»©eP©h
(
f’ame
);

880 
	`¡rÿt
(
f’ame
, "/");

881 
	`¡rÿt
(
f’ame
, 
	`STRING
(
gpGlob®s
->
m­Çme
));

882 
	`¡rÿt
(
f’ame
, ".pxp");

884 
FILE
 *
bå
 = 
	`fİ’
(
f’ame
, "rb");

887 ià(
bå
 !ğ
NULL
)

889 
	`ä—d
(&
h—d”
, (
EXPERIENCE_HDR
), 1, 
bå
);

890 
	`fşo£
(
bå
);

892 
h—d”
.
f‘y³
[7] = 0;

893 ià(
	`¡rcmp
(
h—d”
.
f‘y³
, "PODEXP!") == 0)

895 ià(
h—d”
.
ex³r›nûd©a_fe_v”siÚ
 =ğ
EXPERIENCE_VERSION


896 && 
h—d”
.
numb”_of_waypošts
 =ğ
g_iNumWaypošts
)

898 
ex³r›nû§ve_t
 *
pEx³r›nûLßd
;

900 
pEx³r›nûLßd
 = (
ex³r›nû§ve_t
 *)
	`ÿÎoc
(
g_iNumWaypošts
 * g_iNumWaypoints, (experiencesave_t));

901 ià(
pEx³r›nûLßd
 =ğ
NULL
)

903 
	`ALERT
(
©_”rÜ
, "Couldn't‡llocate Memory for Experience Data!\n");

904 
g_bU£Ex³r›nû
 = 
FALSE
;

905 
	`CVAR_SET_FLOAT
("yapb_useexp", 0);

909 
	`Decode
(
f’ame
, (
EXPERIENCE_HDR
), (*)
pEx³r›nûLßd
, 
g_iNumWaypošts
 * g_iNumWaypošt * (
ex³r›nû§ve_t
));

911 
i
 = 0; i < 
g_iNumWaypošts
; i++)

913 
j
 = 0; j < 
g_iNumWaypošts
; j++)

915 ià(
i
 =ğ
j
)

917 (
pBÙEx³r›nûD©a
 + 
i
 * 
g_iNumWaypošts
 + 
j
)->
uT—m0Damage
 = ()((
pEx³r›nûLßd
 + i * g_iNumWaypoints + j)->uTeam0Damage);

918 (
pBÙEx³r›nûD©a
 + 
i
 * 
g_iNumWaypošts
 + 
j
)->
uT—m1Damage
 = ()((
pEx³r›nûLßd
 + i * g_iNumWaypoints + j)->uTeam1Damage);

922 (
pBÙEx³r›nûD©a
 + 
i
 * 
g_iNumWaypošts
 + 
j
)->
uT—m0Damage
 = ()((
pEx³r›nûLßd
 + i * g_iNumWaypoints + j)->uTeam0Damage) << 3;

923 (
pBÙEx³r›nûD©a
 + 
i
 * 
g_iNumWaypošts
 + 
j
)->
uT—m1Damage
 = ()((
pEx³r›nûLßd
 + i * g_iNumWaypoints + j)->uTeam1Damage) << 3;

926 (
pBÙEx³r›nûD©a
 + 
i
 * 
g_iNumWaypošts
 + 
j
)->
wT—m0V®ue
 = (sigÃd )((
pEx³r›nûLßd
 + i * g_iNumWaypošt + j)->
cT—m0V®ue
) * 8;

927 (
pBÙEx³r›nûD©a
 + 
i
 * 
g_iNumWaypošts
 + 
j
)->
wT—m1V®ue
 = (sigÃd )((
pEx³r›nûLßd
 + i * g_iNumWaypošt + j)->
cT—m1V®ue
) * 8;

930 
	`ä“
(
pEx³r›nûLßd
);

934 
	}
}

937 
	$In™WaypoštTy³s
()

939 
g_iNumT”rÜPošts
 = 0;

940 
g_iNumCTPošts
 = 0;

941 
g_iNumGßlPošts
 = 0;

942 
g_iNumCampPošts
 = 0;

943 
g_iNumRescuePošts
 = 0;

945 ià(
g_pT”rÜWaypošts
)

946 
	`ä“
(
g_pT”rÜWaypošts
);

947 
g_pT”rÜWaypošts
 = 
NULL
;

949 ià(
g_pCTWaypošts
)

950 
	`ä“
(
g_pCTWaypošts
);

951 
g_pCTWaypošts
 = 
NULL
;

953 ià(
g_pGßlWaypošts
)

954 
	`ä“
(
g_pGßlWaypošts
);

955 
g_pGßlWaypošts
 = 
NULL
;

957 ià(
g_pCampWaypošts
)

958 
	`ä“
(
g_pCampWaypošts
);

959 
g_pCampWaypošts
 = 
NULL
;

961 ià(
g_pRescueWaypošts
)

962 
	`ä“
(
g_pRescueWaypošts
);

963 
g_pRescueWaypošts
 = 
NULL
;

965 
šdex
 = 0; index < 
g_iNumWaypošts
; index++)

967 ià(
·ths
[
šdex
]->
æags
 & 
W_FL_TERRORIST
)

969 ià(
g_iNumT”rÜPošts
 <= 0)

970 
g_pT”rÜWaypošts
 = (*)
	`m®loc
(());

972 
g_pT”rÜWaypošts
 = (*)
	`»®loc
(g_pT”rÜWaypošts, (è* (
g_iNumT”rÜPošts
 + 1));

974 ià(!
g_pT”rÜWaypošts
)

975 
	`T”mš©eOnE¼Ü
("Memory Allocation Error!");

977 
g_pT”rÜWaypošts
[
g_iNumT”rÜPošts
] = 
šdex
;

978 
g_iNumT”rÜPošts
++;

980 ià((
·ths
[
šdex
]->
æags
 & 
W_FL_COUNTER
) &&

981 !(
·ths
[
šdex
]->
æags
 & 
W_FL_CAMP
))

983 ià(
g_iNumCTPošts
 <= 0)

984 
g_pCTWaypošts
 = (*)
	`m®loc
(());

986 
g_pCTWaypošts
 = (*)
	`»®loc
(g_pCTWaypošts, (è* (
g_iNumCTPošts
 + 1));

988 ià(!
g_pCTWaypošts
)

989 
	`T”mš©eOnE¼Ü
("Memory Allocation Error!");

991 
g_pCTWaypošts
[
g_iNumCTPošts
] = 
šdex
;

992 
g_iNumCTPošts
++;

994 ià(
·ths
[
šdex
]->
æags
 & 
W_FL_GOAL
)

996 ià(
g_iNumGßlPošts
 <= 0)

997 
g_pGßlWaypošts
 = (*)
	`m®loc
(());

999 
g_pGßlWaypošts
 = (*)
	`»®loc
(g_pGßlWaypošts, (è* (
g_iNumGßlPošts
 + 1));

1001 ià(!
g_pGßlWaypošts
)

1002 
	`T”mš©eOnE¼Ü
("Memory Allocation Error!");

1004 
g_pGßlWaypošts
[
g_iNumGßlPošts
] = 
šdex
;

1005 
g_iNumGßlPošts
++;

1007 ià(
·ths
[
šdex
]->
æags
 & 
W_FL_CAMP
)

1009 ià(
g_iNumCampPošts
 <= 0)

1010 
g_pCampWaypošts
 = (*)
	`m®loc
(());

1012 
g_pCampWaypošts
 = (*)
	`»®loc
(g_pCampWaypošts, (è* (
g_iNumCampPošts
 + 1));

1014 ià(!
g_pCampWaypošts
)

1015 
	`T”mš©eOnE¼Ü
("Memory Allocation Error!");

1017 
g_pCampWaypošts
[
g_iNumCampPošts
] = 
šdex
;

1018 
g_iNumCampPošts
++;

1020 ià(
·ths
[
šdex
]->
æags
 & 
W_FL_RESCUE
)

1022 ià(
g_iNumRescuePošts
 <= 0)

1023 
g_pRescueWaypošts
 = (*)
	`m®loc
(());

1025 
g_pRescueWaypošts
 = (*)
	`»®loc
(g_pRescueWaypošts, (è* (
g_iNumRescuePošts
 + 1));

1027 ià(!
g_pRescueWaypošts
)

1028 
	`T”mš©eOnE¼Ü
("Memory Allocation Error!");

1030 
g_pRescueWaypošts
[
g_iNumRescuePošts
] = 
šdex
;

1031 
g_iNumRescuePošts
++;

1035 
g_iNumT”rÜPošts
--;

1036 
g_iNumCTPošts
--;

1037 
g_iNumGßlPošts
--;

1038 
g_iNumCampPošts
--;

1039 
g_iNumRescuePošts
--;

1040 
	}
}

1042 
boŞ
 
	$WaypoštLßd
()

1044 
f’ame
[256];

1045 
WAYPOINT_HDR
 
h—d”
;

1046 
šdex
;

1047 
boŞ
 
bOldWaypoštFÜm©
 = 
FALSE
;

1049 
g_fP©hTime
 = 0.0;

1050 
g_æDªg”Time
 = 0.0;

1052 
	`¡rıy
(
f’ame
, 
	`STRING
(
gpGlob®s
->
m­Çme
));

1054 
	`G‘GameDœeùÜy
(
f’ame
);

1055 
	`¡rÿt
(
f’ame
, "/addons/yapb/");

1056 
	`¡rÿt
(
f’ame
, 
	`CVAR_GET_STRING
("yapb_wptfolder"));

1057 
	`C»©eP©h
(
f’ame
);

1058 
	`¡rÿt
(
f’ame
, "/");

1059 
	`¡rÿt
(
f’ame
, 
	`STRING
(
gpGlob®s
->
m­Çme
));

1060 
	`¡rÿt
(
f’ame
, ".pwf");

1062 
FILE
 *
bå
 = 
	`fİ’
(
f’ame
, "rb");

1064 ià(
bå
 !ğ
NULL
)

1066 
	`ä—d
(&
h—d”
, (h—d”), 1, 
bå
);

1068 
h—d”
.
f‘y³
[7] = 0;

1069 ià(
	`¡rcmp
(
h—d”
.
f‘y³
, "PODWAY!") == 0)

1071 ià(
h—d”
.
waypošt_fe_v”siÚ
 !ğ
WAYPOINT_VERSION
)

1073 ià(
h—d”
.
waypošt_fe_v”siÚ
 =ğ
WAYPOINT_VERSION5
 ||

1074 
h—d”
.
waypošt_fe_v”siÚ
 =ğ
WAYPOINT_VERSION6
)

1075 
bOldWaypoštFÜm©
 = 
TRUE
;

1078 
	`ALERT
Ğ
©_cÚsŞe
, "% - incÜ»ù waypošˆfv”siÚ\n", 
f’ame
 );

1079 
	`fşo£
(
bå
);

1080  
FALSE
;

1084 
	`WaypoštIn™
();

1085 
g_iNumWaypošts
 = 
h—d”
.
numb”_of_waypošts
;

1088 
	`¡rıy
(
g_szWaypoš‹r
, 
h—d”
.
waypoš‹r
);

1091 
šdex
 = 0; index < 
g_iNumWaypošts
; index++)

1094 ià(
bOldWaypoštFÜm©
)

1097 ià(
h—d”
.
waypošt_fe_v”siÚ
 =ğ
WAYPOINT_VERSION5
)

1099 
OLDPATH
 
cÚv·th
;

1101 
·ths
[
šdex
] = (
PATH
 *)
	`m®loc
((PATH));

1102 ià(
·ths
[
šdex
] =ğ
NULL
)

1103 
	`T”mš©eOnE¼Ü
("Memory Allocation Error!");

1106 
	`ä—d
(&
cÚv·th
, (
OLDPATH
), 1, 
bå
);

1108 
·ths
[
šdex
]->
iP©hNumb”
 = 
cÚv·th
.iPathNumber;

1109 
·ths
[
šdex
]->
æags
 = 
cÚv·th
.flags;

1110 
·ths
[
šdex
]->
Üigš
 = 
cÚv·th
.origin;

1111 
·ths
[
šdex
]->
Radius
 = 
cÚv·th
.Radius;

1112 
·ths
[
šdex
]->
fÿmp¡¬tx
 = 
cÚv·th
.fcampstartx;

1113 
·ths
[
šdex
]->
fÿmp¡¬ty
 = 
cÚv·th
.fcampstarty;

1114 
·ths
[
šdex
]->
fÿm³ndx
 = 
cÚv·th
.fcampendx;

1115 
·ths
[
šdex
]->
fÿm³ndy
 = 
cÚv·th
.fcampendy;

1116 
·ths
[
šdex
]->šdex[0] = 
cÚv·th
.index[0];

1117 
·ths
[
šdex
]->šdex[1] = 
cÚv·th
.index[1];

1118 
·ths
[
šdex
]->šdex[2] = 
cÚv·th
.index[2];

1119 
·ths
[
šdex
]->šdex[3] = 
cÚv·th
.index[3];

1120 
·ths
[
šdex
]->index[4] = -1;

1121 
·ths
[
šdex
]->index[5] = -1;

1122 
·ths
[
šdex
]->index[6] = -1;

1123 
·ths
[
šdex
]->index[7] = -1;

1124 
·ths
[
šdex
]->
di¡ªû
[0] = 
cÚv·th
.distance[0];

1125 
·ths
[
šdex
]->
di¡ªû
[1] = 
cÚv·th
.distance[1];

1126 
·ths
[
šdex
]->
di¡ªû
[2] = 
cÚv·th
.distance[2];

1127 
·ths
[
šdex
]->
di¡ªû
[3] = 
cÚv·th
.distance[3];

1128 
·ths
[
šdex
]->
di¡ªû
[4] = 0;

1129 
·ths
[
šdex
]->
di¡ªû
[5] = 0;

1130 
·ths
[
šdex
]->
di¡ªû
[6] = 0;

1131 
·ths
[
šdex
]->
di¡ªû
[7] = 0;

1132 
·ths
[
šdex
]->
cÚÃùæag
[0] = 0;

1133 
·ths
[
šdex
]->
cÚÃùæag
[1] = 0;

1134 
·ths
[
šdex
]->
cÚÃùæag
[2] = 0;

1135 
·ths
[
šdex
]->
cÚÃùæag
[3] = 0;

1136 
·ths
[
šdex
]->
cÚÃùæag
[4] = 0;

1137 
·ths
[
šdex
]->
cÚÃùæag
[5] = 0;

1138 
·ths
[
šdex
]->
cÚÃùæag
[6] = 0;

1139 
·ths
[
šdex
]->
cÚÃùæag
[7] = 0;

1140 
·ths
[
šdex
]->
vecCÚÃùV–
[0] = 
g_vecZ”o
;

1141 
·ths
[
šdex
]->
vecCÚÃùV–
[1] = 
g_vecZ”o
;

1142 
·ths
[
šdex
]->
vecCÚÃùV–
[2] = 
g_vecZ”o
;

1143 
·ths
[
šdex
]->
vecCÚÃùV–
[3] = 
g_vecZ”o
;

1144 
·ths
[
šdex
]->
vecCÚÃùV–
[4] = 
g_vecZ”o
;

1145 
·ths
[
šdex
]->
vecCÚÃùV–
[5] = 
g_vecZ”o
;

1146 
·ths
[
šdex
]->
vecCÚÃùV–
[6] = 
g_vecZ”o
;

1147 
·ths
[
šdex
]->
vecCÚÃùV–
[7] = 
g_vecZ”o
;

1151 
PATH6
 
cÚv·th
;

1153 
·ths
[
šdex
] = (
PATH
 *)
	`m®loc
((PATH));

1154 ià(
·ths
[
šdex
] =ğ
NULL
)

1155 
	`T”mš©eOnE¼Ü
("Memory Allocation Error!");

1158 
	`ä—d
(&
cÚv·th
, (
PATH6
), 1, 
bå
);

1160 
·ths
[
šdex
]->
iP©hNumb”
 = 
cÚv·th
.iPathNumber;

1161 
·ths
[
šdex
]->
æags
 = 
cÚv·th
.flags;

1162 
·ths
[
šdex
]->
Üigš
 = 
cÚv·th
.origin;

1163 
·ths
[
šdex
]->
Radius
 = 
cÚv·th
.Radius;

1164 
·ths
[
šdex
]->
fÿmp¡¬tx
 = 
cÚv·th
.fcampstartx;

1165 
·ths
[
šdex
]->
fÿmp¡¬ty
 = 
cÚv·th
.fcampstarty;

1166 
·ths
[
šdex
]->
fÿm³ndx
 = 
cÚv·th
.fcampendx;

1167 
·ths
[
šdex
]->
fÿm³ndy
 = 
cÚv·th
.fcampendy;

1168 
·ths
[
šdex
]->šdex[0] = 
cÚv·th
.index[0];

1169 
·ths
[
šdex
]->šdex[1] = 
cÚv·th
.index[1];

1170 
·ths
[
šdex
]->šdex[2] = 
cÚv·th
.index[2];

1171 
·ths
[
šdex
]->šdex[3] = 
cÚv·th
.index[3];

1172 
·ths
[
šdex
]->šdex[4] = 
cÚv·th
.index[4];

1173 
·ths
[
šdex
]->šdex[5] = 
cÚv·th
.index[5];

1174 
·ths
[
šdex
]->šdex[6] = 
cÚv·th
.index[6];

1175 
·ths
[
šdex
]->šdex[7] = 
cÚv·th
.index[7];

1176 
·ths
[
šdex
]->
di¡ªû
[0] = 
cÚv·th
.distance[0];

1177 
·ths
[
šdex
]->
di¡ªû
[1] = 
cÚv·th
.distance[1];

1178 
·ths
[
šdex
]->
di¡ªû
[2] = 
cÚv·th
.distance[2];

1179 
·ths
[
šdex
]->
di¡ªû
[3] = 
cÚv·th
.distance[3];

1180 
·ths
[
šdex
]->
di¡ªû
[4] = 
cÚv·th
.distance[4];

1181 
·ths
[
šdex
]->
di¡ªû
[5] = 
cÚv·th
.distance[5];

1182 
·ths
[
šdex
]->
di¡ªû
[6] = 
cÚv·th
.distance[6];

1183 
·ths
[
šdex
]->
di¡ªû
[7] = 
cÚv·th
.distance[7];

1184 
·ths
[
šdex
]->
cÚÃùæag
[0] = 0;

1185 
·ths
[
šdex
]->
cÚÃùæag
[1] = 0;

1186 
·ths
[
šdex
]->
cÚÃùæag
[2] = 0;

1187 
·ths
[
šdex
]->
cÚÃùæag
[3] = 0;

1188 
·ths
[
šdex
]->
cÚÃùæag
[4] = 0;

1189 
·ths
[
šdex
]->
cÚÃùæag
[5] = 0;

1190 
·ths
[
šdex
]->
cÚÃùæag
[6] = 0;

1191 
·ths
[
šdex
]->
cÚÃùæag
[7] = 0;

1192 
·ths
[
šdex
]->
vecCÚÃùV–
[0] = 
g_vecZ”o
;

1193 
·ths
[
šdex
]->
vecCÚÃùV–
[1] = 
g_vecZ”o
;

1194 
·ths
[
šdex
]->
vecCÚÃùV–
[2] = 
g_vecZ”o
;

1195 
·ths
[
šdex
]->
vecCÚÃùV–
[3] = 
g_vecZ”o
;

1196 
·ths
[
šdex
]->
vecCÚÃùV–
[4] = 
g_vecZ”o
;

1197 
·ths
[
šdex
]->
vecCÚÃùV–
[5] = 
g_vecZ”o
;

1198 
·ths
[
šdex
]->
vecCÚÃùV–
[6] = 
g_vecZ”o
;

1199 
·ths
[
šdex
]->
vecCÚÃùV–
[7] = 
g_vecZ”o
;

1204 
·ths
[
šdex
] = (
PATH
 *)
	`m®loc
((PATH));

1205 ià(
·ths
[
šdex
] =ğ
NULL
)

1206 
	`T”mš©eOnE¼Ü
("Memory Allocation Error!");

1208 
	`ä—d
(
·ths
[
šdex
], (
PATH
), 1, 
bå
);

1212 
g_bWaypoštP©hs
 = 
TRUE
;

1216 
	`ALERT
(
©_cÚsŞe
, "% i nÙ‡ POD BÙ waypošˆfe!\n", 
f’ame
);

1217 
	`fşo£
(
bå
);

1218  
FALSE
;

1220 
	`fşo£
(
bå
);

1224 
	`ALERT
Ğ
©_cÚsŞe
, "Waypošˆf% dÛ nÙƒxi¡!\n", 
f’ame
 );

1225  
FALSE
;

1229 
šdex
 = 0; index < 
g_iNumWaypošts
; index++)

1230 
g_rgfWPDi¥ÏyTime
[
šdex
] = 0.0;

1232 
	`In™WaypoštTy³s
();

1233 ià(
g_bM­In™Ÿlized
)

1234 
	`WaypoštC®cVisib™y
();

1235 
	`In™P©hM©rix
();

1236 
g_bWaypoštsChªged
 = 
FALSE
;

1237 
g_cKlHi¡Üy
 = 0;

1239 
	`In™Ex³r›nûTab
();

1241 
	`CVAR_SET_FLOAT
("yapb_debuggoal", -1);

1243  
TRUE
;

1244 
	}
}

1247 
	$WaypoštSave
()

1249 
f’ame
[256];

1250 
WAYPOINT_HDR
 
h—d”
;

1251 
i
;

1253 
	`¡rıy
(
h—d”
.
f‘y³
, "PODWAY!");

1255 
h—d”
.
waypošt_fe_v”siÚ
 = 
WAYPOINT_VERSION
;

1257 
h—d”
.
numb”_of_waypošts
 = 
g_iNumWaypošts
;

1259 
	`mem£t
(
h—d”
.
m­Çme
, 0, (header.mapname));

1260 
	`mem£t
(
h—d”
.
waypoš‹r
, 0, (header.waypointer));

1261 
	`¡ºıy
(
h—d”
.
m­Çme
, 
	`STRING
(
gpGlob®s
->mapname), 31);

1262 
h—d”
.
m­Çme
[31] = 0;

1263 
	`¡rıy
(
h—d”
.
waypoš‹r
, 
	`STRING
(
pHo¡Ediù
->
v
.
ÃŠame
));

1265 
	`G‘GameDœeùÜy
(
f’ame
);

1266 
	`¡rÿt
(
f’ame
, "/addons/yapb/");

1267 
	`¡rÿt
(
f’ame
, 
	`CVAR_GET_STRING
("yapb_wptfolder"));

1268 
	`C»©eP©h
(
f’ame
);

1269 
	`¡rÿt
(
f’ame
, "/");

1270 
	`¡rÿt
(
f’ame
, 
h—d”
.
m­Çme
);

1271 
	`¡rÿt
(
f’ame
, ".pwf");

1273 
FILE
 *
bå
 = 
	`fİ’
(
f’ame
, "wb");

1274 ià(
bå
)

1277 
	`fwr™e
(&
h—d”
, (h—d”), 1, 
bå
);

1280 
i
 = 0; i < 
g_iNumWaypošts
; i++)

1281 
	`fwr™e
(
·ths
[
i
], (
PATH
), 1, 
bå
);

1283 
	`fşo£
(
bå
);

1286 
	`SERVER_PRINT
("Error opening .pwf file for writing!\n");

1287 
	}
}

1289 
	$WaypoštSaveOldFÜm©
()

1291 
f’ame
[256];

1292 
WAYPOINT_HDR
 
h—d”
;

1293 
i
;

1294 
PATH
 *
p
;

1295 
PATH6
 
cÚv·th
;

1297 
	`¡rıy
(
h—d”
.
f‘y³
, "PODWAY!");

1299 
h—d”
.
waypošt_fe_v”siÚ
 = 
WAYPOINT_VERSION6
;

1301 
h—d”
.
numb”_of_waypošts
 = 
g_iNumWaypošts
;

1303 
	`mem£t
(
h—d”
.
m­Çme
, 0, (header.mapname));

1304 
	`mem£t
(
h—d”
.
waypoš‹r
, 0, (header.waypointer));

1305 
	`¡ºıy
(
h—d”
.
m­Çme
, 
	`STRING
(
gpGlob®s
->mapname), 31);

1306 
h—d”
.
m­Çme
[31] = 0;

1307 
	`¡rıy
(
h—d”
.
waypoš‹r
,
	`STRING
(
pHo¡Ediù
->
v
.
ÃŠame
));

1309 
	`G‘GameDœeùÜy
(
f’ame
);

1310 
	`¡rÿt
(
f’ame
, "/addons/yapb/");

1311 
	`¡rÿt
(
f’ame
, 
	`CVAR_GET_STRING
("yapb_wptfolder"));

1312 
	`C»©eP©h
(
f’ame
);

1313 
	`¡rÿt
(
f’ame
, "/");

1314 
	`¡rÿt
(
f’ame
, 
h—d”
.
m­Çme
);

1315 
	`¡rÿt
(
f’ame
, ".pwf");

1317 
FILE
 *
bå
 = 
	`fİ’
(
f’ame
, "wb");

1318 ià(
bå
)

1321 
	`fwr™e
(&
h—d”
, (h—d”), 1, 
bå
);

1324 
i
 = 0; i < 
g_iNumWaypošts
; i++)

1326 
t
;

1327 
p
 = 
·ths
[
i
];

1329 
	`mem£t
(&
cÚv·th
, 0, (
PATH6
));

1330 
cÚv·th
.
iP©hNumb”
 = 
p
->iPathNumber;

1331 
cÚv·th
.
æags
 = 
p
->flags;

1332 
cÚv·th
.
Üigš
 = 
p
->origin;

1333 
cÚv·th
.
Radius
 = 
p
->Radius;

1334 
cÚv·th
.
fÿmp¡¬tx
 = 
p
->fcampstartx;

1335 
cÚv·th
.
fÿmp¡¬ty
 = 
p
->fcampstarty;

1336 
cÚv·th
.
fÿm³ndx
 = 
p
->fcampendx;

1337 
cÚv·th
.
fÿm³ndy
 = 
p
->fcampendy;

1338 
cÚv·th
.
šdex
[0] = 
p
->index[0];

1339 
cÚv·th
.
šdex
[1] = 
p
->index[1];

1340 
cÚv·th
.
šdex
[2] = 
p
->index[2];

1341 
cÚv·th
.
šdex
[3] = 
p
->index[3];

1342 
cÚv·th
.
šdex
[4] = 
p
->index[4];

1343 
cÚv·th
.
šdex
[5] = 
p
->index[5];

1344 
cÚv·th
.
šdex
[6] = 
p
->index[6];

1345 
cÚv·th
.
šdex
[7] = 
p
->index[7];

1346 
cÚv·th
.
di¡ªû
[0] = 
p
->distance[0];

1347 
cÚv·th
.
di¡ªû
[1] = 
p
->distance[1];

1348 
cÚv·th
.
di¡ªû
[2] = 
p
->distance[2];

1349 
cÚv·th
.
di¡ªû
[3] = 
p
->distance[3];

1350 
cÚv·th
.
di¡ªû
[4] = 
p
->distance[4];

1351 
cÚv·th
.
di¡ªû
[5] = 
p
->distance[5];

1352 
cÚv·th
.
di¡ªû
[6] = 
p
->distance[6];

1353 
cÚv·th
.
di¡ªû
[7] = 
p
->distance[7];

1355 
t
 = 0; <= 7;++)

1357 ià(
p
->
cÚÃùæag
[
t
] & 
C_FL_JUMP
)

1358 
	`UTIL_Ho¡Pršt
(
pHo¡Ediù
, 
´št_cÚsŞe
, 
	`Œ
("WARNING! Jum°·th‚Ù saved from %dØ%d\n"), 
i
, 
p
->
šdex
[
t
]);

1361 
	`fwr™e
(&
cÚv·th
, (
PATH6
), 1, 
bå
);

1363 
	`fşo£
(
bå
);

1365 
	}
}

1368 
	$G‘T¿v–Time
(
fMaxS³ed
, 
VeùÜ
 
vecSourû
, VeùÜ 
vecPos™iÚ
)

1370 
fDi¡ªû
 = (
vecPos™iÚ
 - 
vecSourû
).
	`L’gth2D
();

1371  (
fDi¡ªû
 / 
fMaxS³ed
);

1372 
	}
}

1374 
boŞ
 
	$WaypoštR—chabË
(
VeùÜ
 
v_¤c
, VeùÜ 
v_de¡
, 
boŞ
 
bIsInW©”
)

1376 
T¿ûResuÉ
 
Œ
;

1378 
di¡ªû
 = (
v_de¡
 - 
v_¤c
).
	`L’gth
();

1381 ià(
di¡ªû
 < 400)

1384 
	`UTIL_T¿ûLše
Ğ
v_¤c
, 
v_de¡
, 
ignÜe_mÚ¡”s
, 
NULL
, &
Œ
 );

1387 ià(
Œ
.
æF¿ùiÚ
 >= 1.0)

1389 ià(
bIsInW©”
)

1390  
TRUE
;

1392 ià(
v_de¡
.
z
 > 
v_¤c
.z + 62.0)

1393  
FALSE
;

1395 ià(
v_de¡
.
z
 < 
v_¤c
.z - 100.0)

1396  
FALSE
;

1398  
TRUE
;

1402  
FALSE
;

1403 
	}
}

1405 
	$WaypoštC®cVisib™y
()

1407 
T¿ûResuÉ
 
Œ
;

1408 
byRes
;

1409 
byShiá
;

1411 
iCu¼VisIndex
 = 0; iCu¼VisIndex < 
g_iNumWaypošts
; iCurrVisIndex++)

1413 
VeùÜ
 
vecSourûDuck
 = 
·ths
[
iCu¼VisIndex
]->
Üigš
;

1414 
VeùÜ
 
vecSourûSnd
 = 
·ths
[
iCu¼VisIndex
]->
Üigš
;

1416 ià(
·ths
[
iCu¼VisIndex
]->
æags
 & 
W_FL_CROUCH
)

1418 
vecSourûDuck
.
z
 += 12.0;

1419 
vecSourûSnd
.
z
 += 18.0 + 28.0;

1423 
vecSourûDuck
.
z
 += -18.0 + 12.0;

1424 
vecSourûSnd
.
z
 += 28.0;

1427 
ušt16
 
iSndCouÁ
 = 0, 
iCrouchCouÁ
 = 0;

1429 
i
 = 0; i < 
g_iNumWaypošts
; i++)

1432 
VeùÜ
 
vecDe¡
 = 
·ths
[
i
]->
Üigš
;

1433 
	`UTIL_T¿ûLše
(
vecSourûDuck
, 
vecDe¡
, 
ignÜe_mÚ¡”s
, 
NULL
, &
Œ
);

1436 ià(
Œ
.
æF¿ùiÚ
 !ğ1.0 ||r.
fS¹SŞid
)

1437 
byRes
 = 1;

1439 
byRes
 = 0;

1441 
byRes
 <<= 1;

1443 
	`UTIL_T¿ûLše
(
vecSourûSnd
, 
vecDe¡
, 
ignÜe_mÚ¡”s
, 
NULL
, &
Œ
);

1446 ià(
Œ
.
æF¿ùiÚ
 !ğ1.0 ||r.
fS¹SŞid
)

1447 
byRes
 |= 1;

1476 
byShiá
 = (
i
 % 4)<<1;

1477 
g_rgbyVisLUT
[
iCu¼VisIndex
][
i
 >> 2] &ğ~(3 << 
byShiá
);

1478 
g_rgbyVisLUT
[
iCu¼VisIndex
][
i
 >> 2] |ğ
byRes
 << 
byShiá
;

1480 ià(!(
byRes
 & 2))

1481 
iCrouchCouÁ
++;

1482 ià(!(
byRes
 & 1))

1483 
iSndCouÁ
++;

1486 
·ths
[
iCu¼VisIndex
]->
vis
.
üouch
 = 
iCrouchCouÁ
;

1487 
·ths
[
iCu¼VisIndex
]->
vis
.
¡ªd
 = 
iSndCouÁ
;

1489 
	}
}

1491 
boŞ
 
	$WaypoštIsVisibË
(
iSourûIndex
, 
iDe¡Index
)

1493 
byRes
 = 
g_rgbyVisLUT
[
iSourûIndex
][
iDe¡Index
 >> 2];

1494 
byRes
 >>ğ(
iDe¡Index
 % 4) << 1;

1495  !((
byRes
 & 3) == 3);

1496 
	}
}

1498 
boŞ
 
	$WaypoštIsDuckVisibË
(
iSourûIndex
, 
iDe¡Index
)

1500 
byRes
 = 
g_rgbyVisLUT
[
iSourûIndex
][
iDe¡Index
 >> 2];

1501 
byRes
 >>ğ(
iDe¡Index
 % 4) << 1;

1502  !((
byRes
 & 2) == 2);

1503 
	}
}

1505 
boŞ
 
	$WaypoštIsSndVisibË
(
iSourûIndex
, 
iDe¡Index
)

1507 
byRes
 = 
g_rgbyVisLUT
[
iSourûIndex
][
iDe¡Index
 >> 2];

1508 
byRes
 >>ğ(
iDe¡Index
 % 4) << 1;

1509  !((
byRes
 & 1) == 1);

1510 
	}
}

1512 
	$WaypoštThšk
()

1514 ià(
	`FNuÎEÁ
(
pHo¡Ediù
))

1517 
di¡ªû
, 
mš_di¡ªû
;

1518 
VeùÜ
 
¡¬t
, 
’d
;

1519 
i
, 
šdex
 = 0;

1521 ià(
g_iFšdWPIndex
 > 0 && g_iFšdWPIndex < 
g_iNumWaypošts
)

1522 
	`UTIL_D¿wA¼ow
(
pHo¡Ediù
,…Ho¡Ediù->
v
.
Üigš
, 
·ths
[
g_iFšdWPIndex
]->origin, 20, 0, 255, 255, 0, 200, 0, 1);

1524 ià(
g_bAutoWaypošt
 && (
pHo¡Ediù
->
v
.
æags
 & (
FL_ONGROUND
 | 
FL_PARTIALGROUND
)))

1527 
di¡ªû
 = (
g_vecLa¡Waypošt
 - 
pHo¡Ediù
->
v
.
Üigš
).
	`L’gth
();

1529 ià(
di¡ªû
 > 128)

1531 
mš_di¡ªû
 = 9999.0;

1534 
i
 = 0; i < 
g_iNumWaypošts
; i++)

1536 ià(
	`WaypoštR—chabË
(
pHo¡Ediù
->
v
.
Üigš
, 
·ths
[
i
]->origin))

1538 
di¡ªû
 = (
·ths
[
i
]->
Üigš
 - 
pHo¡Ediù
->
v
.Üigš).
	`L’gth
();

1540 ià(
di¡ªû
 < 
mš_di¡ªû
)

1541 
mš_di¡ªû
 = 
di¡ªû
;

1546 ià(
mš_di¡ªû
 >= 128)

1547 
	`WaypoštAdd
(0);

1551 
mš_di¡ªû
 = 9999.0;

1553 
i
 = 0; i < 
g_iNumWaypošts
; i++)

1555 
di¡ªû
 = (
·ths
[
i
]->
Üigš
 - 
pHo¡Ediù
->
v
.Üigš).
	`L’gth
();

1557 ià(
di¡ªû
 < 500 && ((
	`FInV›wCÚe
(&
·ths
[
i
]->
Üigš
, 
pHo¡Ediù
) &&

1558 
	`FVisibË
(
·ths
[
i
]->
Üigš
, 
pHo¡Ediù
)è|| !
	`IsAlive
ÕHo¡Ediùè|| 
di¡ªû
 < 50))

1560 ià(
di¡ªû
 < 
mš_di¡ªû
)

1562 
šdex
 = 
i
;

1563 
mš_di¡ªû
 = 
di¡ªû
;

1566 ià(
g_rgfWPDi¥ÏyTime
[
i
] + 1.0 < 
gpGlob®s
->
time
)

1568 ià(
·ths
[
i
]->
æags
 & 
W_FL_CROUCH
)

1570 
¡¬t
 = 
·ths
[
i
]->
Üigš
 - 
	`VeùÜ
(0, 0, 16);

1571 
’d
 = 
¡¬t
 + 
	`VeùÜ
(0, 0, 32);

1575 
¡¬t
 = 
·ths
[
i
]->
Üigš
 - 
	`VeùÜ
(0, 0, 36);

1576 
’d
 = 
¡¬t
 + 
	`VeùÜ
(0, 0, 72);

1579 ià(
·ths
[
i
]->
æags
 & 
W_FL_CROSSING
)

1581 ià(
·ths
[
i
]->
æags
 & 
W_FL_CAMP
)

1583 ià(
·ths
[
i
]->
æags
 & 
W_FL_TERRORIST
)

1584 
	`UTIL_D¿wB—m
(
pHo¡Ediù
, 
¡¬t
, 
’d
, 15, 0, 255, 160, 160, 250, 0, 10);

1585 ià(
·ths
[
i
]->
æags
 & 
W_FL_COUNTER
)

1586 
	`UTIL_D¿wB—m
(
pHo¡Ediù
, 
¡¬t
, 
’d
, 15, 0, 255, 160, 255, 250, 0, 10);

1588 
	`UTIL_D¿wB—m
(
pHo¡Ediù
, 
¡¬t
, 
’d
, 15, 0, 0, 255, 255, 250, 0, 10);

1590 ià(
·ths
[
i
]->
æags
 & 
W_FL_TERRORIST
)

1591 
	`UTIL_D¿wB—m
(
pHo¡Ediù
, 
¡¬t
, 
’d
, 15, 0, 255, 0, 0, 250, 0, 10);

1592 ià(
·ths
[
i
]->
æags
 & 
W_FL_COUNTER
)

1593 
	`UTIL_D¿wB—m
(
pHo¡Ediù
, 
¡¬t
, 
’d
, 15, 0, 0, 0, 255, 250, 0, 10);

1595 ià(
·ths
[
i
]->
æags
 & 
W_FL_GOAL
)

1596 
	`UTIL_D¿wB—m
(
pHo¡Ediù
, 
¡¬t
, 
’d
, 15, 0, 255, 0, 255, 250, 0, 10);

1597 ià(
·ths
[
i
]->
æags
 & 
W_FL_LADDER
)

1598 
	`UTIL_D¿wB—m
(
pHo¡Ediù
, 
¡¬t
, 
’d
, 15, 0, 255, 0, 255, 250, 0, 10);

1599 ià(
·ths
[
i
]->
æags
 & 
W_FL_RESCUE
)

1600 
	`UTIL_D¿wB—m
(
pHo¡Ediù
, 
¡¬t
, 
’d
, 15, 0, 255, 255, 255, 250, 0, 10);

1601 ià(
·ths
[
i
]->
æags
 & 
W_FL_NOHOSTAGE
)

1602 
	`UTIL_D¿wB—m
(
pHo¡Ediù
, 
¡¬t
, 
’d
, 15, 0, 255, 255, 0, 250, 0, 10);

1604 
	`UTIL_D¿wB—m
(
pHo¡Ediù
, 
¡¬t
, 
’d
, 15, 0, 0, 255, 0, 250, 0, 10);

1606 
g_rgfWPDi¥ÏyTime
[
i
] = 
gpGlob®s
->
time
;

1611 ià(
g_fP©hTime
 <ğ
gpGlob®s
->
time
)

1613 
g_fP©hTime
 = 
gpGlob®s
->
time
 + 1.0;

1615 ià(
mš_di¡ªû
 <= 50)

1617 ià(
·ths
[
šdex
]->
æags
 & 
W_FL_CAMP
)

1619 ià(
·ths
[
šdex
]->
æags
 & 
W_FL_CROUCH
)

1620 
¡¬t
 = 
·ths
[
šdex
]->
Üigš
 + 
	`VeùÜ
(0, 0, 16);

1622 
¡¬t
 = 
·ths
[
šdex
]->
Üigš
 + 
	`VeùÜ
(0, 0, 36);

1624 
’d
.
z
 = 0;

1626 
’d
.
x
 = 
·ths
[
šdex
]->
fÿmp¡¬tx
;

1627 
’d
.
y
 = 
·ths
[
šdex
]->
fÿmp¡¬ty
;

1628 
	`UTIL_D¿wB—m
(
pHo¡Ediù
, 
¡¬t
, 
’d
, 15, 0, 255, 0, 0, 250, 0, 10);

1630 
’d
.
x
 = 
·ths
[
šdex
]->
fÿm³ndx
;

1631 
’d
.
y
 = 
·ths
[
šdex
]->
fÿm³ndy
;

1632 
	`UTIL_D¿wB—m
(
pHo¡Ediù
, 
¡¬t
, 
’d
, 15, 0, 255, 0, 0, 250, 0, 10);

1635 
PATH
 *
p
 = 
·ths
[
šdex
];

1637 
boŞ
 
isJumpWaypošt
 = 
FALSE
;

1638 
i
 = 0; i < 
MAX_PATH_INDEX
; i++)

1639 ià(
p
->
šdex
[
i
] !ğ-1 &&…->
cÚÃùæag
[i] & 
C_FL_JUMP
)

1640 
isJumpWaypošt
 = 
TRUE
;

1642 
msg
[512];

1643 
	`¥rštf
(
msg
, "\n\n\n\n Waypoint Information:\n\n"

1646 
šdex
, 
g_iNumWaypošts
, ()
p
->
Radius
,

1647 (
p
->
æags
 =ğ0 && !
isJumpWaypošt
) ? " (none)" : "",

1648 
p
->
æags
 & 
W_FL_LIFT
 ? " LIFT" : "",

1649 
p
->
æags
 & 
W_FL_CROUCH
 ? " CROUCH" : "",

1650 
p
->
æags
 & 
W_FL_CROSSING
 ? " CROSSING" : "",

1651 
p
->
æags
 & 
W_FL_CAMP
 ? " CAMP" : "",

1652 
p
->
æags
 & 
W_FL_TERRORIST
 ? " TERRORIST" : "",

1653 
p
->
æags
 & 
W_FL_COUNTER
 ? " CT" : "",

1654 
p
->
æags
 & 
W_FL_GOAL
 ? " GOAL" : "",

1655 
p
->
æags
 & 
W_FL_LADDER
 ? " LADDER" : "",

1656 
p
->
æags
 & 
W_FL_RESCUE
 ? " RESCUE" : "",

1657 
p
->
æags
 & 
W_FL_NOHOSTAGE
 ? " NOHOSTAGE" : "",

1658 
isJumpWaypošt
 ? " JUMP" : "");

1660 ià(
g_bU£Ex³r›nû
 && !
g_bWaypoštsChªged
)

1662 
iDªg”IndexCT
 = (
pBÙEx³r›nûD©a
 + 
šdex
 * 
g_iNumWaypošts
 + index)->
iT—m1_dªg”_šdex
;

1663 
iDªg”IndexT
 = (
pBÙEx³r›nûD©a
 + 
šdex
 * 
g_iNumWaypošts
 + index)->
iT—m0_dªg”_šdex
;

1664 
	`¡rÿt
(
msg
, 
	`UTIL_V¬Args
("\n\n"

1668 
iDªg”IndexCT
,

1669 (
iDªg”IndexCT
 != -1) ?

1670 ((
pBÙEx³r›nûD©a
 + 
šdex
 * 
g_iNumWaypošts
 + 
iDªg”IndexCT
)->
uT—m1Damage
) :0,

1671 
iDªg”IndexT
,

1672 (
iDªg”IndexT
 != -1) ?

1673 ((
pBÙEx³r›nûD©a
 + 
šdex
 * 
g_iNumWaypošts
 + 
iDªg”IndexT
)->
uT—m0Damage
) : 0));

1676 
	`MESSAGE_BEGIN
(
MSG_ONE
, 
SVC_TEMPENTITY
, 
NULL
, 
pHo¡Ediù
);

1677 
	`WRITE_BYTE
(
TE_TEXTMESSAGE
);

1678 
	`WRITE_BYTE
(4);

1679 
	`WRITE_SHORT
(
	`FixedSigÃd16
(0, 1<<13));

1680 
	`WRITE_SHORT
(
	`FixedSigÃd16
(0, 1<<13));

1681 
	`WRITE_BYTE
(0);

1682 
	`WRITE_BYTE
(0);

1683 
	`WRITE_BYTE
(255);

1684 
	`WRITE_BYTE
(1);

1685 
	`WRITE_BYTE
(100);

1686 
	`WRITE_BYTE
(255);

1687 
	`WRITE_BYTE
(0);

1688 
	`WRITE_BYTE
(1);

1689 
	`WRITE_BYTE
(100);

1690 
	`WRITE_SHORT
(0);

1691 
	`WRITE_SHORT
(0);

1692 
	`WRITE_SHORT
(
	`FixedUnsigÃd16
(1.1, 1<<8));

1693 
	`WRITE_STRING
(
msg
);

1694 
	`MESSAGE_END
();

1696 
i
 = 0; i < 
MAX_PATH_INDEX
; i++)

1698 ià(
p
->
šdex
[
i
] != -1)

1700 
VeùÜ
 
v_¤c
 = 
p
->
Üigš
;

1701 
VeùÜ
 
v_de¡
 = 
·ths
[
p
->
šdex
[
i
]]->
Üigš
;

1703 ià(
p
->
cÚÃùæag
[
i
] & 
C_FL_JUMP
)

1704 
	`UTIL_D¿wB—m
(
pHo¡Ediù
, 
v_¤c
, 
v_de¡
, 5, 0, 255, 0, 128, 200, 0, 10);

1705 ià(
	`IsCÚÃùedW™hWaypošt
(
p
->
šdex
[
i
], index))

1706 
	`UTIL_D¿wB—m
(
pHo¡Ediù
, 
v_¤c
, 
v_de¡
, 5, 0, 255, 255, 0, 200, 0, 10);

1708 
	`UTIL_D¿wB—m
(
pHo¡Ediù
, 
v_¤c
, 
v_de¡
, 5, 0, 250, 250, 250, 200, 0, 10);

1712 
¡¬t
 = 
·ths
[
šdex
]->
Üigš
;

1713 
	`UTIL_MakeVeùÜs
(
g_vecZ”o
);

1714 
iDi¡ªû
 = 
·ths
[
šdex
]->
Radius
;

1715 
VeùÜ
 
v_dœeùiÚ
 = 
gpGlob®s
->
v_fÜw¬d
 * 
iDi¡ªû
;

1716 
v_dœeùiÚ
 = 
	`UTIL_VecToAngËs
(v_direction);

1718 
fRadCœşe
 = 0.0; fRadCircle < 180.0; fRadCircle += 20)

1720 
	`UTIL_MakeVeùÜs
(
v_dœeùiÚ
);

1721 
VeùÜ
 
vRadiusS¹
 = 
¡¬t
 - 
gpGlob®s
->
v_fÜw¬d
 * 
iDi¡ªû
;

1722 
VeùÜ
 
vRadiusEnd
 = 
¡¬t
 + 
gpGlob®s
->
v_fÜw¬d
 * 
iDi¡ªû
;

1723 
	`UTIL_D¿wB—m
(
pHo¡Ediù
, 
vRadiusS¹
, 
vRadiusEnd
, 10, 0, 0, 0, 255, 250, 0, 10);

1724 
v_dœeùiÚ
.
y
 = 
	`AngËNÜm®ize
(v_dœeùiÚ.y + 
fRadCœşe
);

1729 ià(
g_æDªg”Time
 <ğ
gpGlob®s
->
time
 && 
g_bDªg”DœeùiÚ
 && !
g_bWaypoštsChªged
)

1731 ià(
mš_di¡ªû
 <= 50)

1733 
g_æDªg”Time
 = 
gpGlob®s
->
time
 + 1.0;

1735 ià((
pBÙEx³r›nûD©a
 + 
šdex
 * 
g_iNumWaypošts
 + index)->
iT—m0_dªg”_šdex
 != -1)

1737 
VeùÜ
 
v_¤c
 = 
·ths
[
šdex
]->
Üigš
;

1738 
VeùÜ
 
v_de¡
 = 
·ths
[(
pBÙEx³r›nûD©a
 + 
šdex
 * 
g_iNumWaypošts
 + index)->
iT—m0_dªg”_šdex
]->
Üigš
;

1740 
	`UTIL_D¿wA¼ow
(
pHo¡Ediù
, 
v_¤c
, 
v_de¡
, 30, 0, 255, 0, 0, 200, 0, 10);

1743 ià((
pBÙEx³r›nûD©a
 + 
šdex
 * 
g_iNumWaypošts
 + index)->
iT—m1_dªg”_šdex
 != -1)

1745 
VeùÜ
 
v_¤c
 = 
·ths
[
šdex
]->
Üigš
;

1746 
VeùÜ
 
v_de¡
 = 
·ths
[(
pBÙEx³r›nûD©a
 + 
šdex
 * 
g_iNumWaypošts
 + index)->
iT—m1_dªg”_šdex
]->
Üigš
;

1748 
	`UTIL_D¿wA¼ow
(
pHo¡Ediù
, 
v_¤c
, 
v_de¡
, 30, 0, 0, 0, 255, 200, 0, 10);

1753 ià(
g_bL—ºJumpWaypošt
)

1755 ià(!
g_bEndJumpPošt
)

1757 ià(
pHo¡Ediù
->
v
.
bu‰Ú
 & 
IN_JUMP
)

1759 
	`WaypoštAdd
(9);

1760 
g_fTimeJumpS¹ed
 = 
gpGlob®s
->
time
;

1761 
g_bEndJumpPošt
 = 
TRUE
;

1765 
vecL—ºV–oc™y
 = 
pHo¡Ediù
->
v
.
v–oc™y
;

1766 
vecL—ºPos
 = 
pHo¡Ediù
->
v
.
Üigš
;

1771 ià(((
pHo¡Ediù
->
v
.
æags
 & 
FL_ONGROUND
è||…Ho¡Ediù->v.
w©”Ëv–
 > 0 ||

1772 
pHo¡Ediù
->
v
.
mov‘y³
 =ğ
MOVETYPE_FLY
) &&

1773 
g_fTimeJumpS¹ed
 + 0.1 < 
gpGlob®s
->
time
 && 
g_bEndJumpPošt
)

1775 
	`WaypoštAdd
(10);

1776 
g_bL—ºJumpWaypošt
 = 
FALSE
;

1777 
g_bEndJumpPošt
 = 
FALSE
;

1781 
	}
}

1783 
boŞ
 
	$WaypoštIsCÚÃùed
(
iNum
)

1785 
i
 = 0; i < 
g_iNumWaypošts
; i++)

1787 ià(
i
 !ğ
iNum
)

1789 
n
 = 0;‚ < 
MAX_PATH_INDEX
;‚++)

1791 ià(
·ths
[
i
]->
šdex
[
n
] =ğ
iNum
)

1792  
TRUE
;

1796  
FALSE
;

1797 
	}
}

1799 
boŞ
 
	$WaypoštNodesV®id
()

1801 
iTPošts
 = 0;

1802 
iCTPošts
 = 0;

1803 
iGßlPošts
 = 0;

1804 
iRescuePošts
 = 0;

1805 
iCÚÃùiÚs
;

1806 
i
, 
j
;

1808 
i
 = 0; i < 
g_iNumWaypošts
; i++)

1810 
iCÚÃùiÚs
 = 0;

1812 
n
 = 0;‚ < 
MAX_PATH_INDEX
;‚++)

1814 ià(
·ths
[
i
]->
šdex
[
n
] != -1)

1816 ià(
·ths
[
i
]->
šdex
[
n
] > 
g_iNumWaypošts
)

1818 
	`SERVER_PRINT
(
	`UTIL_V¬Args
("Nod%d cÚÃùed w™h inv®id WaypošˆNr. %d!\n", 
i
, 
·ths
[i]->
šdex
[
n
]));

1819  
FALSE
;

1821 
iCÚÃùiÚs
++;

1826 ià(
iCÚÃùiÚs
 == 0)

1828 ià(!
	`WaypoštIsCÚÃùed
(
i
))

1830 
	`SERVER_PRINT
(
	`UTIL_V¬Args
("Nod%d i¢'ˆcÚÃùed w™h‡ny oth” Waypošt!\n", 
i
));

1831  
FALSE
;

1835 ià(
·ths
[
i
]->
iP©hNumb”
 != i)

1837 
	`SERVER_PRINT
(
	`UTIL_V¬Args
("Nod%d…©hnumb” difãr äom index!\n", 
i
));

1838  
FALSE
;

1841 ià(
·ths
[
i
]->
æags
 & 
W_FL_CAMP
)

1843 ià(
·ths
[
i
]->
fÿm³ndx
 =ğ0.0 &&…©hs[i]->
fÿm³ndy
 == 0.0)

1845 
	`SERVER_PRINT
(
	`UTIL_V¬Args
("Nod%d Camp-Endpos™iÚ‚Ù s‘!\n", 
i
));

1846  
FALSE
;

1849 ià(
·ths
[
i
]->
æags
 & 
W_FL_TERRORIST
)

1850 
iTPošts
++;

1851 ià(
·ths
[
i
]->
æags
 & 
W_FL_COUNTER
)

1852 
iCTPošts
++;

1853 ià(
·ths
[
i
]->
æags
 & 
W_FL_GOAL
)

1854 
iGßlPošts
++;

1855 ià(
·ths
[
i
]->
æags
 & 
W_FL_RESCUE
)

1856 
iRescuePošts
++;

1858 
x
 = 0;

1860 
x
 < 
MAX_PATH_INDEX
)

1862 ià(
·ths
[
i
]->
šdex
[
x
] != -1)

1864 ià(
·ths
[
i
]->
šdex
[
x
] >ğ
g_iNumWaypošts
 ||…aths[i]->index[x] < -1)

1866 
	`SERVER_PRINT
(
	`UTIL_V¬Args
("Nod%d - P©hšdex %d ouˆoàRªge!\n", 
i
, 
x
));

1867 
g_’gfuncs
.
	`pâS‘Origš
(
pHo¡Ediù
, 
·ths
[
i
]->
Üigš
);

1868 
g_bWaypoštOn
 = 
TRUE
;

1869 
bEd™Noş
 = 
TRUE
;

1870  
FALSE
;

1872 ià(
·ths
[
i
]->
šdex
[
x
] == i)

1874 
	`SERVER_PRINT
(
	`UTIL_V¬Args
("Nod%d - P©hšdex %d…ošt tØ™£lf!\n", 
i
, 
x
));

1875 
g_’gfuncs
.
	`pâS‘Origš
(
pHo¡Ediù
, 
·ths
[
i
]->
Üigš
);

1876 
g_bWaypoštOn
 = 
TRUE
;

1877 
bEd™Noş
 = 
TRUE
;

1878  
FALSE
;

1881 
x
++;

1884 ià(
g_iM­Ty³
 & 
MAP_CS
)

1886 ià(
iRescuePošts
 == 0)

1888 
	`SERVER_PRINT
("You didn't set‡ Rescue Point!\n");

1889  
FALSE
;

1892 ià(
iTPošts
 == 0)

1894 
	`SERVER_PRINT
("You didn't set‡ny Terrorist Important Point!\n");

1895  
FALSE
;

1897 ià(
iCTPošts
 == 0)

1899 
	`SERVER_PRINT
("You didn't set‡ny CT Important Point!\n");

1900  
FALSE
;

1902 ià(
iGßlPošts
 == 0)

1904 
	`SERVER_PRINT
("You didn't set‡ny Goal Point!\n");

1905  
FALSE
;

1911 
boŞ
 
rgbVis™ed
[
MAX_WAYPOINTS
];

1912 
PATHNODE
 *
¡ack
 = 
NULL
;

1916 
i
 = 0; i < 
g_iNumWaypošts
; i++)

1917 
rgbVis™ed
[
i
] = 
FALSE
;

1920 
¡ack
 = (
PATHNODE
 *)
	`m®loc
((PATHNODE));

1921 
¡ack
->
NextNode
 = 
NULL
;

1922 
¡ack
->
iIndex
 = 0;

1924 
¡ack
)

1927 
PATHNODE
 *
cu¼’t
 = 
¡ack
;

1928 
¡ack
 = sck->
NextNode
;

1930 
rgbVis™ed
[
cu¼’t
->
iIndex
] = 
TRUE
;

1932 
j
 = 0; j < 
MAX_PATH_INDEX
; j++)

1934 
iIndex
 = 
·ths
[
cu¼’t
->iIndex]->
šdex
[
j
];

1935 ià(
rgbVis™ed
[
iIndex
])

1937 ià(
iIndex
 >ğ0 && iIndex < 
g_iNumWaypošts
)

1939 
PATHNODE
 *
Ãwnode
 = (PATHNODE *)
	`m®loc
((PATHNODE));

1940 
Ãwnode
->
NextNode
 = 
¡ack
;

1941 
Ãwnode
->
iIndex
 = iIndex;

1942 
¡ack
 = 
Ãwnode
;

1946 
	`ä“
(
cu¼’t
);

1949 
i
 = 0; i < 
g_iNumWaypošts
; i++)

1951 ià(!
rgbVis™ed
[
i
])

1953 
	`SERVER_PRINT
(
	`UTIL_V¬Args
("P©h brok’ from WaypošˆNr. 0ØWaypošˆNr. %d!\n", 
i
));

1954 
g_’gfuncs
.
	`pâS‘Origš
(
pHo¡Ediù
, 
·ths
[
i
]->
Üigš
);

1955 
g_bWaypoštOn
 = 
TRUE
;

1956 
bEd™Noş
 = 
TRUE
;

1957  
FALSE
;

1962 
¡d
::
veùÜ
<> 
š_·ths
[
MAX_WAYPOINTS
];

1964 
i
 = 0; i < 
g_iNumWaypošts
; i++)

1965 
j
 = 0; j < 
MAX_PATH_INDEX
; j++)

1966 ià(
·ths
[
i
]->
šdex
[
j
] >ğ0 &&…©hs[i]->šdex[j] < 
g_iNumWaypošts
)

1967 
š_·ths
[
·ths
[
i
]->
šdex
[
j
]].
	`push_back
(i);

1970 
i
 = 0; i < 
g_iNumWaypošts
; i++)

1971 
rgbVis™ed
[
i
] = 
FALSE
;

1974 
¡ack
 = (
PATHNODE
 *)
	`m®loc
((PATHNODE));

1975 
¡ack
->
NextNode
 = 
NULL
;

1976 
¡ack
->
iIndex
 = 0;

1978 
¡ack
)

1981 
PATHNODE
 *
cu¼’t
 = 
¡ack
;

1982 
¡ack
 = sck->
NextNode
;

1984 
rgbVis™ed
[
cu¼’t
->
iIndex
] = 
TRUE
;

1986 
j
 = 0; j < ()
š_·ths
[
cu¼’t
->
iIndex
].
	`size
(); j++)

1988 ià(
rgbVis™ed
[
š_·ths
[
cu¼’t
->
iIndex
][
j
]])

1990 
PATHNODE
 *
Ãwnode
 = (PATHNODE *)
	`m®loc
((PATHNODE));

1991 
Ãwnode
->
NextNode
 = 
¡ack
;

1992 
Ãwnode
->
iIndex
 = 
š_·ths
[
cu¼’t
->iIndex][
j
];

1993 
¡ack
 = 
Ãwnode
;

1995 
	`ä“
(
cu¼’t
);

1998 
i
 = 0; i < 
g_iNumWaypošts
; i++)

2000 ià(!
rgbVis™ed
[
i
])

2002 
	`SERVER_PRINT
(
	`UTIL_V¬Args
("P©h brok’ from WaypošˆNr. %dØWaypošˆNr. 0!\n", 
i
));

2003 
g_’gfuncs
.
	`pâS‘Origš
(
pHo¡Ediù
, 
·ths
[
i
]->
Üigš
);

2004 
g_bWaypoštOn
 = 
TRUE
;

2005 
bEd™Noş
 = 
TRUE
;

2006  
FALSE
;

2010  
TRUE
;

2011 
	}
}

2014 
	$In™P©hM©rix
()

2016 
i
, 
j
, 
k
;

2018 ià(
g_pFloydDi¡ªûM©rix
 !ğ
NULL
)

2020 
	`ä“
(
g_pFloydDi¡ªûM©rix
);

2021 
g_pFloydDi¡ªûM©rix
 = 
NULL
;

2024 ià(
g_pFloydP©hM©rix
 !ğ
NULL
)

2026 
	`ä“
(
g_pFloydP©hM©rix
);

2027 
g_pFloydP©hM©rix
 = 
NULL
;

2030 
g_pFloydDi¡ªûM©rix
 = (*)
	`ÿÎoc
(
g_iNumWaypošts
 * g_iNumWaypoints, ());

2031 
g_pFloydP©hM©rix
 = (*)
	`ÿÎoc
(
g_iNumWaypošts
 * g_iNumWaypoints, ());

2033 ià(
g_pFloydDi¡ªûM©rix
 =ğ
NULL
 || 
g_pFloydP©hM©rix
 == NULL)

2034 
	`T”mš©eOnE¼Ü
("Memory Allocation Error!");

2036 
i
 = 0; i < 
g_iNumWaypošts
; i++)

2038 
j
 = 0; j < 
g_iNumWaypošts
; j++)

2040 *(
g_pFloydDi¡ªûM©rix
 + 
i
 * 
g_iNumWaypošts
 + 
j
) = 999999;

2041 *(
g_pFloydP©hM©rix
 + 
i
 * 
g_iNumWaypošts
 + 
j
) = -1;

2045 
i
 = 0; i < 
g_iNumWaypošts
; i++)

2047 
j
 = 0; j < 
MAX_PATH_INDEX
; j++)

2049 ià(
·ths
[
i
]->
šdex
[
j
] >ğ0 &&…©hs[i]->šdex[j] < 
g_iNumWaypošts
)

2051 *(
g_pFloydDi¡ªûM©rix
 + 
i
 * 
g_iNumWaypošts
 + 
·ths
[i]->
šdex
[
j
]èğ·ths[i]->
di¡ªû
[j];

2052 *(
g_pFloydP©hM©rix
 + 
i
 * 
g_iNumWaypošts
 + 
·ths
[i]->
šdex
[
j
]) =…aths[i]->index[j];

2057 
i
 = 0; i < 
g_iNumWaypošts
; i++)

2058 *(
g_pFloydDi¡ªûM©rix
 + 
i
 * 
g_iNumWaypošts
 + i) = 0;

2060 
k
 = 0; k < 
g_iNumWaypošts
; k++)

2062 
i
 = 0; i < 
g_iNumWaypošts
; i++)

2064 
j
 = 0; j < 
g_iNumWaypošts
; j++)

2066 ià(*(
g_pFloydDi¡ªûM©rix
 + 
i
 * 
g_iNumWaypošts
 + 
k
è+ *(g_pFloydDi¡ªûM©rix + k * g_iNumWaypošt + 
j
)

2067 <(*(
g_pFloydDi¡ªûM©rix
 + 
i
 * 
g_iNumWaypošts
 + 
j
)) )

2069 *(
g_pFloydDi¡ªûM©rix
 + 
i
 * 
g_iNumWaypošts
 + 
j
èğ*(g_pFloydDi¡ªûM©rix + i * g_iNumWaypošt + 
k
)

2070 + *(
g_pFloydDi¡ªûM©rix
 + 
k
 * 
g_iNumWaypošts
 + 
j
);

2071 *(
g_pFloydP©hM©rix
 + 
i
 * 
g_iNumWaypošts
 + 
j
èğ*(g_pFloydP©hM©rix + i * g_iNumWaypošt + 
k
);

2076 
	}
}

2078 
	$G‘P©hDi¡ªû
(
iSourûWaypošt
, 
iDe¡Waypošt
)

2080  (*(
g_pFloydDi¡ªûM©rix
 + 
iSourûWaypošt
 * 
g_iNumWaypošts
 + 
iDe¡Waypošt
));

2081 
	}
}

2083 
PATHNODE
* 
	$BasicFšdP©h
(
iSourûIndex
, 
iDe¡Index
, 
boŞ
* 
bV®id
)

2085 
PATHNODE
 *
S¹Node
, *
Node
;

2086 
Node
 = (
PATHNODE
 *)
	`m®loc
((PATHNODE));

2087 ià(
Node
 =ğ
NULL
)

2088 
	`T”mš©eOnE¼Ü
("Memory Allocation Error!");

2089 
Node
->
iIndex
 = 
iSourûIndex
;

2090 
Node
->
NextNode
 = 
NULL
;

2091 
S¹Node
 = 
Node
;

2093 ià(
bV®id
)

2094 *
bV®id
 = 
FALSE
;

2096 
iSourûIndex
 !ğ
iDe¡Index
)

2098 
iSourûIndex
 = *(
g_pFloydP©hM©rix
 + iSourûIndex * 
g_iNumWaypošts
 + 
iDe¡Index
);

2099 ià(
iSourûIndex
 < 0)

2100  
S¹Node
;

2101 
Node
->
NextNode
 = (
PATHNODE
 *)
	`m®loc
((PATHNODE));

2102 
Node
 = Node->
NextNode
;

2103 ià(
Node
 =ğ
NULL
)

2104 
	`T”mš©eOnE¼Ü
("Memory Allocation Error!");

2105 
Node
->
iIndex
 = 
iSourûIndex
;

2106 
Node
->
NextNode
 = 
NULL
;

2109 ià(
bV®id
)

2110 *
bV®id
 = 
TRUE
;

2112  
S¹Node
;

2113 
	}
}

	@waypoint.h

5 #iâdeà
WAYPOINT_H


6 
	#WAYPOINT_H


	)

8 
	em­_ty³


10 
	mMAP_AS
 = (1 << 0),

11 
	mMAP_CS
 = (1 << 1),

12 
	mMAP_DE
 = (1 << 2),

16 
	ewaypošt_æag


18 
	mW_FL_LIFT
 = (1 << 1),

19 
	mW_FL_CROUCH
 = (1 << 2),

20 
	mW_FL_CROSSING
 = (1 << 3),

21 
	mW_FL_GOAL
 = (1 << 4),

22 
	mW_FL_LADDER
 = (1 << 5),

23 
	mW_FL_RESCUE
 = (1 << 6),

24 
	mW_FL_CAMP
 = (1 << 7),

25 
	mW_FL_NOHOSTAGE
 = (1 << 8),

27 
	mW_FL_TERRORIST
 = (1 << 29),

28 
	mW_FL_COUNTER
 = (1 << 30),

32 
	e·th_æag


34 
	mC_FL_JUMP
 = (1 << 0),

37 
	#WAYPOINT_VERSION
 7

	)

38 
	#WAYPOINT_VERSION6
 6

	)

39 
	#WAYPOINT_VERSION5
 5

	)

41 
	#EXPERIENCE_VERSION
 2

	)

44 
	swaypošt_hdr_s


46 
	mf‘y³
[8];

47 
št32
 
	mwaypošt_fe_v”siÚ
;

48 
št32
 
	mnumb”_of_waypošts
;

49 
	mm­Çme
[32];

50 
	mwaypoš‹r
[32];

51 } 
	tWAYPOINT_HDR
;

54 
	sex³r›nû_hdr_s


56 
	mf‘y³
[8];

57 
št32
 
	mex³r›nûd©a_fe_v”siÚ
;

58 
št32
 
	mnumb”_of_waypošts
;

59 } 
	tEXPERIENCE_HDR
;

61 
	#MAX_PATH_INDEX
 8

	)

62 
	#OLDMAX_PATH_INDEX
 4

	)

64 
	s·th
 {

65 
št32
 
	miP©hNumb”
;

66 
št32
 
	mæags
;

67 
VeùÜ
 
	mÜigš
;

68 
	mRadius
;

69 
	mfÿmp¡¬tx
;

70 
	mfÿmp¡¬ty
;

71 
	mfÿm³ndx
;

72 
	mfÿm³ndy
;

73 
št16
 
	mšdex
[
MAX_PATH_INDEX
];

74 
ušt16
 
	mcÚÃùæag
[
MAX_PATH_INDEX
];

75 
VeùÜ
 
	mvecCÚÃùV–
[
MAX_PATH_INDEX
];

76 
št32
 
	mdi¡ªû
[
MAX_PATH_INDEX
];

77 
	svis_s
 {

78 
ušt16
 
	m¡ªd
;

79 
ušt16
 
	müouch
;

80 } 
	mvis
;

81 } 
	tPATH
;

84 
	s·th6
 {

85 
št32
 
	miP©hNumb”
;

86 
št32
 
	mæags
;

87 
VeùÜ
 
	mÜigš
;

88 
	mRadius
;

89 
	mfÿmp¡¬tx
;

90 
	mfÿmp¡¬ty
;

91 
	mfÿm³ndx
;

92 
	mfÿm³ndy
;

93 
št16
 
	mšdex
[
MAX_PATH_INDEX
];

94 
št32
 
	mdi¡ªû
[
MAX_PATH_INDEX
];

95 
·th6
 *
	mÃxt
;

96 } 
	tPATH6
;

99 
	sŞd·th
 {

100 
št32
 
	miP©hNumb”
;

101 
št32
 
	mæags
;

102 
VeùÜ
 
	mÜigš
;

103 
	mRadius
;

104 
	mfÿmp¡¬tx
;

105 
	mfÿmp¡¬ty
;

106 
	mfÿm³ndx
;

107 
	mfÿm³ndy
;

108 
št16
 
	mšdex
[
OLDMAX_PATH_INDEX
];

109 
št32
 
	mdi¡ªû
[
OLDMAX_PATH_INDEX
];

110 
Şd·th
 *
	mÃxt
;

111 } 
	tOLDPATH
;

113 
PATH
 *
·ths
[
MAX_WAYPOINTS
];

116 
WaypoštIn™
();

117 
WaypoštAddP©h
(
add_šdex
, 
·th_šdex
, 
fDi¡ªû
);

118 
WaypoštFšdN—»¡
(
VeùÜ
 
vOrigš
, 
mš_di¡ªû
 = 9999.0);

119 
WaypoštFšdInRadius
(
VeùÜ
 
vecPos
,
fRadius
,*
pTab
,*
iCouÁ
);

120 
WaypoštAdd
(
iFÏgs
);

121 
WaypoštD–‘e
();

122 
WaypoštChªgeFÏgs
(
iFÏg
,
iMode
);

123 
WaypoštS‘Radius
(
iRadius
);

124 
WaypoštC»©eP©h
(
iNodeNum
);

125 
WaypoštC»©eP©h
(
iNodeNum1
, 
iNodeNum2
);

126 
WaypoštRemoveP©h
(
iNodeNum
);

127 
WaypoštRemoveP©h
(
iNodeNum1
, 
iNodeNum2
);

128 
boŞ
 
IsCÚÃùedW™hWaypošt
(
a
,
b
);

129 
WaypoštC®cVisib™y
();

130 
boŞ
 
WaypoštIsVisibË
(
iSourûIndex
, 
iDe¡Index
);

131 
boŞ
 
WaypoštIsDuckVisibË
(
iSourûIndex
, 
iDe¡Index
);

132 
boŞ
 
WaypoštIsSndVisibË
(
iSourûIndex
, 
iDe¡Index
);

133 
C®cuÏ‹WaypoštWayzÚe
(
šdex
);

134 
boŞ
 
WaypoštLßd
();

135 
WaypoštSave
();

136 
WaypoštSaveOldFÜm©
();

137 
boŞ
 
WaypoštR—chabË
(
VeùÜ
 
v_¤c
, VeùÜ 
v_de¡
, boŞ 
bIsInW©”
 = 
FALSE
);

138 
WaypoštThšk
();

139 
boŞ
 
WaypoštNodesV®id
();

140 
SaveEx³r›nûTab
();

141 
G‘T¿v–Time
(
fMaxS³ed
, 
VeùÜ
 
vecSourû
, VeùÜ 
vecPos™iÚ
);

143 
In™P©hM©rix
();

144 
G‘P©hDi¡ªû
(
iSourûWaypošt
,
iDe¡Waypošt
);

145 
PATHNODE
* 
BasicFšdP©h
(
iSourûIndex
, 
iDe¡Index
, 
boŞ
* 
bV®id
);

147 
Encode
(*
f’ame
, * 
h—d”
, 
h—d”size
, *
bufãr
, 
bufsize
);

148 
Decode
(*
f’ame
, 
h—d”size
, *
bufãr
, 
bufsize
);

	@
1
.
0
24
299
bot.cpp
bot.h
bot_ai.cpp
bot_chat.cpp
bot_client.cpp
bot_combat.cpp
bot_globals.cpp
bot_globals.h
bot_navigate.cpp
bot_sounds.cpp
bot_weapons.h
compress.cpp
cstrike.cpp
dllapi.cpp
engine_api.cpp
h_export.cpp
intl.cpp
linkgame.cpp
mathlib.h
meta_api.cpp
namefunc.cpp
util.cpp
waypoint.cpp
waypoint.h
